var q2=Object.defineProperty;var dx=i=>{throw TypeError(i)};var Y2=(i,t,e)=>t in i?q2(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Ct=(i,t,e)=>Y2(i,typeof t!="symbol"?t+"":t,e),RA=(i,t,e)=>t.has(i)||dx("Cannot "+e);var m=(i,t,e)=>(RA(i,t,"read from private field"),e?e.call(i):t.get(i)),M=(i,t,e)=>t.has(i)?dx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),w=(i,t,e,n)=>(RA(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),I=(i,t,e)=>(RA(i,t,"access private method"),e);var Bn=(i,t,e,n)=>({set _(s){w(i,t,s,e)},get _(){return m(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=e(s);fetch(s.href,a)}})();function KM(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var MA={exports:{}},Id={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function X2(){if(fx)return Id;fx=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:l,ref:s!==void 0?s:null,props:a}}return Id.Fragment=t,Id.jsx=e,Id.jsxs=e,Id}var px;function $2(){return px||(px=1,MA.exports=X2()),MA.exports}var V=$2(),IA={exports:{}},Nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function K2(){if(mx)return Nt;mx=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),A=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function R(O,Q,it){this.props=O,this.context=Q,this.refs=x,this.updater=it||E}R.prototype.isReactComponent={},R.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},R.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function D(){}D.prototype=R.prototype;function P(O,Q,it){this.props=O,this.context=Q,this.refs=x,this.updater=it||E}var k=P.prototype=new D;k.constructor=P,C(k,R.prototype),k.isPureReactComponent=!0;var L=Array.isArray;function G(){}var F={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function X(O,Q,it){var lt=it.ref;return{$$typeof:i,type:O,key:Q,ref:lt!==void 0?lt:null,props:it}}function et(O,Q){return X(O.type,Q,O.props)}function nt(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function mt(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(it){return Q[it]})}var Tt=/\/+/g;function pt(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?mt(""+O.key):Q.toString(36)}function Dt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(G,G):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,Q,it,lt,xt){var St=typeof O;(St==="undefined"||St==="boolean")&&(O=null);var At=!1;if(O===null)At=!0;else switch(St){case"bigint":case"string":case"number":At=!0;break;case"object":switch(O.$$typeof){case i:case t:At=!0;break;case p:return At=O._init,B(At(O._payload),Q,it,lt,xt)}}if(At)return xt=xt(O),At=lt===""?"."+pt(O,0):lt,L(xt)?(it="",At!=null&&(it=At.replace(Tt,"$&/")+"/"),B(xt,Q,it,"",function(go){return go})):xt!=null&&(nt(xt)&&(xt=et(xt,it+(xt.key==null||O&&O.key===xt.key?"":(""+xt.key).replace(Tt,"$&/")+"/")+At)),Q.push(xt)),1;At=0;var Se=lt===""?".":lt+":";if(L(O))for(var pe=0;pe<O.length;pe++)lt=O[pe],St=Se+pt(lt,pe),At+=B(lt,Q,it,St,xt);else if(pe=T(O),typeof pe=="function")for(O=pe.call(O),pe=0;!(lt=O.next()).done;)lt=lt.value,St=Se+pt(lt,pe++),At+=B(lt,Q,it,St,xt);else if(St==="object"){if(typeof O.then=="function")return B(Dt(O),Q,it,lt,xt);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return At}function J(O,Q,it){if(O==null)return O;var lt=[],xt=0;return B(O,lt,"","",function(St){return Q.call(it,St,xt++)}),lt}function ot(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(it){(O._status===0||O._status===-1)&&(O._status=1,O._result=it)},function(it){(O._status===0||O._status===-1)&&(O._status=2,O._result=it)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var Et=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Rt={map:J,forEach:function(O,Q,it){J(O,function(){Q.apply(this,arguments)},it)},count:function(O){var Q=0;return J(O,function(){Q++}),Q},toArray:function(O){return J(O,function(Q){return Q})||[]},only:function(O){if(!nt(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Nt.Activity=v,Nt.Children=Rt,Nt.Component=R,Nt.Fragment=e,Nt.Profiler=s,Nt.PureComponent=P,Nt.StrictMode=n,Nt.Suspense=h,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return F.H.useMemoCache(O)}},Nt.cache=function(O){return function(){return O.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(O,Q,it){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var lt=C({},O.props),xt=O.key;if(Q!=null)for(St in Q.key!==void 0&&(xt=""+Q.key),Q)!$.call(Q,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&Q.ref===void 0||(lt[St]=Q[St]);var St=arguments.length-2;if(St===1)lt.children=it;else if(1<St){for(var At=Array(St),Se=0;Se<St;Se++)At[Se]=arguments[Se+2];lt.children=At}return X(O.type,xt,lt)},Nt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},Nt.createElement=function(O,Q,it){var lt,xt={},St=null;if(Q!=null)for(lt in Q.key!==void 0&&(St=""+Q.key),Q)$.call(Q,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(xt[lt]=Q[lt]);var At=arguments.length-2;if(At===1)xt.children=it;else if(1<At){for(var Se=Array(At),pe=0;pe<At;pe++)Se[pe]=arguments[pe+2];xt.children=Se}if(O&&O.defaultProps)for(lt in At=O.defaultProps,At)xt[lt]===void 0&&(xt[lt]=At[lt]);return X(O,St,xt)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(O){return{$$typeof:u,render:O}},Nt.isValidElement=nt,Nt.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:ot}},Nt.memo=function(O,Q){return{$$typeof:d,type:O,compare:Q===void 0?null:Q}},Nt.startTransition=function(O){var Q=F.T,it={};F.T=it;try{var lt=O(),xt=F.S;xt!==null&&xt(it,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(G,Et)}catch(St){Et(St)}finally{Q!==null&&it.types!==null&&(Q.types=it.types),F.T=Q}},Nt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Nt.use=function(O){return F.H.use(O)},Nt.useActionState=function(O,Q,it){return F.H.useActionState(O,Q,it)},Nt.useCallback=function(O,Q){return F.H.useCallback(O,Q)},Nt.useContext=function(O){return F.H.useContext(O)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(O,Q){return F.H.useDeferredValue(O,Q)},Nt.useEffect=function(O,Q){return F.H.useEffect(O,Q)},Nt.useEffectEvent=function(O){return F.H.useEffectEvent(O)},Nt.useId=function(){return F.H.useId()},Nt.useImperativeHandle=function(O,Q,it){return F.H.useImperativeHandle(O,Q,it)},Nt.useInsertionEffect=function(O,Q){return F.H.useInsertionEffect(O,Q)},Nt.useLayoutEffect=function(O,Q){return F.H.useLayoutEffect(O,Q)},Nt.useMemo=function(O,Q){return F.H.useMemo(O,Q)},Nt.useOptimistic=function(O,Q){return F.H.useOptimistic(O,Q)},Nt.useReducer=function(O,Q,it){return F.H.useReducer(O,Q,it)},Nt.useRef=function(O){return F.H.useRef(O)},Nt.useState=function(O){return F.H.useState(O)},Nt.useSyncExternalStore=function(O,Q,it){return F.H.useSyncExternalStore(O,Q,it)},Nt.useTransition=function(){return F.H.useTransition()},Nt.version="19.2.4",Nt}var gx;function lT(){return gx||(gx=1,IA.exports=K2()),IA.exports}var st=lT();const J2=KM(st);var NA={exports:{}},Nd={},DA={exports:{}},PA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function W2(){return yx||(yx=1,(function(i){function t(B,J){var ot=B.length;B.push(J);t:for(;0<ot;){var Et=ot-1>>>1,Rt=B[Et];if(0<s(Rt,J))B[Et]=J,B[ot]=Rt,ot=Et;else break t}}function e(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var J=B[0],ot=B.pop();if(ot!==J){B[0]=ot;t:for(var Et=0,Rt=B.length,O=Rt>>>1;Et<O;){var Q=2*(Et+1)-1,it=B[Q],lt=Q+1,xt=B[lt];if(0>s(it,ot))lt<Rt&&0>s(xt,it)?(B[Et]=xt,B[lt]=ot,Et=lt):(B[Et]=it,B[Q]=ot,Et=Q);else if(lt<Rt&&0>s(xt,ot))B[Et]=xt,B[lt]=ot,Et=lt;else break t}}return J}function s(B,J){var ot=B.sortIndex-J.sortIndex;return ot!==0?ot:B.id-J.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();i.unstable_now=function(){return l.now()-u}}var h=[],d=[],p=1,v=null,A=3,T=!1,E=!1,C=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var J=e(d);J!==null;){if(J.callback===null)n(d);else if(J.startTime<=B)n(d),J.sortIndex=J.expirationTime,t(h,J);else break;J=e(d)}}function L(B){if(C=!1,k(B),!E)if(e(h)!==null)E=!0,G||(G=!0,mt());else{var J=e(d);J!==null&&Dt(L,J.startTime-B)}}var G=!1,F=-1,$=5,X=-1;function et(){return x?!0:!(i.unstable_now()-X<$)}function nt(){if(x=!1,G){var B=i.unstable_now();X=B;var J=!0;try{t:{E=!1,C&&(C=!1,D(F),F=-1),T=!0;var ot=A;try{e:{for(k(B),v=e(h);v!==null&&!(v.expirationTime>B&&et());){var Et=v.callback;if(typeof Et=="function"){v.callback=null,A=v.priorityLevel;var Rt=Et(v.expirationTime<=B);if(B=i.unstable_now(),typeof Rt=="function"){v.callback=Rt,k(B),J=!0;break e}v===e(h)&&n(h),k(B)}else n(h);v=e(h)}if(v!==null)J=!0;else{var O=e(d);O!==null&&Dt(L,O.startTime-B),J=!1}}break t}finally{v=null,A=ot,T=!1}J=void 0}}finally{J?mt():G=!1}}}var mt;if(typeof P=="function")mt=function(){P(nt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,pt=Tt.port2;Tt.port1.onmessage=nt,mt=function(){pt.postMessage(null)}}else mt=function(){R(nt,0)};function Dt(B,J){F=R(function(){B(i.unstable_now())},J)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(B){switch(A){case 1:case 2:case 3:var J=3;break;default:J=A}var ot=A;A=J;try{return B()}finally{A=ot}},i.unstable_requestPaint=function(){x=!0},i.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ot=A;A=B;try{return J()}finally{A=ot}},i.unstable_scheduleCallback=function(B,J,ot){var Et=i.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Et+ot:Et):ot=Et,B){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=ot+Rt,B={id:p++,callback:J,priorityLevel:B,startTime:ot,expirationTime:Rt,sortIndex:-1},ot>Et?(B.sortIndex=ot,t(d,B),e(h)===null&&B===e(d)&&(C?(D(F),F=-1):C=!0,Dt(L,ot-Et))):(B.sortIndex=Rt,t(h,B),E||T||(E=!0,G||(G=!0,mt()))),B},i.unstable_shouldYield=et,i.unstable_wrapCallback=function(B){var J=A;return function(){var ot=A;A=J;try{return B.apply(this,arguments)}finally{A=ot}}}})(PA)),PA}var vx;function Q2(){return vx||(vx=1,DA.exports=W2()),DA.exports}var LA={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax;function Z2(){if(Ax)return wn;Ax=1;var i=lT();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,d,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:d,implementation:p}}var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,wn.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(h,d,null,p)},wn.flushSync=function(h){var d=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=d,n.p=p,n.d.f()}},wn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},wn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},wn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,v=u(p,d.crossOrigin),A=typeof d.integrity=="string"?d.integrity:void 0,T=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:A,fetchPriority:T}):p==="script"&&n.d.X(h,{crossOrigin:v,integrity:A,fetchPriority:T,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},wn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},wn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,v=u(p,d.crossOrigin);n.d.L(h,p,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},wn.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=u(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},wn.requestFormReset=function(h){n.d.r(h)},wn.unstable_batchedUpdates=function(h,d){return h(d)},wn.useFormState=function(h,d,p){return l.H.useFormState(h,d,p)},wn.useFormStatus=function(){return l.H.useHostTransitionStatus()},wn.version="19.2.4",wn}var _x;function j2(){if(_x)return LA.exports;_x=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),LA.exports=Z2(),LA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function tU(){if(Sx)return Nd;Sx=1;var i=Q2(),t=lT(),e=j2();function n(o){var r="https://react.dev/errors/"+o;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var r=o,c=o;if(o.alternate)for(;r.return;)r=r.return;else{o=r;do r=o,(r.flags&4098)!==0&&(c=r.return),o=r.return;while(o)}return r.tag===3?c:null}function l(o){if(o.tag===13){var r=o.memoizedState;if(r===null&&(o=o.alternate,o!==null&&(r=o.memoizedState)),r!==null)return r.dehydrated}return null}function u(o){if(o.tag===31){var r=o.memoizedState;if(r===null&&(o=o.alternate,o!==null&&(r=o.memoizedState)),r!==null)return r.dehydrated}return null}function h(o){if(a(o)!==o)throw Error(n(188))}function d(o){var r=o.alternate;if(!r){if(r=a(o),r===null)throw Error(n(188));return r!==o?null:o}for(var c=o,f=r;;){var _=c.return;if(_===null)break;var S=_.alternate;if(S===null){if(f=_.return,f!==null){c=f;continue}break}if(_.child===S.child){for(S=_.child;S;){if(S===c)return h(_),o;if(S===f)return h(_),r;S=S.sibling}throw Error(n(188))}if(c.return!==f.return)c=_,f=S;else{for(var b=!1,N=_.child;N;){if(N===c){b=!0,c=_,f=S;break}if(N===f){b=!0,f=_,c=S;break}N=N.sibling}if(!b){for(N=S.child;N;){if(N===c){b=!0,c=S,f=_;break}if(N===f){b=!0,f=S,c=_;break}N=N.sibling}if(!b)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?o:r}function p(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o;for(o=o.child;o!==null;){if(r=p(o),r!==null)return r;o=o.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function mt(o){return o===null||typeof o!="object"?null:(o=nt&&o[nt]||o["@@iterator"],typeof o=="function"?o:null)}var Tt=Symbol.for("react.client.reference");function pt(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Tt?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case R:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case G:return"SuspenseList";case X:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case E:return"Portal";case P:return o.displayName||"Context";case D:return(o._context.displayName||"Context")+".Consumer";case k:var r=o.render;return o=o.displayName,o||(o=r.displayName||r.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return r=o.displayName||null,r!==null?r:pt(o.type)||"Memo";case $:r=o._payload,o=o._init;try{return pt(o(r))}catch{}}return null}var Dt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Et=[],Rt=-1;function O(o){return{current:o}}function Q(o){0>Rt||(o.current=Et[Rt],Et[Rt]=null,Rt--)}function it(o,r){Rt++,Et[Rt]=o.current,o.current=r}var lt=O(null),xt=O(null),St=O(null),At=O(null);function Se(o,r){switch(it(St,r),it(xt,o),it(lt,null),r.nodeType){case 9:case 11:o=(o=r.documentElement)&&(o=o.namespaceURI)?kw(o):0;break;default:if(o=r.tagName,r=r.namespaceURI)r=kw(r),o=Uw(r,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Q(lt),it(lt,o)}function pe(){Q(lt),Q(xt),Q(St)}function go(o){o.memoizedState!==null&&it(At,o);var r=lt.current,c=Uw(r,o.type);r!==c&&(it(xt,o),it(lt,c))}function _u(o){xt.current===o&&(Q(lt),Q(xt)),At.current===o&&(Q(At),wd._currentValue=ot)}var Ft,Kt;function re(o){if(Ft===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Ft=r&&r[1]||"",Kt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+o+Kt}var ge=!1;function Vn(o,r){if(!o||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(W){var K=W}Reflect.construct(o,[],tt)}else{try{tt.call()}catch(W){K=W}o.call(tt.prototype)}}else{try{throw Error()}catch(W){K=W}(tt=o())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),b=S[0],N=S[1];if(b&&N){var U=b.split(`
`),Y=N.split(`
`);for(_=f=0;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;for(;_<Y.length&&!Y[_].includes("DetermineComponentFrameRoot");)_++;if(f===U.length||_===Y.length)for(f=U.length-1,_=Y.length-1;1<=f&&0<=_&&U[f]!==Y[_];)_--;for(;1<=f&&0<=_;f--,_--)if(U[f]!==Y[_]){if(f!==1||_!==1)do if(f--,_--,0>_||U[f]!==Y[_]){var Z=`
`+U[f].replace(" at new "," at ");return o.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",o.displayName)),Z}while(1<=f&&0<=_);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?re(c):""}function ti(o,r){switch(o.tag){case 26:case 27:case 5:return re(o.type);case 16:return re("Lazy");case 13:return o.child!==r&&r!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return Vn(o.type,!1);case 11:return Vn(o.type.render,!1);case 1:return Vn(o.type,!0);case 31:return re("Activity");default:return""}}function Je(o){try{var r="",c=null;do r+=ti(o,c),c=o,o=o.return;while(o);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Gi=Object.prototype.hasOwnProperty,mi=i.unstable_scheduleCallback,ms=i.unstable_cancelCallback,m0=i.unstable_shouldYield,EL=i.unstable_requestPaint,gi=i.unstable_now,bL=i.unstable_getCurrentPriorityLevel,fE=i.unstable_ImmediatePriority,pE=i.unstable_UserBlockingPriority,Zp=i.unstable_NormalPriority,CL=i.unstable_LowPriority,mE=i.unstable_IdlePriority,wL=i.log,xL=i.unstable_setDisableYieldValue,Fh=null,yi=null;function Sr(o){if(typeof wL=="function"&&xL(o),yi&&typeof yi.setStrictMode=="function")try{yi.setStrictMode(Fh,o)}catch{}}var vi=Math.clz32?Math.clz32:IL,RL=Math.log,ML=Math.LN2;function IL(o){return o>>>=0,o===0?32:31-(RL(o)/ML|0)|0}var jp=256,tm=262144,em=4194304;function ka(o){var r=o&42;if(r!==0)return r;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function nm(o,r,c){var f=o.pendingLanes;if(f===0)return 0;var _=0,S=o.suspendedLanes,b=o.pingedLanes;o=o.warmLanes;var N=f&134217727;return N!==0?(f=N&~S,f!==0?_=ka(f):(b&=N,b!==0?_=ka(b):c||(c=N&~o,c!==0&&(_=ka(c))))):(N=f&~S,N!==0?_=ka(N):b!==0?_=ka(b):c||(c=f&~o,c!==0&&(_=ka(c)))),_===0?0:r!==0&&r!==_&&(r&S)===0&&(S=_&-_,c=r&-r,S>=c||S===32&&(c&4194048)!==0)?r:_}function Vh(o,r){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&r)===0}function NL(o,r){switch(o){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(){var o=em;return em<<=1,(em&62914560)===0&&(em=4194304),o}function g0(o){for(var r=[],c=0;31>c;c++)r.push(o);return r}function Hh(o,r){o.pendingLanes|=r,r!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function DL(o,r,c,f,_,S){var b=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var N=o.entanglements,U=o.expirationTimes,Y=o.hiddenUpdates;for(c=b&~c;0<c;){var Z=31-vi(c),tt=1<<Z;N[Z]=0,U[Z]=-1;var K=Y[Z];if(K!==null)for(Y[Z]=null,Z=0;Z<K.length;Z++){var W=K[Z];W!==null&&(W.lane&=-536870913)}c&=~tt}f!==0&&yE(o,f,0),S!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=S&~(b&~r))}function yE(o,r,c){o.pendingLanes|=r,o.suspendedLanes&=~r;var f=31-vi(r);o.entangledLanes|=r,o.entanglements[f]=o.entanglements[f]|1073741824|c&261930}function vE(o,r){var c=o.entangledLanes|=r;for(o=o.entanglements;c;){var f=31-vi(c),_=1<<f;_&r|o[f]&r&&(o[f]|=r),c&=~_}}function AE(o,r){var c=r&-r;return c=(c&42)!==0?1:y0(c),(c&(o.suspendedLanes|r))!==0?0:c}function y0(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function v0(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function _E(){var o=J.p;return o!==0?o:(o=window.event,o===void 0?32:ox(o.type))}function SE(o,r){var c=J.p;try{return J.p=o,r()}finally{J.p=c}}var Tr=Math.random().toString(36).slice(2),pn="__reactFiber$"+Tr,ei="__reactProps$"+Tr,Su="__reactContainer$"+Tr,A0="__reactEvents$"+Tr,PL="__reactListeners$"+Tr,LL="__reactHandles$"+Tr,TE="__reactResources$"+Tr,Bh="__reactMarker$"+Tr;function _0(o){delete o[pn],delete o[ei],delete o[A0],delete o[PL],delete o[LL]}function Tu(o){var r=o[pn];if(r)return r;for(var c=o.parentNode;c;){if(r=c[Su]||c[pn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(o=zw(o);o!==null;){if(c=o[pn])return c;o=zw(o)}return r}o=c,c=o.parentNode}return null}function Eu(o){if(o=o[pn]||o[Su]){var r=o.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return o}return null}function Gh(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o.stateNode;throw Error(n(33))}function bu(o){var r=o[TE];return r||(r=o[TE]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function on(o){o[Bh]=!0}var EE=new Set,bE={};function Ua(o,r){Cu(o,r),Cu(o+"Capture",r)}function Cu(o,r){for(bE[o]=r,o=0;o<r.length;o++)EE.add(r[o])}var kL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),CE={},wE={};function UL(o){return Gi.call(wE,o)?!0:Gi.call(CE,o)?!1:kL.test(o)?wE[o]=!0:(CE[o]=!0,!1)}function im(o,r,c){if(UL(r))if(c===null)o.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(r);return}}o.setAttribute(r,""+c)}}function sm(o,r,c){if(c===null)o.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(r);return}o.setAttribute(r,""+c)}}function yo(o,r,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(r,c,""+f)}}function zi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xE(o){var r=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function OL(o,r,c){var f=Object.getOwnPropertyDescriptor(o.constructor.prototype,r);if(!o.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,S=f.set;return Object.defineProperty(o,r,{configurable:!0,get:function(){return _.call(this)},set:function(b){c=""+b,S.call(this,b)}}),Object.defineProperty(o,r,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){o._valueTracker=null,delete o[r]}}}}function S0(o){if(!o._valueTracker){var r=xE(o)?"checked":"value";o._valueTracker=OL(o,r,""+o[r])}}function RE(o){if(!o)return!1;var r=o._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return o&&(f=xE(o)?o.checked?"true":"false":o.value),o=f,o!==c?(r.setValue(o),!0):!1}function om(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var FL=/[\n"\\]/g;function qi(o){return o.replace(FL,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function T0(o,r,c,f,_,S,b,N){o.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?o.type=b:o.removeAttribute("type"),r!=null?b==="number"?(r===0&&o.value===""||o.value!=r)&&(o.value=""+zi(r)):o.value!==""+zi(r)&&(o.value=""+zi(r)):b!=="submit"&&b!=="reset"||o.removeAttribute("value"),r!=null?E0(o,b,zi(r)):c!=null?E0(o,b,zi(c)):f!=null&&o.removeAttribute("value"),_==null&&S!=null&&(o.defaultChecked=!!S),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?o.name=""+zi(N):o.removeAttribute("name")}function ME(o,r,c,f,_,S,b,N){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),r!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||r!=null)){S0(o);return}c=c!=null?""+zi(c):"",r=r!=null?""+zi(r):c,N||r===o.value||(o.value=r),o.defaultValue=r}f=f??_,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=N?o.checked:!!f,o.defaultChecked=!!f,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(o.name=b),S0(o)}function E0(o,r,c){r==="number"&&om(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function wu(o,r,c,f){if(o=o.options,r){r={};for(var _=0;_<c.length;_++)r["$"+c[_]]=!0;for(c=0;c<o.length;c++)_=r.hasOwnProperty("$"+o[c].value),o[c].selected!==_&&(o[c].selected=_),_&&f&&(o[c].defaultSelected=!0)}else{for(c=""+zi(c),r=null,_=0;_<o.length;_++){if(o[_].value===c){o[_].selected=!0,f&&(o[_].defaultSelected=!0);return}r!==null||o[_].disabled||(r=o[_])}r!==null&&(r.selected=!0)}}function IE(o,r,c){if(r!=null&&(r=""+zi(r),r!==o.value&&(o.value=r),c==null)){o.defaultValue!==r&&(o.defaultValue=r);return}o.defaultValue=c!=null?""+zi(c):""}function NE(o,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(n(92));if(Dt(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=zi(r),o.defaultValue=c,f=o.textContent,f===c&&f!==""&&f!==null&&(o.value=f),S0(o)}function xu(o,r){if(r){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=r;return}}o.textContent=r}var VL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function DE(o,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?o.setProperty(r,""):r==="float"?o.cssFloat="":o[r]="":f?o.setProperty(r,c):typeof c!="number"||c===0||VL.has(r)?r==="float"?o.cssFloat=c:o[r]=(""+c).trim():o[r]=c+"px"}function PE(o,r,c){if(r!=null&&typeof r!="object")throw Error(n(62));if(o=o.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var _ in r)f=r[_],r.hasOwnProperty(_)&&c[_]!==f&&DE(o,_,f)}else for(var S in r)r.hasOwnProperty(S)&&DE(o,S,r[S])}function b0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rm(o){return BL.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function vo(){}var C0=null;function w0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ru=null,Mu=null;function LE(o){var r=Eu(o);if(r&&(o=r.stateNode)){var c=o[ei]||null;t:switch(o=r.stateNode,r.type){case"input":if(T0(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qi(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==o&&f.form===o.form){var _=f[ei]||null;if(!_)throw Error(n(90));T0(f,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===o.form&&RE(f)}break t;case"textarea":IE(o,c.value,c.defaultValue);break t;case"select":r=c.value,r!=null&&wu(o,!!c.multiple,r,!1)}}}var x0=!1;function kE(o,r,c){if(x0)return o(r,c);x0=!0;try{var f=o(r);return f}finally{if(x0=!1,(Ru!==null||Mu!==null)&&($m(),Ru&&(r=Ru,o=Mu,Mu=Ru=null,LE(r),o)))for(r=0;r<o.length;r++)LE(o[r])}}function zh(o,r){var c=o.stateNode;if(c===null)return null;var f=c[ei]||null;if(f===null)return null;c=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break t;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var Ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R0=!1;if(Ao)try{var qh={};Object.defineProperty(qh,"passive",{get:function(){R0=!0}}),window.addEventListener("test",qh,qh),window.removeEventListener("test",qh,qh)}catch{R0=!1}var Er=null,M0=null,am=null;function UE(){if(am)return am;var o,r=M0,c=r.length,f,_="value"in Er?Er.value:Er.textContent,S=_.length;for(o=0;o<c&&r[o]===_[o];o++);var b=c-o;for(f=1;f<=b&&r[c-f]===_[S-f];f++);return am=_.slice(o,1<f?1-f:void 0)}function lm(o){var r=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&r===13&&(o=13)):o=r,o===10&&(o=13),32<=o||o===13?o:0}function um(){return!0}function OE(){return!1}function ni(o){function r(c,f,_,S,b){this._reactName=c,this._targetInst=_,this.type=f,this.nativeEvent=S,this.target=b,this.currentTarget=null;for(var N in o)o.hasOwnProperty(N)&&(c=o[N],this[N]=c?c(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?um:OE,this.isPropagationStopped=OE,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=um)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=um)},persist:function(){},isPersistent:um}),r}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=ni(Oa),Yh=v({},Oa,{view:0,detail:0}),GL=ni(Yh),I0,N0,Xh,hm=v({},Yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Xh&&(Xh&&o.type==="mousemove"?(I0=o.screenX-Xh.screenX,N0=o.screenY-Xh.screenY):N0=I0=0,Xh=o),I0)},movementY:function(o){return"movementY"in o?o.movementY:N0}}),FE=ni(hm),zL=v({},hm,{dataTransfer:0}),qL=ni(zL),YL=v({},Yh,{relatedTarget:0}),D0=ni(YL),XL=v({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),$L=ni(XL),KL=v({},Oa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),JL=ni(KL),WL=v({},Oa,{data:0}),VE=ni(WL),QL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tk(o){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(o):(o=jL[o])?!!r[o]:!1}function P0(){return tk}var ek=v({},Yh,{key:function(o){if(o.key){var r=QL[o.key]||o.key;if(r!=="Unidentified")return r}return o.type==="keypress"?(o=lm(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ZL[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(o){return o.type==="keypress"?lm(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?lm(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),nk=ni(ek),ik=v({},hm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HE=ni(ik),sk=v({},Yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),ok=ni(sk),rk=v({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ak=ni(rk),lk=v({},hm,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),uk=ni(lk),ck=v({},Oa,{newState:0,oldState:0}),hk=ni(ck),dk=[9,13,27,32],L0=Ao&&"CompositionEvent"in window,$h=null;Ao&&"documentMode"in document&&($h=document.documentMode);var fk=Ao&&"TextEvent"in window&&!$h,BE=Ao&&(!L0||$h&&8<$h&&11>=$h),GE=" ",zE=!1;function qE(o,r){switch(o){case"keyup":return dk.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Iu=!1;function pk(o,r){switch(o){case"compositionend":return YE(r);case"keypress":return r.which!==32?null:(zE=!0,GE);case"textInput":return o=r.data,o===GE&&zE?null:o;default:return null}}function mk(o,r){if(Iu)return o==="compositionend"||!L0&&qE(o,r)?(o=UE(),am=M0=Er=null,Iu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return BE&&r.locale!=="ko"?null:r.data;default:return null}}var gk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XE(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r==="input"?!!gk[o.type]:r==="textarea"}function $E(o,r,c,f){Ru?Mu?Mu.push(f):Mu=[f]:Ru=f,r=tg(r,"onChange"),0<r.length&&(c=new cm("onChange","change",null,c,f),o.push({event:c,listeners:r}))}var Kh=null,Jh=null;function yk(o){Mw(o,0)}function dm(o){var r=Gh(o);if(RE(r))return o}function KE(o,r){if(o==="change")return r}var JE=!1;if(Ao){var k0;if(Ao){var U0="oninput"in document;if(!U0){var WE=document.createElement("div");WE.setAttribute("oninput","return;"),U0=typeof WE.oninput=="function"}k0=U0}else k0=!1;JE=k0&&(!document.documentMode||9<document.documentMode)}function QE(){Kh&&(Kh.detachEvent("onpropertychange",ZE),Jh=Kh=null)}function ZE(o){if(o.propertyName==="value"&&dm(Jh)){var r=[];$E(r,Jh,o,w0(o)),kE(yk,r)}}function vk(o,r,c){o==="focusin"?(QE(),Kh=r,Jh=c,Kh.attachEvent("onpropertychange",ZE)):o==="focusout"&&QE()}function Ak(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return dm(Jh)}function _k(o,r){if(o==="click")return dm(r)}function Sk(o,r){if(o==="input"||o==="change")return dm(r)}function Tk(o,r){return o===r&&(o!==0||1/o===1/r)||o!==o&&r!==r}var Ai=typeof Object.is=="function"?Object.is:Tk;function Wh(o,r){if(Ai(o,r))return!0;if(typeof o!="object"||o===null||typeof r!="object"||r===null)return!1;var c=Object.keys(o),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var _=c[f];if(!Gi.call(r,_)||!Ai(o[_],r[_]))return!1}return!0}function jE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function tb(o,r){var c=jE(o);o=0;for(var f;c;){if(c.nodeType===3){if(f=o+c.textContent.length,o<=r&&f>=r)return{node:c,offset:r-o};o=f}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=jE(c)}}function eb(o,r){return o&&r?o===r?!0:o&&o.nodeType===3?!1:r&&r.nodeType===3?eb(o,r.parentNode):"contains"in o?o.contains(r):o.compareDocumentPosition?!!(o.compareDocumentPosition(r)&16):!1:!1}function nb(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var r=om(o.document);r instanceof o.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)o=r.contentWindow;else break;r=om(o.document)}return r}function O0(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r&&(r==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||r==="textarea"||o.contentEditable==="true")}var Ek=Ao&&"documentMode"in document&&11>=document.documentMode,Nu=null,F0=null,Qh=null,V0=!1;function ib(o,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;V0||Nu==null||Nu!==om(f)||(f=Nu,"selectionStart"in f&&O0(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Qh&&Wh(Qh,f)||(Qh=f,f=tg(F0,"onSelect"),0<f.length&&(r=new cm("onSelect","select",null,r,c),o.push({event:r,listeners:f}),r.target=Nu)))}function Fa(o,r){var c={};return c[o.toLowerCase()]=r.toLowerCase(),c["Webkit"+o]="webkit"+r,c["Moz"+o]="moz"+r,c}var Du={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},H0={},sb={};Ao&&(sb=document.createElement("div").style,"AnimationEvent"in window||(delete Du.animationend.animation,delete Du.animationiteration.animation,delete Du.animationstart.animation),"TransitionEvent"in window||delete Du.transitionend.transition);function Va(o){if(H0[o])return H0[o];if(!Du[o])return o;var r=Du[o],c;for(c in r)if(r.hasOwnProperty(c)&&c in sb)return H0[o]=r[c];return o}var ob=Va("animationend"),rb=Va("animationiteration"),ab=Va("animationstart"),bk=Va("transitionrun"),Ck=Va("transitionstart"),wk=Va("transitioncancel"),lb=Va("transitionend"),ub=new Map,B0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");B0.push("scrollEnd");function gs(o,r){ub.set(o,r),Ua(r,[o])}var fm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Yi=[],Pu=0,G0=0;function pm(){for(var o=Pu,r=G0=Pu=0;r<o;){var c=Yi[r];Yi[r++]=null;var f=Yi[r];Yi[r++]=null;var _=Yi[r];Yi[r++]=null;var S=Yi[r];if(Yi[r++]=null,f!==null&&_!==null){var b=f.pending;b===null?_.next=_:(_.next=b.next,b.next=_),f.pending=_}S!==0&&cb(c,_,S)}}function mm(o,r,c,f){Yi[Pu++]=o,Yi[Pu++]=r,Yi[Pu++]=c,Yi[Pu++]=f,G0|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function z0(o,r,c,f){return mm(o,r,c,f),gm(o)}function Ha(o,r){return mm(o,null,null,r),gm(o)}function cb(o,r,c){o.lanes|=c;var f=o.alternate;f!==null&&(f.lanes|=c);for(var _=!1,S=o.return;S!==null;)S.childLanes|=c,f=S.alternate,f!==null&&(f.childLanes|=c),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(_=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,_&&r!==null&&(_=31-vi(c),o=S.hiddenUpdates,f=o[_],f===null?o[_]=[r]:f.push(r),r.lane=c|536870912),S):null}function gm(o){if(50<Ad)throw Ad=0,Zv=null,Error(n(185));for(var r=o.return;r!==null;)o=r,r=o.return;return o.tag===3?o.stateNode:null}var Lu={};function xk(o,r,c,f){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(o,r,c,f){return new xk(o,r,c,f)}function q0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _o(o,r){var c=o.alternate;return c===null?(c=_i(o.tag,r,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=r,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,r=o.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function hb(o,r){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,r=c.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o}function ym(o,r,c,f,_,S){var b=0;if(f=o,typeof o=="function")q0(o)&&(b=1);else if(typeof o=="string")b=D2(o,c,lt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else t:switch(o){case X:return o=_i(31,c,r,_),o.elementType=X,o.lanes=S,o;case C:return Ba(c.children,_,S,r);case x:b=8,_|=24;break;case R:return o=_i(12,c,r,_|2),o.elementType=R,o.lanes=S,o;case L:return o=_i(13,c,r,_),o.elementType=L,o.lanes=S,o;case G:return o=_i(19,c,r,_),o.elementType=G,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case P:b=10;break t;case D:b=9;break t;case k:b=11;break t;case F:b=14;break t;case $:b=16,f=null;break t}b=29,c=Error(n(130,o===null?"null":typeof o,"")),f=null}return r=_i(b,c,r,_),r.elementType=o,r.type=f,r.lanes=S,r}function Ba(o,r,c,f){return o=_i(7,o,f,r),o.lanes=c,o}function Y0(o,r,c){return o=_i(6,o,null,r),o.lanes=c,o}function db(o){var r=_i(18,null,null,0);return r.stateNode=o,r}function X0(o,r,c){return r=_i(4,o.children!==null?o.children:[],o.key,r),r.lanes=c,r.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},r}var fb=new WeakMap;function Xi(o,r){if(typeof o=="object"&&o!==null){var c=fb.get(o);return c!==void 0?c:(r={value:o,source:r,stack:Je(r)},fb.set(o,r),r)}return{value:o,source:r,stack:Je(r)}}var ku=[],Uu=0,vm=null,Zh=0,$i=[],Ki=0,br=null,Gs=1,zs="";function So(o,r){ku[Uu++]=Zh,ku[Uu++]=vm,vm=o,Zh=r}function pb(o,r,c){$i[Ki++]=Gs,$i[Ki++]=zs,$i[Ki++]=br,br=o;var f=Gs;o=zs;var _=32-vi(f)-1;f&=~(1<<_),c+=1;var S=32-vi(r)+_;if(30<S){var b=_-_%5;S=(f&(1<<b)-1).toString(32),f>>=b,_-=b,Gs=1<<32-vi(r)+_|c<<_|f,zs=S+o}else Gs=1<<S|c<<_|f,zs=o}function $0(o){o.return!==null&&(So(o,1),pb(o,1,0))}function K0(o){for(;o===vm;)vm=ku[--Uu],ku[Uu]=null,Zh=ku[--Uu],ku[Uu]=null;for(;o===br;)br=$i[--Ki],$i[Ki]=null,zs=$i[--Ki],$i[Ki]=null,Gs=$i[--Ki],$i[Ki]=null}function mb(o,r){$i[Ki++]=Gs,$i[Ki++]=zs,$i[Ki++]=br,Gs=r.id,zs=r.overflow,br=o}var mn=null,ye=null,Xt=!1,Cr=null,Ji=!1,J0=Error(n(519));function wr(o){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jh(Xi(r,o)),J0}function gb(o){var r=o.stateNode,c=o.type,f=o.memoizedProps;switch(r[pn]=o,r[ei]=f,c){case"dialog":zt("cancel",r),zt("close",r);break;case"iframe":case"object":case"embed":zt("load",r);break;case"video":case"audio":for(c=0;c<Sd.length;c++)zt(Sd[c],r);break;case"source":zt("error",r);break;case"img":case"image":case"link":zt("error",r),zt("load",r);break;case"details":zt("toggle",r);break;case"input":zt("invalid",r),ME(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":zt("invalid",r);break;case"textarea":zt("invalid",r),NE(r,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||Pw(r.textContent,c)?(f.popover!=null&&(zt("beforetoggle",r),zt("toggle",r)),f.onScroll!=null&&zt("scroll",r),f.onScrollEnd!=null&&zt("scrollend",r),f.onClick!=null&&(r.onclick=vo),r=!0):r=!1,r||wr(o,!0)}function yb(o){for(mn=o.return;mn;)switch(mn.tag){case 5:case 31:case 13:Ji=!1;return;case 27:case 3:Ji=!0;return;default:mn=mn.return}}function Ou(o){if(o!==mn)return!1;if(!Xt)return yb(o),Xt=!0,!1;var r=o.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||fA(o.type,o.memoizedProps)),c=!c),c&&ye&&wr(o),yb(o),r===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));ye=Gw(o)}else if(r===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));ye=Gw(o)}else r===27?(r=ye,Hr(o.type)?(o=vA,vA=null,ye=o):ye=r):ye=mn?Qi(o.stateNode.nextSibling):null;return!0}function Ga(){ye=mn=null,Xt=!1}function W0(){var o=Cr;return o!==null&&(ri===null?ri=o:ri.push.apply(ri,o),Cr=null),o}function jh(o){Cr===null?Cr=[o]:Cr.push(o)}var Q0=O(null),za=null,To=null;function xr(o,r,c){it(Q0,r._currentValue),r._currentValue=c}function Eo(o){o._currentValue=Q0.current,Q(Q0)}function Z0(o,r,c){for(;o!==null;){var f=o.alternate;if((o.childLanes&r)!==r?(o.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),o===c)break;o=o.return}}function j0(o,r,c,f){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var S=_.dependencies;if(S!==null){var b=_.child;S=S.firstContext;t:for(;S!==null;){var N=S;S=_;for(var U=0;U<r.length;U++)if(N.context===r[U]){S.lanes|=c,N=S.alternate,N!==null&&(N.lanes|=c),Z0(S.return,c,o),f||(b=null);break t}S=N.next}}else if(_.tag===18){if(b=_.return,b===null)throw Error(n(341));b.lanes|=c,S=b.alternate,S!==null&&(S.lanes|=c),Z0(b,c,o),b=null}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===o){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}}function Fu(o,r,c,f){o=null;for(var _=r,S=!1;_!==null;){if(!S){if((_.flags&524288)!==0)S=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var b=_.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var N=_.type;Ai(_.pendingProps.value,b.value)||(o!==null?o.push(N):o=[N])}}else if(_===At.current){if(b=_.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(wd):o=[wd])}_=_.return}o!==null&&j0(r,o,c,f),r.flags|=262144}function Am(o){for(o=o.firstContext;o!==null;){if(!Ai(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function qa(o){za=o,To=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function gn(o){return vb(za,o)}function _m(o,r){return za===null&&qa(o),vb(o,r)}function vb(o,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},To===null){if(o===null)throw Error(n(308));To=r,o.dependencies={lanes:0,firstContext:r},o.flags|=524288}else To=To.next=r;return c}var Rk=typeof AbortController<"u"?AbortController:function(){var o=[],r=this.signal={aborted:!1,addEventListener:function(c,f){o.push(f)}};this.abort=function(){r.aborted=!0,o.forEach(function(c){return c()})}},Mk=i.unstable_scheduleCallback,Ik=i.unstable_NormalPriority,He={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tv(){return{controller:new Rk,data:new Map,refCount:0}}function td(o){o.refCount--,o.refCount===0&&Mk(Ik,function(){o.controller.abort()})}var ed=null,ev=0,Vu=0,Hu=null;function Nk(o,r){if(ed===null){var c=ed=[];ev=0,Vu=sA(),Hu={status:"pending",value:void 0,then:function(f){c.push(f)}}}return ev++,r.then(Ab,Ab),r}function Ab(){if(--ev===0&&ed!==null){Hu!==null&&(Hu.status="fulfilled");var o=ed;ed=null,Vu=0,Hu=null;for(var r=0;r<o.length;r++)(0,o[r])()}}function Dk(o,r){var c=[],f={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return o.then(function(){f.status="fulfilled",f.value=r;for(var _=0;_<c.length;_++)(0,c[_])(r)},function(_){for(f.status="rejected",f.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),f}var _b=B.S;B.S=function(o,r){iw=gi(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Nk(o,r),_b!==null&&_b(o,r)};var Ya=O(null);function nv(){var o=Ya.current;return o!==null?o:de.pooledCache}function Sm(o,r){r===null?it(Ya,Ya.current):it(Ya,r.pool)}function Sb(){var o=nv();return o===null?null:{parent:He._currentValue,pool:o}}var Bu=Error(n(460)),iv=Error(n(474)),Tm=Error(n(542)),Em={then:function(){}};function Tb(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Eb(o,r,c){switch(c=o[c],c===void 0?o.push(r):c!==r&&(r.then(vo,vo),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Cb(o),o;default:if(typeof r.status=="string")r.then(vo,vo);else{if(o=de,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=r,o.status="pending",o.then(function(f){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=f}},function(f){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Cb(o),o}throw $a=r,Bu}}function Xa(o){try{var r=o._init;return r(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?($a=c,Bu):c}}var $a=null;function bb(){if($a===null)throw Error(n(459));var o=$a;return $a=null,o}function Cb(o){if(o===Bu||o===Tm)throw Error(n(483))}var Gu=null,nd=0;function bm(o){var r=nd;return nd+=1,Gu===null&&(Gu=[]),Eb(Gu,o,r)}function id(o,r){r=r.props.ref,o.ref=r!==void 0?r:null}function Cm(o,r){throw r.$$typeof===A?Error(n(525)):(o=Object.prototype.toString.call(r),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)))}function wb(o){function r(z,H){if(o){var q=z.deletions;q===null?(z.deletions=[H],z.flags|=16):q.push(H)}}function c(z,H){if(!o)return null;for(;H!==null;)r(z,H),H=H.sibling;return null}function f(z){for(var H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function _(z,H){return z=_o(z,H),z.index=0,z.sibling=null,z}function S(z,H,q){return z.index=q,o?(q=z.alternate,q!==null?(q=q.index,q<H?(z.flags|=67108866,H):q):(z.flags|=67108866,H)):(z.flags|=1048576,H)}function b(z){return o&&z.alternate===null&&(z.flags|=67108866),z}function N(z,H,q,j){return H===null||H.tag!==6?(H=Y0(q,z.mode,j),H.return=z,H):(H=_(H,q),H.return=z,H)}function U(z,H,q,j){var _t=q.type;return _t===C?Z(z,H,q.props.children,j,q.key):H!==null&&(H.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===$&&Xa(_t)===H.type)?(H=_(H,q.props),id(H,q),H.return=z,H):(H=ym(q.type,q.key,q.props,null,z.mode,j),id(H,q),H.return=z,H)}function Y(z,H,q,j){return H===null||H.tag!==4||H.stateNode.containerInfo!==q.containerInfo||H.stateNode.implementation!==q.implementation?(H=X0(q,z.mode,j),H.return=z,H):(H=_(H,q.children||[]),H.return=z,H)}function Z(z,H,q,j,_t){return H===null||H.tag!==7?(H=Ba(q,z.mode,j,_t),H.return=z,H):(H=_(H,q),H.return=z,H)}function tt(z,H,q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Y0(""+H,z.mode,q),H.return=z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return q=ym(H.type,H.key,H.props,null,z.mode,q),id(q,H),q.return=z,q;case E:return H=X0(H,z.mode,q),H.return=z,H;case $:return H=Xa(H),tt(z,H,q)}if(Dt(H)||mt(H))return H=Ba(H,z.mode,q,null),H.return=z,H;if(typeof H.then=="function")return tt(z,bm(H),q);if(H.$$typeof===P)return tt(z,_m(z,H),q);Cm(z,H)}return null}function K(z,H,q,j){var _t=H!==null?H.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _t!==null?null:N(z,H,""+q,j);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case T:return q.key===_t?U(z,H,q,j):null;case E:return q.key===_t?Y(z,H,q,j):null;case $:return q=Xa(q),K(z,H,q,j)}if(Dt(q)||mt(q))return _t!==null?null:Z(z,H,q,j,null);if(typeof q.then=="function")return K(z,H,bm(q),j);if(q.$$typeof===P)return K(z,H,_m(z,q),j);Cm(z,q)}return null}function W(z,H,q,j,_t){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return z=z.get(q)||null,N(H,z,""+j,_t);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return z=z.get(j.key===null?q:j.key)||null,U(H,z,j,_t);case E:return z=z.get(j.key===null?q:j.key)||null,Y(H,z,j,_t);case $:return j=Xa(j),W(z,H,q,j,_t)}if(Dt(j)||mt(j))return z=z.get(q)||null,Z(H,z,j,_t,null);if(typeof j.then=="function")return W(z,H,q,bm(j),_t);if(j.$$typeof===P)return W(z,H,q,_m(H,j),_t);Cm(H,j)}return null}function ht(z,H,q,j){for(var _t=null,Wt=null,gt=H,kt=H=0,Yt=null;gt!==null&&kt<q.length;kt++){gt.index>kt?(Yt=gt,gt=null):Yt=gt.sibling;var Qt=K(z,gt,q[kt],j);if(Qt===null){gt===null&&(gt=Yt);break}o&&gt&&Qt.alternate===null&&r(z,gt),H=S(Qt,H,kt),Wt===null?_t=Qt:Wt.sibling=Qt,Wt=Qt,gt=Yt}if(kt===q.length)return c(z,gt),Xt&&So(z,kt),_t;if(gt===null){for(;kt<q.length;kt++)gt=tt(z,q[kt],j),gt!==null&&(H=S(gt,H,kt),Wt===null?_t=gt:Wt.sibling=gt,Wt=gt);return Xt&&So(z,kt),_t}for(gt=f(gt);kt<q.length;kt++)Yt=W(gt,z,kt,q[kt],j),Yt!==null&&(o&&Yt.alternate!==null&&gt.delete(Yt.key===null?kt:Yt.key),H=S(Yt,H,kt),Wt===null?_t=Yt:Wt.sibling=Yt,Wt=Yt);return o&&gt.forEach(function(Yr){return r(z,Yr)}),Xt&&So(z,kt),_t}function bt(z,H,q,j){if(q==null)throw Error(n(151));for(var _t=null,Wt=null,gt=H,kt=H=0,Yt=null,Qt=q.next();gt!==null&&!Qt.done;kt++,Qt=q.next()){gt.index>kt?(Yt=gt,gt=null):Yt=gt.sibling;var Yr=K(z,gt,Qt.value,j);if(Yr===null){gt===null&&(gt=Yt);break}o&&gt&&Yr.alternate===null&&r(z,gt),H=S(Yr,H,kt),Wt===null?_t=Yr:Wt.sibling=Yr,Wt=Yr,gt=Yt}if(Qt.done)return c(z,gt),Xt&&So(z,kt),_t;if(gt===null){for(;!Qt.done;kt++,Qt=q.next())Qt=tt(z,Qt.value,j),Qt!==null&&(H=S(Qt,H,kt),Wt===null?_t=Qt:Wt.sibling=Qt,Wt=Qt);return Xt&&So(z,kt),_t}for(gt=f(gt);!Qt.done;kt++,Qt=q.next())Qt=W(gt,z,kt,Qt.value,j),Qt!==null&&(o&&Qt.alternate!==null&&gt.delete(Qt.key===null?kt:Qt.key),H=S(Qt,H,kt),Wt===null?_t=Qt:Wt.sibling=Qt,Wt=Qt);return o&&gt.forEach(function(z2){return r(z,z2)}),Xt&&So(z,kt),_t}function ue(z,H,q,j){if(typeof q=="object"&&q!==null&&q.type===C&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case T:t:{for(var _t=q.key;H!==null;){if(H.key===_t){if(_t=q.type,_t===C){if(H.tag===7){c(z,H.sibling),j=_(H,q.props.children),j.return=z,z=j;break t}}else if(H.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===$&&Xa(_t)===H.type){c(z,H.sibling),j=_(H,q.props),id(j,q),j.return=z,z=j;break t}c(z,H);break}else r(z,H);H=H.sibling}q.type===C?(j=Ba(q.props.children,z.mode,j,q.key),j.return=z,z=j):(j=ym(q.type,q.key,q.props,null,z.mode,j),id(j,q),j.return=z,z=j)}return b(z);case E:t:{for(_t=q.key;H!==null;){if(H.key===_t)if(H.tag===4&&H.stateNode.containerInfo===q.containerInfo&&H.stateNode.implementation===q.implementation){c(z,H.sibling),j=_(H,q.children||[]),j.return=z,z=j;break t}else{c(z,H);break}else r(z,H);H=H.sibling}j=X0(q,z.mode,j),j.return=z,z=j}return b(z);case $:return q=Xa(q),ue(z,H,q,j)}if(Dt(q))return ht(z,H,q,j);if(mt(q)){if(_t=mt(q),typeof _t!="function")throw Error(n(150));return q=_t.call(q),bt(z,H,q,j)}if(typeof q.then=="function")return ue(z,H,bm(q),j);if(q.$$typeof===P)return ue(z,H,_m(z,q),j);Cm(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,H!==null&&H.tag===6?(c(z,H.sibling),j=_(H,q),j.return=z,z=j):(c(z,H),j=Y0(q,z.mode,j),j.return=z,z=j),b(z)):c(z,H)}return function(z,H,q,j){try{nd=0;var _t=ue(z,H,q,j);return Gu=null,_t}catch(gt){if(gt===Bu||gt===Tm)throw gt;var Wt=_i(29,gt,null,z.mode);return Wt.lanes=j,Wt.return=z,Wt}finally{}}}var Ka=wb(!0),xb=wb(!1),Rr=!1;function sv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ov(o,r){o=o.updateQueue,r.updateQueue===o&&(r.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Mr(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ir(o,r,c){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(te&2)!==0){var _=f.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),f.pending=r,r=gm(o),cb(o,null,c),r}return mm(o,f,r,c),gm(o)}function sd(o,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=o.pendingLanes,c|=f,r.lanes=c,vE(o,c)}}function rv(o,r){var c=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var _=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var b={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?_=S=b:S=S.next=b,c=c.next}while(c!==null);S===null?_=S=r:S=S.next=r}else _=S=r;c={baseState:f.baseState,firstBaseUpdate:_,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=r:o.next=r,c.lastBaseUpdate=r}var av=!1;function od(){if(av){var o=Hu;if(o!==null)throw o}}function rd(o,r,c,f){av=!1;var _=o.updateQueue;Rr=!1;var S=_.firstBaseUpdate,b=_.lastBaseUpdate,N=_.shared.pending;if(N!==null){_.shared.pending=null;var U=N,Y=U.next;U.next=null,b===null?S=Y:b.next=Y,b=U;var Z=o.alternate;Z!==null&&(Z=Z.updateQueue,N=Z.lastBaseUpdate,N!==b&&(N===null?Z.firstBaseUpdate=Y:N.next=Y,Z.lastBaseUpdate=U))}if(S!==null){var tt=_.baseState;b=0,Z=Y=U=null,N=S;do{var K=N.lane&-536870913,W=K!==N.lane;if(W?(qt&K)===K:(f&K)===K){K!==0&&K===Vu&&(av=!0),Z!==null&&(Z=Z.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});t:{var ht=o,bt=N;K=r;var ue=c;switch(bt.tag){case 1:if(ht=bt.payload,typeof ht=="function"){tt=ht.call(ue,tt,K);break t}tt=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=bt.payload,K=typeof ht=="function"?ht.call(ue,tt,K):ht,K==null)break t;tt=v({},tt,K);break t;case 2:Rr=!0}}K=N.callback,K!==null&&(o.flags|=64,W&&(o.flags|=8192),W=_.callbacks,W===null?_.callbacks=[K]:W.push(K))}else W={lane:K,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Z===null?(Y=Z=W,U=tt):Z=Z.next=W,b|=K;if(N=N.next,N===null){if(N=_.shared.pending,N===null)break;W=N,N=W.next,W.next=null,_.lastBaseUpdate=W,_.shared.pending=null}}while(!0);Z===null&&(U=tt),_.baseState=U,_.firstBaseUpdate=Y,_.lastBaseUpdate=Z,S===null&&(_.shared.lanes=0),kr|=b,o.lanes=b,o.memoizedState=tt}}function Rb(o,r){if(typeof o!="function")throw Error(n(191,o));o.call(r)}function Mb(o,r){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)Rb(c[o],r)}var zu=O(null),wm=O(0);function Ib(o,r){o=Do,it(wm,o),it(zu,r),Do=o|r.baseLanes}function lv(){it(wm,Do),it(zu,zu.current)}function uv(){Do=wm.current,Q(zu),Q(wm)}var Si=O(null),Wi=null;function Nr(o){var r=o.alternate;it(ke,ke.current&1),it(Si,o),Wi===null&&(r===null||zu.current!==null||r.memoizedState!==null)&&(Wi=o)}function cv(o){it(ke,ke.current),it(Si,o),Wi===null&&(Wi=o)}function Nb(o){o.tag===22?(it(ke,ke.current),it(Si,o),Wi===null&&(Wi=o)):Dr()}function Dr(){it(ke,ke.current),it(Si,Si.current)}function Ti(o){Q(Si),Wi===o&&(Wi=null),Q(ke)}var ke=O(0);function xm(o){for(var r=o;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gA(c)||yA(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var bo=0,Pt=null,ae=null,Be=null,Rm=!1,qu=!1,Ja=!1,Mm=0,ad=0,Yu=null,Pk=0;function Ne(){throw Error(n(321))}function hv(o,r){if(r===null)return!1;for(var c=0;c<r.length&&c<o.length;c++)if(!Ai(o[c],r[c]))return!1;return!0}function dv(o,r,c,f,_,S){return bo=S,Pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,B.H=o===null||o.memoizedState===null?pC:xv,Ja=!1,S=c(f,_),Ja=!1,qu&&(S=Pb(r,c,f,_)),Db(o),S}function Db(o){B.H=cd;var r=ae!==null&&ae.next!==null;if(bo=0,Be=ae=Pt=null,Rm=!1,ad=0,Yu=null,r)throw Error(n(300));o===null||Ge||(o=o.dependencies,o!==null&&Am(o)&&(Ge=!0))}function Pb(o,r,c,f){Pt=o;var _=0;do{if(qu&&(Yu=null),ad=0,qu=!1,25<=_)throw Error(n(301));if(_+=1,Be=ae=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}B.H=mC,S=r(c,f)}while(qu);return S}function Lk(){var o=B.H,r=o.useState()[0];return r=typeof r.then=="function"?ld(r):r,o=o.useState()[0],(ae!==null?ae.memoizedState:null)!==o&&(Pt.flags|=1024),r}function fv(){var o=Mm!==0;return Mm=0,o}function pv(o,r,c){r.updateQueue=o.updateQueue,r.flags&=-2053,o.lanes&=~c}function mv(o){if(Rm){for(o=o.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Rm=!1}bo=0,Be=ae=Pt=null,qu=!1,ad=Mm=0,Yu=null}function Hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Pt.memoizedState=Be=o:Be=Be.next=o,Be}function Ue(){if(ae===null){var o=Pt.alternate;o=o!==null?o.memoizedState:null}else o=ae.next;var r=Be===null?Pt.memoizedState:Be.next;if(r!==null)Be=r,ae=o;else{if(o===null)throw Pt.alternate===null?Error(n(467)):Error(n(310));ae=o,o={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Be===null?Pt.memoizedState=Be=o:Be=Be.next=o}return Be}function Im(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ld(o){var r=ad;return ad+=1,Yu===null&&(Yu=[]),o=Eb(Yu,o,r),r=Pt,(Be===null?r.memoizedState:Be.next)===null&&(r=r.alternate,B.H=r===null||r.memoizedState===null?pC:xv),o}function Nm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ld(o);if(o.$$typeof===P)return gn(o)}throw Error(n(438,String(o)))}function gv(o){var r=null,c=Pt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=Pt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Im(),Pt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(o),f=0;f<o;f++)c[f]=et;return r.index++,c}function Co(o,r){return typeof r=="function"?r(o):r}function Dm(o){var r=Ue();return yv(r,ae,o)}function yv(o,r,c){var f=o.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=c;var _=o.baseQueue,S=f.pending;if(S!==null){if(_!==null){var b=_.next;_.next=S.next,S.next=b}r.baseQueue=_=S,f.pending=null}if(S=o.baseState,_===null)o.memoizedState=S;else{r=_.next;var N=b=null,U=null,Y=r,Z=!1;do{var tt=Y.lane&-536870913;if(tt!==Y.lane?(qt&tt)===tt:(bo&tt)===tt){var K=Y.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),tt===Vu&&(Z=!0);else if((bo&K)===K){Y=Y.next,K===Vu&&(Z=!0);continue}else tt={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(N=U=tt,b=S):U=U.next=tt,Pt.lanes|=K,kr|=K;tt=Y.action,Ja&&c(S,tt),S=Y.hasEagerState?Y.eagerState:c(S,tt)}else K={lane:tt,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(N=U=K,b=S):U=U.next=K,Pt.lanes|=tt,kr|=tt;Y=Y.next}while(Y!==null&&Y!==r);if(U===null?b=S:U.next=N,!Ai(S,o.memoizedState)&&(Ge=!0,Z&&(c=Hu,c!==null)))throw c;o.memoizedState=S,o.baseState=b,o.baseQueue=U,f.lastRenderedState=S}return _===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function vv(o){var r=Ue(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var f=c.dispatch,_=c.pending,S=r.memoizedState;if(_!==null){c.pending=null;var b=_=_.next;do S=o(S,b.action),b=b.next;while(b!==_);Ai(S,r.memoizedState)||(Ge=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),c.lastRenderedState=S}return[S,f]}function Lb(o,r,c){var f=Pt,_=Ue(),S=Xt;if(S){if(c===void 0)throw Error(n(407));c=c()}else c=r();var b=!Ai((ae||_).memoizedState,c);if(b&&(_.memoizedState=c,Ge=!0),_=_.queue,Sv(Ob.bind(null,f,_,o),[o]),_.getSnapshot!==r||b||Be!==null&&Be.memoizedState.tag&1){if(f.flags|=2048,Xu(9,{destroy:void 0},Ub.bind(null,f,_,c,r),null),de===null)throw Error(n(349));S||(bo&127)!==0||kb(f,r,c)}return c}function kb(o,r,c){o.flags|=16384,o={getSnapshot:r,value:c},r=Pt.updateQueue,r===null?(r=Im(),Pt.updateQueue=r,r.stores=[o]):(c=r.stores,c===null?r.stores=[o]:c.push(o))}function Ub(o,r,c,f){r.value=c,r.getSnapshot=f,Fb(r)&&Vb(o)}function Ob(o,r,c){return c(function(){Fb(r)&&Vb(o)})}function Fb(o){var r=o.getSnapshot;o=o.value;try{var c=r();return!Ai(o,c)}catch{return!0}}function Vb(o){var r=Ha(o,2);r!==null&&ai(r,o,2)}function Av(o){var r=Hn();if(typeof o=="function"){var c=o;if(o=c(),Ja){Sr(!0);try{c()}finally{Sr(!1)}}}return r.memoizedState=r.baseState=o,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:o},r}function Hb(o,r,c,f){return o.baseState=c,yv(o,ae,typeof f=="function"?f:Co)}function kk(o,r,c,f,_){if(km(o))throw Error(n(485));if(o=r.action,o!==null){var S={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){S.listeners.push(b)}};B.T!==null?c(!0):S.isTransition=!1,f(S),c=r.pending,c===null?(S.next=r.pending=S,Bb(r,S)):(S.next=c.next,r.pending=c.next=S)}}function Bb(o,r){var c=r.action,f=r.payload,_=o.state;if(r.isTransition){var S=B.T,b={};B.T=b;try{var N=c(_,f),U=B.S;U!==null&&U(b,N),Gb(o,r,N)}catch(Y){_v(o,r,Y)}finally{S!==null&&b.types!==null&&(S.types=b.types),B.T=S}}else try{S=c(_,f),Gb(o,r,S)}catch(Y){_v(o,r,Y)}}function Gb(o,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){zb(o,r,f)},function(f){return _v(o,r,f)}):zb(o,r,c)}function zb(o,r,c){r.status="fulfilled",r.value=c,qb(r),o.state=c,r=o.pending,r!==null&&(c=r.next,c===r?o.pending=null:(c=c.next,r.next=c,Bb(o,c)))}function _v(o,r,c){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,qb(r),r=r.next;while(r!==f)}o.action=null}function qb(o){o=o.listeners;for(var r=0;r<o.length;r++)(0,o[r])()}function Yb(o,r){return r}function Xb(o,r){if(Xt){var c=de.formState;if(c!==null){t:{var f=Pt;if(Xt){if(ye){e:{for(var _=ye,S=Ji;_.nodeType!==8;){if(!S){_=null;break e}if(_=Qi(_.nextSibling),_===null){_=null;break e}}S=_.data,_=S==="F!"||S==="F"?_:null}if(_){ye=Qi(_.nextSibling),f=_.data==="F!";break t}}wr(f)}f=!1}f&&(r=c[0])}}return c=Hn(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yb,lastRenderedState:r},c.queue=f,c=hC.bind(null,Pt,f),f.dispatch=c,f=Av(!1),S=wv.bind(null,Pt,!1,f.queue),f=Hn(),_={state:r,dispatch:null,action:o,pending:null},f.queue=_,c=kk.bind(null,Pt,_,S,c),_.dispatch=c,f.memoizedState=o,[r,c,!1]}function $b(o){var r=Ue();return Kb(r,ae,o)}function Kb(o,r,c){if(r=yv(o,r,Yb)[0],o=Dm(Co)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=ld(r)}catch(b){throw b===Bu?Tm:b}else f=r;r=Ue();var _=r.queue,S=_.dispatch;return c!==r.memoizedState&&(Pt.flags|=2048,Xu(9,{destroy:void 0},Uk.bind(null,_,c),null)),[f,S,o]}function Uk(o,r){o.action=r}function Jb(o){var r=Ue(),c=ae;if(c!==null)return Kb(r,c,o);Ue(),r=r.memoizedState,c=Ue();var f=c.queue.dispatch;return c.memoizedState=o,[r,f,!1]}function Xu(o,r,c,f){return o={tag:o,create:c,deps:f,inst:r,next:null},r=Pt.updateQueue,r===null&&(r=Im(),Pt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=o.next=o:(f=c.next,c.next=o,o.next=f,r.lastEffect=o),o}function Wb(){return Ue().memoizedState}function Pm(o,r,c,f){var _=Hn();Pt.flags|=o,_.memoizedState=Xu(1|r,{destroy:void 0},c,f===void 0?null:f)}function Lm(o,r,c,f){var _=Ue();f=f===void 0?null:f;var S=_.memoizedState.inst;ae!==null&&f!==null&&hv(f,ae.memoizedState.deps)?_.memoizedState=Xu(r,S,c,f):(Pt.flags|=o,_.memoizedState=Xu(1|r,S,c,f))}function Qb(o,r){Pm(8390656,8,o,r)}function Sv(o,r){Lm(2048,8,o,r)}function Ok(o){Pt.flags|=4;var r=Pt.updateQueue;if(r===null)r=Im(),Pt.updateQueue=r,r.events=[o];else{var c=r.events;c===null?r.events=[o]:c.push(o)}}function Zb(o){var r=Ue().memoizedState;return Ok({ref:r,nextImpl:o}),function(){if((te&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function jb(o,r){return Lm(4,2,o,r)}function tC(o,r){return Lm(4,4,o,r)}function eC(o,r){if(typeof r=="function"){o=o();var c=r(o);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return o=o(),r.current=o,function(){r.current=null}}function nC(o,r,c){c=c!=null?c.concat([o]):null,Lm(4,4,eC.bind(null,r,o),c)}function Tv(){}function iC(o,r){var c=Ue();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&hv(r,f[1])?f[0]:(c.memoizedState=[o,r],o)}function sC(o,r){var c=Ue();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&hv(r,f[1]))return f[0];if(f=o(),Ja){Sr(!0);try{o()}finally{Sr(!1)}}return c.memoizedState=[f,r],f}function Ev(o,r,c){return c===void 0||(bo&1073741824)!==0&&(qt&261930)===0?o.memoizedState=r:(o.memoizedState=c,o=ow(),Pt.lanes|=o,kr|=o,c)}function oC(o,r,c,f){return Ai(c,r)?c:zu.current!==null?(o=Ev(o,c,f),Ai(o,r)||(Ge=!0),o):(bo&42)===0||(bo&1073741824)!==0&&(qt&261930)===0?(Ge=!0,o.memoizedState=c):(o=ow(),Pt.lanes|=o,kr|=o,r)}function rC(o,r,c,f,_){var S=J.p;J.p=S!==0&&8>S?S:8;var b=B.T,N={};B.T=N,wv(o,!1,r,c);try{var U=_(),Y=B.S;if(Y!==null&&Y(N,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var Z=Dk(U,f);ud(o,r,Z,Ci(o))}else ud(o,r,f,Ci(o))}catch(tt){ud(o,r,{then:function(){},status:"rejected",reason:tt},Ci())}finally{J.p=S,b!==null&&N.types!==null&&(b.types=N.types),B.T=b}}function Fk(){}function bv(o,r,c,f){if(o.tag!==5)throw Error(n(476));var _=aC(o).queue;rC(o,_,r,ot,c===null?Fk:function(){return lC(o),c(f)})}function aC(o){var r=o.memoizedState;if(r!==null)return r;r={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:ot},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:c},next:null},o.memoizedState=r,o=o.alternate,o!==null&&(o.memoizedState=r),r}function lC(o){var r=aC(o);r.next===null&&(r=o.alternate.memoizedState),ud(o,r.next.queue,{},Ci())}function Cv(){return gn(wd)}function uC(){return Ue().memoizedState}function cC(){return Ue().memoizedState}function Vk(o){for(var r=o.return;r!==null;){switch(r.tag){case 24:case 3:var c=Ci();o=Mr(c);var f=Ir(r,o,c);f!==null&&(ai(f,r,c),sd(f,r,c)),r={cache:tv()},o.payload=r;return}r=r.return}}function Hk(o,r,c){var f=Ci();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},km(o)?dC(r,c):(c=z0(o,r,c,f),c!==null&&(ai(c,o,f),fC(c,r,f)))}function hC(o,r,c){var f=Ci();ud(o,r,c,f)}function ud(o,r,c,f){var _={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(km(o))dC(r,_);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var b=r.lastRenderedState,N=S(b,c);if(_.hasEagerState=!0,_.eagerState=N,Ai(N,b))return mm(o,r,_,0),de===null&&pm(),!1}catch{}finally{}if(c=z0(o,r,_,f),c!==null)return ai(c,o,f),fC(c,r,f),!0}return!1}function wv(o,r,c,f){if(f={lane:2,revertLane:sA(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},km(o)){if(r)throw Error(n(479))}else r=z0(o,c,f,2),r!==null&&ai(r,o,2)}function km(o){var r=o.alternate;return o===Pt||r!==null&&r===Pt}function dC(o,r){qu=Rm=!0;var c=o.pending;c===null?r.next=r:(r.next=c.next,c.next=r),o.pending=r}function fC(o,r,c){if((c&4194048)!==0){var f=r.lanes;f&=o.pendingLanes,c|=f,r.lanes=c,vE(o,c)}}var cd={readContext:gn,use:Nm,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne};cd.useEffectEvent=Ne;var pC={readContext:gn,use:Nm,useCallback:function(o,r){return Hn().memoizedState=[o,r===void 0?null:r],o},useContext:gn,useEffect:Qb,useImperativeHandle:function(o,r,c){c=c!=null?c.concat([o]):null,Pm(4194308,4,eC.bind(null,r,o),c)},useLayoutEffect:function(o,r){return Pm(4194308,4,o,r)},useInsertionEffect:function(o,r){Pm(4,2,o,r)},useMemo:function(o,r){var c=Hn();r=r===void 0?null:r;var f=o();if(Ja){Sr(!0);try{o()}finally{Sr(!1)}}return c.memoizedState=[f,r],f},useReducer:function(o,r,c){var f=Hn();if(c!==void 0){var _=c(r);if(Ja){Sr(!0);try{c(r)}finally{Sr(!1)}}}else _=r;return f.memoizedState=f.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},f.queue=o,o=o.dispatch=Hk.bind(null,Pt,o),[f.memoizedState,o]},useRef:function(o){var r=Hn();return o={current:o},r.memoizedState=o},useState:function(o){o=Av(o);var r=o.queue,c=hC.bind(null,Pt,r);return r.dispatch=c,[o.memoizedState,c]},useDebugValue:Tv,useDeferredValue:function(o,r){var c=Hn();return Ev(c,o,r)},useTransition:function(){var o=Av(!1);return o=rC.bind(null,Pt,o.queue,!0,!1),Hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,r,c){var f=Pt,_=Hn();if(Xt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),de===null)throw Error(n(349));(qt&127)!==0||kb(f,r,c)}_.memoizedState=c;var S={value:c,getSnapshot:r};return _.queue=S,Qb(Ob.bind(null,f,S,o),[o]),f.flags|=2048,Xu(9,{destroy:void 0},Ub.bind(null,f,S,c,r),null),c},useId:function(){var o=Hn(),r=de.identifierPrefix;if(Xt){var c=zs,f=Gs;c=(f&~(1<<32-vi(f)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Mm++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=Pk++,r="_"+r+"r_"+c.toString(32)+"_";return o.memoizedState=r},useHostTransitionStatus:Cv,useFormState:Xb,useActionState:Xb,useOptimistic:function(o){var r=Hn();r.memoizedState=r.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=wv.bind(null,Pt,!0,c),c.dispatch=r,[o,r]},useMemoCache:gv,useCacheRefresh:function(){return Hn().memoizedState=Vk.bind(null,Pt)},useEffectEvent:function(o){var r=Hn(),c={impl:o};return r.memoizedState=c,function(){if((te&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},xv={readContext:gn,use:Nm,useCallback:iC,useContext:gn,useEffect:Sv,useImperativeHandle:nC,useInsertionEffect:jb,useLayoutEffect:tC,useMemo:sC,useReducer:Dm,useRef:Wb,useState:function(){return Dm(Co)},useDebugValue:Tv,useDeferredValue:function(o,r){var c=Ue();return oC(c,ae.memoizedState,o,r)},useTransition:function(){var o=Dm(Co)[0],r=Ue().memoizedState;return[typeof o=="boolean"?o:ld(o),r]},useSyncExternalStore:Lb,useId:uC,useHostTransitionStatus:Cv,useFormState:$b,useActionState:$b,useOptimistic:function(o,r){var c=Ue();return Hb(c,ae,o,r)},useMemoCache:gv,useCacheRefresh:cC};xv.useEffectEvent=Zb;var mC={readContext:gn,use:Nm,useCallback:iC,useContext:gn,useEffect:Sv,useImperativeHandle:nC,useInsertionEffect:jb,useLayoutEffect:tC,useMemo:sC,useReducer:vv,useRef:Wb,useState:function(){return vv(Co)},useDebugValue:Tv,useDeferredValue:function(o,r){var c=Ue();return ae===null?Ev(c,o,r):oC(c,ae.memoizedState,o,r)},useTransition:function(){var o=vv(Co)[0],r=Ue().memoizedState;return[typeof o=="boolean"?o:ld(o),r]},useSyncExternalStore:Lb,useId:uC,useHostTransitionStatus:Cv,useFormState:Jb,useActionState:Jb,useOptimistic:function(o,r){var c=Ue();return ae!==null?Hb(c,ae,o,r):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:gv,useCacheRefresh:cC};mC.useEffectEvent=Zb;function Rv(o,r,c,f){r=o.memoizedState,c=c(f,r),c=c==null?r:v({},r,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Mv={enqueueSetState:function(o,r,c){o=o._reactInternals;var f=Ci(),_=Mr(f);_.payload=r,c!=null&&(_.callback=c),r=Ir(o,_,f),r!==null&&(ai(r,o,f),sd(r,o,f))},enqueueReplaceState:function(o,r,c){o=o._reactInternals;var f=Ci(),_=Mr(f);_.tag=1,_.payload=r,c!=null&&(_.callback=c),r=Ir(o,_,f),r!==null&&(ai(r,o,f),sd(r,o,f))},enqueueForceUpdate:function(o,r){o=o._reactInternals;var c=Ci(),f=Mr(c);f.tag=2,r!=null&&(f.callback=r),r=Ir(o,f,c),r!==null&&(ai(r,o,c),sd(r,o,c))}};function gC(o,r,c,f,_,S,b){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,S,b):r.prototype&&r.prototype.isPureReactComponent?!Wh(c,f)||!Wh(_,S):!0}function yC(o,r,c,f){o=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==o&&Mv.enqueueReplaceState(r,r.state,null)}function Wa(o,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(o=o.defaultProps){c===r&&(c=v({},c));for(var _ in o)c[_]===void 0&&(c[_]=o[_])}return c}function vC(o){fm(o)}function AC(o){console.error(o)}function _C(o){fm(o)}function Um(o,r){try{var c=o.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function SC(o,r,c){try{var f=o.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Iv(o,r,c){return c=Mr(c),c.tag=3,c.payload={element:null},c.callback=function(){Um(o,r)},c}function TC(o){return o=Mr(o),o.tag=3,o}function EC(o,r,c,f){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var S=f.value;o.payload=function(){return _(S)},o.callback=function(){SC(r,c,f)}}var b=c.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(o.callback=function(){SC(r,c,f),typeof _!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function Bk(o,r,c,f,_){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&Fu(r,c,_,!0),c=Si.current,c!==null){switch(c.tag){case 31:case 13:return Wi===null?Km():c.alternate===null&&De===0&&(De=3),c.flags&=-257,c.flags|=65536,c.lanes=_,f===Em?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),eA(o,f,_)),!1;case 22:return c.flags|=65536,f===Em?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),eA(o,f,_)),!1}throw Error(n(435,c.tag))}return eA(o,f,_),Km(),!1}if(Xt)return r=Si.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,f!==J0&&(o=Error(n(422),{cause:f}),jh(Xi(o,c)))):(f!==J0&&(r=Error(n(423),{cause:f}),jh(Xi(r,c))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,f=Xi(f,c),_=Iv(o.stateNode,f,_),rv(o,_),De!==4&&(De=2)),!1;var S=Error(n(520),{cause:f});if(S=Xi(S,c),vd===null?vd=[S]:vd.push(S),De!==4&&(De=2),r===null)return!0;f=Xi(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,o=_&-_,c.lanes|=o,o=Iv(c.stateNode,f,o),rv(c,o),!1;case 1:if(r=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ur===null||!Ur.has(S))))return c.flags|=65536,_&=-_,c.lanes|=_,_=TC(_),EC(_,o,c,f),rv(c,_),!1}c=c.return}while(c!==null);return!1}var Nv=Error(n(461)),Ge=!1;function yn(o,r,c,f){r.child=o===null?xb(r,null,c,f):Ka(r,o.child,c,f)}function bC(o,r,c,f,_){c=c.render;var S=r.ref;if("ref"in f){var b={};for(var N in f)N!=="ref"&&(b[N]=f[N])}else b=f;return qa(r),f=dv(o,r,c,b,S,_),N=fv(),o!==null&&!Ge?(pv(o,r,_),wo(o,r,_)):(Xt&&N&&$0(r),r.flags|=1,yn(o,r,f,_),r.child)}function CC(o,r,c,f,_){if(o===null){var S=c.type;return typeof S=="function"&&!q0(S)&&S.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=S,wC(o,r,S,f,_)):(o=ym(c.type,null,f,r,r.mode,_),o.ref=r.ref,o.return=r,r.child=o)}if(S=o.child,!Vv(o,_)){var b=S.memoizedProps;if(c=c.compare,c=c!==null?c:Wh,c(b,f)&&o.ref===r.ref)return wo(o,r,_)}return r.flags|=1,o=_o(S,f),o.ref=r.ref,o.return=r,r.child=o}function wC(o,r,c,f,_){if(o!==null){var S=o.memoizedProps;if(Wh(S,f)&&o.ref===r.ref)if(Ge=!1,r.pendingProps=f=S,Vv(o,_))(o.flags&131072)!==0&&(Ge=!0);else return r.lanes=o.lanes,wo(o,r,_)}return Dv(o,r,c,f,_)}function xC(o,r,c,f){var _=f.children,S=o!==null?o.memoizedState:null;if(o===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,o!==null){for(f=r.child=o.child,_=0;f!==null;)_=_|f.lanes|f.childLanes,f=f.sibling;f=_&~S}else f=0,r.child=null;return RC(o,r,S,c,f)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},o!==null&&Sm(r,S!==null?S.cachePool:null),S!==null?Ib(r,S):lv(),Nb(r);else return f=r.lanes=536870912,RC(o,r,S!==null?S.baseLanes|c:c,c,f)}else S!==null?(Sm(r,S.cachePool),Ib(r,S),Dr(),r.memoizedState=null):(o!==null&&Sm(r,null),lv(),Dr());return yn(o,r,_,c),r.child}function hd(o,r){return o!==null&&o.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function RC(o,r,c,f,_){var S=nv();return S=S===null?null:{parent:He._currentValue,pool:S},r.memoizedState={baseLanes:c,cachePool:S},o!==null&&Sm(r,null),lv(),Nb(r),o!==null&&Fu(o,r,f,!0),r.childLanes=_,null}function Om(o,r){return r=Vm({mode:r.mode,children:r.children},o.mode),r.ref=o.ref,o.child=r,r.return=o,r}function MC(o,r,c){return Ka(r,o.child,null,c),o=Om(r,r.pendingProps),o.flags|=2,Ti(r),r.memoizedState=null,o}function Gk(o,r,c){var f=r.pendingProps,_=(r.flags&128)!==0;if(r.flags&=-129,o===null){if(Xt){if(f.mode==="hidden")return o=Om(r,f),r.lanes=536870912,hd(null,o);if(cv(r),(o=ye)?(o=Bw(o,Ji),o=o!==null&&o.data==="&"?o:null,o!==null&&(r.memoizedState={dehydrated:o,treeContext:br!==null?{id:Gs,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},c=db(o),c.return=r,r.child=c,mn=r,ye=null)):o=null,o===null)throw wr(r);return r.lanes=536870912,null}return Om(r,f)}var S=o.memoizedState;if(S!==null){var b=S.dehydrated;if(cv(r),_)if(r.flags&256)r.flags&=-257,r=MC(o,r,c);else if(r.memoizedState!==null)r.child=o.child,r.flags|=128,r=null;else throw Error(n(558));else if(Ge||Fu(o,r,c,!1),_=(c&o.childLanes)!==0,Ge||_){if(f=de,f!==null&&(b=AE(f,c),b!==0&&b!==S.retryLane))throw S.retryLane=b,Ha(o,b),ai(f,o,b),Nv;Km(),r=MC(o,r,c)}else o=S.treeContext,ye=Qi(b.nextSibling),mn=r,Xt=!0,Cr=null,Ji=!1,o!==null&&mb(r,o),r=Om(r,f),r.flags|=4096;return r}return o=_o(o.child,{mode:f.mode,children:f.children}),o.ref=r.ref,r.child=o,o.return=r,o}function Fm(o,r){var c=r.ref;if(c===null)o!==null&&o.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(o===null||o.ref!==c)&&(r.flags|=4194816)}}function Dv(o,r,c,f,_){return qa(r),c=dv(o,r,c,f,void 0,_),f=fv(),o!==null&&!Ge?(pv(o,r,_),wo(o,r,_)):(Xt&&f&&$0(r),r.flags|=1,yn(o,r,c,_),r.child)}function IC(o,r,c,f,_,S){return qa(r),r.updateQueue=null,c=Pb(r,f,c,_),Db(o),f=fv(),o!==null&&!Ge?(pv(o,r,S),wo(o,r,S)):(Xt&&f&&$0(r),r.flags|=1,yn(o,r,c,S),r.child)}function NC(o,r,c,f,_){if(qa(r),r.stateNode===null){var S=Lu,b=c.contextType;typeof b=="object"&&b!==null&&(S=gn(b)),S=new c(f,S),r.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Mv,r.stateNode=S,S._reactInternals=r,S=r.stateNode,S.props=f,S.state=r.memoizedState,S.refs={},sv(r),b=c.contextType,S.context=typeof b=="object"&&b!==null?gn(b):Lu,S.state=r.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(Rv(r,c,b,f),S.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(b=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),b!==S.state&&Mv.enqueueReplaceState(S,S.state,null),rd(r,f,S,_),od(),S.state=r.memoizedState),typeof S.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(o===null){S=r.stateNode;var N=r.memoizedProps,U=Wa(c,N);S.props=U;var Y=S.context,Z=c.contextType;b=Lu,typeof Z=="object"&&Z!==null&&(b=gn(Z));var tt=c.getDerivedStateFromProps;Z=typeof tt=="function"||typeof S.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,Z||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N||Y!==b)&&yC(r,S,f,b),Rr=!1;var K=r.memoizedState;S.state=K,rd(r,f,S,_),od(),Y=r.memoizedState,N||K!==Y||Rr?(typeof tt=="function"&&(Rv(r,c,tt,f),Y=r.memoizedState),(U=Rr||gC(r,c,U,f,K,Y,b))?(Z||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(r.flags|=4194308)):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=Y),S.props=f,S.state=Y,S.context=b,f=U):(typeof S.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{S=r.stateNode,ov(o,r),b=r.memoizedProps,Z=Wa(c,b),S.props=Z,tt=r.pendingProps,K=S.context,Y=c.contextType,U=Lu,typeof Y=="object"&&Y!==null&&(U=gn(Y)),N=c.getDerivedStateFromProps,(Y=typeof N=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(b!==tt||K!==U)&&yC(r,S,f,U),Rr=!1,K=r.memoizedState,S.state=K,rd(r,f,S,_),od();var W=r.memoizedState;b!==tt||K!==W||Rr||o!==null&&o.dependencies!==null&&Am(o.dependencies)?(typeof N=="function"&&(Rv(r,c,N,f),W=r.memoizedState),(Z=Rr||gC(r,c,Z,f,K,W,U)||o!==null&&o.dependencies!==null&&Am(o.dependencies))?(Y||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,W,U),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,W,U)),typeof S.componentDidUpdate=="function"&&(r.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof S.componentDidUpdate!="function"||b===o.memoizedProps&&K===o.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&K===o.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=W),S.props=f,S.state=W,S.context=U,f=Z):(typeof S.componentDidUpdate!="function"||b===o.memoizedProps&&K===o.memoizedState||(r.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&K===o.memoizedState||(r.flags|=1024),f=!1)}return S=f,Fm(o,r),f=(r.flags&128)!==0,S||f?(S=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:S.render(),r.flags|=1,o!==null&&f?(r.child=Ka(r,o.child,null,_),r.child=Ka(r,null,c,_)):yn(o,r,c,_),r.memoizedState=S.state,o=r.child):o=wo(o,r,_),o}function DC(o,r,c,f){return Ga(),r.flags|=256,yn(o,r,c,f),r.child}var Pv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lv(o){return{baseLanes:o,cachePool:Sb()}}function kv(o,r,c){return o=o!==null?o.childLanes&~c:0,r&&(o|=bi),o}function PC(o,r,c){var f=r.pendingProps,_=!1,S=(r.flags&128)!==0,b;if((b=S)||(b=o!==null&&o.memoizedState===null?!1:(ke.current&2)!==0),b&&(_=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,o===null){if(Xt){if(_?Nr(r):Dr(),(o=ye)?(o=Bw(o,Ji),o=o!==null&&o.data!=="&"?o:null,o!==null&&(r.memoizedState={dehydrated:o,treeContext:br!==null?{id:Gs,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},c=db(o),c.return=r,r.child=c,mn=r,ye=null)):o=null,o===null)throw wr(r);return yA(o)?r.lanes=32:r.lanes=536870912,null}var N=f.children;return f=f.fallback,_?(Dr(),_=r.mode,N=Vm({mode:"hidden",children:N},_),f=Ba(f,_,c,null),N.return=r,f.return=r,N.sibling=f,r.child=N,f=r.child,f.memoizedState=Lv(c),f.childLanes=kv(o,b,c),r.memoizedState=Pv,hd(null,f)):(Nr(r),Uv(r,N))}var U=o.memoizedState;if(U!==null&&(N=U.dehydrated,N!==null)){if(S)r.flags&256?(Nr(r),r.flags&=-257,r=Ov(o,r,c)):r.memoizedState!==null?(Dr(),r.child=o.child,r.flags|=128,r=null):(Dr(),N=f.fallback,_=r.mode,f=Vm({mode:"visible",children:f.children},_),N=Ba(N,_,c,null),N.flags|=2,f.return=r,N.return=r,f.sibling=N,r.child=f,Ka(r,o.child,null,c),f=r.child,f.memoizedState=Lv(c),f.childLanes=kv(o,b,c),r.memoizedState=Pv,r=hd(null,f));else if(Nr(r),yA(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var Y=b.dgst;b=Y,f=Error(n(419)),f.stack="",f.digest=b,jh({value:f,source:null,stack:null}),r=Ov(o,r,c)}else if(Ge||Fu(o,r,c,!1),b=(c&o.childLanes)!==0,Ge||b){if(b=de,b!==null&&(f=AE(b,c),f!==0&&f!==U.retryLane))throw U.retryLane=f,Ha(o,f),ai(b,o,f),Nv;gA(N)||Km(),r=Ov(o,r,c)}else gA(N)?(r.flags|=192,r.child=o.child,r=null):(o=U.treeContext,ye=Qi(N.nextSibling),mn=r,Xt=!0,Cr=null,Ji=!1,o!==null&&mb(r,o),r=Uv(r,f.children),r.flags|=4096);return r}return _?(Dr(),N=f.fallback,_=r.mode,U=o.child,Y=U.sibling,f=_o(U,{mode:"hidden",children:f.children}),f.subtreeFlags=U.subtreeFlags&65011712,Y!==null?N=_o(Y,N):(N=Ba(N,_,c,null),N.flags|=2),N.return=r,f.return=r,f.sibling=N,r.child=f,hd(null,f),f=r.child,N=o.child.memoizedState,N===null?N=Lv(c):(_=N.cachePool,_!==null?(U=He._currentValue,_=_.parent!==U?{parent:U,pool:U}:_):_=Sb(),N={baseLanes:N.baseLanes|c,cachePool:_}),f.memoizedState=N,f.childLanes=kv(o,b,c),r.memoizedState=Pv,hd(o.child,f)):(Nr(r),c=o.child,o=c.sibling,c=_o(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,o!==null&&(b=r.deletions,b===null?(r.deletions=[o],r.flags|=16):b.push(o)),r.child=c,r.memoizedState=null,c)}function Uv(o,r){return r=Vm({mode:"visible",children:r},o.mode),r.return=o,o.child=r}function Vm(o,r){return o=_i(22,o,null,r),o.lanes=0,o}function Ov(o,r,c){return Ka(r,o.child,null,c),o=Uv(r,r.pendingProps.children),o.flags|=2,r.memoizedState=null,o}function LC(o,r,c){o.lanes|=r;var f=o.alternate;f!==null&&(f.lanes|=r),Z0(o.return,r,c)}function Fv(o,r,c,f,_,S){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:_,treeForkCount:S}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=_,b.treeForkCount=S)}function kC(o,r,c){var f=r.pendingProps,_=f.revealOrder,S=f.tail;f=f.children;var b=ke.current,N=(b&2)!==0;if(N?(b=b&1|2,r.flags|=128):b&=1,it(ke,b),yn(o,r,f,c),f=Xt?Zh:0,!N&&o!==null&&(o.flags&128)!==0)t:for(o=r.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&LC(o,c,r);else if(o.tag===19)LC(o,c,r);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(_){case"forwards":for(c=r.child,_=null;c!==null;)o=c.alternate,o!==null&&xm(o)===null&&(_=c),c=c.sibling;c=_,c===null?(_=r.child,r.child=null):(_=c.sibling,c.sibling=null),Fv(r,!1,_,c,S,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=r.child,r.child=null;_!==null;){if(o=_.alternate,o!==null&&xm(o)===null){r.child=_;break}o=_.sibling,_.sibling=c,c=_,_=o}Fv(r,!0,c,null,S,f);break;case"together":Fv(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function wo(o,r,c){if(o!==null&&(r.dependencies=o.dependencies),kr|=r.lanes,(c&r.childLanes)===0)if(o!==null){if(Fu(o,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(o!==null&&r.child!==o.child)throw Error(n(153));if(r.child!==null){for(o=r.child,c=_o(o,o.pendingProps),r.child=c,c.return=r;o.sibling!==null;)o=o.sibling,c=c.sibling=_o(o,o.pendingProps),c.return=r;c.sibling=null}return r.child}function Vv(o,r){return(o.lanes&r)!==0?!0:(o=o.dependencies,!!(o!==null&&Am(o)))}function zk(o,r,c){switch(r.tag){case 3:Se(r,r.stateNode.containerInfo),xr(r,He,o.memoizedState.cache),Ga();break;case 27:case 5:go(r);break;case 4:Se(r,r.stateNode.containerInfo);break;case 10:xr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,cv(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Nr(r),r.flags|=128,null):(c&r.child.childLanes)!==0?PC(o,r,c):(Nr(r),o=wo(o,r,c),o!==null?o.sibling:null);Nr(r);break;case 19:var _=(o.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(Fu(o,r,c,!1),f=(c&r.childLanes)!==0),_){if(f)return kC(o,r,c);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),it(ke,ke.current),f)break;return null;case 22:return r.lanes=0,xC(o,r,c,r.pendingProps);case 24:xr(r,He,o.memoizedState.cache)}return wo(o,r,c)}function UC(o,r,c){if(o!==null)if(o.memoizedProps!==r.pendingProps)Ge=!0;else{if(!Vv(o,c)&&(r.flags&128)===0)return Ge=!1,zk(o,r,c);Ge=(o.flags&131072)!==0}else Ge=!1,Xt&&(r.flags&1048576)!==0&&pb(r,Zh,r.index);switch(r.lanes=0,r.tag){case 16:t:{var f=r.pendingProps;if(o=Xa(r.elementType),r.type=o,typeof o=="function")q0(o)?(f=Wa(o,f),r.tag=1,r=NC(null,r,o,f,c)):(r.tag=0,r=Dv(null,r,o,f,c));else{if(o!=null){var _=o.$$typeof;if(_===k){r.tag=11,r=bC(null,r,o,f,c);break t}else if(_===F){r.tag=14,r=CC(null,r,o,f,c);break t}}throw r=pt(o)||o,Error(n(306,r,""))}}return r;case 0:return Dv(o,r,r.type,r.pendingProps,c);case 1:return f=r.type,_=Wa(f,r.pendingProps),NC(o,r,f,_,c);case 3:t:{if(Se(r,r.stateNode.containerInfo),o===null)throw Error(n(387));f=r.pendingProps;var S=r.memoizedState;_=S.element,ov(o,r),rd(r,f,null,c);var b=r.memoizedState;if(f=b.cache,xr(r,He,f),f!==S.cache&&j0(r,[He],c,!0),od(),f=b.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=S,r.memoizedState=S,r.flags&256){r=DC(o,r,f,c);break t}else if(f!==_){_=Xi(Error(n(424)),r),jh(_),r=DC(o,r,f,c);break t}else{switch(o=r.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ye=Qi(o.firstChild),mn=r,Xt=!0,Cr=null,Ji=!0,c=xb(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ga(),f===_){r=wo(o,r,c);break t}yn(o,r,f,c)}r=r.child}return r;case 26:return Fm(o,r),o===null?(c=$w(r.type,null,r.pendingProps,null))?r.memoizedState=c:Xt||(c=r.type,o=r.pendingProps,f=eg(St.current).createElement(c),f[pn]=r,f[ei]=o,vn(f,c,o),on(f),r.stateNode=f):r.memoizedState=$w(r.type,o.memoizedProps,r.pendingProps,o.memoizedState),null;case 27:return go(r),o===null&&Xt&&(f=r.stateNode=qw(r.type,r.pendingProps,St.current),mn=r,Ji=!0,_=ye,Hr(r.type)?(vA=_,ye=Qi(f.firstChild)):ye=_),yn(o,r,r.pendingProps.children,c),Fm(o,r),o===null&&(r.flags|=4194304),r.child;case 5:return o===null&&Xt&&((_=f=ye)&&(f=A2(f,r.type,r.pendingProps,Ji),f!==null?(r.stateNode=f,mn=r,ye=Qi(f.firstChild),Ji=!1,_=!0):_=!1),_||wr(r)),go(r),_=r.type,S=r.pendingProps,b=o!==null?o.memoizedProps:null,f=S.children,fA(_,S)?f=null:b!==null&&fA(_,b)&&(r.flags|=32),r.memoizedState!==null&&(_=dv(o,r,Lk,null,null,c),wd._currentValue=_),Fm(o,r),yn(o,r,f,c),r.child;case 6:return o===null&&Xt&&((o=c=ye)&&(c=_2(c,r.pendingProps,Ji),c!==null?(r.stateNode=c,mn=r,ye=null,o=!0):o=!1),o||wr(r)),null;case 13:return PC(o,r,c);case 4:return Se(r,r.stateNode.containerInfo),f=r.pendingProps,o===null?r.child=Ka(r,null,f,c):yn(o,r,f,c),r.child;case 11:return bC(o,r,r.type,r.pendingProps,c);case 7:return yn(o,r,r.pendingProps,c),r.child;case 8:return yn(o,r,r.pendingProps.children,c),r.child;case 12:return yn(o,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,xr(r,r.type,f.value),yn(o,r,f.children,c),r.child;case 9:return _=r.type._context,f=r.pendingProps.children,qa(r),_=gn(_),f=f(_),r.flags|=1,yn(o,r,f,c),r.child;case 14:return CC(o,r,r.type,r.pendingProps,c);case 15:return wC(o,r,r.type,r.pendingProps,c);case 19:return kC(o,r,c);case 31:return Gk(o,r,c);case 22:return xC(o,r,c,r.pendingProps);case 24:return qa(r),f=gn(He),o===null?(_=nv(),_===null&&(_=de,S=tv(),_.pooledCache=S,S.refCount++,S!==null&&(_.pooledCacheLanes|=c),_=S),r.memoizedState={parent:f,cache:_},sv(r),xr(r,He,_)):((o.lanes&c)!==0&&(ov(o,r),rd(r,null,null,c),od()),_=o.memoizedState,S=r.memoizedState,_.parent!==f?(_={parent:f,cache:f},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),xr(r,He,f)):(f=S.cache,xr(r,He,f),f!==_.cache&&j0(r,[He],c,!0))),yn(o,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function xo(o){o.flags|=4}function Hv(o,r,c,f,_){if((r=(o.mode&32)!==0)&&(r=!1),r){if(o.flags|=16777216,(_&335544128)===_)if(o.stateNode.complete)o.flags|=8192;else if(uw())o.flags|=8192;else throw $a=Em,iv}else o.flags&=-16777217}function OC(o,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Zw(r))if(uw())o.flags|=8192;else throw $a=Em,iv}function Hm(o,r){r!==null&&(o.flags|=4),o.flags&16384&&(r=o.tag!==22?gE():536870912,o.lanes|=r,Wu|=r)}function dd(o,r){if(!Xt)switch(o.tailMode){case"hidden":r=o.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function ve(o){var r=o.alternate!==null&&o.alternate.child===o.child,c=0,f=0;if(r)for(var _=o.child;_!==null;)c|=_.lanes|_.childLanes,f|=_.subtreeFlags&65011712,f|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)c|=_.lanes|_.childLanes,f|=_.subtreeFlags,f|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=f,o.childLanes=c,r}function qk(o,r,c){var f=r.pendingProps;switch(K0(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(r),null;case 1:return ve(r),null;case 3:return c=r.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Eo(He),pe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Ou(r)?xo(r):o===null||o.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,W0())),ve(r),null;case 26:var _=r.type,S=r.memoizedState;return o===null?(xo(r),S!==null?(ve(r),OC(r,S)):(ve(r),Hv(r,_,null,f,c))):S?S!==o.memoizedState?(xo(r),ve(r),OC(r,S)):(ve(r),r.flags&=-16777217):(o=o.memoizedProps,o!==f&&xo(r),ve(r),Hv(r,_,o,f,c)),null;case 27:if(_u(r),c=St.current,_=r.type,o!==null&&r.stateNode!=null)o.memoizedProps!==f&&xo(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return ve(r),null}o=lt.current,Ou(r)?gb(r):(o=qw(_,f,c),r.stateNode=o,xo(r))}return ve(r),null;case 5:if(_u(r),_=r.type,o!==null&&r.stateNode!=null)o.memoizedProps!==f&&xo(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return ve(r),null}if(S=lt.current,Ou(r))gb(r);else{var b=eg(St.current);switch(S){case 1:S=b.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:S=b.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":S=b.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":S=b.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":S=b.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof f.is=="string"?b.createElement("select",{is:f.is}):b.createElement("select"),f.multiple?S.multiple=!0:f.size&&(S.size=f.size);break;default:S=typeof f.is=="string"?b.createElement(_,{is:f.is}):b.createElement(_)}}S[pn]=r,S[ei]=f;t:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)S.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break t;for(;b.sibling===null;){if(b.return===null||b.return===r)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=S;t:switch(vn(S,_,f),_){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&xo(r)}}return ve(r),Hv(r,r.type,o===null?null:o.memoizedProps,r.pendingProps,c),null;case 6:if(o&&r.stateNode!=null)o.memoizedProps!==f&&xo(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(n(166));if(o=St.current,Ou(r)){if(o=r.stateNode,c=r.memoizedProps,f=null,_=mn,_!==null)switch(_.tag){case 27:case 5:f=_.memoizedProps}o[pn]=r,o=!!(o.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Pw(o.nodeValue,c)),o||wr(r,!0)}else o=eg(o).createTextNode(f),o[pn]=r,r.stateNode=o}return ve(r),null;case 31:if(c=r.memoizedState,o===null||o.memoizedState!==null){if(f=Ou(r),c!==null){if(o===null){if(!f)throw Error(n(318));if(o=r.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[pn]=r}else Ga(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ve(r),o=!1}else c=W0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return r.flags&256?(Ti(r),r):(Ti(r),null);if((r.flags&128)!==0)throw Error(n(558))}return ve(r),null;case 13:if(f=r.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=Ou(r),f!==null&&f.dehydrated!==null){if(o===null){if(!_)throw Error(n(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[pn]=r}else Ga(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ve(r),_=!1}else _=W0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(Ti(r),r):(Ti(r),null)}return Ti(r),(r.flags&128)!==0?(r.lanes=c,r):(c=f!==null,o=o!==null&&o.memoizedState!==null,c&&(f=r.child,_=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(_=f.alternate.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==_&&(f.flags|=2048)),c!==o&&c&&(r.child.flags|=8192),Hm(r,r.updateQueue),ve(r),null);case 4:return pe(),o===null&&lA(r.stateNode.containerInfo),ve(r),null;case 10:return Eo(r.type),ve(r),null;case 19:if(Q(ke),f=r.memoizedState,f===null)return ve(r),null;if(_=(r.flags&128)!==0,S=f.rendering,S===null)if(_)dd(f,!1);else{if(De!==0||o!==null&&(o.flags&128)!==0)for(o=r.child;o!==null;){if(S=xm(o),S!==null){for(r.flags|=128,dd(f,!1),o=S.updateQueue,r.updateQueue=o,Hm(r,o),r.subtreeFlags=0,o=c,c=r.child;c!==null;)hb(c,o),c=c.sibling;return it(ke,ke.current&1|2),Xt&&So(r,f.treeForkCount),r.child}o=o.sibling}f.tail!==null&&gi()>Ym&&(r.flags|=128,_=!0,dd(f,!1),r.lanes=4194304)}else{if(!_)if(o=xm(S),o!==null){if(r.flags|=128,_=!0,o=o.updateQueue,r.updateQueue=o,Hm(r,o),dd(f,!0),f.tail===null&&f.tailMode==="hidden"&&!S.alternate&&!Xt)return ve(r),null}else 2*gi()-f.renderingStartTime>Ym&&c!==536870912&&(r.flags|=128,_=!0,dd(f,!1),r.lanes=4194304);f.isBackwards?(S.sibling=r.child,r.child=S):(o=f.last,o!==null?o.sibling=S:r.child=S,f.last=S)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=gi(),o.sibling=null,c=ke.current,it(ke,_?c&1|2:c&1),Xt&&So(r,f.treeForkCount),o):(ve(r),null);case 22:case 23:return Ti(r),uv(),f=r.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(ve(r),r.subtreeFlags&6&&(r.flags|=8192)):ve(r),c=r.updateQueue,c!==null&&Hm(r,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),o!==null&&Q(Ya),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Eo(He),ve(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function Yk(o,r){switch(K0(r),r.tag){case 1:return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 3:return Eo(He),pe(),o=r.flags,(o&65536)!==0&&(o&128)===0?(r.flags=o&-65537|128,r):null;case 26:case 27:case 5:return _u(r),null;case 31:if(r.memoizedState!==null){if(Ti(r),r.alternate===null)throw Error(n(340));Ga()}return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 13:if(Ti(r),o=r.memoizedState,o!==null&&o.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ga()}return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 19:return Q(ke),null;case 4:return pe(),null;case 10:return Eo(r.type),null;case 22:case 23:return Ti(r),uv(),o!==null&&Q(Ya),o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 24:return Eo(He),null;case 25:return null;default:return null}}function FC(o,r){switch(K0(r),r.tag){case 3:Eo(He),pe();break;case 26:case 27:case 5:_u(r);break;case 4:pe();break;case 31:r.memoizedState!==null&&Ti(r);break;case 13:Ti(r);break;case 19:Q(ke);break;case 10:Eo(r.type);break;case 22:case 23:Ti(r),uv(),o!==null&&Q(Ya);break;case 24:Eo(He)}}function fd(o,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var _=f.next;c=_;do{if((c.tag&o)===o){f=void 0;var S=c.create,b=c.inst;f=S(),b.destroy=f}c=c.next}while(c!==_)}}catch(N){ie(r,r.return,N)}}function Pr(o,r,c){try{var f=r.updateQueue,_=f!==null?f.lastEffect:null;if(_!==null){var S=_.next;f=S;do{if((f.tag&o)===o){var b=f.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,_=r;var U=c,Y=N;try{Y()}catch(Z){ie(_,U,Z)}}}f=f.next}while(f!==S)}}catch(Z){ie(r,r.return,Z)}}function VC(o){var r=o.updateQueue;if(r!==null){var c=o.stateNode;try{Mb(r,c)}catch(f){ie(o,o.return,f)}}}function HC(o,r,c){c.props=Wa(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(f){ie(o,r,f)}}function pd(o,r){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof c=="function"?o.refCleanup=c(f):c.current=f}}catch(_){ie(o,r,_)}}function qs(o,r){var c=o.ref,f=o.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(_){ie(o,r,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){ie(o,r,_)}else c.current=null}function BC(o){var r=o.type,c=o.memoizedProps,f=o.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break t;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(_){ie(o,o.return,_)}}function Bv(o,r,c){try{var f=o.stateNode;f2(f,o.type,c,r),f[ei]=r}catch(_){ie(o,o.return,_)}}function GC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Hr(o.type)||o.tag===4}function Gv(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||GC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Hr(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zv(o,r,c){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(o),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=vo));else if(f!==4&&(f===27&&Hr(o.type)&&(c=o.stateNode,r=null),o=o.child,o!==null))for(zv(o,r,c),o=o.sibling;o!==null;)zv(o,r,c),o=o.sibling}function Bm(o,r,c){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?c.insertBefore(o,r):c.appendChild(o);else if(f!==4&&(f===27&&Hr(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Bm(o,r,c),o=o.sibling;o!==null;)Bm(o,r,c),o=o.sibling}function zC(o){var r=o.stateNode,c=o.memoizedProps;try{for(var f=o.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);vn(r,f,c),r[pn]=o,r[ei]=c}catch(S){ie(o,o.return,S)}}var Ro=!1,ze=!1,qv=!1,qC=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Xk(o,r){if(o=o.containerInfo,hA=lg,o=nb(o),O0(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else t:{c=(c=o.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var _=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break t}var b=0,N=-1,U=-1,Y=0,Z=0,tt=o,K=null;e:for(;;){for(var W;tt!==c||_!==0&&tt.nodeType!==3||(N=b+_),tt!==S||f!==0&&tt.nodeType!==3||(U=b+f),tt.nodeType===3&&(b+=tt.nodeValue.length),(W=tt.firstChild)!==null;)K=tt,tt=W;for(;;){if(tt===o)break e;if(K===c&&++Y===_&&(N=b),K===S&&++Z===f&&(U=b),(W=tt.nextSibling)!==null)break;tt=K,K=tt.parentNode}tt=W}c=N===-1||U===-1?null:{start:N,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(dA={focusedElem:o,selectionRange:c},lg=!1,rn=r;rn!==null;)if(r=rn,o=r.child,(r.subtreeFlags&1028)!==0&&o!==null)o.return=r,rn=o;else for(;rn!==null;){switch(r=rn,S=r.alternate,o=r.flags,r.tag){case 0:if((o&4)!==0&&(o=r.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)_=o[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,c=r,_=S.memoizedProps,S=S.memoizedState,f=c.stateNode;try{var ht=Wa(c.type,_);o=f.getSnapshotBeforeUpdate(ht,S),f.__reactInternalSnapshotBeforeUpdate=o}catch(bt){ie(c,c.return,bt)}}break;case 3:if((o&1024)!==0){if(o=r.stateNode.containerInfo,c=o.nodeType,c===9)mA(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":mA(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=r.sibling,o!==null){o.return=r.return,rn=o;break}rn=r.return}}function YC(o,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Io(o,c),f&4&&fd(5,c);break;case 1:if(Io(o,c),f&4)if(o=c.stateNode,r===null)try{o.componentDidMount()}catch(b){ie(c,c.return,b)}else{var _=Wa(c.type,r.memoizedProps);r=r.memoizedState;try{o.componentDidUpdate(_,r,o.__reactInternalSnapshotBeforeUpdate)}catch(b){ie(c,c.return,b)}}f&64&&VC(c),f&512&&pd(c,c.return);break;case 3:if(Io(o,c),f&64&&(o=c.updateQueue,o!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Mb(o,r)}catch(b){ie(c,c.return,b)}}break;case 27:r===null&&f&4&&zC(c);case 26:case 5:Io(o,c),r===null&&f&4&&BC(c),f&512&&pd(c,c.return);break;case 12:Io(o,c);break;case 31:Io(o,c),f&4&&KC(o,c);break;case 13:Io(o,c),f&4&&JC(o,c),f&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=e2.bind(null,c),S2(o,c))));break;case 22:if(f=c.memoizedState!==null||Ro,!f){r=r!==null&&r.memoizedState!==null||ze,_=Ro;var S=ze;Ro=f,(ze=r)&&!S?No(o,c,(c.subtreeFlags&8772)!==0):Io(o,c),Ro=_,ze=S}break;case 30:break;default:Io(o,c)}}function XC(o){var r=o.alternate;r!==null&&(o.alternate=null,XC(r)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(r=o.stateNode,r!==null&&_0(r)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Te=null,ii=!1;function Mo(o,r,c){for(c=c.child;c!==null;)$C(o,r,c),c=c.sibling}function $C(o,r,c){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(Fh,c)}catch{}switch(c.tag){case 26:ze||qs(c,r),Mo(o,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ze||qs(c,r);var f=Te,_=ii;Hr(c.type)&&(Te=c.stateNode,ii=!1),Mo(o,r,c),Ed(c.stateNode),Te=f,ii=_;break;case 5:ze||qs(c,r);case 6:if(f=Te,_=ii,Te=null,Mo(o,r,c),Te=f,ii=_,Te!==null)if(ii)try{(Te.nodeType===9?Te.body:Te.nodeName==="HTML"?Te.ownerDocument.body:Te).removeChild(c.stateNode)}catch(S){ie(c,r,S)}else try{Te.removeChild(c.stateNode)}catch(S){ie(c,r,S)}break;case 18:Te!==null&&(ii?(o=Te,Vw(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),sc(o)):Vw(Te,c.stateNode));break;case 4:f=Te,_=ii,Te=c.stateNode.containerInfo,ii=!0,Mo(o,r,c),Te=f,ii=_;break;case 0:case 11:case 14:case 15:Pr(2,c,r),ze||Pr(4,c,r),Mo(o,r,c);break;case 1:ze||(qs(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&HC(c,r,f)),Mo(o,r,c);break;case 21:Mo(o,r,c);break;case 22:ze=(f=ze)||c.memoizedState!==null,Mo(o,r,c),ze=f;break;default:Mo(o,r,c)}}function KC(o,r){if(r.memoizedState===null&&(o=r.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{sc(o)}catch(c){ie(r,r.return,c)}}}function JC(o,r){if(r.memoizedState===null&&(o=r.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{sc(o)}catch(c){ie(r,r.return,c)}}function $k(o){switch(o.tag){case 31:case 13:case 19:var r=o.stateNode;return r===null&&(r=o.stateNode=new qC),r;case 22:return o=o.stateNode,r=o._retryCache,r===null&&(r=o._retryCache=new qC),r;default:throw Error(n(435,o.tag))}}function Gm(o,r){var c=$k(o);r.forEach(function(f){if(!c.has(f)){c.add(f);var _=n2.bind(null,o,f);f.then(_,_)}})}function si(o,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var _=c[f],S=o,b=r,N=b;t:for(;N!==null;){switch(N.tag){case 27:if(Hr(N.type)){Te=N.stateNode,ii=!1;break t}break;case 5:Te=N.stateNode,ii=!1;break t;case 3:case 4:Te=N.stateNode.containerInfo,ii=!0;break t}N=N.return}if(Te===null)throw Error(n(160));$C(S,b,_),Te=null,ii=!1,S=_.alternate,S!==null&&(S.return=null),_.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)WC(r,o),r=r.sibling}var ys=null;function WC(o,r){var c=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:si(r,o),oi(o),f&4&&(Pr(3,o,o.return),fd(3,o),Pr(5,o,o.return));break;case 1:si(r,o),oi(o),f&512&&(ze||c===null||qs(c,c.return)),f&64&&Ro&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var _=ys;if(si(r,o),oi(o),f&512&&(ze||c===null||qs(c,c.return)),f&4){var S=c!==null?c.memoizedState:null;if(f=o.memoizedState,c===null)if(f===null)if(o.stateNode===null){t:{f=o.type,c=o.memoizedProps,_=_.ownerDocument||_;e:switch(f){case"title":S=_.getElementsByTagName("title")[0],(!S||S[Bh]||S[pn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=_.createElement(f),_.head.insertBefore(S,_.querySelector("head > title"))),vn(S,f,c),S[pn]=o,on(S),f=S;break t;case"link":var b=Ww("link","href",_).get(f+(c.href||""));if(b){for(var N=0;N<b.length;N++)if(S=b[N],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){b.splice(N,1);break e}}S=_.createElement(f),vn(S,f,c),_.head.appendChild(S);break;case"meta":if(b=Ww("meta","content",_).get(f+(c.content||""))){for(N=0;N<b.length;N++)if(S=b[N],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){b.splice(N,1);break e}}S=_.createElement(f),vn(S,f,c),_.head.appendChild(S);break;default:throw Error(n(468,f))}S[pn]=o,on(S),f=S}o.stateNode=f}else Qw(_,o.type,o.stateNode);else o.stateNode=Jw(_,f,o.memoizedProps);else S!==f?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,f===null?Qw(_,o.type,o.stateNode):Jw(_,f,o.memoizedProps)):f===null&&o.stateNode!==null&&Bv(o,o.memoizedProps,c.memoizedProps)}break;case 27:si(r,o),oi(o),f&512&&(ze||c===null||qs(c,c.return)),c!==null&&f&4&&Bv(o,o.memoizedProps,c.memoizedProps);break;case 5:if(si(r,o),oi(o),f&512&&(ze||c===null||qs(c,c.return)),o.flags&32){_=o.stateNode;try{xu(_,"")}catch(ht){ie(o,o.return,ht)}}f&4&&o.stateNode!=null&&(_=o.memoizedProps,Bv(o,_,c!==null?c.memoizedProps:_)),f&1024&&(qv=!0);break;case 6:if(si(r,o),oi(o),f&4){if(o.stateNode===null)throw Error(n(162));f=o.memoizedProps,c=o.stateNode;try{c.nodeValue=f}catch(ht){ie(o,o.return,ht)}}break;case 3:if(sg=null,_=ys,ys=ng(r.containerInfo),si(r,o),ys=_,oi(o),f&4&&c!==null&&c.memoizedState.isDehydrated)try{sc(r.containerInfo)}catch(ht){ie(o,o.return,ht)}qv&&(qv=!1,QC(o));break;case 4:f=ys,ys=ng(o.stateNode.containerInfo),si(r,o),oi(o),ys=f;break;case 12:si(r,o),oi(o);break;case 31:si(r,o),oi(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Gm(o,f)));break;case 13:si(r,o),oi(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(qm=gi()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Gm(o,f)));break;case 22:_=o.memoizedState!==null;var U=c!==null&&c.memoizedState!==null,Y=Ro,Z=ze;if(Ro=Y||_,ze=Z||U,si(r,o),ze=Z,Ro=Y,oi(o),f&8192)t:for(r=o.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(c===null||U||Ro||ze||Qa(o)),c=null,r=o;;){if(r.tag===5||r.tag===26){if(c===null){U=c=r;try{if(S=U.stateNode,_)b=S.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=U.stateNode;var tt=U.memoizedProps.style,K=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;N.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ht){ie(U,U.return,ht)}}}else if(r.tag===6){if(c===null){U=r;try{U.stateNode.nodeValue=_?"":U.memoizedProps}catch(ht){ie(U,U.return,ht)}}}else if(r.tag===18){if(c===null){U=r;try{var W=U.stateNode;_?Hw(W,!0):Hw(U.stateNode,!1)}catch(ht){ie(U,U.return,ht)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===o)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=o.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Gm(o,c))));break;case 19:si(r,o),oi(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Gm(o,f)));break;case 30:break;case 21:break;default:si(r,o),oi(o)}}function oi(o){var r=o.flags;if(r&2){try{for(var c,f=o.return;f!==null;){if(GC(f)){c=f;break}f=f.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var _=c.stateNode,S=Gv(o);Bm(o,S,_);break;case 5:var b=c.stateNode;c.flags&32&&(xu(b,""),c.flags&=-33);var N=Gv(o);Bm(o,N,b);break;case 3:case 4:var U=c.stateNode.containerInfo,Y=Gv(o);zv(o,Y,U);break;default:throw Error(n(161))}}catch(Z){ie(o,o.return,Z)}o.flags&=-3}r&4096&&(o.flags&=-4097)}function QC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var r=o;QC(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),o=o.sibling}}function Io(o,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)YC(o,r.alternate,r),r=r.sibling}function Qa(o){for(o=o.child;o!==null;){var r=o;switch(r.tag){case 0:case 11:case 14:case 15:Pr(4,r,r.return),Qa(r);break;case 1:qs(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&HC(r,r.return,c),Qa(r);break;case 27:Ed(r.stateNode);case 26:case 5:qs(r,r.return),Qa(r);break;case 22:r.memoizedState===null&&Qa(r);break;case 30:Qa(r);break;default:Qa(r)}o=o.sibling}}function No(o,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,_=o,S=r,b=S.flags;switch(S.tag){case 0:case 11:case 15:No(_,S,c),fd(4,S);break;case 1:if(No(_,S,c),f=S,_=f.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Y){ie(f,f.return,Y)}if(f=S,_=f.updateQueue,_!==null){var N=f.stateNode;try{var U=_.shared.hiddenCallbacks;if(U!==null)for(_.shared.hiddenCallbacks=null,_=0;_<U.length;_++)Rb(U[_],N)}catch(Y){ie(f,f.return,Y)}}c&&b&64&&VC(S),pd(S,S.return);break;case 27:zC(S);case 26:case 5:No(_,S,c),c&&f===null&&b&4&&BC(S),pd(S,S.return);break;case 12:No(_,S,c);break;case 31:No(_,S,c),c&&b&4&&KC(_,S);break;case 13:No(_,S,c),c&&b&4&&JC(_,S);break;case 22:S.memoizedState===null&&No(_,S,c),pd(S,S.return);break;case 30:break;default:No(_,S,c)}r=r.sibling}}function Yv(o,r){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&td(c))}function Xv(o,r){o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&td(o))}function vs(o,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ZC(o,r,c,f),r=r.sibling}function ZC(o,r,c,f){var _=r.flags;switch(r.tag){case 0:case 11:case 15:vs(o,r,c,f),_&2048&&fd(9,r);break;case 1:vs(o,r,c,f);break;case 3:vs(o,r,c,f),_&2048&&(o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&td(o)));break;case 12:if(_&2048){vs(o,r,c,f),o=r.stateNode;try{var S=r.memoizedProps,b=S.id,N=S.onPostCommit;typeof N=="function"&&N(b,r.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){ie(r,r.return,U)}}else vs(o,r,c,f);break;case 31:vs(o,r,c,f);break;case 13:vs(o,r,c,f);break;case 23:break;case 22:S=r.stateNode,b=r.alternate,r.memoizedState!==null?S._visibility&2?vs(o,r,c,f):md(o,r):S._visibility&2?vs(o,r,c,f):(S._visibility|=2,$u(o,r,c,f,(r.subtreeFlags&10256)!==0||!1)),_&2048&&Yv(b,r);break;case 24:vs(o,r,c,f),_&2048&&Xv(r.alternate,r);break;default:vs(o,r,c,f)}}function $u(o,r,c,f,_){for(_=_&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var S=o,b=r,N=c,U=f,Y=b.flags;switch(b.tag){case 0:case 11:case 15:$u(S,b,N,U,_),fd(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?$u(S,b,N,U,_):md(S,b):(Z._visibility|=2,$u(S,b,N,U,_)),_&&Y&2048&&Yv(b.alternate,b);break;case 24:$u(S,b,N,U,_),_&&Y&2048&&Xv(b.alternate,b);break;default:$u(S,b,N,U,_)}r=r.sibling}}function md(o,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=o,f=r,_=f.flags;switch(f.tag){case 22:md(c,f),_&2048&&Yv(f.alternate,f);break;case 24:md(c,f),_&2048&&Xv(f.alternate,f);break;default:md(c,f)}r=r.sibling}}var gd=8192;function Ku(o,r,c){if(o.subtreeFlags&gd)for(o=o.child;o!==null;)jC(o,r,c),o=o.sibling}function jC(o,r,c){switch(o.tag){case 26:Ku(o,r,c),o.flags&gd&&o.memoizedState!==null&&P2(c,ys,o.memoizedState,o.memoizedProps);break;case 5:Ku(o,r,c);break;case 3:case 4:var f=ys;ys=ng(o.stateNode.containerInfo),Ku(o,r,c),ys=f;break;case 22:o.memoizedState===null&&(f=o.alternate,f!==null&&f.memoizedState!==null?(f=gd,gd=16777216,Ku(o,r,c),gd=f):Ku(o,r,c));break;default:Ku(o,r,c)}}function tw(o){var r=o.alternate;if(r!==null&&(o=r.child,o!==null)){r.child=null;do r=o.sibling,o.sibling=null,o=r;while(o!==null)}}function yd(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];rn=f,nw(f,o)}tw(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ew(o),o=o.sibling}function ew(o){switch(o.tag){case 0:case 11:case 15:yd(o),o.flags&2048&&Pr(9,o,o.return);break;case 3:yd(o);break;case 12:yd(o);break;case 22:var r=o.stateNode;o.memoizedState!==null&&r._visibility&2&&(o.return===null||o.return.tag!==13)?(r._visibility&=-3,zm(o)):yd(o);break;default:yd(o)}}function zm(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];rn=f,nw(f,o)}tw(o)}for(o=o.child;o!==null;){switch(r=o,r.tag){case 0:case 11:case 15:Pr(8,r,r.return),zm(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,zm(r));break;default:zm(r)}o=o.sibling}}function nw(o,r){for(;rn!==null;){var c=rn;switch(c.tag){case 0:case 11:case 15:Pr(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:td(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,rn=f;else t:for(c=o;rn!==null;){f=rn;var _=f.sibling,S=f.return;if(XC(f),f===c){rn=null;break t}if(_!==null){_.return=S,rn=_;break t}rn=S}}}var Kk={getCacheForType:function(o){var r=gn(He),c=r.data.get(o);return c===void 0&&(c=o(),r.data.set(o,c)),c},cacheSignal:function(){return gn(He).controller.signal}},Jk=typeof WeakMap=="function"?WeakMap:Map,te=0,de=null,Gt=null,qt=0,ne=0,Ei=null,Lr=!1,Ju=!1,$v=!1,Do=0,De=0,kr=0,Za=0,Kv=0,bi=0,Wu=0,vd=null,ri=null,Jv=!1,qm=0,iw=0,Ym=1/0,Xm=null,Ur=null,We=0,Or=null,Qu=null,Po=0,Wv=0,Qv=null,sw=null,Ad=0,Zv=null;function Ci(){return(te&2)!==0&&qt!==0?qt&-qt:B.T!==null?sA():_E()}function ow(){if(bi===0)if((qt&536870912)===0||Xt){var o=tm;tm<<=1,(tm&3932160)===0&&(tm=262144),bi=o}else bi=536870912;return o=Si.current,o!==null&&(o.flags|=32),bi}function ai(o,r,c){(o===de&&(ne===2||ne===9)||o.cancelPendingCommit!==null)&&(Zu(o,0),Fr(o,qt,bi,!1)),Hh(o,c),((te&2)===0||o!==de)&&(o===de&&((te&2)===0&&(Za|=c),De===4&&Fr(o,qt,bi,!1)),Ys(o))}function rw(o,r,c){if((te&6)!==0)throw Error(n(327));var f=!c&&(r&127)===0&&(r&o.expiredLanes)===0||Vh(o,r),_=f?Zk(o,r):tA(o,r,!0),S=f;do{if(_===0){Ju&&!f&&Fr(o,r,0,!1);break}else{if(c=o.current.alternate,S&&!Wk(c)){_=tA(o,r,!1),S=!1;continue}if(_===2){if(S=r,o.errorRecoveryDisabledLanes&S)var b=0;else b=o.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;t:{var N=o;_=vd;var U=N.current.memoizedState.isDehydrated;if(U&&(Zu(N,b).flags|=256),b=tA(N,b,!1),b!==2){if($v&&!U){N.errorRecoveryDisabledLanes|=S,Za|=S,_=4;break t}S=ri,ri=_,S!==null&&(ri===null?ri=S:ri.push.apply(ri,S))}_=b}if(S=!1,_!==2)continue}}if(_===1){Zu(o,0),Fr(o,r,0,!0);break}t:{switch(f=o,S=_,S){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Fr(f,r,bi,!Lr);break t;case 2:ri=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(_=qm+300-gi(),10<_)){if(Fr(f,r,bi,!Lr),nm(f,0,!0)!==0)break t;Po=r,f.timeoutHandle=Ow(aw.bind(null,f,c,ri,Xm,Jv,r,bi,Za,Wu,Lr,S,"Throttled",-0,0),_);break t}aw(f,c,ri,Xm,Jv,r,bi,Za,Wu,Lr,S,null,-0,0)}}break}while(!0);Ys(o)}function aw(o,r,c,f,_,S,b,N,U,Y,Z,tt,K,W){if(o.timeoutHandle=-1,tt=r.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vo},jC(r,S,tt);var ht=(S&62914560)===S?qm-gi():(S&4194048)===S?iw-gi():0;if(ht=L2(tt,ht),ht!==null){Po=S,o.cancelPendingCommit=ht(mw.bind(null,o,r,S,c,f,_,b,N,U,Z,tt,null,K,W)),Fr(o,S,b,!Y);return}}mw(o,r,S,c,f,_,b,N,U)}function Wk(o){for(var r=o;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var _=c[f],S=_.getSnapshot;_=_.value;try{if(!Ai(S(),_))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fr(o,r,c,f){r&=~Kv,r&=~Za,o.suspendedLanes|=r,o.pingedLanes&=~r,f&&(o.warmLanes|=r),f=o.expirationTimes;for(var _=r;0<_;){var S=31-vi(_),b=1<<S;f[S]=-1,_&=~b}c!==0&&yE(o,c,r)}function $m(){return(te&6)===0?(_d(0),!1):!0}function jv(){if(Gt!==null){if(ne===0)var o=Gt.return;else o=Gt,To=za=null,mv(o),Gu=null,nd=0,o=Gt;for(;o!==null;)FC(o.alternate,o),o=o.return;Gt=null}}function Zu(o,r){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,g2(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),Po=0,jv(),de=o,Gt=c=_o(o.current,null),qt=r,ne=0,Ei=null,Lr=!1,Ju=Vh(o,r),$v=!1,Wu=bi=Kv=Za=kr=De=0,ri=vd=null,Jv=!1,(r&8)!==0&&(r|=r&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=r;0<f;){var _=31-vi(f),S=1<<_;r|=o[_],f&=~S}return Do=r,pm(),c}function lw(o,r){Pt=null,B.H=cd,r===Bu||r===Tm?(r=bb(),ne=3):r===iv?(r=bb(),ne=4):ne=r===Nv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ei=r,Gt===null&&(De=1,Um(o,Xi(r,o.current)))}function uw(){var o=Si.current;return o===null?!0:(qt&4194048)===qt?Wi===null:(qt&62914560)===qt||(qt&536870912)!==0?o===Wi:!1}function cw(){var o=B.H;return B.H=cd,o===null?cd:o}function hw(){var o=B.A;return B.A=Kk,o}function Km(){De=4,Lr||(qt&4194048)!==qt&&Si.current!==null||(Ju=!0),(kr&134217727)===0&&(Za&134217727)===0||de===null||Fr(de,qt,bi,!1)}function tA(o,r,c){var f=te;te|=2;var _=cw(),S=hw();(de!==o||qt!==r)&&(Xm=null,Zu(o,r)),r=!1;var b=De;t:do try{if(ne!==0&&Gt!==null){var N=Gt,U=Ei;switch(ne){case 8:jv(),b=6;break t;case 3:case 2:case 9:case 6:Si.current===null&&(r=!0);var Y=ne;if(ne=0,Ei=null,ju(o,N,U,Y),c&&Ju){b=0;break t}break;default:Y=ne,ne=0,Ei=null,ju(o,N,U,Y)}}Qk(),b=De;break}catch(Z){lw(o,Z)}while(!0);return r&&o.shellSuspendCounter++,To=za=null,te=f,B.H=_,B.A=S,Gt===null&&(de=null,qt=0,pm()),b}function Qk(){for(;Gt!==null;)dw(Gt)}function Zk(o,r){var c=te;te|=2;var f=cw(),_=hw();de!==o||qt!==r?(Xm=null,Ym=gi()+500,Zu(o,r)):Ju=Vh(o,r);t:do try{if(ne!==0&&Gt!==null){r=Gt;var S=Ei;e:switch(ne){case 1:ne=0,Ei=null,ju(o,r,S,1);break;case 2:case 9:if(Tb(S)){ne=0,Ei=null,fw(r);break}r=function(){ne!==2&&ne!==9||de!==o||(ne=7),Ys(o)},S.then(r,r);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:Tb(S)?(ne=0,Ei=null,fw(r)):(ne=0,Ei=null,ju(o,r,S,7));break;case 5:var b=null;switch(Gt.tag){case 26:b=Gt.memoizedState;case 5:case 27:var N=Gt;if(b?Zw(b):N.stateNode.complete){ne=0,Ei=null;var U=N.sibling;if(U!==null)Gt=U;else{var Y=N.return;Y!==null?(Gt=Y,Jm(Y)):Gt=null}break e}}ne=0,Ei=null,ju(o,r,S,5);break;case 6:ne=0,Ei=null,ju(o,r,S,6);break;case 8:jv(),De=6;break t;default:throw Error(n(462))}}jk();break}catch(Z){lw(o,Z)}while(!0);return To=za=null,B.H=f,B.A=_,te=c,Gt!==null?0:(de=null,qt=0,pm(),De)}function jk(){for(;Gt!==null&&!m0();)dw(Gt)}function dw(o){var r=UC(o.alternate,o,Do);o.memoizedProps=o.pendingProps,r===null?Jm(o):Gt=r}function fw(o){var r=o,c=r.alternate;switch(r.tag){case 15:case 0:r=IC(c,r,r.pendingProps,r.type,void 0,qt);break;case 11:r=IC(c,r,r.pendingProps,r.type.render,r.ref,qt);break;case 5:mv(r);default:FC(c,r),r=Gt=hb(r,Do),r=UC(c,r,Do)}o.memoizedProps=o.pendingProps,r===null?Jm(o):Gt=r}function ju(o,r,c,f){To=za=null,mv(r),Gu=null,nd=0;var _=r.return;try{if(Bk(o,_,r,c,qt)){De=1,Um(o,Xi(c,o.current)),Gt=null;return}}catch(S){if(_!==null)throw Gt=_,S;De=1,Um(o,Xi(c,o.current)),Gt=null;return}r.flags&32768?(Xt||f===1?o=!0:Ju||(qt&536870912)!==0?o=!1:(Lr=o=!0,(f===2||f===9||f===3||f===6)&&(f=Si.current,f!==null&&f.tag===13&&(f.flags|=16384))),pw(r,o)):Jm(r)}function Jm(o){var r=o;do{if((r.flags&32768)!==0){pw(r,Lr);return}o=r.return;var c=qk(r.alternate,r,Do);if(c!==null){Gt=c;return}if(r=r.sibling,r!==null){Gt=r;return}Gt=r=o}while(r!==null);De===0&&(De=5)}function pw(o,r){do{var c=Yk(o.alternate,o);if(c!==null){c.flags&=32767,Gt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(o=o.sibling,o!==null)){Gt=o;return}Gt=o=c}while(o!==null);De=6,Gt=null}function mw(o,r,c,f,_,S,b,N,U){o.cancelPendingCommit=null;do Wm();while(We!==0);if((te&6)!==0)throw Error(n(327));if(r!==null){if(r===o.current)throw Error(n(177));if(S=r.lanes|r.childLanes,S|=G0,DL(o,c,S,b,N,U),o===de&&(Gt=de=null,qt=0),Qu=r,Or=o,Po=c,Wv=S,Qv=_,sw=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,i2(Zp,function(){return _w(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,_=J.p,J.p=2,b=te,te|=4;try{Xk(o,r,c)}finally{te=b,J.p=_,B.T=f}}We=1,gw(),yw(),vw()}}function gw(){if(We===1){We=0;var o=Or,r=Qu,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=B.T,B.T=null;var f=J.p;J.p=2;var _=te;te|=4;try{WC(r,o);var S=dA,b=nb(o.containerInfo),N=S.focusedElem,U=S.selectionRange;if(b!==N&&N&&N.ownerDocument&&eb(N.ownerDocument.documentElement,N)){if(U!==null&&O0(N)){var Y=U.start,Z=U.end;if(Z===void 0&&(Z=Y),"selectionStart"in N)N.selectionStart=Y,N.selectionEnd=Math.min(Z,N.value.length);else{var tt=N.ownerDocument||document,K=tt&&tt.defaultView||window;if(K.getSelection){var W=K.getSelection(),ht=N.textContent.length,bt=Math.min(U.start,ht),ue=U.end===void 0?bt:Math.min(U.end,ht);!W.extend&&bt>ue&&(b=ue,ue=bt,bt=b);var z=tb(N,bt),H=tb(N,ue);if(z&&H&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==H.node||W.focusOffset!==H.offset)){var q=tt.createRange();q.setStart(z.node,z.offset),W.removeAllRanges(),bt>ue?(W.addRange(q),W.extend(H.node,H.offset)):(q.setEnd(H.node,H.offset),W.addRange(q))}}}}for(tt=[],W=N;W=W.parentNode;)W.nodeType===1&&tt.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<tt.length;N++){var j=tt[N];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}lg=!!hA,dA=hA=null}finally{te=_,J.p=f,B.T=c}}o.current=r,We=2}}function yw(){if(We===2){We=0;var o=Or,r=Qu,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=B.T,B.T=null;var f=J.p;J.p=2;var _=te;te|=4;try{YC(o,r.alternate,r)}finally{te=_,J.p=f,B.T=c}}We=3}}function vw(){if(We===4||We===3){We=0,EL();var o=Or,r=Qu,c=Po,f=sw;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?We=5:(We=0,Qu=Or=null,Aw(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(Ur=null),v0(c),r=r.stateNode,yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(Fh,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=B.T,_=J.p,J.p=2,B.T=null;try{for(var S=o.onRecoverableError,b=0;b<f.length;b++){var N=f[b];S(N.value,{componentStack:N.stack})}}finally{B.T=r,J.p=_}}(Po&3)!==0&&Wm(),Ys(o),_=o.pendingLanes,(c&261930)!==0&&(_&42)!==0?o===Zv?Ad++:(Ad=0,Zv=o):Ad=0,_d(0)}}function Aw(o,r){(o.pooledCacheLanes&=r)===0&&(r=o.pooledCache,r!=null&&(o.pooledCache=null,td(r)))}function Wm(){return gw(),yw(),vw(),_w()}function _w(){if(We!==5)return!1;var o=Or,r=Wv;Wv=0;var c=v0(Po),f=B.T,_=J.p;try{J.p=32>c?32:c,B.T=null,c=Qv,Qv=null;var S=Or,b=Po;if(We=0,Qu=Or=null,Po=0,(te&6)!==0)throw Error(n(331));var N=te;if(te|=4,ew(S.current),ZC(S,S.current,b,c),te=N,_d(0,!1),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(Fh,S)}catch{}return!0}finally{J.p=_,B.T=f,Aw(o,r)}}function Sw(o,r,c){r=Xi(c,r),r=Iv(o.stateNode,r,2),o=Ir(o,r,2),o!==null&&(Hh(o,2),Ys(o))}function ie(o,r,c){if(o.tag===3)Sw(o,o,c);else for(;r!==null;){if(r.tag===3){Sw(r,o,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ur===null||!Ur.has(f))){o=Xi(c,o),c=TC(2),f=Ir(r,c,2),f!==null&&(EC(c,f,r,o),Hh(f,2),Ys(f));break}}r=r.return}}function eA(o,r,c){var f=o.pingCache;if(f===null){f=o.pingCache=new Jk;var _=new Set;f.set(r,_)}else _=f.get(r),_===void 0&&(_=new Set,f.set(r,_));_.has(c)||($v=!0,_.add(c),o=t2.bind(null,o,r,c),r.then(o,o))}function t2(o,r,c){var f=o.pingCache;f!==null&&f.delete(r),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,de===o&&(qt&c)===c&&(De===4||De===3&&(qt&62914560)===qt&&300>gi()-qm?(te&2)===0&&Zu(o,0):Kv|=c,Wu===qt&&(Wu=0)),Ys(o)}function Tw(o,r){r===0&&(r=gE()),o=Ha(o,r),o!==null&&(Hh(o,r),Ys(o))}function e2(o){var r=o.memoizedState,c=0;r!==null&&(c=r.retryLane),Tw(o,c)}function n2(o,r){var c=0;switch(o.tag){case 31:case 13:var f=o.stateNode,_=o.memoizedState;_!==null&&(c=_.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(r),Tw(o,c)}function i2(o,r){return mi(o,r)}var Qm=null,tc=null,nA=!1,Zm=!1,iA=!1,Vr=0;function Ys(o){o!==tc&&o.next===null&&(tc===null?Qm=tc=o:tc=tc.next=o),Zm=!0,nA||(nA=!0,o2())}function _d(o,r){if(!iA&&Zm){iA=!0;do for(var c=!1,f=Qm;f!==null;){if(o!==0){var _=f.pendingLanes;if(_===0)var S=0;else{var b=f.suspendedLanes,N=f.pingedLanes;S=(1<<31-vi(42|o)+1)-1,S&=_&~(b&~N),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,ww(f,S))}else S=qt,S=nm(f,f===de?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(S&3)===0||Vh(f,S)||(c=!0,ww(f,S));f=f.next}while(c);iA=!1}}function s2(){Ew()}function Ew(){Zm=nA=!1;var o=0;Vr!==0&&m2()&&(o=Vr);for(var r=gi(),c=null,f=Qm;f!==null;){var _=f.next,S=bw(f,r);S===0?(f.next=null,c===null?Qm=_:c.next=_,_===null&&(tc=c)):(c=f,(o!==0||(S&3)!==0)&&(Zm=!0)),f=_}We!==0&&We!==5||_d(o),Vr!==0&&(Vr=0)}function bw(o,r){for(var c=o.suspendedLanes,f=o.pingedLanes,_=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var b=31-vi(S),N=1<<b,U=_[b];U===-1?((N&c)===0||(N&f)!==0)&&(_[b]=NL(N,r)):U<=r&&(o.expiredLanes|=N),S&=~N}if(r=de,c=qt,c=nm(o,o===r?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,c===0||o===r&&(ne===2||ne===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&ms(f),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||Vh(o,c)){if(r=c&-c,r===o.callbackPriority)return r;switch(f!==null&&ms(f),v0(c)){case 2:case 8:c=pE;break;case 32:c=Zp;break;case 268435456:c=mE;break;default:c=Zp}return f=Cw.bind(null,o),c=mi(c,f),o.callbackPriority=r,o.callbackNode=c,r}return f!==null&&f!==null&&ms(f),o.callbackPriority=2,o.callbackNode=null,2}function Cw(o,r){if(We!==0&&We!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Wm()&&o.callbackNode!==c)return null;var f=qt;return f=nm(o,o===de?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(rw(o,f,r),bw(o,gi()),o.callbackNode!=null&&o.callbackNode===c?Cw.bind(null,o):null)}function ww(o,r){if(Wm())return null;rw(o,r,!0)}function o2(){y2(function(){(te&6)!==0?mi(fE,s2):Ew()})}function sA(){if(Vr===0){var o=Vu;o===0&&(o=jp,jp<<=1,(jp&261888)===0&&(jp=256)),Vr=o}return Vr}function xw(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:rm(""+o)}function Rw(o,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,o.id&&c.setAttribute("form",o.id),r.parentNode.insertBefore(c,r),o=new FormData(o),c.parentNode.removeChild(c),o}function r2(o,r,c,f,_){if(r==="submit"&&c&&c.stateNode===_){var S=xw((_[ei]||null).action),b=f.submitter;b&&(r=(r=b[ei]||null)?xw(r.formAction):b.getAttribute("formAction"),r!==null&&(S=r,b=null));var N=new cm("action","action",null,f,_);o.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Vr!==0){var U=b?Rw(_,b):new FormData(_);bv(c,{pending:!0,data:U,method:_.method,action:S},null,U)}}else typeof S=="function"&&(N.preventDefault(),U=b?Rw(_,b):new FormData(_),bv(c,{pending:!0,data:U,method:_.method,action:S},S,U))},currentTarget:_}]})}}for(var oA=0;oA<B0.length;oA++){var rA=B0[oA],a2=rA.toLowerCase(),l2=rA[0].toUpperCase()+rA.slice(1);gs(a2,"on"+l2)}gs(ob,"onAnimationEnd"),gs(rb,"onAnimationIteration"),gs(ab,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(bk,"onTransitionRun"),gs(Ck,"onTransitionStart"),gs(wk,"onTransitionCancel"),gs(lb,"onTransitionEnd"),Cu("onMouseEnter",["mouseout","mouseover"]),Cu("onMouseLeave",["mouseout","mouseover"]),Cu("onPointerEnter",["pointerout","pointerover"]),Cu("onPointerLeave",["pointerout","pointerover"]),Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sd));function Mw(o,r){r=(r&4)!==0;for(var c=0;c<o.length;c++){var f=o[c],_=f.event;f=f.listeners;t:{var S=void 0;if(r)for(var b=f.length-1;0<=b;b--){var N=f[b],U=N.instance,Y=N.currentTarget;if(N=N.listener,U!==S&&_.isPropagationStopped())break t;S=N,_.currentTarget=Y;try{S(_)}catch(Z){fm(Z)}_.currentTarget=null,S=U}else for(b=0;b<f.length;b++){if(N=f[b],U=N.instance,Y=N.currentTarget,N=N.listener,U!==S&&_.isPropagationStopped())break t;S=N,_.currentTarget=Y;try{S(_)}catch(Z){fm(Z)}_.currentTarget=null,S=U}}}}function zt(o,r){var c=r[A0];c===void 0&&(c=r[A0]=new Set);var f=o+"__bubble";c.has(f)||(Iw(r,o,2,!1),c.add(f))}function aA(o,r,c){var f=0;r&&(f|=4),Iw(c,o,f,r)}var jm="_reactListening"+Math.random().toString(36).slice(2);function lA(o){if(!o[jm]){o[jm]=!0,EE.forEach(function(c){c!=="selectionchange"&&(u2.has(c)||aA(c,!1,o),aA(c,!0,o))});var r=o.nodeType===9?o:o.ownerDocument;r===null||r[jm]||(r[jm]=!0,aA("selectionchange",!1,r))}}function Iw(o,r,c,f){switch(ox(r)){case 2:var _=O2;break;case 8:_=F2;break;default:_=EA}c=_.bind(null,r,c,o),_=void 0,!R0||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),f?_!==void 0?o.addEventListener(r,c,{capture:!0,passive:_}):o.addEventListener(r,c,!0):_!==void 0?o.addEventListener(r,c,{passive:_}):o.addEventListener(r,c,!1)}function uA(o,r,c,f,_){var S=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var b=f.tag;if(b===3||b===4){var N=f.stateNode.containerInfo;if(N===_)break;if(b===4)for(b=f.return;b!==null;){var U=b.tag;if((U===3||U===4)&&b.stateNode.containerInfo===_)return;b=b.return}for(;N!==null;){if(b=Tu(N),b===null)return;if(U=b.tag,U===5||U===6||U===26||U===27){f=S=b;continue t}N=N.parentNode}}f=f.return}kE(function(){var Y=S,Z=w0(c),tt=[];t:{var K=ub.get(o);if(K!==void 0){var W=cm,ht=o;switch(o){case"keypress":if(lm(c)===0)break t;case"keydown":case"keyup":W=nk;break;case"focusin":ht="focus",W=D0;break;case"focusout":ht="blur",W=D0;break;case"beforeblur":case"afterblur":W=D0;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=FE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=qL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=ok;break;case ob:case rb:case ab:W=$L;break;case lb:W=ak;break;case"scroll":case"scrollend":W=GL;break;case"wheel":W=uk;break;case"copy":case"cut":case"paste":W=JL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=HE;break;case"toggle":case"beforetoggle":W=hk}var bt=(r&4)!==0,ue=!bt&&(o==="scroll"||o==="scrollend"),z=bt?K!==null?K+"Capture":null:K;bt=[];for(var H=Y,q;H!==null;){var j=H;if(q=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||q===null||z===null||(j=zh(H,z),j!=null&&bt.push(Td(H,j,q))),ue)break;H=H.return}0<bt.length&&(K=new W(K,ht,null,c,Z),tt.push({event:K,listeners:bt}))}}if((r&7)===0){t:{if(K=o==="mouseover"||o==="pointerover",W=o==="mouseout"||o==="pointerout",K&&c!==C0&&(ht=c.relatedTarget||c.fromElement)&&(Tu(ht)||ht[Su]))break t;if((W||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,W?(ht=c.relatedTarget||c.toElement,W=Y,ht=ht?Tu(ht):null,ht!==null&&(ue=a(ht),bt=ht.tag,ht!==ue||bt!==5&&bt!==27&&bt!==6)&&(ht=null)):(W=null,ht=Y),W!==ht)){if(bt=FE,j="onMouseLeave",z="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(bt=HE,j="onPointerLeave",z="onPointerEnter",H="pointer"),ue=W==null?K:Gh(W),q=ht==null?K:Gh(ht),K=new bt(j,H+"leave",W,c,Z),K.target=ue,K.relatedTarget=q,j=null,Tu(Z)===Y&&(bt=new bt(z,H+"enter",ht,c,Z),bt.target=q,bt.relatedTarget=ue,j=bt),ue=j,W&&ht)e:{for(bt=c2,z=W,H=ht,q=0,j=z;j;j=bt(j))q++;j=0;for(var _t=H;_t;_t=bt(_t))j++;for(;0<q-j;)z=bt(z),q--;for(;0<j-q;)H=bt(H),j--;for(;q--;){if(z===H||H!==null&&z===H.alternate){bt=z;break e}z=bt(z),H=bt(H)}bt=null}else bt=null;W!==null&&Nw(tt,K,W,bt,!1),ht!==null&&ue!==null&&Nw(tt,ue,ht,bt,!0)}}t:{if(K=Y?Gh(Y):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var Wt=KE;else if(XE(K))if(JE)Wt=Sk;else{Wt=Ak;var gt=vk}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&b0(Y.elementType)&&(Wt=KE):Wt=_k;if(Wt&&(Wt=Wt(o,Y))){$E(tt,Wt,c,Z);break t}gt&&gt(o,K,Y),o==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&E0(K,"number",K.value)}switch(gt=Y?Gh(Y):window,o){case"focusin":(XE(gt)||gt.contentEditable==="true")&&(Nu=gt,F0=Y,Qh=null);break;case"focusout":Qh=F0=Nu=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,ib(tt,c,Z);break;case"selectionchange":if(Ek)break;case"keydown":case"keyup":ib(tt,c,Z)}var kt;if(L0)t:{switch(o){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Iu?qE(o,c)&&(Yt="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(Yt="onCompositionStart");Yt&&(BE&&c.locale!=="ko"&&(Iu||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Iu&&(kt=UE()):(Er=Z,M0="value"in Er?Er.value:Er.textContent,Iu=!0)),gt=tg(Y,Yt),0<gt.length&&(Yt=new VE(Yt,o,null,c,Z),tt.push({event:Yt,listeners:gt}),kt?Yt.data=kt:(kt=YE(c),kt!==null&&(Yt.data=kt)))),(kt=fk?pk(o,c):mk(o,c))&&(Yt=tg(Y,"onBeforeInput"),0<Yt.length&&(gt=new VE("onBeforeInput","beforeinput",null,c,Z),tt.push({event:gt,listeners:Yt}),gt.data=kt)),r2(tt,o,Y,c,Z)}Mw(tt,r)})}function Td(o,r,c){return{instance:o,listener:r,currentTarget:c}}function tg(o,r){for(var c=r+"Capture",f=[];o!==null;){var _=o,S=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||S===null||(_=zh(o,c),_!=null&&f.unshift(Td(o,_,S)),_=zh(o,r),_!=null&&f.push(Td(o,_,S))),o.tag===3)return f;o=o.return}return[]}function c2(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Nw(o,r,c,f,_){for(var S=r._reactName,b=[];c!==null&&c!==f;){var N=c,U=N.alternate,Y=N.stateNode;if(N=N.tag,U!==null&&U===f)break;N!==5&&N!==26&&N!==27||Y===null||(U=Y,_?(Y=zh(c,S),Y!=null&&b.unshift(Td(c,Y,U))):_||(Y=zh(c,S),Y!=null&&b.push(Td(c,Y,U)))),c=c.return}b.length!==0&&o.push({event:r,listeners:b})}var h2=/\r\n?/g,d2=/\u0000|\uFFFD/g;function Dw(o){return(typeof o=="string"?o:""+o).replace(h2,`
`).replace(d2,"")}function Pw(o,r){return r=Dw(r),Dw(o)===r}function le(o,r,c,f,_,S){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||xu(o,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&xu(o,""+f);break;case"className":sm(o,"class",f);break;case"tabIndex":sm(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":sm(o,c,f);break;case"style":PE(o,f,S);break;case"data":if(r!=="object"){sm(o,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){o.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(c);break}f=rm(""+f),o.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(r!=="input"&&le(o,r,"name",_.name,_,null),le(o,r,"formEncType",_.formEncType,_,null),le(o,r,"formMethod",_.formMethod,_,null),le(o,r,"formTarget",_.formTarget,_,null)):(le(o,r,"encType",_.encType,_,null),le(o,r,"method",_.method,_,null),le(o,r,"target",_.target,_,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(c);break}f=rm(""+f),o.setAttribute(c,f);break;case"onClick":f!=null&&(o.onclick=vo);break;case"onScroll":f!=null&&zt("scroll",o);break;case"onScrollEnd":f!=null&&zt("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}c=rm(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,""+f):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":f===!0?o.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(c,f):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(c,f):o.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(c):o.setAttribute(c,f);break;case"popover":zt("beforetoggle",o),zt("toggle",o),im(o,"popover",f);break;case"xlinkActuate":yo(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":yo(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":yo(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":yo(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":yo(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":yo(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":yo(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":yo(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":yo(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":im(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=HL.get(c)||c,im(o,c,f))}}function cA(o,r,c,f,_,S){switch(c){case"style":PE(o,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(c=f.__html,c!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"children":typeof f=="string"?xu(o,f):(typeof f=="number"||typeof f=="bigint")&&xu(o,""+f);break;case"onScroll":f!=null&&zt("scroll",o);break;case"onScrollEnd":f!=null&&zt("scrollend",o);break;case"onClick":f!=null&&(o.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bE.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),r=c.slice(2,_?c.length-7:void 0),S=o[ei]||null,S=S!=null?S[c]:null,typeof S=="function"&&o.removeEventListener(r,S,_),typeof f=="function")){typeof S!="function"&&S!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(r,f,_);break t}c in o?o[c]=f:f===!0?o.setAttribute(c,""):im(o,c,f)}}}function vn(o,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",o),zt("load",o);var f=!1,_=!1,S;for(S in c)if(c.hasOwnProperty(S)){var b=c[S];if(b!=null)switch(S){case"src":f=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:le(o,r,S,b,c,null)}}_&&le(o,r,"srcSet",c.srcSet,c,null),f&&le(o,r,"src",c.src,c,null);return;case"input":zt("invalid",o);var N=S=b=_=null,U=null,Y=null;for(f in c)if(c.hasOwnProperty(f)){var Z=c[f];if(Z!=null)switch(f){case"name":_=Z;break;case"type":b=Z;break;case"checked":U=Z;break;case"defaultChecked":Y=Z;break;case"value":S=Z;break;case"defaultValue":N=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,r));break;default:le(o,r,f,Z,c,null)}}ME(o,S,N,U,Y,b,_,!1);return;case"select":zt("invalid",o),f=b=S=null;for(_ in c)if(c.hasOwnProperty(_)&&(N=c[_],N!=null))switch(_){case"value":S=N;break;case"defaultValue":b=N;break;case"multiple":f=N;default:le(o,r,_,N,c,null)}r=S,c=b,o.multiple=!!f,r!=null?wu(o,!!f,r,!1):c!=null&&wu(o,!!f,c,!0);return;case"textarea":zt("invalid",o),S=_=f=null;for(b in c)if(c.hasOwnProperty(b)&&(N=c[b],N!=null))switch(b){case"value":f=N;break;case"defaultValue":_=N;break;case"children":S=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:le(o,r,b,N,c,null)}NE(o,f,_,S);return;case"option":for(U in c)if(c.hasOwnProperty(U)&&(f=c[U],f!=null))switch(U){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:le(o,r,U,f,c,null)}return;case"dialog":zt("beforetoggle",o),zt("toggle",o),zt("cancel",o),zt("close",o);break;case"iframe":case"object":zt("load",o);break;case"video":case"audio":for(f=0;f<Sd.length;f++)zt(Sd[f],o);break;case"image":zt("error",o),zt("load",o);break;case"details":zt("toggle",o);break;case"embed":case"source":case"link":zt("error",o),zt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in c)if(c.hasOwnProperty(Y)&&(f=c[Y],f!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:le(o,r,Y,f,c,null)}return;default:if(b0(r)){for(Z in c)c.hasOwnProperty(Z)&&(f=c[Z],f!==void 0&&cA(o,r,Z,f,c,void 0));return}}for(N in c)c.hasOwnProperty(N)&&(f=c[N],f!=null&&le(o,r,N,f,c,null))}function f2(o,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,S=null,b=null,N=null,U=null,Y=null,Z=null;for(W in c){var tt=c[W];if(c.hasOwnProperty(W)&&tt!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=tt;default:f.hasOwnProperty(W)||le(o,r,W,null,f,tt)}}for(var K in f){var W=f[K];if(tt=c[K],f.hasOwnProperty(K)&&(W!=null||tt!=null))switch(K){case"type":S=W;break;case"name":_=W;break;case"checked":Y=W;break;case"defaultChecked":Z=W;break;case"value":b=W;break;case"defaultValue":N=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,r));break;default:W!==tt&&le(o,r,K,W,f,tt)}}T0(o,b,N,U,Y,Z,S,_);return;case"select":W=b=N=K=null;for(S in c)if(U=c[S],c.hasOwnProperty(S)&&U!=null)switch(S){case"value":break;case"multiple":W=U;default:f.hasOwnProperty(S)||le(o,r,S,null,f,U)}for(_ in f)if(S=f[_],U=c[_],f.hasOwnProperty(_)&&(S!=null||U!=null))switch(_){case"value":K=S;break;case"defaultValue":N=S;break;case"multiple":b=S;default:S!==U&&le(o,r,_,S,f,U)}r=N,c=b,f=W,K!=null?wu(o,!!c,K,!1):!!f!=!!c&&(r!=null?wu(o,!!c,r,!0):wu(o,!!c,c?[]:"",!1));return;case"textarea":W=K=null;for(N in c)if(_=c[N],c.hasOwnProperty(N)&&_!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:le(o,r,N,null,f,_)}for(b in f)if(_=f[b],S=c[b],f.hasOwnProperty(b)&&(_!=null||S!=null))switch(b){case"value":K=_;break;case"defaultValue":W=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==S&&le(o,r,b,_,f,S)}IE(o,K,W);return;case"option":for(var ht in c)if(K=c[ht],c.hasOwnProperty(ht)&&K!=null&&!f.hasOwnProperty(ht))switch(ht){case"selected":o.selected=!1;break;default:le(o,r,ht,null,f,K)}for(U in f)if(K=f[U],W=c[U],f.hasOwnProperty(U)&&K!==W&&(K!=null||W!=null))switch(U){case"selected":o.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:le(o,r,U,K,f,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in c)K=c[bt],c.hasOwnProperty(bt)&&K!=null&&!f.hasOwnProperty(bt)&&le(o,r,bt,null,f,K);for(Y in f)if(K=f[Y],W=c[Y],f.hasOwnProperty(Y)&&K!==W&&(K!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,r));break;default:le(o,r,Y,K,f,W)}return;default:if(b0(r)){for(var ue in c)K=c[ue],c.hasOwnProperty(ue)&&K!==void 0&&!f.hasOwnProperty(ue)&&cA(o,r,ue,void 0,f,K);for(Z in f)K=f[Z],W=c[Z],!f.hasOwnProperty(Z)||K===W||K===void 0&&W===void 0||cA(o,r,Z,K,f,W);return}}for(var z in c)K=c[z],c.hasOwnProperty(z)&&K!=null&&!f.hasOwnProperty(z)&&le(o,r,z,null,f,K);for(tt in f)K=f[tt],W=c[tt],!f.hasOwnProperty(tt)||K===W||K==null&&W==null||le(o,r,tt,K,f,W)}function Lw(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p2(){if(typeof performance.getEntriesByType=="function"){for(var o=0,r=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var _=c[f],S=_.transferSize,b=_.initiatorType,N=_.duration;if(S&&N&&Lw(b)){for(b=0,N=_.responseEnd,f+=1;f<c.length;f++){var U=c[f],Y=U.startTime;if(Y>N)break;var Z=U.transferSize,tt=U.initiatorType;Z&&Lw(tt)&&(U=U.responseEnd,b+=Z*(U<N?1:(N-Y)/(U-Y)))}if(--f,r+=8*(S+b)/(_.duration/1e3),o++,10<o)break}}if(0<o)return r/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var hA=null,dA=null;function eg(o){return o.nodeType===9?o:o.ownerDocument}function kw(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uw(o,r){if(o===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&r==="foreignObject"?0:o}function fA(o,r){return o==="textarea"||o==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pA=null;function m2(){var o=window.event;return o&&o.type==="popstate"?o===pA?!1:(pA=o,!0):(pA=null,!1)}var Ow=typeof setTimeout=="function"?setTimeout:void 0,g2=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,y2=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(o){return Fw.resolve(null).then(o).catch(v2)}:Ow;function v2(o){setTimeout(function(){throw o})}function Hr(o){return o==="head"}function Vw(o,r){var c=r,f=0;do{var _=c.nextSibling;if(o.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(f===0){o.removeChild(_),sc(r);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Ed(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,Ed(c);for(var S=c.firstChild;S;){var b=S.nextSibling,N=S.nodeName;S[Bh]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=b}}else c==="body"&&Ed(o.ownerDocument.body);c=_}while(c);sc(r)}function Hw(o,r){var c=o;o=0;do{var f=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=f}while(c)}function mA(o){var r=o.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":mA(c),_0(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function A2(o,r,c,f){for(;o.nodeType===1;){var _=c;if(o.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[Bh])switch(r){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(r==="input"&&o.type==="hidden"){var S=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=Qi(o.nextSibling),o===null)break}return null}function _2(o,r,c){if(r==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Qi(o.nextSibling),o===null))return null;return o}function Bw(o,r){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!r||(o=Qi(o.nextSibling),o===null))return null;return o}function gA(o){return o.data==="$?"||o.data==="$~"}function yA(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function S2(o,r){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=r;else if(o.data!=="$?"||c.readyState!=="loading")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function Qi(o){for(;o!=null;o=o.nextSibling){var r=o.nodeType;if(r===1||r===3)break;if(r===8){if(r=o.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return o}var vA=null;function Gw(o){o=o.nextSibling;for(var r=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(r===0)return Qi(o.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}o=o.nextSibling}return null}function zw(o){o=o.previousSibling;for(var r=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return o;r--}else c!=="/$"&&c!=="/&"||r++}o=o.previousSibling}return null}function qw(o,r,c){switch(r=eg(c),o){case"html":if(o=r.documentElement,!o)throw Error(n(452));return o;case"head":if(o=r.head,!o)throw Error(n(453));return o;case"body":if(o=r.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Ed(o){for(var r=o.attributes;r.length;)o.removeAttributeNode(r[0]);_0(o)}var Zi=new Map,Yw=new Set;function ng(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Lo=J.d;J.d={f:T2,r:E2,D:b2,C:C2,L:w2,m:x2,X:M2,S:R2,M:I2};function T2(){var o=Lo.f(),r=$m();return o||r}function E2(o){var r=Eu(o);r!==null&&r.tag===5&&r.type==="form"?lC(r):Lo.r(o)}var ec=typeof document>"u"?null:document;function Xw(o,r,c){var f=ec;if(f&&typeof r=="string"&&r){var _=qi(r);_='link[rel="'+o+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),Yw.has(_)||(Yw.add(_),o={rel:o,crossOrigin:c,href:r},f.querySelector(_)===null&&(r=f.createElement("link"),vn(r,"link",o),on(r),f.head.appendChild(r)))}}function b2(o){Lo.D(o),Xw("dns-prefetch",o,null)}function C2(o,r){Lo.C(o,r),Xw("preconnect",o,r)}function w2(o,r,c){Lo.L(o,r,c);var f=ec;if(f&&o&&r){var _='link[rel="preload"][as="'+qi(r)+'"]';r==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+qi(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+qi(c.imageSizes)+'"]')):_+='[href="'+qi(o)+'"]';var S=_;switch(r){case"style":S=nc(o);break;case"script":S=ic(o)}Zi.has(S)||(o=v({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:o,as:r},c),Zi.set(S,o),f.querySelector(_)!==null||r==="style"&&f.querySelector(bd(S))||r==="script"&&f.querySelector(Cd(S))||(r=f.createElement("link"),vn(r,"link",o),on(r),f.head.appendChild(r)))}}function x2(o,r){Lo.m(o,r);var c=ec;if(c&&o){var f=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+qi(f)+'"][href="'+qi(o)+'"]',S=_;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ic(o)}if(!Zi.has(S)&&(o=v({rel:"modulepreload",href:o},r),Zi.set(S,o),c.querySelector(_)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Cd(S)))return}f=c.createElement("link"),vn(f,"link",o),on(f),c.head.appendChild(f)}}}function R2(o,r,c){Lo.S(o,r,c);var f=ec;if(f&&o){var _=bu(f).hoistableStyles,S=nc(o);r=r||"default";var b=_.get(S);if(!b){var N={loading:0,preload:null};if(b=f.querySelector(bd(S)))N.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":r},c),(c=Zi.get(S))&&AA(o,c);var U=b=f.createElement("link");on(U),vn(U,"link",o),U._p=new Promise(function(Y,Z){U.onload=Y,U.onerror=Z}),U.addEventListener("load",function(){N.loading|=1}),U.addEventListener("error",function(){N.loading|=2}),N.loading|=4,ig(b,r,f)}b={type:"stylesheet",instance:b,count:1,state:N},_.set(S,b)}}}function M2(o,r){Lo.X(o,r);var c=ec;if(c&&o){var f=bu(c).hoistableScripts,_=ic(o),S=f.get(_);S||(S=c.querySelector(Cd(_)),S||(o=v({src:o,async:!0},r),(r=Zi.get(_))&&_A(o,r),S=c.createElement("script"),on(S),vn(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(_,S))}}function I2(o,r){Lo.M(o,r);var c=ec;if(c&&o){var f=bu(c).hoistableScripts,_=ic(o),S=f.get(_);S||(S=c.querySelector(Cd(_)),S||(o=v({src:o,async:!0,type:"module"},r),(r=Zi.get(_))&&_A(o,r),S=c.createElement("script"),on(S),vn(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(_,S))}}function $w(o,r,c,f){var _=(_=St.current)?ng(_):null;if(!_)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=nc(c.href),c=bu(_).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=nc(c.href);var S=bu(_).hoistableStyles,b=S.get(o);if(b||(_=_.ownerDocument||_,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,b),(S=_.querySelector(bd(o)))&&!S._p&&(b.instance=S,b.state.loading=5),Zi.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Zi.set(o,c),S||N2(_,o,c,b.state))),r&&f===null)throw Error(n(528,""));return b}if(r&&f!==null)throw Error(n(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ic(c),c=bu(_).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function nc(o){return'href="'+qi(o)+'"'}function bd(o){return'link[rel="stylesheet"]['+o+"]"}function Kw(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function N2(o,r,c,f){o.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=o.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),vn(r,"link",c),on(r),o.head.appendChild(r))}function ic(o){return'[src="'+qi(o)+'"]'}function Cd(o){return"script[async]"+o}function Jw(o,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=o.querySelector('style[data-href~="'+qi(c.href)+'"]');if(f)return r.instance=f,on(f),f;var _=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),on(f),vn(f,"style",_),ig(f,c.precedence,o),r.instance=f;case"stylesheet":_=nc(c.href);var S=o.querySelector(bd(_));if(S)return r.state.loading|=4,r.instance=S,on(S),S;f=Kw(c),(_=Zi.get(_))&&AA(f,_),S=(o.ownerDocument||o).createElement("link"),on(S);var b=S;return b._p=new Promise(function(N,U){b.onload=N,b.onerror=U}),vn(S,"link",f),r.state.loading|=4,ig(S,c.precedence,o),r.instance=S;case"script":return S=ic(c.src),(_=o.querySelector(Cd(S)))?(r.instance=_,on(_),_):(f=c,(_=Zi.get(S))&&(f=v({},c),_A(f,_)),o=o.ownerDocument||o,_=o.createElement("script"),on(_),vn(_,"link",f),o.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,ig(f,c.precedence,o));return r.instance}function ig(o,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=f.length?f[f.length-1]:null,S=_,b=0;b<f.length;b++){var N=f[b];if(N.dataset.precedence===r)S=N;else if(S!==_)break}S?S.parentNode.insertBefore(o,S.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(o,r.firstChild))}function AA(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.title==null&&(o.title=r.title)}function _A(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.integrity==null&&(o.integrity=r.integrity)}var sg=null;function Ww(o,r,c){if(sg===null){var f=new Map,_=sg=new Map;_.set(c,f)}else _=sg,f=_.get(c),f||(f=new Map,_.set(c,f));if(f.has(o))return f;for(f.set(o,null),c=c.getElementsByTagName(o),_=0;_<c.length;_++){var S=c[_];if(!(S[Bh]||S[pn]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var b=S.getAttribute(r)||"";b=o+b;var N=f.get(b);N?N.push(S):f.set(b,[S])}}return f}function Qw(o,r,c){o=o.ownerDocument||o,o.head.insertBefore(c,r==="title"?o.querySelector("head > title"):null)}function D2(o,r,c){if(c===1||r.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return o=r.disabled,typeof r.precedence=="string"&&o==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Zw(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function P2(o,r,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=nc(f.href),S=r.querySelector(bd(_));if(S){r=S._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(o.count++,o=og.bind(o),r.then(o,o)),c.state.loading|=4,c.instance=S,on(S);return}S=r.ownerDocument||r,f=Kw(f),(_=Zi.get(_))&&AA(f,_),S=S.createElement("link"),on(S);var b=S;b._p=new Promise(function(N,U){b.onload=N,b.onerror=U}),vn(S,"link",f),c.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=og.bind(o),r.addEventListener("load",c),r.addEventListener("error",c))}}var SA=0;function L2(o,r){return o.stylesheets&&o.count===0&&ag(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var f=setTimeout(function(){if(o.stylesheets&&ag(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+r);0<o.imgBytes&&SA===0&&(SA=62500*p2());var _=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&ag(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>SA?50:800)+r);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f),clearTimeout(_)}}:null}function og(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ag(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var rg=null;function ag(o,r){o.stylesheets=null,o.unsuspend!==null&&(o.count++,rg=new Map,r.forEach(k2,o),rg=null,og.call(o))}function k2(o,r){if(!(r.state.loading&4)){var c=rg.get(o);if(c)var f=c.get(null);else{c=new Map,rg.set(o,c);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<_.length;S++){var b=_[S];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(c.set(b.dataset.precedence,b),f=b)}f&&c.set(null,f)}_=r.instance,b=_.getAttribute("data-precedence"),S=c.get(b)||f,S===f&&c.set(null,_),c.set(b,_),this.count++,f=og.bind(this),_.addEventListener("load",f),_.addEventListener("error",f),S?S.parentNode.insertBefore(_,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),r.state.loading|=4}}var wd={$$typeof:P,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function U2(o,r,c,f,_,S,b,N,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=g0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g0(0),this.hiddenUpdates=g0(null),this.identifierPrefix=f,this.onUncaughtError=_,this.onCaughtError=S,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function jw(o,r,c,f,_,S,b,N,U,Y,Z,tt){return o=new U2(o,r,c,b,U,Y,Z,tt,N),r=1,S===!0&&(r|=24),S=_i(3,null,null,r),o.current=S,S.stateNode=o,r=tv(),r.refCount++,o.pooledCache=r,r.refCount++,S.memoizedState={element:f,isDehydrated:c,cache:r},sv(S),o}function tx(o){return o?(o=Lu,o):Lu}function ex(o,r,c,f,_,S){_=tx(_),f.context===null?f.context=_:f.pendingContext=_,f=Mr(r),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),c=Ir(o,f,r),c!==null&&(ai(c,o,r),sd(c,o,r))}function nx(o,r){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<r?c:r}}function TA(o,r){nx(o,r),(o=o.alternate)&&nx(o,r)}function ix(o){if(o.tag===13||o.tag===31){var r=Ha(o,67108864);r!==null&&ai(r,o,67108864),TA(o,67108864)}}function sx(o){if(o.tag===13||o.tag===31){var r=Ci();r=y0(r);var c=Ha(o,r);c!==null&&ai(c,o,r),TA(o,r)}}var lg=!0;function O2(o,r,c,f){var _=B.T;B.T=null;var S=J.p;try{J.p=2,EA(o,r,c,f)}finally{J.p=S,B.T=_}}function F2(o,r,c,f){var _=B.T;B.T=null;var S=J.p;try{J.p=8,EA(o,r,c,f)}finally{J.p=S,B.T=_}}function EA(o,r,c,f){if(lg){var _=bA(f);if(_===null)uA(o,r,f,ug,c),rx(o,f);else if(H2(_,o,r,c,f))f.stopPropagation();else if(rx(o,f),r&4&&-1<V2.indexOf(o)){for(;_!==null;){var S=Eu(_);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var b=ka(S.pendingLanes);if(b!==0){var N=S;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var U=1<<31-vi(b);N.entanglements[1]|=U,b&=~U}Ys(S),(te&6)===0&&(Ym=gi()+500,_d(0))}}break;case 31:case 13:N=Ha(S,2),N!==null&&ai(N,S,2),$m(),TA(S,2)}if(S=bA(f),S===null&&uA(o,r,f,ug,c),S===_)break;_=S}_!==null&&f.stopPropagation()}else uA(o,r,f,null,c)}}function bA(o){return o=w0(o),CA(o)}var ug=null;function CA(o){if(ug=null,o=Tu(o),o!==null){var r=a(o);if(r===null)o=null;else{var c=r.tag;if(c===13){if(o=l(r),o!==null)return o;o=null}else if(c===31){if(o=u(r),o!==null)return o;o=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;o=null}else r!==o&&(o=null)}}return ug=o,null}function ox(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bL()){case fE:return 2;case pE:return 8;case Zp:case CL:return 32;case mE:return 268435456;default:return 32}default:return 32}}var wA=!1,Br=null,Gr=null,zr=null,xd=new Map,Rd=new Map,qr=[],V2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rx(o,r){switch(o){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":xd.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(r.pointerId)}}function Md(o,r,c,f,_,S){return o===null||o.nativeEvent!==S?(o={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:S,targetContainers:[_]},r!==null&&(r=Eu(r),r!==null&&ix(r)),o):(o.eventSystemFlags|=f,r=o.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),o)}function H2(o,r,c,f,_){switch(r){case"focusin":return Br=Md(Br,o,r,c,f,_),!0;case"dragenter":return Gr=Md(Gr,o,r,c,f,_),!0;case"mouseover":return zr=Md(zr,o,r,c,f,_),!0;case"pointerover":var S=_.pointerId;return xd.set(S,Md(xd.get(S)||null,o,r,c,f,_)),!0;case"gotpointercapture":return S=_.pointerId,Rd.set(S,Md(Rd.get(S)||null,o,r,c,f,_)),!0}return!1}function ax(o){var r=Tu(o.target);if(r!==null){var c=a(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){o.blockedOn=r,SE(o.priority,function(){sx(c)});return}}else if(r===31){if(r=u(c),r!==null){o.blockedOn=r,SE(o.priority,function(){sx(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function cg(o){if(o.blockedOn!==null)return!1;for(var r=o.targetContainers;0<r.length;){var c=bA(o.nativeEvent);if(c===null){c=o.nativeEvent;var f=new c.constructor(c.type,c);C0=f,c.target.dispatchEvent(f),C0=null}else return r=Eu(c),r!==null&&ix(r),o.blockedOn=c,!1;r.shift()}return!0}function lx(o,r,c){cg(o)&&c.delete(r)}function B2(){wA=!1,Br!==null&&cg(Br)&&(Br=null),Gr!==null&&cg(Gr)&&(Gr=null),zr!==null&&cg(zr)&&(zr=null),xd.forEach(lx),Rd.forEach(lx)}function hg(o,r){o.blockedOn===r&&(o.blockedOn=null,wA||(wA=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,B2)))}var dg=null;function ux(o){dg!==o&&(dg=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){dg===o&&(dg=null);for(var r=0;r<o.length;r+=3){var c=o[r],f=o[r+1],_=o[r+2];if(typeof f!="function"){if(CA(f||c)===null)continue;break}var S=Eu(c);S!==null&&(o.splice(r,3),r-=3,bv(S,{pending:!0,data:_,method:c.method,action:f},f,_))}}))}function sc(o){function r(U){return hg(U,o)}Br!==null&&hg(Br,o),Gr!==null&&hg(Gr,o),zr!==null&&hg(zr,o),xd.forEach(r),Rd.forEach(r);for(var c=0;c<qr.length;c++){var f=qr[c];f.blockedOn===o&&(f.blockedOn=null)}for(;0<qr.length&&(c=qr[0],c.blockedOn===null);)ax(c),c.blockedOn===null&&qr.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var _=c[f],S=c[f+1],b=_[ei]||null;if(typeof S=="function")b||ux(c);else if(b){var N=null;if(S&&S.hasAttribute("formAction")){if(_=S,b=S[ei]||null)N=b.formAction;else if(CA(_)!==null)continue}else N=b.action;typeof N=="function"?c[f+1]=N:(c.splice(f,3),f-=3),ux(c)}}}function cx(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(b){return _=b})},focusReset:"manual",scroll:"manual"})}function r(){_!==null&&(_(),_=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,_=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),_!==null&&(_(),_=null)}}}function xA(o){this._internalRoot=o}fg.prototype.render=xA.prototype.render=function(o){var r=this._internalRoot;if(r===null)throw Error(n(409));var c=r.current,f=Ci();ex(c,f,o,r,null,null)},fg.prototype.unmount=xA.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var r=o.containerInfo;ex(o.current,2,null,o,null,null),$m(),r[Su]=null}};function fg(o){this._internalRoot=o}fg.prototype.unstable_scheduleHydration=function(o){if(o){var r=_E();o={blockedOn:null,target:o,priority:r};for(var c=0;c<qr.length&&r!==0&&r<qr[c].priority;c++);qr.splice(c,0,o),c===0&&ax(o)}};var hx=t.version;if(hx!=="19.2.4")throw Error(n(527,hx,"19.2.4"));J.findDOMNode=function(o){var r=o._reactInternals;if(r===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=d(r),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var G2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{Fh=pg.inject(G2),yi=pg}catch{}}return Nd.createRoot=function(o,r){if(!s(o))throw Error(n(299));var c=!1,f="",_=vC,S=AC,b=_C;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=jw(o,1,!1,null,null,c,f,null,_,S,b,cx),o[Su]=r.current,lA(o),new xA(r)},Nd.hydrateRoot=function(o,r,c){if(!s(o))throw Error(n(299));var f=!1,_="",S=vC,b=AC,N=_C,U=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(b=c.onCaughtError),c.onRecoverableError!==void 0&&(N=c.onRecoverableError),c.formState!==void 0&&(U=c.formState)),r=jw(o,1,!0,r,c??null,f,_,U,S,b,N,cx),r.context=tx(null),c=r.current,f=Ci(),f=y0(f),_=Mr(f),_.callback=null,Ir(c,_,f),c=f,r.current.lanes=c,Hh(r,c),Ys(r),o[Su]=r.current,lA(o),new fg(r)},Nd.version="19.2.4",Nd}var Tx;function eU(){if(Tx)return NA.exports;Tx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),NA.exports=tU(),NA.exports}var nU=eU();const iU=KM(nU);var Qe=(i=>(i.DASHBOARD="DASHBOARD",i.NAME_INPUT="NAME_INPUT",i.PLAYING="PLAYING",i.RESULT="RESULT",i.LEADERBOARD="LEADERBOARD",i.GENERATING="GENERATING",i))(Qe||{}),Ye=(i=>(i.CHALLENGE="CHALLENGE",i.TRAINING="TRAINING",i))(Ye||{});const Ex=[{id:"1",question:"Khi chp X-quang ngc thng (PA), ti sao cn yu cu bnh nhn xoay vai ra trc v p st vo gi nhn nh?",options:[" lm gin cc cung sn"," y hai xng b vai ra khi ph trng"," gim liu phng x cho tuyn gip"," tim p st phim hn"],correctAnswer:1,explanation:"ng tc xoay vai gip tch xng b vai ra khi trng phi, gip quan st nhu m phi r rng nht m khng b che lp."},{id:"2",question:"Thng s no trn my X-quang quyt nh trc tip n  xuyn thu ( cng) ca chm tia?",options:["mAs (Milliamperage-second)","Khong cch (FFD)","kVp (Kilovoltage peak)","Kch thc tiu im"],correctAnswer:2,explanation:"kVp quyt nh nng lng v kh nng xuyn thu ca photon X-quang qua cc t chc c th."},{id:"3",question:"Trong k thut chp CT Scanner, nhiu nh 'Beam Hardening' (Cng ha chm tia) thng xut hin do nguyn nhn no?",options:["Bnh nhn c ng","Xung quanh cc vt th c t trng cao nh kim loi hoc xng dy","Tc  vng quay bng qu nhanh","S dng thuc cn quang liu thp"],correctAnswer:1,explanation:"Cng ha chm tia xy ra khi tia X i qua cc vt th c s nguyn t cao, lm lc b cc photon nng lng thp,  li cc vt en/trng trn nh."},{id:"4",question:"Nguyn tc ALARA trong an ton bc x vit tt ca cm t no?",options:["As Low As Reasonably Achievable","Always Look At Radiation Area","All Levels Are Really Acceptable","As Long As Research Allows"],correctAnswer:0,explanation:"ALARA (Thp nht c th t c mt cch hp l) l nguyn tc ct li  bo v nhn vin v bnh nhn khi tc hi ca tia x."},{id:"5",question:" gim nhiu nh do chuyn ng h hp khi chp X-quang bng khng chun b, k thut vin nn hng dn bnh nhn nh th no?",options:["Ht vo tht su v nn th","Th u nh nhng","Th ra ht sc v nn th","Va th va chp"],correctAnswer:2,explanation:"Th ra ht sc v nn th gip c honh dng cao, lm cc tng trong  bng dn tri u v gim nhiu chuyn ng."}],bx=[{id:"m1",name:"KTV. Trn Bnh",score:950,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Binh"},{id:"m2",name:"KTV. L Hong",score:880,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hoang"},{id:"m3",name:"KTV. Nguyn Thu",score:820,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Thu"}],sU=[{id:"w1",name:"KTV. ng Nam",score:4500,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Nam"},{id:"w2",name:"KTV. Trn Bnh",score:4200,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Binh"}],uT=st.createContext({});function cT(i){const t=st.useRef(null);return t.current===null&&(t.current=i()),t.current}const JM=typeof window<"u",WM=JM?st.useLayoutEffect:st.useEffect,Qy=st.createContext(null);function hT(i,t){i.indexOf(t)===-1&&i.push(t)}function dT(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const po=(i,t,e)=>e>t?t:e<i?i:e;let fT=()=>{};const mr={},QM=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function ZM(i){return typeof i=="object"&&i!==null}const jM=i=>/^0[^.\s]+$/u.test(i);function pT(i){let t;return()=>(t===void 0&&(t=i()),t)}const hs=i=>i,oU=(i,t)=>e=>t(i(e)),Yp=(...i)=>i.reduce(oU),hf=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class mT{constructor(){this.subscriptions=[]}add(t){return hT(this.subscriptions,t),()=>dT(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dr=i=>i*1e3,cs=i=>i/1e3;function tI(i,t){return t?i*(1e3/t):0}const eI=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,rU=1e-7,aU=12;function lU(i,t,e,n,s){let a,l,u=0;do l=t+(e-t)/2,a=eI(l,n,s)-i,a>0?e=l:t=l;while(Math.abs(a)>rU&&++u<aU);return l}function Xp(i,t,e,n){if(i===t&&e===n)return hs;const s=a=>lU(a,0,1,i,e);return a=>a===0||a===1?a:eI(s(a),t,n)}const nI=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,iI=i=>t=>1-i(1-t),sI=Xp(.33,1.53,.69,.99),gT=iI(sI),oI=nI(gT),rI=i=>(i*=2)<1?.5*gT(i):.5*(2-Math.pow(2,-10*(i-1))),yT=i=>1-Math.sin(Math.acos(i)),aI=iI(yT),lI=nI(yT),uU=Xp(.42,0,1,1),cU=Xp(0,0,.58,1),uI=Xp(.42,0,.58,1),hU=i=>Array.isArray(i)&&typeof i[0]!="number",cI=i=>Array.isArray(i)&&typeof i[0]=="number",dU={linear:hs,easeIn:uU,easeInOut:uI,easeOut:cU,circIn:yT,circInOut:lI,circOut:aI,backIn:gT,backInOut:oI,backOut:sI,anticipate:rI},fU=i=>typeof i=="string",Cx=i=>{if(cI(i)){fT(i.length===4);const[t,e,n,s]=i;return Xp(t,e,n,s)}else if(fU(i))return dU[i];return i},mg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function pU(i,t){let e=new Set,n=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(d.schedule(p),i()),p(u)}const d={schedule:(p,v=!1,A=!1)=>{const E=A&&s?e:n;return v&&l.add(p),E.has(p)||E.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(u=p,s){a=!0;return}s=!0,[e,n]=[n,e],e.forEach(h),e.clear(),s=!1,a&&(a=!1,d.process(p))}};return d}const mU=40;function hI(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=mg.reduce((P,k)=>(P[k]=pU(a),P),{}),{setup:u,read:h,resolveKeyframes:d,preUpdate:p,update:v,preRender:A,render:T,postRender:E}=l,C=()=>{const P=mr.useManualTiming?s.timestamp:performance.now();e=!1,mr.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(P-s.timestamp,mU),1)),s.timestamp=P,s.isProcessing=!0,u.process(s),h.process(s),d.process(s),p.process(s),v.process(s),A.process(s),T.process(s),E.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(C))},x=()=>{e=!0,n=!0,s.isProcessing||i(C)};return{schedule:mg.reduce((P,k)=>{const L=l[k];return P[k]=(G,F=!1,$=!1)=>(e||x(),L.schedule(G,F,$)),P},{}),cancel:P=>{for(let k=0;k<mg.length;k++)l[mg[k]].cancel(P)},state:s,steps:l}}const{schedule:_e,cancel:xa,state:bn,steps:kA}=hI(typeof requestAnimationFrame<"u"?requestAnimationFrame:hs,!0);let Rg;function gU(){Rg=void 0}const Kn={now:()=>(Rg===void 0&&Kn.set(bn.isProcessing||mr.useManualTiming?bn.timestamp:performance.now()),Rg),set:i=>{Rg=i,queueMicrotask(gU)}},dI=i=>t=>typeof t=="string"&&t.startsWith(i),fI=dI("--"),yU=dI("var(--"),vT=i=>yU(i)?vU.test(i.split("/*")[0].trim()):!1,vU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function wx(i){return typeof i!="string"?!1:i.split("/*")[0].includes("var(--")}const Dh={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},df={...Dh,transform:i=>po(0,1,i)},gg={...Dh,default:1},of=i=>Math.round(i*1e5)/1e5,AT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AU(i){return i==null}const _U=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_T=(i,t)=>e=>!!(typeof e=="string"&&_U.test(e)&&e.startsWith(i)||t&&!AU(e)&&Object.prototype.hasOwnProperty.call(e,t)),pI=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,a,l,u]=n.match(AT);return{[i]:parseFloat(s),[t]:parseFloat(a),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},SU=i=>po(0,255,i),UA={...Dh,transform:i=>Math.round(SU(i))},al={test:_T("rgb","red"),parse:pI("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+UA.transform(i)+", "+UA.transform(t)+", "+UA.transform(e)+", "+of(df.transform(n))+")"};function TU(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const u_={test:_T("#"),parse:TU,transform:al.transform},$p=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Xr=$p("deg"),fo=$p("%"),ft=$p("px"),EU=$p("vh"),bU=$p("vw"),xx={...fo,parse:i=>fo.parse(i)/100,transform:i=>fo.transform(i*100)},fc={test:_T("hsl","hue"),parse:pI("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+fo.transform(of(t))+", "+fo.transform(of(e))+", "+of(df.transform(n))+")"},Xe={test:i=>al.test(i)||u_.test(i)||fc.test(i),parse:i=>al.test(i)?al.parse(i):fc.test(i)?fc.parse(i):u_.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?al.transform(i):fc.transform(i),getAnimatableNone:i=>{const t=Xe.parse(i);return t.alpha=0,Xe.transform(t)}},CU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wU(i){var t,e;return isNaN(i)&&typeof i=="string"&&(((t=i.match(AT))==null?void 0:t.length)||0)+(((e=i.match(CU))==null?void 0:e.length)||0)>0}const mI="number",gI="color",xU="var",RU="var(",Rx="${}",MU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ff(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let a=0;const u=t.replace(MU,h=>(Xe.test(h)?(n.color.push(a),s.push(gI),e.push(Xe.parse(h))):h.startsWith(RU)?(n.var.push(a),s.push(xU),e.push(h)):(n.number.push(a),s.push(mI),e.push(parseFloat(h))),++a,Rx)).split(Rx);return{values:e,split:u,indexes:n,types:s}}function yI(i){return ff(i).values}function vI(i){const{split:t,types:e}=ff(i),n=t.length;return s=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],s[l]!==void 0){const u=e[l];u===mI?a+=of(s[l]):u===gI?a+=Xe.transform(s[l]):a+=s[l]}return a}}const IU=i=>typeof i=="number"?0:Xe.test(i)?Xe.getAnimatableNone(i):i;function NU(i){const t=yI(i);return vI(i)(t.map(IU))}const Ra={test:wU,parse:yI,createTransformer:vI,getAnimatableNone:NU};function OA(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function DU({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,a=0,l=0;if(!t)s=a=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;s=OA(h,u,i+1/3),a=OA(h,u,i),l=OA(h,u,i-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function cy(i,t){return e=>e>0?t:i}const Re=(i,t,e)=>i+(t-i)*e,FA=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},PU=[u_,al,fc],LU=i=>PU.find(t=>t.test(i));function Mx(i){const t=LU(i);if(!t)return!1;let e=t.parse(i);return t===fc&&(e=DU(e)),e}const Ix=(i,t)=>{const e=Mx(i),n=Mx(t);if(!e||!n)return cy(i,t);const s={...e};return a=>(s.red=FA(e.red,n.red,a),s.green=FA(e.green,n.green,a),s.blue=FA(e.blue,n.blue,a),s.alpha=Re(e.alpha,n.alpha,a),al.transform(s))},c_=new Set(["none","hidden"]);function kU(i,t){return c_.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function UU(i,t){return e=>Re(i,t,e)}function ST(i){return typeof i=="number"?UU:typeof i=="string"?vT(i)?cy:Xe.test(i)?Ix:VU:Array.isArray(i)?AI:typeof i=="object"?Xe.test(i)?Ix:OU:cy}function AI(i,t){const e=[...i],n=e.length,s=i.map((a,l)=>ST(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=s[l](a);return e}}function OU(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=ST(i[s])(i[s],t[s]));return s=>{for(const a in n)e[a]=n[a](s);return e}}function FU(i,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],l=i.indexes[a][n[a]],u=i.values[l]??0;e[s]=u,n[a]++}return e}const VU=(i,t)=>{const e=Ra.createTransformer(t),n=ff(i),s=ff(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?c_.has(i)&&!s.values.length||c_.has(t)&&!n.values.length?kU(i,t):Yp(AI(FU(n,s),s.values),e):cy(i,t)};function _I(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?Re(i,t,e):ST(i)(i,t)}const HU=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>_e.update(t,e),stop:()=>xa(t),now:()=>bn.isProcessing?bn.timestamp:Kn.now()}},SI=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let a=0;a<s;a++)n+=Math.round(i(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},hy=2e4;function TT(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<hy;)t+=e,n=i.next(t);return t>=hy?1/0:t}function BU(i,t=100,e){const n=e({...i,keyframes:[0,t]}),s=Math.min(TT(n),hy);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:cs(s)}}const GU=5;function TI(i,t,e){const n=Math.max(t-GU,0);return tI(e-i(n),t-n)}const Le={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},VA=.001;function zU({duration:i=Le.duration,bounce:t=Le.bounce,velocity:e=Le.velocity,mass:n=Le.mass}){let s,a,l=1-t;l=po(Le.minDamping,Le.maxDamping,l),i=po(Le.minDuration,Le.maxDuration,cs(i)),l<1?(s=d=>{const p=d*l,v=p*i,A=p-e,T=h_(d,l),E=Math.exp(-v);return VA-A/T*E},a=d=>{const v=d*l*i,A=v*e+e,T=Math.pow(l,2)*Math.pow(d,2)*i,E=Math.exp(-v),C=h_(Math.pow(d,2),l);return(-s(d)+VA>0?-1:1)*((A-T)*E)/C}):(s=d=>{const p=Math.exp(-d*i),v=(d-e)*i+1;return-VA+p*v},a=d=>{const p=Math.exp(-d*i),v=(e-d)*(i*i);return p*v});const u=5/i,h=YU(s,a,u);if(i=dr(i),isNaN(h))return{stiffness:Le.stiffness,damping:Le.damping,duration:i};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:i}}}const qU=12;function YU(i,t,e){let n=e;for(let s=1;s<qU;s++)n=n-i(n)/t(n);return n}function h_(i,t){return i*Math.sqrt(1-t*t)}const XU=["duration","bounce"],$U=["stiffness","damping","mass"];function Nx(i,t){return t.some(e=>i[e]!==void 0)}function KU(i){let t={velocity:Le.velocity,stiffness:Le.stiffness,damping:Le.damping,mass:Le.mass,isResolvedFromDuration:!1,...i};if(!Nx(i,$U)&&Nx(i,XU))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,a=2*po(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:Le.mass,stiffness:s,damping:a}}else{const e=zU(i);t={...t,...e,mass:Le.mass},t.isResolvedFromDuration=!0}return t}function dy(i=Le.visualDuration,t=Le.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:a},{stiffness:h,damping:d,mass:p,duration:v,velocity:A,isResolvedFromDuration:T}=KU({...e,velocity:-cs(e.velocity||0)}),E=A||0,C=d/(2*Math.sqrt(h*p)),x=l-a,R=cs(Math.sqrt(h/p)),D=Math.abs(x)<5;n||(n=D?Le.restSpeed.granular:Le.restSpeed.default),s||(s=D?Le.restDelta.granular:Le.restDelta.default);let P;if(C<1){const L=h_(R,C);P=G=>{const F=Math.exp(-C*R*G);return l-F*((E+C*R*x)/L*Math.sin(L*G)+x*Math.cos(L*G))}}else if(C===1)P=L=>l-Math.exp(-R*L)*(x+(E+R*x)*L);else{const L=R*Math.sqrt(C*C-1);P=G=>{const F=Math.exp(-C*R*G),$=Math.min(L*G,300);return l-F*((E+C*R*x)*Math.sinh($)+L*x*Math.cosh($))/L}}const k={calculatedDuration:T&&v||null,next:L=>{const G=P(L);if(T)u.done=L>=v;else{let F=L===0?E:0;C<1&&(F=L===0?dr(E):TI(P,L,G));const $=Math.abs(F)<=n,X=Math.abs(l-G)<=s;u.done=$&&X}return u.value=u.done?l:G,u},toString:()=>{const L=Math.min(TT(k),hy),G=SI(F=>k.next(L*F).value,L,30);return L+"ms "+G},toTransition:()=>{}};return k}dy.applyToOptions=i=>{const t=BU(i,100,dy);return i.ease=t.ease,i.duration=dr(t.duration),i.type="keyframes",i};function d_({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:h,restDelta:d=.5,restSpeed:p}){const v=i[0],A={done:!1,value:v},T=$=>u!==void 0&&$<u||h!==void 0&&$>h,E=$=>u===void 0?h:h===void 0||Math.abs(u-$)<Math.abs(h-$)?u:h;let C=e*t;const x=v+C,R=l===void 0?x:l(x);R!==x&&(C=R-v);const D=$=>-C*Math.exp(-$/n),P=$=>R+D($),k=$=>{const X=D($),et=P($);A.done=Math.abs(X)<=d,A.value=A.done?R:et};let L,G;const F=$=>{T(A.value)&&(L=$,G=dy({keyframes:[A.value,E(A.value)],velocity:TI(P,$,A.value),damping:s,stiffness:a,restDelta:d,restSpeed:p}))};return F(0),{calculatedDuration:null,next:$=>{let X=!1;return!G&&L===void 0&&(X=!0,k($),F($)),L!==void 0&&$>=L?G.next($-L):(!X&&k($),A)}}}function JU(i,t,e){const n=[],s=e||mr.mix||_I,a=i.length-1;for(let l=0;l<a;l++){let u=s(i[l],i[l+1]);if(t){const h=Array.isArray(t)?t[l]||hs:t;u=Yp(h,u)}n.push(u)}return n}function WU(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const a=i.length;if(fT(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=i[0]===i[1];i[0]>i[a-1]&&(i=[...i].reverse(),t=[...t].reverse());const u=JU(t,n,s),h=u.length,d=p=>{if(l&&p<i[0])return t[0];let v=0;if(h>1)for(;v<i.length-2&&!(p<i[v+1]);v++);const A=hf(i[v],i[v+1],p);return u[v](A)};return e?p=>d(po(i[0],i[a-1],p)):d}function QU(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=hf(0,t,n);i.push(Re(e,1,s))}}function ZU(i){const t=[0];return QU(t,i.length-1),t}function jU(i,t){return i.map(e=>e*t)}function tO(i,t){return i.map(()=>t||uI).splice(0,i.length-1)}function rf({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=hU(n)?n.map(Cx):Cx(n),a={done:!1,value:t[0]},l=jU(e&&e.length===t.length?e:ZU(t),i),u=WU(l,t,{ease:Array.isArray(s)?s:tO(t,s)});return{calculatedDuration:i,next:h=>(a.value=u(h),a.done=h>=i,a)}}const eO=i=>i!==null;function ET(i,{repeat:t,repeatType:e="loop"},n,s=1){const a=i.filter(eO),u=s<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!u||n===void 0?a[u]:n}const nO={decay:d_,inertia:d_,tween:rf,keyframes:rf,spring:dy};function EI(i){typeof i.type=="string"&&(i.type=nO[i.type])}class bT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const iO=i=>i/100;class CT extends bT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:e}=this.options;e&&e.updatedAt!==Kn.now()&&this.tick(Kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;EI(t);const{type:e=rf,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=t;let{keyframes:u}=t;const h=e||rf;h!==rf&&typeof u[0]!="number"&&(this.mixKeyframes=Yp(iO,_I(u[0],u[1])),u=[0,100]);const d=h({...t,keyframes:u});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...u].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=TT(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:v,repeatType:A,repeatDelay:T,type:E,onUpdate:C,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const R=this.currentTime-d*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?R<0:R>s;this.currentTime=Math.max(R,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let P=this.currentTime,k=n;if(v){const $=Math.min(this.currentTime,s)/u;let X=Math.floor($),et=$%1;!et&&$>=1&&(et=1),et===1&&X--,X=Math.min(X,v+1),!!(X%2)&&(A==="reverse"?(et=1-et,T&&(et-=T/u)):A==="mirror"&&(k=l)),P=po(0,1,et)*u}const L=D?{done:!1,value:p[0]}:k.next(P);a&&(L.value=a(L.value));let{done:G}=L;!D&&h!==null&&(G=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return F&&E!==d_&&(L.value=ET(p,this.options,x,this.speed)),C&&C(L.value),F&&this.finish(),L}then(t,e){return this.finished.then(t,e)}get duration(){return cs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+cs(t)}get time(){return cs(this.currentTime)}set time(t){var e;t=dr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Kn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=cs(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:t=HU,startTime:e}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),(a=(s=this.options).onPlay)==null||a.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function sO(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const ll=i=>i*180/Math.PI,f_=i=>{const t=ll(Math.atan2(i[1],i[0]));return p_(t)},oO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:f_,rotateZ:f_,skewX:i=>ll(Math.atan(i[1])),skewY:i=>ll(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},p_=i=>(i=i%360,i<0&&(i+=360),i),Dx=f_,Px=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),Lx=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),rO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Px,scaleY:Lx,scale:i=>(Px(i)+Lx(i))/2,rotateX:i=>p_(ll(Math.atan2(i[6],i[5]))),rotateY:i=>p_(ll(Math.atan2(-i[2],i[0]))),rotateZ:Dx,rotate:Dx,skewX:i=>ll(Math.atan(i[4])),skewY:i=>ll(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function m_(i){return i.includes("scale")?1:0}function g_(i,t){if(!i||i==="none")return m_(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=rO,s=e;else{const u=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=oO,s=u}if(!s)return m_(t);const a=n[t],l=s[1].split(",").map(lO);return typeof a=="function"?a(l):l[a]}const aO=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return g_(e,t)};function lO(i){return parseFloat(i.trim())}const Ph=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lh=new Set(Ph),kx=i=>i===Dh||i===ft,uO=new Set(["x","y","z"]),cO=Ph.filter(i=>!uO.has(i));function hO(i){const t=[];return cO.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Ca={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>g_(t,"x"),y:(i,{transform:t})=>g_(t,"y")};Ca.translateX=Ca.x;Ca.translateY=Ca.y;const fu=new Set;let y_=!1,v_=!1,A_=!1;function bI(){if(v_){const i=Array.from(fu).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=hO(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([a,l])=>{var u;(u=n.getValue(a))==null||u.set(l)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}v_=!1,y_=!1,fu.forEach(i=>i.complete(A_)),fu.clear()}function CI(){fu.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(v_=!0)})}function dO(){A_=!0,CI(),bI(),A_=!1}class wT{constructor(t,e,n,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(fu.add(this),y_||(y_=!0,_e.read(CI),_e.resolveKeyframes(bI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const a=s==null?void 0:s.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}sO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),fu.delete(this)}cancel(){this.state==="scheduled"&&(fu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fO=i=>i.startsWith("--");function pO(i,t,e){fO(t)?i.style.setProperty(t,e):i.style[t]=e}const mO=pT(()=>window.ScrollTimeline!==void 0),gO={};function yO(i,t){const e=pT(i);return()=>gO[t]??e()}const wI=yO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vd=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,Ux={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vd([0,.65,.55,1]),circOut:Vd([.55,0,1,.45]),backIn:Vd([.31,.01,.66,-.59]),backOut:Vd([.33,1.53,.69,.99])};function xI(i,t){if(i)return typeof i=="function"?wI()?SI(i,t):"ease-out":cI(i)?Vd(i):Array.isArray(i)?i.map(e=>xI(e,t)||Ux.easeOut):Ux[i]}function vO(i,t,e,{delay:n=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:h}={},d=void 0){const p={[t]:e};h&&(p.offset=h);const v=xI(u,s);Array.isArray(v)&&(p.easing=v);const A={delay:n,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(A.pseudoElement=d),i.animate(p,A)}function RI(i){return typeof i=="function"&&"applyToOptions"in i}function AO({type:i,...t}){return RI(i)&&wI()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _O extends bT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,fT(typeof t.type!="string");const d=AO(t);this.animation=vO(e,n,s,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=ET(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):pO(e,n,p),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,n;const t=((n=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:n.call(e).duration)||0;return cs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+cs(t)}get time(){return cs(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=dr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&mO()?(this.animation.timeline=t,hs):e(this)}}const MI={anticipate:rI,backInOut:oI,circInOut:lI};function SO(i){return i in MI}function TO(i){typeof i.ease=="string"&&SO(i.ease)&&(i.ease=MI[i.ease])}const HA=10;class EO extends _O{constructor(t){TO(t),EI(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new CT({...l,autoplay:!1}),h=Math.max(HA,Kn.now()-this.startTime),d=po(0,HA,h-HA);e.setWithVelocity(u.sample(Math.max(0,h-d)).value,u.sample(h).value,d),u.stop()}}const Ox=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ra.test(i)||i==="0")&&!i.startsWith("url("));function bO(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function CO(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=i[i.length-1],l=Ox(s,t),u=Ox(a,t);return!l||!u?!1:bO(i)||(e==="spring"||RI(e))&&n}function __(i){i.duration=0,i.type="keyframes"}const wO=new Set(["opacity","clipPath","filter","transform"]),xO=pT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function RO(i){var p;const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:a,type:l}=i;if(!(((p=t==null?void 0:t.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return xO()&&e&&wO.has(e)&&(e!=="transform"||!d)&&!h&&!n&&s!=="mirror"&&a!==0&&l!=="inertia"}const MO=40;class IO extends bT{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:h,motionValue:d,element:p,...v}){var E;super(),this.stop=()=>{var C,x;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Kn.now();const A={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:p,...v},T=(p==null?void 0:p.KeyframeResolver)||wT;this.keyframeResolver=new T(u,(C,x,R)=>this.onKeyframesResolved(C,x,A,!R),h,d,p),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(t,e,n,s){var x,R;this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:h,isHandoff:d,onUpdate:p}=n;this.resolvedAt=Kn.now(),CO(t,a,l,u)||((mr.instantAnimations||!h)&&(p==null||p(ET(t,n,e))),t[0]=t[t.length-1],__(n),n.repeat=0);const A={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},T=!d&&RO(A),E=(R=(x=A.motionValue)==null?void 0:x.owner)==null?void 0:R.current,C=T?new EO({...A,element:E}):new CT(A);C.finished.then(()=>{this.notifyFinished()}).catch(hs),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),dO()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function II(i,t,e,n=0,s=1){const a=Array.from(i).sort((d,p)=>d.sortNodePosition(p)).indexOf(t),l=i.size,u=(l-1)*n;return typeof e=="function"?e(a,l):s===1?a*n:u-a*n}const NO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DO(i){const t=NO.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function NI(i,t,e=1){const[n,s]=DO(i);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return QM(l)?parseFloat(l):l}return vT(s)?NI(s,t,e+1):s}const PO={type:"spring",stiffness:500,damping:25,restSpeed:10},LO=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),kO={type:"keyframes",duration:.8},UO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OO=(i,{keyframes:t})=>t.length>2?kO:Lh.has(i)?i.startsWith("scale")?LO(t[1]):PO:UO,FO=i=>i!==null;function VO(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(FO),a=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[a]}function xT(i,t){return(i==null?void 0:i[t])??(i==null?void 0:i.default)??i}function HO({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const RT=(i,t,e,n={},s,a)=>l=>{const u=xT(n,i)||{},h=u.delay||n.delay||0;let{elapsed:d=0}=n;d=d-dr(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-d,onUpdate:A=>{t.set(A),u.onUpdate&&u.onUpdate(A)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:i,motionValue:t,element:a?void 0:s};HO(u)||Object.assign(p,OO(i,p)),p.duration&&(p.duration=dr(p.duration)),p.repeatDelay&&(p.repeatDelay=dr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(__(p),p.delay===0&&(v=!0)),(mr.instantAnimations||mr.skipAnimations)&&(v=!0,__(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,v&&!a&&t.get()!==void 0){const A=VO(p.keyframes,u);if(A!==void 0){_e.update(()=>{p.onUpdate(A),p.onComplete()});return}}return u.isSync?new CT(p):new IO(p)};function Fx(i){const t=[{},{}];return i==null||i.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function MT(i,t,e,n){if(typeof t=="function"){const[s,a]=Fx(n);t=t(e!==void 0?e:i.custom,s,a)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,a]=Fx(n);t=t(e!==void 0?e:i.custom,s,a)}return t}function Sc(i,t,e){const n=i.getProps();return MT(n,t,e!==void 0?e:n.custom,i)}const DI=new Set(["width","height","top","left","right","bottom",...Ph]),Vx=30,BO=i=>!isNaN(parseFloat(i));class GO{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var a;const s=Kn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Kn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=BO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new mT);const n=this.events[t].add(e);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Vx)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Vx);return tI(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nh(i,t){return new GO(i,t)}const S_=i=>Array.isArray(i);function zO(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Nh(e))}function qO(i){return S_(i)?i[i.length-1]||0:i}function YO(i,t){const e=Sc(i,t);let{transitionEnd:n={},transition:s={},...a}=e||{};a={...a,...n};for(const l in a){const u=qO(a[l]);zO(i,l,u)}}const On=i=>!!(i&&i.getVelocity);function XO(i){return!!(On(i)&&i.add)}function T_(i,t){const e=i.getValue("willChange");if(XO(e))return e.add(t);if(!e&&mr.WillChange){const n=new mr.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function IT(i){return i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const $O="framerAppearId",PI="data-"+IT($O);function LI(i){return i.props[PI]}function KO({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function kI(i,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:a=i.getDefaultTransition(),transitionEnd:l,...u}=t;const h=a==null?void 0:a.reduceMotion;n&&(a=n);const d=[],p=s&&i.animationState&&i.animationState.getState()[s];for(const v in u){const A=i.getValue(v,i.latestValues[v]??null),T=u[v];if(T===void 0||p&&KO(p,v))continue;const E={delay:e,...xT(a||{},v)},C=A.get();if(C!==void 0&&!A.isAnimating&&!Array.isArray(T)&&T===C&&!E.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const P=LI(i);if(P){const k=window.MotionHandoffAnimation(P,v,_e);k!==null&&(E.startTime=k,x=!0)}}T_(i,v);const R=h??i.shouldReduceMotion;A.start(RT(v,A,T,R&&DI.has(v)?{type:!1}:E,i,x));const D=A.animation;D&&d.push(D)}return l&&Promise.all(d).then(()=>{_e.update(()=>{l&&YO(i,l)})}),d}function E_(i,t,e={}){var h;const n=Sc(i,t,e.type==="exit"?(h=i.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const a=n?()=>Promise.all(kI(i,n,e)):()=>Promise.resolve(),l=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:A}=s;return JO(i,t,d,p,v,A,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,p]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>p())}else return Promise.all([a(),l(e.delay)])}function JO(i,t,e=0,n=0,s=0,a=1,l){const u=[];for(const h of i.variantChildren)h.notify("AnimationStart",t),u.push(E_(h,t,{...l,delay:e+(typeof n=="function"?0:n)+II(i.variantChildren,h,n,s,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(u)}function WO(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>E_(i,a,e));n=Promise.all(s)}else if(typeof t=="string")n=E_(i,t,e);else{const s=typeof t=="function"?Sc(i,t,e.custom):t;n=Promise.all(kI(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}const QO={test:i=>i==="auto",parse:i=>i},UI=i=>t=>t.test(i),OI=[Dh,ft,fo,Xr,bU,EU,QO],Hx=i=>OI.find(UI(i));function ZO(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||jM(i):!0}const jO=new Set(["brightness","contrast","saturate","opacity"]);function tF(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(AT)||[];if(!n)return i;const s=e.replace(n,"");let a=jO.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+s+")"}const eF=/\b([a-z-]*)\(.*?\)/gu,b_={...Ra,getAnimatableNone:i=>{const t=i.match(eF);return t?t.map(tF).join(" "):i}},Bx={...Dh,transform:Math.round},nF={rotate:Xr,rotateX:Xr,rotateY:Xr,rotateZ:Xr,scale:gg,scaleX:gg,scaleY:gg,scaleZ:gg,skew:Xr,skewX:Xr,skewY:Xr,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:df,originX:xx,originY:xx,originZ:ft},NT={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,top:ft,right:ft,bottom:ft,left:ft,inset:ft,insetBlock:ft,insetBlockStart:ft,insetBlockEnd:ft,insetInline:ft,insetInlineStart:ft,insetInlineEnd:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,paddingBlock:ft,paddingBlockStart:ft,paddingBlockEnd:ft,paddingInline:ft,paddingInlineStart:ft,paddingInlineEnd:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,marginBlock:ft,marginBlockStart:ft,marginBlockEnd:ft,marginInline:ft,marginInlineStart:ft,marginInlineEnd:ft,fontSize:ft,backgroundPositionX:ft,backgroundPositionY:ft,...nF,zIndex:Bx,fillOpacity:df,strokeOpacity:df,numOctaves:Bx},iF={...NT,color:Xe,backgroundColor:Xe,outlineColor:Xe,fill:Xe,stroke:Xe,borderColor:Xe,borderTopColor:Xe,borderRightColor:Xe,borderBottomColor:Xe,borderLeftColor:Xe,filter:b_,WebkitFilter:b_},FI=i=>iF[i];function VI(i,t){let e=FI(i);return e!==b_&&(e=Ra),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const sF=new Set(["auto","none","0"]);function oF(i,t,e){let n=0,s;for(;n<i.length&&!s;){const a=i[n];typeof a=="string"&&!sF.has(a)&&ff(a).values.length&&(s=i[n]),n++}if(s&&e)for(const a of t)i[a]=VI(e,s)}class rF extends wT{constructor(t,e,n,s,a){super(t,e,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let v=t[p];if(typeof v=="string"&&(v=v.trim(),vT(v))){const A=NI(v,e.current);A!==void 0&&(t[p]=A),p===t.length-1&&(this.finalKeyframe=v)}}if(this.resolveNoneKeyframes(),!DI.has(n)||t.length!==2)return;const[s,a]=t,l=Hx(s),u=Hx(a),h=wx(s),d=wx(a);if(h!==d&&Ca[n]){this.needsMeasurement=!0;return}if(l!==u)if(kx(l)&&kx(u))for(let p=0;p<t.length;p++){const v=t[p];typeof v=="string"&&(t[p]=parseFloat(v))}else Ca[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||ZO(t[s]))&&n.push(s);n.length&&oF(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ca[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var u;const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=Ca[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([h,d])=>{t.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function aF(i,t,e){if(i==null)return[];if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=(e==null?void 0:e[i])??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i).filter(n=>n!=null)}const HI=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function C_(i){return ZM(i)&&"offsetHeight"in i}const{schedule:DT}=hI(queueMicrotask,!1),_s={x:!1,y:!1};function BI(){return _s.x||_s.y}function lF(i){return i==="x"||i==="y"?_s[i]?null:(_s[i]=!0,()=>{_s[i]=!1}):_s.x||_s.y?null:(_s.x=_s.y=!0,()=>{_s.x=_s.y=!1})}function GI(i,t){const e=aF(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function Gx(i){return!(i.pointerType==="touch"||BI())}function uF(i,t,e={}){const[n,s,a]=GI(i,e),l=u=>{if(!Gx(u))return;const{target:h}=u,d=t(h,u);if(typeof d!="function"||!h)return;const p=v=>{Gx(v)&&(d(v),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,s)};return n.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const zI=(i,t)=>t?i===t?!0:zI(i,t.parentElement):!1,PT=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,cF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qI(i){return cF.has(i.tagName)||i.isContentEditable===!0}const Mg=new WeakSet;function zx(i){return t=>{t.key==="Enter"&&i(t)}}function BA(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const hF=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=zx(()=>{if(Mg.has(e))return;BA(e,"down");const s=zx(()=>{BA(e,"up")}),a=()=>BA(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function qx(i){return PT(i)&&!BI()}function dF(i,t,e={}){const[n,s,a]=GI(i,e),l=u=>{const h=u.currentTarget;if(!qx(u))return;Mg.add(h);const d=t(h,u),p=(T,E)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",A),Mg.has(h)&&Mg.delete(h),qx(T)&&typeof d=="function"&&d(T,{success:E})},v=T=>{p(T,h===window||h===document||e.useGlobalTarget||zI(h,T.target))},A=T=>{p(T,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",A,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),C_(u)&&(u.addEventListener("focus",d=>hF(d,s)),!qI(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function YI(i){return ZM(i)&&"ownerSVGElement"in i}function fF(i){return YI(i)&&i.tagName==="svg"}const pF=[...OI,Xe,Ra],mF=i=>pF.find(UI(i)),Yx=()=>({translate:0,scale:1,origin:0,originPoint:0}),pc=()=>({x:Yx(),y:Yx()}),Xx=()=>({min:0,max:0}),nn=()=>({x:Xx(),y:Xx()}),w_={current:null},XI={current:!1},gF=typeof window<"u";function yF(){if(XI.current=!0,!!gF)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>w_.current=i.matches;i.addEventListener("change",t),t()}else w_.current=!1}const vF=new WeakMap;function Zy(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function pf(i){return typeof i=="string"||Array.isArray(i)}const LT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kT=["initial",...LT];function jy(i){return Zy(i.animate)||kT.some(t=>pf(i[t]))}function $I(i){return!!(jy(i)||i.variants)}function AF(i,t,e){for(const n in t){const s=t[n],a=e[n];if(On(s))i.addValue(n,s);else if(On(a))i.addValue(n,Nh(s,{owner:i}));else if(a!==s)if(i.hasValue(n)){const l=i.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=i.getStaticValue(n);i.addValue(n,Nh(l!==void 0?l:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const $x=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let fy={};function KI(i){fy=i}function _F(){return fy}class SF{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Kn.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,_e.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=jy(e),this.isVariantNode=$I(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const A in v){const T=v[A];h[A]!==void 0&&On(T)&&T.set(h[A])}}mount(t){var e;this.current=t,vF.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(XI.current||yF(),this.shouldReduceMotion=w_.current),(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),xa(this.notifyUpdate),xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Lh.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&_e.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in fy){const e=fy[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<$x.length;n++){const s=$x[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=t[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=AF(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Nh(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(QM(n)||jM(n))?n=parseFloat(n):!mF(n)&&Ra.test(e)&&(n=VI(t,e)),this.setBaseTarget(t,On(n)?n.get():n)),On(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var a;const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const l=MT(this.props,e,(a=this.presenceContext)==null?void 0:a.custom);l&&(n=l[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!On(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new mT),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){DT.render(this.render)}}class JI extends SF{constructor(){super(...arguments),this.KeyframeResolver=rF}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;On(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class Da{constructor(t){this.isMounted=!1,this.node=t}update(){}}function WI({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function TF({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function EF(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function GA(i){return i===void 0||i===1}function x_({scale:i,scaleX:t,scaleY:e}){return!GA(i)||!GA(t)||!GA(e)}function tl(i){return x_(i)||QI(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function QI(i){return Kx(i.x)||Kx(i.y)}function Kx(i){return i&&i!=="0%"}function py(i,t,e){const n=i-e,s=t*n;return e+s}function Jx(i,t,e,n,s){return s!==void 0&&(i=py(i,s,n)),py(i,e,n)+t}function R_(i,t=0,e=1,n,s){i.min=Jx(i.min,t,e,n,s),i.max=Jx(i.max,t,e,n,s)}function ZI(i,{x:t,y:e}){R_(i.x,t.translate,t.scale,t.originPoint),R_(i.y,e.translate,e.scale,e.originPoint)}const Wx=.999999999999,Qx=1.0000000000001;function bF(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let a,l;for(let u=0;u<s;u++){a=e[u],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gc(i,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,ZI(i,l)),n&&tl(a.latestValues)&&gc(i,a.latestValues))}t.x<Qx&&t.x>Wx&&(t.x=1),t.y<Qx&&t.y>Wx&&(t.y=1)}function mc(i,t){i.min=i.min+t,i.max=i.max+t}function Zx(i,t,e,n,s=.5){const a=Re(i.min,i.max,s);R_(i,t,e,a,n)}function gc(i,t){Zx(i.x,t.x,t.scaleX,t.scale,t.originX),Zx(i.y,t.y,t.scaleY,t.scale,t.originY)}function jI(i,t){return WI(EF(i.getBoundingClientRect(),t))}function CF(i,t,e){const n=jI(i,e),{scroll:s}=t;return s&&(mc(n.x,s.offset.x),mc(n.y,s.offset.y)),n}const wF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xF=Ph.length;function RF(i,t,e){let n="",s=!0;for(let a=0;a<xF;a++){const l=Ph[a],u=i[l];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(l.startsWith("scale")?1:0);else{const d=parseFloat(u);h=l.startsWith("scale")?d===1:d===0}if(!h||e){const d=HI(u,NT[l]);if(!h){s=!1;const p=wF[l]||l;n+=`${p}(${d}) `}e&&(t[l]=d)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function UT(i,t,e){const{style:n,vars:s,transformOrigin:a}=i;let l=!1,u=!1;for(const h in t){const d=t[h];if(Lh.has(h)){l=!0;continue}else if(fI(h)){s[h]=d;continue}else{const p=HI(d,NT[h]);h.startsWith("origin")?(u=!0,a[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=RF(t,i.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:d="50%",originZ:p=0}=a;n.transformOrigin=`${h} ${d} ${p}`}}function tN(i,{style:t,vars:e},n,s){const a=i.style;let l;for(l in t)a[l]=t[l];s==null||s.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function jx(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Dd={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(ft.test(i))i=parseFloat(i);else return i;const e=jx(i,t.target.x),n=jx(i,t.target.y);return`${e}% ${n}%`}},MF={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=Ra.parse(i);if(s.length>5)return n;const a=Ra.createTransformer(i),l=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;s[0+l]/=u,s[1+l]/=h;const d=Re(u,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=d),typeof s[3+l]=="number"&&(s[3+l]/=d),a(s)}},M_={borderRadius:{...Dd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dd,borderTopRightRadius:Dd,borderBottomLeftRadius:Dd,borderBottomRightRadius:Dd,boxShadow:MF};function eN(i,{layout:t,layoutId:e}){return Lh.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!M_[i]||i==="opacity")}function OT(i,t,e){var l;const n=i.style,s=t==null?void 0:t.style,a={};if(!n)return a;for(const u in n)(On(n[u])||s&&On(s[u])||eN(u,i)||((l=e==null?void 0:e.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(a[u]=n[u]);return a}function IF(i){return window.getComputedStyle(i)}class NF extends JI{constructor(){super(...arguments),this.type="html",this.renderInstance=tN}readValueFromInstance(t,e){var n;if(Lh.has(e))return(n=this.projection)!=null&&n.isProjecting?m_(e):aO(t,e);{const s=IF(t),a=(fI(e)?s.getPropertyValue(e):s[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return jI(t,e)}build(t,e,n){UT(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return OT(t,e,n)}}const DF={offset:"stroke-dashoffset",array:"stroke-dasharray"},PF={offset:"strokeDashoffset",array:"strokeDasharray"};function LF(i,t,e=1,n=0,s=!0){i.pathLength=1;const a=s?DF:PF;i[a.offset]=`${-n}`,i[a.array]=`${t} ${e}`}const kF=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function nN(i,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},h,d,p){if(UT(i,u,d),h){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:v,style:A}=i;v.transform&&(A.transform=v.transform,delete v.transform),(A.transform||v.transformOrigin)&&(A.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),A.transform&&(A.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete v.transformBox);for(const T of kF)v[T]!==void 0&&(A[T]=v[T],delete v[T]);t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),n!==void 0&&(v.scale=n),s!==void 0&&LF(v,s,a,l,!1)}const iN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),sN=i=>typeof i=="string"&&i.toLowerCase()==="svg";function UF(i,t,e,n){tN(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(iN.has(s)?s:IT(s),t.attrs[s])}function oN(i,t,e){const n=OT(i,t,e);for(const s in i)if(On(i[s])||On(t[s])){const a=Ph.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=i[s]}return n}class OF extends JI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Lh.has(e)){const n=FI(e);return n&&n.default||0}return e=iN.has(e)?e:IT(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return oN(t,e,n)}build(t,e,n){nN(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){UF(t,e,n,s)}mount(t){this.isSVGTag=sN(t.tagName),super.mount(t)}}const FF=kT.length;function rN(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?rN(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<FF;e++){const n=kT[e],s=i.props[n];(pf(s)||s===!1)&&(t[n]=s)}return t}function aN(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const VF=[...LT].reverse(),HF=LT.length;function BF(i){return t=>Promise.all(t.map(({animation:e,options:n})=>WO(i,e,n)))}function GF(i){let t=BF(i),e=tR(),n=!0;const s=h=>(d,p)=>{var A;const v=Sc(i,p,h==="exit"?(A=i.presenceContext)==null?void 0:A.custom:void 0);if(v){const{transition:T,transitionEnd:E,...C}=v;d={...d,...C,...E}}return d};function a(h){t=h(i)}function l(h){const{props:d}=i,p=rN(i.parent)||{},v=[],A=new Set;let T={},E=1/0;for(let x=0;x<HF;x++){const R=VF[x],D=e[R],P=d[R]!==void 0?d[R]:p[R],k=pf(P),L=R===h?D.isActive:null;L===!1&&(E=x);let G=P===p[R]&&P!==d[R]&&k;if(G&&n&&i.manuallyAnimateOnMount&&(G=!1),D.protectedKeys={...T},!D.isActive&&L===null||!P&&!D.prevProp||Zy(P)||typeof P=="boolean")continue;const F=zF(D.prevProp,P);let $=F||R===h&&D.isActive&&!G&&k||x>E&&k,X=!1;const et=Array.isArray(P)?P:[P];let nt=et.reduce(s(R),{});L===!1&&(nt={});const{prevResolvedValues:mt={}}=D,Tt={...mt,...nt},pt=J=>{$=!0,A.has(J)&&(X=!0,A.delete(J)),D.needsAnimating[J]=!0;const ot=i.getValue(J);ot&&(ot.liveStyle=!1)};for(const J in Tt){const ot=nt[J],Et=mt[J];if(T.hasOwnProperty(J))continue;let Rt=!1;S_(ot)&&S_(Et)?Rt=!aN(ot,Et):Rt=ot!==Et,Rt?ot!=null?pt(J):A.add(J):ot!==void 0&&A.has(J)?pt(J):D.protectedKeys[J]=!0}D.prevProp=P,D.prevResolvedValues=nt,D.isActive&&(T={...T,...nt}),n&&i.blockInitialAnimation&&($=!1);const Dt=G&&F;$&&(!Dt||X)&&v.push(...et.map(J=>{const ot={type:R};if(typeof J=="string"&&n&&!Dt&&i.manuallyAnimateOnMount&&i.parent){const{parent:Et}=i,Rt=Sc(Et,J);if(Et.enteringChildren&&Rt){const{delayChildren:O}=Rt.transition||{};ot.delay=II(Et.enteringChildren,i,O)}}return{animation:J,options:ot}}))}if(A.size){const x={};if(typeof d.initial!="boolean"){const R=Sc(i,Array.isArray(d.initial)?d.initial[0]:d.initial);R&&R.transition&&(x.transition=R.transition)}A.forEach(R=>{const D=i.getBaseTarget(R),P=i.getValue(R);P&&(P.liveStyle=!0),x[R]=D??null}),v.push({animation:x})}let C=!!v.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(C=!1),n=!1,C?t(v):Promise.resolve()}function u(h,d){var v;if(e[h].isActive===d)return Promise.resolve();(v=i.variantChildren)==null||v.forEach(A=>{var T;return(T=A.animationState)==null?void 0:T.setActive(h,d)}),e[h].isActive=d;const p=l(h);for(const A in e)e[A].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>e,reset:()=>{e=tR()}}}function zF(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!aN(t,i):!1}function ja(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tR(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}function eR(i,t){i.min=t.min,i.max=t.max}function As(i,t){eR(i.x,t.x),eR(i.y,t.y)}function nR(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}const lN=1e-4,qF=1-lN,YF=1+lN,uN=.01,XF=0-uN,$F=0+uN;function Jn(i){return i.max-i.min}function KF(i,t,e){return Math.abs(i-t)<=e}function iR(i,t,e,n=.5){i.origin=n,i.originPoint=Re(t.min,t.max,i.origin),i.scale=Jn(e)/Jn(t),i.translate=Re(e.min,e.max,i.origin)-i.originPoint,(i.scale>=qF&&i.scale<=YF||isNaN(i.scale))&&(i.scale=1),(i.translate>=XF&&i.translate<=$F||isNaN(i.translate))&&(i.translate=0)}function af(i,t,e,n){iR(i.x,t.x,e.x,n?n.originX:void 0),iR(i.y,t.y,e.y,n?n.originY:void 0)}function sR(i,t,e){i.min=e.min+t.min,i.max=i.min+Jn(t)}function JF(i,t,e){sR(i.x,t.x,e.x),sR(i.y,t.y,e.y)}function oR(i,t,e){i.min=t.min-e.min,i.max=i.min+Jn(t)}function my(i,t,e){oR(i.x,t.x,e.x),oR(i.y,t.y,e.y)}function rR(i,t,e,n,s){return i-=t,i=py(i,1/e,n),s!==void 0&&(i=py(i,1/s,n)),i}function WF(i,t=0,e=1,n=.5,s,a=i,l=i){if(fo.test(t)&&(t=parseFloat(t),t=Re(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Re(a.min,a.max,n);i===a&&(u-=t),i.min=rR(i.min,t,e,u,s),i.max=rR(i.max,t,e,u,s)}function aR(i,t,[e,n,s],a,l){WF(i,t[e],t[n],t[s],t.scale,a,l)}const QF=["x","scaleX","originX"],ZF=["y","scaleY","originY"];function lR(i,t,e,n){aR(i.x,t,QF,e?e.x:void 0,n?n.x:void 0),aR(i.y,t,ZF,e?e.y:void 0,n?n.y:void 0)}function uR(i){return i.translate===0&&i.scale===1}function cN(i){return uR(i.x)&&uR(i.y)}function cR(i,t){return i.min===t.min&&i.max===t.max}function jF(i,t){return cR(i.x,t.x)&&cR(i.y,t.y)}function hR(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function hN(i,t){return hR(i.x,t.x)&&hR(i.y,t.y)}function dR(i){return Jn(i.x)/Jn(i.y)}function fR(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}function ts(i){return[i("x"),i("y")]}function tV(i,t,e){let n="";const s=i.x.translate/t.x,a=i.y.translate/t.y,l=(e==null?void 0:e.z)||0;if((s||a||l)&&(n=`translate3d(${s}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:p,rotateX:v,rotateY:A,skewX:T,skewY:E}=e;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),v&&(n+=`rotateX(${v}deg) `),A&&(n+=`rotateY(${A}deg) `),T&&(n+=`skewX(${T}deg) `),E&&(n+=`skewY(${E}deg) `)}const u=i.x.scale*t.x,h=i.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const dN=["TopLeft","TopRight","BottomLeft","BottomRight"],eV=dN.length,pR=i=>typeof i=="string"?parseFloat(i):i,mR=i=>typeof i=="number"||ft.test(i);function nV(i,t,e,n,s,a){s?(i.opacity=Re(0,e.opacity??1,iV(n)),i.opacityExit=Re(t.opacity??1,0,sV(n))):a&&(i.opacity=Re(t.opacity??1,e.opacity??1,n));for(let l=0;l<eV;l++){const u=`border${dN[l]}Radius`;let h=gR(t,u),d=gR(e,u);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||mR(h)===mR(d)?(i[u]=Math.max(Re(pR(h),pR(d),n),0),(fo.test(d)||fo.test(h))&&(i[u]+="%")):i[u]=d}(t.rotate||e.rotate)&&(i.rotate=Re(t.rotate||0,e.rotate||0,n))}function gR(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const iV=fN(0,.5,aI),sV=fN(.5,.95,hs);function fN(i,t,e){return n=>n<i?0:n>t?1:e(hf(i,t,n))}function oV(i,t,e){const n=On(i)?i:Nh(i);return n.start(RT("",n,t,e)),n.animation}function mf(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}const rV=(i,t)=>i.depth-t.depth;class aV{constructor(){this.children=[],this.isDirty=!1}add(t){hT(this.children,t),this.isDirty=!0}remove(t){dT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(rV),this.isDirty=!1,this.children.forEach(t)}}function lV(i,t){const e=Kn.now(),n=({timestamp:s})=>{const a=s-e;a>=t&&(xa(n),i(a-t))};return _e.setup(n,!0),()=>xa(n)}function Ig(i){return On(i)?i.get():i}class uV{constructor(){this.members=[]}add(t){hT(this.members,t),t.scheduleRender()}remove(t){if(dT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const s=n.options.layoutDependency,a=t.options.layoutDependency;s!==void 0&&a!==void 0&&s===a||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:u}=t.options;u===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ng={hasAnimatedSinceResize:!0,hasEverUpdated:!1},zA=["","X","Y","Z"],cV=1e3;let hV=0;function qA(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function pN(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=LI(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:a}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",_e,!(s||a))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&pN(n)}function mN({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},u=t==null?void 0:t()){this.id=hV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(pV),this.nodes.forEach(vV),this.nodes.forEach(AV),this.nodes.forEach(mV)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new aV)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new mT),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=YI(l)&&!fF(l),this.instance=l;const{layoutId:u,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),i){let p,v=0;const A=()=>this.root.updateBlockedByResize=!1;_e.read(()=>{v=window.innerWidth}),i(l,()=>{const T=window.innerWidth;T!==v&&(v=T,this.root.updateBlockedByResize=!0,p&&p(),p=lV(A,250),Ng.hasAnimatedSinceResize&&(Ng.hasAnimatedSinceResize=!1,this.nodes.forEach(AR)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:v,hasRelativeLayoutChanged:A,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||d.getDefaultTransition()||bV,{onLayoutAnimationStart:C,onLayoutAnimationComplete:x}=d.getProps(),R=!this.targetLayout||!hN(this.targetLayout,T),D=!v&&A;if(this.options.layoutRoot||this.resumeFrom||D||v&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...xT(E,"layout"),onPlay:C,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(p,D)}else v||AR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_V),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pN(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yV),this.nodes.forEach(dV),this.nodes.forEach(fV)):this.nodes.forEach(vR),this.clearAllSnapshots();const u=Kn.now();bn.delta=po(0,1e3/60,u-bn.timestamp),bn.timestamp=u,bn.isProcessing=!0,kA.update.process(bn),kA.preRender.process(bn),kA.render.process(bn),bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gV),this.sharedNodes.forEach(SV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jn(this.snapshot.measuredBox.x)&&!Jn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!cN(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&this.instance&&(u||tl(this.latestValues)||p)&&(s(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),CV(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:l}=this.options;if(!l)return nn();const u=l.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(wV))){const{scroll:p}=this.root;p&&(mc(u.x,p.offset.x),mc(u.y,p.offset.y))}return u}removeElementScroll(l){var h;const u=nn();if(As(u,l),(h=this.scroll)!=null&&h.wasRoot)return u;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:v,options:A}=p;p!==this.root&&v&&A.layoutScroll&&(v.wasRoot&&As(u,l),mc(u.x,v.offset.x),mc(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const h=nn();As(h,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&gc(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),tl(p.latestValues)&&gc(h,p.latestValues)}return tl(this.latestValues)&&gc(h,this.latestValues),h}removeTransform(l){const u=nn();As(u,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!tl(d.latestValues))continue;x_(d.latestValues)&&d.updateSnapshot();const p=nn(),v=d.measurePageBox();As(p,v),lR(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return tl(this.latestValues)&&lR(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var T;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:v}=this.options;if(!this.layout||!(p||v))return;this.resolvedRelativeTargetAt=bn.timestamp;const A=this.getClosestProjectingParent();A&&this.linkedParentVersion!==A.layoutVersion&&!A.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(A&&A.layout?this.createRelativeTarget(A,this.layout.layoutBox,A.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):As(this.target,this.layout.layoutBox),ZI(this.target,this.targetDelta)):As(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?this.createRelativeTarget(A,this.target,A.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||x_(this.parent.latestValues)||QI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),my(this.relativeTargetOrigin,u,h),As(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var E;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===bn.timestamp&&(h=!1),h)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;As(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,A=this.treeScale.y;bF(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=nn());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nR(this.prevProjectionDelta.x,this.projectionDelta.x),nR(this.prevProjectionDelta.y,this.projectionDelta.y)),af(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==A||!fR(this.projectionDelta.x,this.prevProjectionDelta.x)||!fR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pc(),this.projectionDelta=pc(),this.projectionDeltaWithTransform=pc()}setAnimationOrigin(l,u=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},v=pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const A=nn(),T=h?h.source:void 0,E=this.layout?this.layout.source:void 0,C=T!==E,x=this.getStack(),R=!x||x.members.length<=1,D=!!(C&&!R&&this.options.crossfade===!0&&!this.path.some(EV));this.animationProgress=0;let P;this.mixTargetDelta=k=>{const L=k/1e3;_R(v.x,l.x,L),_R(v.y,l.y,L),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(my(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TV(this.relativeTarget,this.relativeTargetOrigin,A,L),P&&jF(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=nn()),As(P,this.relativeTarget)),C&&(this.animationValues=p,nV(p,d,this.latestValues,L,D,R)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var u,h,d;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(d=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||d.stop(),this.pendingAnimation&&(xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{Ng.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nh(0)),this.currentAnimation=oV(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),l.onUpdate&&l.onUpdate(p)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:d,latestValues:p}=l;if(!(!u||!h||!d)){if(this!==l&&this.layout&&d&&gN(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||nn();const v=Jn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+v;const A=Jn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+A}As(u,h),gc(u,p),af(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new uV),this.sharedNodes.get(l).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const d={};h.z&&qA("z",l,d,this.animationValues);for(let p=0;p<zA.length;p++)qA(`rotate${zA[p]}`,l,d,this.animationValues),qA(`skew${zA[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Ig(u==null?void 0:u.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Ig(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!tl(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let v=tV(this.projectionDeltaWithTransform,this.treeScale,p);h&&(v=h(p,v)),l.transform=v;const{x:A,y:T}=this.projectionDelta;l.transformOrigin=`${A.origin*100}% ${T.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in M_){if(p[E]===void 0)continue;const{correct:C,applyTo:x,isCSSVariable:R}=M_[E],D=v==="none"?p[E]:C(p[E],d);if(x){const P=x.length;for(let k=0;k<P;k++)l[x[k]]=D}else R?this.options.visualElement.renderState.vars[E]=D:l[E]=D}this.options.layoutId&&(l.pointerEvents=d===this?Ig(u==null?void 0:u.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(yR),this.root.sharedNodes.clear()}}}function dV(i){i.updateLayout()}function fV(i){var e;const t=((e=i.resumeFrom)==null?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:a}=i.options,l=t.source!==i.layout.source;a==="size"?ts(v=>{const A=l?t.measuredBox[v]:t.layoutBox[v],T=Jn(A);A.min=n[v].min,A.max=A.min+T}):gN(a,t.layoutBox,n)&&ts(v=>{const A=l?t.measuredBox[v]:t.layoutBox[v],T=Jn(n[v]);A.max=A.min+T,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+T)});const u=pc();af(u,n,t.layoutBox);const h=pc();l?af(h,i.applyTransform(s,!0),t.measuredBox):af(h,n,t.layoutBox);const d=!cN(u);let p=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:A,layout:T}=v;if(A&&T){const E=nn();my(E,t.layoutBox,A.layoutBox);const C=nn();my(C,n,T.layoutBox),hN(E,C)||(p=!0),v.options.layoutRoot&&(i.relativeTarget=C,i.relativeTargetOrigin=E,i.relativeParent=v)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:h,layoutDelta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function pV(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function mV(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function gV(i){i.clearSnapshot()}function yR(i){i.clearMeasurements()}function vR(i){i.isLayoutDirty=!1}function yV(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function AR(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function vV(i){i.resolveTargetDelta()}function AV(i){i.calcProjection()}function _V(i){i.resetSkewAndRotation()}function SV(i){i.removeLeadSnapshot()}function _R(i,t,e){i.translate=Re(t.translate,0,e),i.scale=Re(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function SR(i,t,e,n){i.min=Re(t.min,e.min,n),i.max=Re(t.max,e.max,n)}function TV(i,t,e,n){SR(i.x,t.x,e.x,n),SR(i.y,t.y,e.y,n)}function EV(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const bV={duration:.45,ease:[.4,0,.1,1]},TR=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),ER=TR("applewebkit/")&&!TR("chrome/")?Math.round:hs;function bR(i){i.min=ER(i.min),i.max=ER(i.max)}function CV(i){bR(i.x),bR(i.y)}function gN(i,t,e){return i==="position"||i==="preserve-aspect"&&!KF(dR(t),dR(e),.2)}function wV(i){var t;return i!==i.root&&((t=i.scroll)==null?void 0:t.wasRoot)}const xV=mN({attachResizeListener:(i,t)=>mf(i,"resize",t),measureScroll:()=>{var i,t;return{x:document.documentElement.scrollLeft||((i=document.body)==null?void 0:i.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),YA={current:void 0},yN=mN({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!YA.current){const i=new xV({});i.mount(window),i.setOptions({layoutScroll:!0}),YA.current=i}return YA.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),FT=st.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function CR(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function RV(...i){return t=>{let e=!1;const n=i.map(s=>{const a=CR(s,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():CR(i[s],null)}}}}function MV(...i){return st.useCallback(RV(...i),i)}class IV extends st.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,s=C_(n)&&n.offsetWidth||0,a=C_(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=s-l.width-l.left,l.bottom=a-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function NV({children:i,isPresent:t,anchorX:e,anchorY:n,root:s}){var v;const a=st.useId(),l=st.useRef(null),u=st.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=st.useContext(FT),d=((v=i.props)==null?void 0:v.ref)??(i==null?void 0:i.ref),p=MV(l,d);return st.useInsertionEffect(()=>{const{width:A,height:T,top:E,left:C,right:x,bottom:R}=u.current;if(t||!l.current||!A||!T)return;const D=e==="left"?`left: ${C}`:`right: ${x}`,P=n==="bottom"?`bottom: ${R}`:`top: ${E}`;l.current.dataset.motionPopId=a;const k=document.createElement("style");h&&(k.nonce=h);const L=s??document.head;return L.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${A}px !important;
            height: ${T}px !important;
            ${D}px !important;
            ${P}px !important;
          }
        `),()=>{L.contains(k)&&L.removeChild(k)}},[t]),V.jsx(IV,{isPresent:t,childRef:l,sizeRef:u,children:st.cloneElement(i,{ref:p})})}const DV=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,anchorY:h,root:d})=>{const p=cT(PV),v=st.useId();let A=!0,T=st.useMemo(()=>(A=!1,{id:v,initial:t,isPresent:e,custom:s,onExitComplete:E=>{p.set(E,!0);for(const C of p.values())if(!C)return;n&&n()},register:E=>(p.set(E,!1),()=>p.delete(E))}),[e,p,n]);return a&&A&&(T={...T}),st.useMemo(()=>{p.forEach((E,C)=>p.set(C,!1))},[e]),st.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),l==="popLayout"&&(i=V.jsx(NV,{isPresent:e,anchorX:u,anchorY:h,root:d,children:i})),V.jsx(Qy.Provider,{value:T,children:i})};function PV(){return new Map}function vN(i=!0){const t=st.useContext(Qy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,a=st.useId();st.useEffect(()=>{if(i)return s(a)},[i]);const l=st.useCallback(()=>i&&n&&n(a),[a,n,i]);return!e&&n?[!1,l]:[!0]}const yg=i=>i.key||"";function wR(i){const t=[];return st.Children.forEach(i,e=>{st.isValidElement(e)&&t.push(e)}),t}const gy=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",anchorY:h="top",root:d})=>{const[p,v]=vN(l),A=st.useMemo(()=>wR(i),[i]),T=l&&!p?[]:A.map(yg),E=st.useRef(!0),C=st.useRef(A),x=cT(()=>new Map),R=st.useRef(new Set),[D,P]=st.useState(A),[k,L]=st.useState(A);WM(()=>{E.current=!1,C.current=A;for(let $=0;$<k.length;$++){const X=yg(k[$]);T.includes(X)?(x.delete(X),R.current.delete(X)):x.get(X)!==!0&&x.set(X,!1)}},[k,T.length,T.join("-")]);const G=[];if(A!==D){let $=[...A];for(let X=0;X<k.length;X++){const et=k[X],nt=yg(et);T.includes(nt)||($.splice(X,0,et),G.push(et))}return a==="wait"&&G.length&&($=G),L(wR($)),P(A),null}const{forceRender:F}=st.useContext(uT);return V.jsx(V.Fragment,{children:k.map($=>{const X=yg($),et=l&&!p?!1:A===k||T.includes(X),nt=()=>{if(R.current.has(X))return;if(R.current.add(X),x.has(X))x.set(X,!0);else return;let mt=!0;x.forEach(Tt=>{Tt||(mt=!1)}),mt&&(F==null||F(),L(C.current),l&&(v==null||v()),n&&n())};return V.jsx(DV,{isPresent:et,initial:!E.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:et?void 0:nt,anchorX:u,anchorY:h,children:$},X)})})},AN=st.createContext({strict:!1}),xR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let RR=!1;function LV(){if(RR)return;const i={};for(const t in xR)i[t]={isEnabled:e=>xR[t].some(n=>!!e[n])};KI(i),RR=!0}function _N(){return LV(),_F()}function kV(i){const t=_N();for(const e in i)t[e]={...t[e],...i[e]};KI(t)}const UV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yy(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||UV.has(i)}let SN=i=>!yy(i);function OV(i){typeof i=="function"&&(SN=t=>t.startsWith("on")?!yy(t):i(t))}try{OV(require("@emotion/is-prop-valid").default)}catch{}function FV(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(SN(s)||e===!0&&yy(s)||!t&&!yy(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}const t0=st.createContext({});function VV(i,t){if(jy(i)){const{initial:e,animate:n}=i;return{initial:e===!1||pf(e)?e:void 0,animate:pf(n)?n:void 0}}return i.inherit!==!1?t:{}}function HV(i){const{initial:t,animate:e}=VV(i,st.useContext(t0));return st.useMemo(()=>({initial:t,animate:e}),[MR(t),MR(e)])}function MR(i){return Array.isArray(i)?i.join(" "):i}const VT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TN(i,t,e){for(const n in t)!On(t[n])&&!eN(n,e)&&(i[n]=t[n])}function BV({transformTemplate:i},t){return st.useMemo(()=>{const e=VT();return UT(e,t,i),Object.assign({},e.vars,e.style)},[t])}function GV(i,t){const e=i.style||{},n={};return TN(n,e,i),Object.assign(n,BV(i,t)),n}function zV(i,t){const e={},n=GV(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const EN=()=>({...VT(),attrs:{}});function qV(i,t,e,n){const s=st.useMemo(()=>{const a=EN();return nN(a,t,sN(n),i.transformTemplate,i.style),{...a.attrs,style:{...a.style}}},[t]);if(i.style){const a={};TN(a,i.style,i),s.style={...a,...s.style}}return s}const YV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function HT(i){return typeof i!="string"||i.includes("-")?!1:!!(YV.indexOf(i)>-1||/[A-Z]/u.test(i))}function XV(i,t,e,{latestValues:n},s,a=!1,l){const h=(l??HT(i)?qV:zV)(t,n,s,i),d=FV(t,typeof i=="string",a),p=i!==st.Fragment?{...d,...h,ref:e}:{},{children:v}=t,A=st.useMemo(()=>On(v)?v.get():v,[v]);return st.createElement(i,{...p,children:A})}function $V({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,s){return{latestValues:KV(e,n,s,i),renderState:t()}}function KV(i,t,e,n){const s={},a=n(i,{});for(const A in a)s[A]=Ig(a[A]);let{initial:l,animate:u}=i;const h=jy(i),d=$I(i);t&&d&&!h&&i.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const v=p?u:l;if(v&&typeof v!="boolean"&&!Zy(v)){const A=Array.isArray(v)?v:[v];for(let T=0;T<A.length;T++){const E=MT(i,A[T]);if(E){const{transitionEnd:C,transition:x,...R}=E;for(const D in R){let P=R[D];if(Array.isArray(P)){const k=p?P.length-1:0;P=P[k]}P!==null&&(s[D]=P)}for(const D in C)s[D]=C[D]}}}return s}const bN=i=>(t,e)=>{const n=st.useContext(t0),s=st.useContext(Qy),a=()=>$V(i,t,n,s);return e?a():cT(a)},JV=bN({scrapeMotionValuesFromProps:OT,createRenderState:VT}),WV=bN({scrapeMotionValuesFromProps:oN,createRenderState:EN}),QV=Symbol.for("motionComponentSymbol");function ZV(i,t,e){const n=st.useRef(e);st.useInsertionEffect(()=>{n.current=e});const s=st.useRef(null);return st.useCallback(a=>{var u;a&&((u=i.onMount)==null||u.call(i,a)),t&&(a?t.mount(a):t.unmount());const l=n.current;if(typeof l=="function")if(a){const h=l(a);typeof h=="function"&&(s.current=h)}else s.current?(s.current(),s.current=null):l(a);else l&&(l.current=a)},[t])}const CN=st.createContext({});function Hd(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function jV(i,t,e,n,s,a){var R,D;const{visualElement:l}=st.useContext(t0),u=st.useContext(AN),h=st.useContext(Qy),d=st.useContext(FT).reducedMotion,p=st.useRef(null),v=st.useRef(!1);n=n||u.renderer,!p.current&&n&&(p.current=n(i,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d,isSVG:a}),v.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const A=p.current,T=st.useContext(CN);A&&!A.projection&&s&&(A.type==="html"||A.type==="svg")&&tH(p.current,e,s,T);const E=st.useRef(!1);st.useInsertionEffect(()=>{A&&E.current&&A.update(e,h)});const C=e[PI],x=st.useRef(!!C&&!((R=window.MotionHandoffIsComplete)!=null&&R.call(window,C))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,C)));return WM(()=>{v.current=!0,A&&(E.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),x.current&&A.animationState&&A.animationState.animateChanges())}),st.useEffect(()=>{A&&(!x.current&&A.animationState&&A.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)==null||P.call(window,C)}),x.current=!1),A.enteringChildren=void 0)}),A}function tH(i,t,e,n){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:d,layoutCrossfade:p}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:wN(i.parent)),i.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&Hd(u),visualElement:i,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:d})}function wN(i){if(i)return i.options.allowProjection!==!1?i.projection:wN(i.parent)}function XA(i,{forwardMotionProps:t=!1,type:e}={},n,s){n&&kV(n);const a=e?e==="svg":HT(i),l=a?WV:JV;function u(d,p){let v;const A={...st.useContext(FT),...d,layoutId:eH(d)},{isStatic:T}=A,E=HV(d),C=l(d,T);if(!T&&JM){nH();const x=iH(A);v=x.MeasureLayout,E.visualElement=jV(i,C,A,s,x.ProjectionNode,a)}return V.jsxs(t0.Provider,{value:E,children:[v&&E.visualElement?V.jsx(v,{visualElement:E.visualElement,...A}):null,XV(i,d,ZV(C,E.visualElement,p),C,T,t,a)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const h=st.forwardRef(u);return h[QV]=i,h}function eH({layoutId:i}){const t=st.useContext(uT).id;return t&&i!==void 0?t+"-"+i:i}function nH(i,t){st.useContext(AN).strict}function iH(i){const t=_N(),{drag:e,layout:n}=t;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(i)||n!=null&&n.isEnabled(i)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function sH(i,t){if(typeof Proxy>"u")return XA;const e=new Map,n=(a,l)=>XA(a,l,i,t),s=(a,l)=>n(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,XA(l,void 0,i,t)),e.get(l))})}const oH=(i,t)=>t.isSVG??HT(i)?new OF(t):new NF(t,{allowProjection:i!==st.Fragment});class rH extends Da{constructor(t){super(t),t.animationState||(t.animationState=GF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let aH=0;class lH extends Da{constructor(){super(...arguments),this.id=aH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const uH={animation:{Feature:rH},exit:{Feature:lH}};function Kp(i){return{point:{x:i.pageX,y:i.pageY}}}const cH=i=>t=>PT(t)&&i(t,Kp(t));function lf(i,t,e,n){return mf(i,t,cH(e),n)}const xN=({current:i})=>i?i.ownerDocument.defaultView:null,IR=(i,t)=>Math.abs(i-t);function hH(i,t){const e=IR(i.x,t.x),n=IR(i.y,t.y);return Math.sqrt(e**2+n**2)}const NR=new Set(["auto","scroll"]);class RN{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=KA(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,C=hH(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!C)return;const{point:x}=T,{timestamp:R}=bn;this.history.push({...x,timestamp:R});const{onStart:D,onMove:P}=this.handlers;E||(D&&D(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,T)},this.handlePointerMove=(T,E)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=$A(E,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(T,E)=>{this.end();const{onEnd:C,onSessionEnd:x,resumeAnimation:R}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=KA(T.type==="pointercancel"?this.lastMoveEventInfo:$A(E,this.transformPagePoint),this.history);this.startEvent&&C&&C(T,D),x&&x(T,D)},!PT(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=s||window;const h=Kp(t),d=$A(h,this.transformPagePoint),{point:p}=d,{timestamp:v}=bn;this.history=[{...p,timestamp:v}];const{onSessionStart:A}=e;A&&A(t,KA(d,this.history)),this.removeListeners=Yp(lf(this.contextWindow,"pointermove",this.handlePointerMove),lf(this.contextWindow,"pointerup",this.handlePointerUp),lf(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(NR.has(n.overflowX)||NR.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:s.x-e.x,y:s.y-e.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,s),_e.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),xa(this.updatePoint)}}function $A(i,t){return t?{point:t(i.point)}:i}function DR(i,t){return{x:i.x-t.x,y:i.y-t.y}}function KA({point:i},t){return{point:i,delta:DR(i,MN(t)),offset:DR(i,dH(t)),velocity:fH(t,.1)}}function dH(i){return i[0]}function MN(i){return i[i.length-1]}function fH(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=MN(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>dr(t)));)e--;if(!n)return{x:0,y:0};const a=cs(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function pH(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?Re(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?Re(e,i,n.max):Math.min(i,e)),i}function PR(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function mH(i,{top:t,left:e,bottom:n,right:s}){return{x:PR(i.x,e,s),y:PR(i.y,t,n)}}function LR(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function gH(i,t){return{x:LR(i.x,t.x),y:LR(i.y,t.y)}}function yH(i,t){let e=.5;const n=Jn(i),s=Jn(t);return s>n?e=hf(t.min,t.max-n,i.min):n>s&&(e=hf(i.min,i.max-s,t.min)),po(0,1,e)}function vH(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const I_=.35;function AH(i=I_){return i===!1?i=0:i===!0&&(i=I_),{x:kR(i,"left","right"),y:kR(i,"top","bottom")}}function kR(i,t,e){return{min:UR(i,t),max:UR(i,e)}}function UR(i,t){return typeof i=="number"?i:i[t]||0}const _H=new WeakMap;class SH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=v=>{e?(this.stopAnimation(),this.snapToCursor(Kp(v).point)):this.pauseAnimation()},l=(v,A)=>{this.stopAnimation();const{drag:T,dragPropagation:E,onDragStart:C}=this.getProps();if(T&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=lF(T),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ts(R=>{let D=this.getAxisMotionValue(R).get()||0;if(fo.test(D)){const{projection:P}=this.visualElement;if(P&&P.layout){const k=P.layout.layoutBox[R];k&&(D=Jn(k)*(parseFloat(D)/100))}}this.originPoint[R]=D}),C&&_e.postRender(()=>C(v,A)),T_(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},u=(v,A)=>{this.latestPointerEvent=v,this.latestPanInfo=A;const{dragPropagation:T,dragDirectionLock:E,onDirectionLock:C,onDrag:x}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:R}=A;if(E&&this.currentDirection===null){this.currentDirection=TH(R),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",A.point,R),this.updateAxis("y",A.point,R),this.visualElement.render(),x&&x(v,A)},h=(v,A)=>{this.latestPointerEvent=v,this.latestPanInfo=A,this.stop(v,A),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ts(v=>{var A;return this.getAnimationState(v)==="paused"&&((A=this.getAxisMotionValue(v).animation)==null?void 0:A.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new RN(t,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:xN(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,s=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&_e.postRender(()=>u(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!vg(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=pH(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;t&&Hd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=mH(n.layoutBox,t):this.constraints=!1,this.elastic=AH(e),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ts(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=vH(n.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Hd(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=CF(n,s.root,this.visualElement.getTransformPagePoint());let l=gH(s.layout.layoutBox,a);if(e){const u=e(TF(l));this.hasMutatedConstraints=!!u,u&&(l=WI(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},d=ts(p=>{if(!vg(p,e,this.currentDirection))return;let v=h&&h[p]||{};l&&(v={min:0,max:0});const A=s?200:1e6,T=s?40:1e7,E={type:"inertia",velocity:n?t[p]:0,bounceStiffness:A,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(p,E)});return Promise.all(d).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return T_(this.visualElement,t),n.start(RT(t,n,0,e,this.visualElement,!1))}stopAnimation(){ts(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ts(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ts(e=>{const{drag:n}=this.getProps();if(!vg(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[e],h=a.get()||0;a.set(t[e]-Re(l,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Hd(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ts(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();s[l]=yH({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ts(l=>{if(!vg(l,t,null))return;const u=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];u.set(Re(h,d,s[l]))})}addListeners(){if(!this.visualElement.current)return;_H.set(this.visualElement,this);const t=this.visualElement.current,e=lf(t,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps(),v=h.target,A=v!==t&&qI(v);d&&p&&!A&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();Hd(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_e.read(n);const l=mf(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(ts(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=h[p].translate,v.set(v.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=I_,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function vg(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function TH(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class EH extends Da{constructor(t){super(t),this.removeGroupControls=hs,this.removeListeners=hs,this.controls=new SH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const OR=i=>(t,e)=>{i&&_e.postRender(()=>i(t,e))};class bH extends Da{constructor(){super(...arguments),this.removePointerDownListener=hs}onPointerDown(t){this.session=new RN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:OR(t),onStart:OR(e),onMove:n,onEnd:(a,l)=>{delete this.session,s&&_e.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=lf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let JA=!1;class CH extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),n&&n.register&&s&&n.register(a),JA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Ng.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,t.layoutDependency!==e&&l.setOptions({...l.options,layoutDependency:e}),JA=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||_e.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),DT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;JA=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function IN(i){const[t,e]=vN(),n=st.useContext(uT);return V.jsx(CH,{...i,layoutGroup:n,switchLayoutGroup:st.useContext(CN),isPresent:t,safeToRemove:e})}const wH={pan:{Feature:bH},drag:{Feature:EH,ProjectionNode:yN,MeasureLayout:IN}};function FR(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,a=n[s];a&&_e.postRender(()=>a(t,Kp(t)))}class xH extends Da{mount(){const{current:t}=this.node;t&&(this.unmount=uF(t,(e,n)=>(FR(this.node,n,"Start"),s=>FR(this.node,s,"End"))))}unmount(){}}class RH extends Da{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yp(mf(this.node.current,"focus",()=>this.onFocus()),mf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VR(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),a=n[s];a&&_e.postRender(()=>a(t,Kp(t)))}class MH extends Da{mount(){const{current:t}=this.node;t&&(this.unmount=dF(t,(e,n)=>(VR(this.node,n,"Start"),(s,{success:a})=>VR(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const N_=new WeakMap,WA=new WeakMap,IH=i=>{const t=N_.get(i.target);t&&t(i)},NH=i=>{i.forEach(IH)};function DH({root:i,...t}){const e=i||document;WA.has(e)||WA.set(e,{});const n=WA.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(NH,{root:i,...t})),n[s]}function PH(i,t,e){const n=DH(t);return N_.set(i,e),n.observe(i),()=>{N_.delete(i),n.unobserve(i)}}const LH={some:0,all:1};class kH extends Da{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:LH[s]},u=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),A=d?p:v;A&&A(h)};return PH(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(UH(t,e))&&this.startObserver()}unmount(){}}function UH({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const OH={inView:{Feature:kH},tap:{Feature:MH},focus:{Feature:RH},hover:{Feature:xH}},FH={layout:{ProjectionNode:yN,MeasureLayout:IN}},VH={...uH,...OH,...wH,...FH},ks=sH(VH,oH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=i=>{const t=BH(i);return t.charAt(0).toUpperCase()+t.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=st.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},h)=>st.createElement("svg",{ref:h,...GH,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:NN("lucide",s),...!a&&!zH(u)&&{"aria-hidden":"true"},...u},[...l.map(([d,p])=>st.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(i,t)=>{const e=st.forwardRef(({className:n,...s},a)=>st.createElement(qH,{ref:a,iconNode:t,className:NN(`lucide-${HH(HR(i))}`,`lucide-${i}`,n),...s}));return e.displayName=HR(i),e};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],XH=Ie("book-open",YH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KH=Ie("chevron-right",$H);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WH=Ie("circle-check",JH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ZH=Ie("circle-x",QH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],tB=Ie("crown",jH);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],BR=Ie("graduation-cap",eB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iB=Ie("info",nB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],GR=Ie("layout-dashboard",sB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zR=Ie("loader-circle",oB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],qR=Ie("medal",rB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],lB=Ie("monitor",aB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],cB=Ie("play",uB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dB=Ie("rotate-ccw",hB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],pB=Ie("scan",fB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gB=Ie("send",mB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],vB=Ie("settings-2",yB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_B=Ie("settings",AB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],TB=Ie("star",SB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bB=Ie("triangle-alert",EB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],QA=Ie("trophy",CB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xB=Ie("upload",wB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],D_=Ie("user",RB);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YR=Ie("zap",MB),IB=({question:i,onSelectOption:t,selectedOption:e,isCorrect:n,showExplanation:s})=>V.jsx("div",{className:"w-full max-w-2xl mx-auto",children:V.jsxs(ks.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-900/40 backdrop-blur-xl p-6 md:p-10 rounded-[2.5rem] border border-slate-800 shadow-2xl relative overflow-hidden",children:[V.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-teal-500/50 to-transparent"}),V.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-10 leading-tight text-white tracking-tight",children:i.question}),V.jsx("div",{className:"grid gap-4",children:i.options.map((a,l)=>{const u=e===l,h=i.correctAnswer===l;let d="bg-slate-800/30 border-slate-800 hover:border-teal-500/30 text-slate-300";return e!==null&&(h?d="bg-emerald-500/10 border-emerald-500 text-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.1)]":u?d="bg-rose-500/10 border-rose-500 text-rose-400 shadow-[0_0_20px_rgba(244,63,94,0.1)]":d="bg-slate-900/20 border-slate-900 opacity-40 text-slate-500"),V.jsxs("button",{disabled:e!==null,onClick:()=>t(l),className:`flex items-center justify-between p-5 md:p-6 rounded-2xl border-2 transition-all duration-300 text-left font-medium ${d}`,children:[V.jsx("span",{className:"flex-1",children:a}),e!==null&&h&&V.jsx(WH,{className:"w-6 h-6 ml-3 text-emerald-500"}),e!==null&&u&&!h&&V.jsx(ZH,{className:"w-6 h-6 ml-3 text-rose-500"})]},l)})}),V.jsx(gy,{children:s&&V.jsx(ks.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-10 pt-8 border-t border-slate-800",children:V.jsxs("div",{className:"flex items-start gap-4 p-5 bg-teal-500/5 rounded-2xl border border-teal-500/10",children:[V.jsx(vB,{className:"w-6 h-6 text-teal-400 shrink-0 mt-0.5"}),V.jsxs("div",{children:[V.jsx("h4",{className:"font-black text-teal-300 text-xs uppercase tracking-[0.2em] mb-2",children:"Bin lun k thut"}),V.jsx("p",{className:"text-slate-300 text-sm leading-relaxed italic",children:i.explanation})]})]})})})]},i.id)}),NB=({totalTime:i,timeLeft:t,isActive:e,mode:n=Ye.CHALLENGE})=>{const s=t/i*100,a=n===Ye.CHALLENGE,l=a?t<.8:t<3,u=a?"red":"cyan",h=a?"bg-gradient-to-r from-red-500 to-rose-400":"bg-gradient-to-r from-cyan-500 to-blue-400";return V.jsxs("div",{className:"w-full mb-6",children:[V.jsxs("div",{className:"flex justify-between items-center mb-2",children:[V.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:"Thi gian cn li"}),V.jsxs("span",{className:`text-2xl font-black tabular-nums ${l?"text-red-500 animate-pulse":`text-${u}-400`}`,children:[t.toFixed(2),"s"]})]}),V.jsx("div",{className:"h-3 w-full bg-slate-800 rounded-full overflow-hidden border border-slate-700/50 shadow-inner",children:V.jsx(ks.div,{initial:{width:"100%"},animate:{width:`${s}%`},transition:{duration:.05,ease:"linear"},className:`h-full ${l?"bg-gradient-to-r from-red-600 to-orange-500":h}`})})]})},XR=({entries:i})=>{const[t,e]=st.useState("today"),n=t==="today"?i:sU;return V.jsxs("div",{className:"w-full max-w-lg mx-auto bg-slate-900/40 backdrop-blur-lg border border-slate-800 rounded-[2rem] overflow-hidden shadow-2xl",children:[V.jsx("div",{className:"p-6 border-b border-slate-800",children:V.jsxs("div",{className:"flex bg-slate-800/50 p-1.5 rounded-2xl",children:[V.jsx("button",{onClick:()=>e("today"),className:`flex-1 py-2.5 px-4 rounded-xl text-sm font-black transition-all ${t==="today"?"bg-teal-600 text-white shadow-lg shadow-teal-600/20":"text-slate-500 hover:text-white"}`,children:"Hm nay"}),V.jsx("button",{onClick:()=>e("week"),className:`flex-1 py-2.5 px-4 rounded-xl text-sm font-black transition-all ${t==="week"?"bg-teal-600 text-white shadow-lg shadow-teal-600/20":"text-slate-500 hover:text-white"}`,children:"Tun ny"})]})}),V.jsx("div",{className:"p-4 min-h-[300px]",children:V.jsx(gy,{mode:"wait",children:n.length>0?V.jsx(ks.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-3",children:n.map((s,a)=>V.jsxs(ks.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.05},className:`flex items-center gap-4 p-4 rounded-2xl border transition-all ${s.isCurrentUser?"bg-teal-500/20 border-teal-500 shadow-[0_0_15px_rgba(20,184,166,0.3)]":a===0?"bg-yellow-500/10 border-yellow-500/20":"bg-slate-800/30 border-slate-800"}`,children:[V.jsx("div",{className:"flex items-center justify-center w-8 h-8 font-black text-lg italic",children:a===0?V.jsx(tB,{className:"text-yellow-400 w-6 h-6"}):a===1?V.jsx(qR,{className:"text-slate-300 w-6 h-6"}):a===2?V.jsx(qR,{className:"text-orange-400 w-6 h-6"}):V.jsxs("span",{className:"text-slate-500",children:["#",a+1]})}),V.jsxs("div",{className:"relative",children:[V.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-full border-2 border-slate-700"}),s.isCurrentUser&&V.jsx("div",{className:"absolute -top-1 -right-1 bg-teal-500 rounded-full p-0.5 border border-slate-900",children:V.jsx(TB,{className:"w-2.5 h-2.5 text-white fill-current"})})]}),V.jsxs("div",{className:"flex-1 text-left",children:[V.jsxs("h4",{className:`font-bold ${s.isCurrentUser?"text-teal-400":"text-slate-100"}`,children:[s.name," ",s.isCurrentUser&&"(Bn)"]}),V.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-bold",children:"K thut vin"})]}),V.jsxs("div",{className:"text-right",children:[V.jsx("span",{className:`text-lg font-black ${s.isCurrentUser?"text-white":"text-teal-400"}`,children:s.score}),V.jsx("span",{className:"text-[10px] text-slate-600 block uppercase font-black",children:"Pts"})]})]},s.id))},t):V.jsxs(ks.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center h-64 text-slate-600",children:[V.jsx(D_,{className:"w-12 h-12 mb-4 opacity-20"}),V.jsx("p",{className:"font-bold italic",children:"Cha c d liu"}),V.jsx("p",{className:"text-xs uppercase tracking-widest mt-1 text-center",children:"Hy bt u ca trc  ln bng vng!"})]})})})]})};var DB={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PB,LB;function kB(){return{geminiUrl:PB,vertexUrl:LB}}function UB(i,t,e,n){var s,a;if(!(i!=null&&i.baseUrl)){const l=kB();return t?(s=l.vertexUrl)!==null&&s!==void 0?s:e:(a=l.geminiUrl)!==null&&a!==void 0?a:n}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ar{}function at(i,t){const e=/\{([^}]+)\}/g;return i.replace(e,(n,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(i,t,e){for(let a=0;a<t.length-1;a++){const l=t[a];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in i))if(Array.isArray(e))i[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(i[u])){const h=i[u];if(Array.isArray(e))for(let d=0;d<h.length;d++){const p=h[d];y(p,t.slice(a+1),e[d])}else for(const d of h)y(d,t.slice(a+1),e)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in i||(i[u]=[{}]);const h=i[u];y(h[0],t.slice(a+1),e);return}(!i[l]||typeof i[l]!="object")&&(i[l]={}),i=i[l]}const n=t[t.length-1],s=i[n];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(i,e):i[n]=e}function g(i,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return i;for(let n=0;n<t.length;n++){if(typeof i!="object"||i===null)return e;const s=t[n];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in i){const l=i[a];return Array.isArray(l)?l.map(u=>g(u,t.slice(n+1),e)):e}else return e}else i=i[s]}return i}catch(n){if(n instanceof TypeError)return e;throw n}}function OB(i,t){for(const[e,n]of Object.entries(t)){const s=e.split("."),a=n.split("."),l=new Set;let u=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){u=h;break}if(u!==-1&&a.length>u)for(let h=u;h<a.length;h++){const d=a[h];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}P_(i,s,a,0,l)}}function P_(i,t,e,n,s){if(n>=t.length||typeof i!="object"||i===null)return;const a=t[n];if(a.endsWith("[]")){const l=a.slice(0,-2),u=i;if(l in u&&Array.isArray(u[l]))for(const h of u[l])P_(h,t,e,n+1,s)}else if(a==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const l=i,u=Object.keys(l).filter(d=>!d.startsWith("_")&&!s.has(d)),h={};for(const d of u)h[d]=l[d];for(const[d,p]of Object.entries(h)){const v=[];for(const A of e.slice(n))A==="*"?v.push(d):v.push(A);y(l,v,p)}for(const d of u)delete l[d]}}else{const l=i;a in l&&P_(l[a],t,e,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BT(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FB(i){const t={},e=g(i,["operationName"]);e!=null&&y(t,["operationName"],e);const n=g(i,["resourceName"]);return n!=null&&y(t,["_url","resourceName"],n),t}function VB(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["response","generateVideoResponse"]);return l!=null&&y(t,["response"],BB(l)),t}function HB(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["response"]);return l!=null&&y(t,["response"],GB(l)),t}function BB(i){const t={},e=g(i,["generatedSamples"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>zB(l))),y(t,["generatedVideos"],a)}const n=g(i,["raiMediaFilteredCount"]);n!=null&&y(t,["raiMediaFilteredCount"],n);const s=g(i,["raiMediaFilteredReasons"]);return s!=null&&y(t,["raiMediaFilteredReasons"],s),t}function GB(i){const t={},e=g(i,["videos"]);if(e!=null){let a=e;Array.isArray(a)&&(a=a.map(l=>qB(l))),y(t,["generatedVideos"],a)}const n=g(i,["raiMediaFilteredCount"]);n!=null&&y(t,["raiMediaFilteredCount"],n);const s=g(i,["raiMediaFilteredReasons"]);return s!=null&&y(t,["raiMediaFilteredReasons"],s),t}function zB(i){const t={},e=g(i,["video"]);return e!=null&&y(t,["video"],WB(e)),t}function qB(i){const t={},e=g(i,["_self"]);return e!=null&&y(t,["video"],QB(e)),t}function YB(i){const t={},e=g(i,["operationName"]);return e!=null&&y(t,["_url","operationName"],e),t}function XB(i){const t={},e=g(i,["operationName"]);return e!=null&&y(t,["_url","operationName"],e),t}function $B(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["response"]);return l!=null&&y(t,["response"],KB(l)),t}function KB(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&y(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function DN(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["response"]);return l!=null&&y(t,["response"],JB(l)),t}function JB(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&y(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function WB(i){const t={},e=g(i,["uri"]);e!=null&&y(t,["uri"],e);const n=g(i,["encodedVideo"]);n!=null&&y(t,["videoBytes"],BT(n));const s=g(i,["encoding"]);return s!=null&&y(t,["mimeType"],s),t}function QB(i){const t={},e=g(i,["gcsUri"]);e!=null&&y(t,["uri"],e);const n=g(i,["bytesBase64Encoded"]);n!=null&&y(t,["videoBytes"],BT(n));const s=g(i,["mimeType"]);return s!=null&&y(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $R;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($R||($R={}));var KR;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(KR||(KR={}));var JR;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(JR||(JR={}));var Ln;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Ln||(Ln={}));var WR;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(WR||(WR={}));var QR;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(QR||(QR={}));var ZR;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ZR||(ZR={}));var jR;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(jR||(jR={}));var t1;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(t1||(t1={}));var e1;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(e1||(e1={}));var n1;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(n1||(n1={}));var i1;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(i1||(i1={}));var s1;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(s1||(s1={}));var o1;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(o1||(o1={}));var r1;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(r1||(r1={}));var a1;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(a1||(a1={}));var l1;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(l1||(l1={}));var u1;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(u1||(u1={}));var c1;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(c1||(c1={}));var h1;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(h1||(h1={}));var d1;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(d1||(d1={}));var vy;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(vy||(vy={}));var f1;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(f1||(f1={}));var p1;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(p1||(p1={}));var m1;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(m1||(m1={}));var L_;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(L_||(L_={}));var g1;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(g1||(g1={}));var y1;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(y1||(y1={}));var k_;(function(i){i.COLLECTION="COLLECTION"})(k_||(k_={}));var v1;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(v1||(v1={}));var A1;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(A1||(A1={}));var _1;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(_1||(_1={}));var S1;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(S1||(S1={}));var T1;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(T1||(T1={}));var E1;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(E1||(E1={}));var b1;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(b1||(b1={}));var C1;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(C1||(C1={}));var w1;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(w1||(w1={}));var x1;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(x1||(x1={}));var R1;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(R1||(R1={}));var M1;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(M1||(M1={}));var I1;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(I1||(I1={}));var N1;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(N1||(N1={}));var D1;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(D1||(D1={}));var P1;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(P1||(P1={}));var L1;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(L1||(L1={}));var k1;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(k1||(k1={}));var U1;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(U1||(U1={}));var O1;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(O1||(O1={}));var F1;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(F1||(F1={}));var V1;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(V1||(V1={}));var H1;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(H1||(H1={}));var B1;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(B1||(B1={}));var G1;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(G1||(G1={}));var z1;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(z1||(z1={}));var q1;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(q1||(q1={}));var yc;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(yc||(yc={}));class U_{constructor(t){const e={};for(const n of t.headers.entries())e[n[0]]=n[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class Pd{get text(){var t,e,n,s,a,l,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const v=[];for(const A of(h=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[T,E]of Object.entries(A))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(E!==null||E!==void 0)&&v.push(T);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;p=!0,d+=A.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var t,e,n,s,a,l,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const v of(h=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&h!==void 0?h:[]){for(const[A,T]of Object.entries(v))A!=="inlineData"&&(T!==null||T!==void 0)&&p.push(A);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var t,e,n,s,a,l,u,h;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(h=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var t,e,n,s,a,l,u,h,d;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(h=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var t,e,n,s,a,l,u,h,d;if(((s=(n=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(h=(u=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||h===void 0?void 0:h.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class Y1{}class X1{}class ZB{}class jB{}class tG{}class eG{}class $1{}class K1{}class J1{}class nG{}class Ay{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new Ay;let s;const a=t;return e?s=HB(a):s=VB(a),Object.assign(n,s),n}}class W1{}class Q1{}class Z1{}class j1{}class iG{}class sG{}class oG{}class GT{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new GT,a=$B(t);return Object.assign(n,a),n}}class rG{}class aG{}class lG{}class uG{}class tM{}class cG{get text(){var t,e,n;let s="",a=!1;const l=[];for(const u of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[h,d]of Object.entries(u))h!=="text"&&h!=="thought"&&d!==null&&l.push(h);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;a=!0,s+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var t,e,n;let s="";const a=[];for(const l of(n=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&n!==void 0?n:[]){for(const[u,h]of Object.entries(l))u!=="inlineData"&&h!==null&&a.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class hG{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class zT{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const n=new zT,a=DN(t);return Object.assign(n,a),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jt(i,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function PN(i,t){const e=jt(i,t);return e?e.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:e.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${e}`:e:""}function LN(i){return Array.isArray(i)?i.map(t=>_y(t)):[_y(i)]}function _y(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function kN(i){const t=_y(i);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function UN(i){const t=_y(i);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function eM(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function ON(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(t=>eM(t)):[eM(i)]}function O_(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function nM(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function iM(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Fn(i){if(i==null)throw new Error("ContentUnion is required");return O_(i)?i:{role:"user",parts:ON(i)}}function qT(i,t){if(!t)return[];if(i.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const n=Fn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const e=Fn(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Fn(e)):[Fn(t)]}function ds(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(nM(i)||iM(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Fn(i)]}const t=[],e=[],n=O_(i[0]);for(const s of i){const a=O_(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)t.push(s);else{if(nM(s)||iM(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(s)}}return n||t.push({role:"user",parts:ON(e)}),t}function dG(i,t){i.includes("null")&&(t.nullable=!0);const e=i.filter(n=>n!=="null");if(e.length===1)t.type=Object.values(Ln).includes(e[0].toUpperCase())?e[0].toUpperCase():Ln.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const n of e)t.anyOf.push({type:Object.values(Ln).includes(n.toUpperCase())?n.toUpperCase():Ln.TYPE_UNSPECIFIED})}}function Tc(i){const t={},e=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(t.nullable=!0,i=a[1]):a[1].type==="null"&&(t.nullable=!0,i=a[0])),i.type instanceof Array&&dG(i.type,t);for(const[l,u]of Object.entries(i))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(Ln).includes(u.toUpperCase())?u.toUpperCase():Ln.TYPE_UNSPECIFIED}else if(e.includes(l))t[l]=Tc(u);else if(n.includes(l)){const h=[];for(const d of u){if(d.type=="null"){t.nullable=!0;continue}h.push(Tc(d))}t[l]=h}else if(s.includes(l)){const h={};for(const[d,p]of Object.entries(u))h[d]=Tc(p);t[l]=h}else{if(l==="additionalProperties")continue;t[l]=u}return t}function YT(i){return Tc(i)}function XT(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function $T(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function kh(i){if(i.functionDeclarations)for(const t of i.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Tc(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Tc(t.response));return i}function Uh(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of i)t.push(e);return t}function fG(i,t,e,n=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===n;return i.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${i.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function _r(i,t){if(typeof t!="string")throw new Error("name must be a string");return fG(i,t,"cachedContents")}function FN(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Pa(i){return BT(i)}function pG(i){return i!=null&&typeof i=="object"&&"name"in i}function mG(i){return i!=null&&typeof i=="object"&&"video"in i}function gG(i){return i!=null&&typeof i=="object"&&"uri"in i}function VN(i){var t;let e;if(pG(i)&&(e=i.name),!(gG(i)&&(e=i.uri,e===void 0))&&!(mG(i)&&(e=(t=i.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof i=="string"&&(e=i),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const s=e.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${e}`);e=s[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function HN(i,t){let e;return i.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function BN(i){for(const t of["models","tunedModels","publisherModels"])if(yG(i,t))return i[t];return[]}function yG(i,t){return i!==null&&typeof i=="object"&&t in i}function vG(i,t={}){const e=i,n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(n.responseJsonSchema=e.outputSchema),t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}function AG(i,t={}){const e=[],n=new Set;for(const s of i){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const l=vG(s,t);l.functionDeclarations&&e.push(...l.functionDeclarations)}return{functionDeclarations:e}}function GN(i,t){let e;if(typeof t=="string")if(i.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const n=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,s=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(i.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function _G(i){if(typeof i!="string")return i;const t=i;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function zN(i){if(typeof i!="object"||i===null)return{};const t=i,e=t.inlinedResponses;if(typeof e!="object"||e===null)return i;const s=e.inlinedResponses;if(!Array.isArray(s)||s.length===0)return i;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),i}function Oh(i,t){const e=t;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function qN(i){const t=i;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SG(i){const t={},e=g(i,["responsesFile"]);e!=null&&y(t,["fileName"],e);const n=g(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>e3(l))),y(t,["inlinedResponses"],a)}const s=g(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["inlinedEmbedContentResponses"],a)}return t}function TG(i){const t={},e=g(i,["predictionsFormat"]);e!=null&&y(t,["format"],e);const n=g(i,["gcsDestination","outputUriPrefix"]);n!=null&&y(t,["gcsUri"],n);const s=g(i,["bigqueryDestination","outputUri"]);return s!=null&&y(t,["bigqueryUri"],s),t}function EG(i){const t={},e=g(i,["format"]);e!=null&&y(t,["predictionsFormat"],e);const n=g(i,["gcsUri"]);n!=null&&y(t,["gcsDestination","outputUriPrefix"],n);const s=g(i,["bigqueryUri"]);if(s!=null&&y(t,["bigqueryDestination","outputUri"],s),g(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(g(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Dg(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata","displayName"]);n!=null&&y(t,["displayName"],n);const s=g(i,["metadata","state"]);s!=null&&y(t,["state"],qN(s));const a=g(i,["metadata","createTime"]);a!=null&&y(t,["createTime"],a);const l=g(i,["metadata","endTime"]);l!=null&&y(t,["endTime"],l);const u=g(i,["metadata","updateTime"]);u!=null&&y(t,["updateTime"],u);const h=g(i,["metadata","model"]);h!=null&&y(t,["model"],h);const d=g(i,["metadata","output"]);return d!=null&&y(t,["dest"],SG(zN(d))),t}function F_(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["displayName"]);n!=null&&y(t,["displayName"],n);const s=g(i,["state"]);s!=null&&y(t,["state"],qN(s));const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["createTime"]);l!=null&&y(t,["createTime"],l);const u=g(i,["startTime"]);u!=null&&y(t,["startTime"],u);const h=g(i,["endTime"]);h!=null&&y(t,["endTime"],h);const d=g(i,["updateTime"]);d!=null&&y(t,["updateTime"],d);const p=g(i,["model"]);p!=null&&y(t,["model"],p);const v=g(i,["inputConfig"]);v!=null&&y(t,["src"],bG(v));const A=g(i,["outputConfig"]);A!=null&&y(t,["dest"],TG(zN(A)));const T=g(i,["completionStats"]);return T!=null&&y(t,["completionStats"],T),t}function bG(i){const t={},e=g(i,["instancesFormat"]);e!=null&&y(t,["format"],e);const n=g(i,["gcsSource","uris"]);n!=null&&y(t,["gcsUri"],n);const s=g(i,["bigquerySource","inputUri"]);return s!=null&&y(t,["bigqueryUri"],s),t}function CG(i,t){const e={};if(g(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(g(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=g(t,["fileName"]);n!=null&&y(e,["fileName"],n);const s=g(t,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>t3(i,l))),y(e,["requests","requests"],a)}return e}function wG(i){const t={},e=g(i,["format"]);e!=null&&y(t,["instancesFormat"],e);const n=g(i,["gcsUri"]);n!=null&&y(t,["gcsSource","uris"],n);const s=g(i,["bigqueryUri"]);if(s!=null&&y(t,["bigquerySource","inputUri"],s),g(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(g(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function xG(i){const t={},e=g(i,["data"]);if(e!=null&&y(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function RG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function MG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function IG(i){const t={},e=g(i,["content"]);e!=null&&y(t,["content"],e);const n=g(i,["citationMetadata"]);n!=null&&y(t,["citationMetadata"],NG(n));const s=g(i,["tokenCount"]);s!=null&&y(t,["tokenCount"],s);const a=g(i,["finishReason"]);a!=null&&y(t,["finishReason"],a);const l=g(i,["avgLogprobs"]);l!=null&&y(t,["avgLogprobs"],l);const u=g(i,["groundingMetadata"]);u!=null&&y(t,["groundingMetadata"],u);const h=g(i,["index"]);h!=null&&y(t,["index"],h);const d=g(i,["logprobsResult"]);d!=null&&y(t,["logprobsResult"],d);const p=g(i,["safetyRatings"]);if(p!=null){let A=p;Array.isArray(A)&&(A=A.map(T=>T)),y(t,["safetyRatings"],A)}const v=g(i,["urlContextMetadata"]);return v!=null&&y(t,["urlContextMetadata"],v),t}function NG(i){const t={},e=g(i,["citationSources"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),y(t,["citations"],n)}return t}function YN(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>l3(a))),y(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&y(t,["role"],n),t}function DG(i,t){const e={},n=g(i,["displayName"]);if(t!==void 0&&n!=null&&y(t,["batch","displayName"],n),g(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function PG(i,t){const e={},n=g(i,["displayName"]);t!==void 0&&n!=null&&y(t,["displayName"],n);const s=g(i,["dest"]);return t!==void 0&&s!=null&&y(t,["outputConfig"],EG(_G(s))),e}function sM(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["_url","model"],jt(i,n));const s=g(t,["src"]);s!=null&&y(e,["batch","inputConfig"],CG(i,GN(i,s)));const a=g(t,["config"]);return a!=null&&DG(a,e),e}function LG(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],jt(i,n));const s=g(t,["src"]);s!=null&&y(e,["inputConfig"],wG(GN(i,s)));const a=g(t,["config"]);return a!=null&&PG(a,e),e}function kG(i,t){const e={},n=g(i,["displayName"]);return t!==void 0&&n!=null&&y(t,["batch","displayName"],n),e}function UG(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["_url","model"],jt(i,n));const s=g(t,["src"]);s!=null&&y(e,["batch","inputConfig"],zG(i,s));const a=g(t,["config"]);return a!=null&&kG(a,e),e}function OG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function FG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function VG(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["name"]);n!=null&&y(t,["name"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);return a!=null&&y(t,["error"],a),t}function HG(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["name"]);n!=null&&y(t,["name"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);return a!=null&&y(t,["error"],a),t}function BG(i,t){const e={},n=g(t,["contents"]);if(n!=null){let a=qT(i,n);Array.isArray(a)&&(a=a.map(l=>l)),y(e,["requests[]","request","content"],a)}const s=g(t,["config"]);return s!=null&&(y(e,["_self"],GG(s,e)),OB(e,{"requests[].*":"requests[].request.*"})),e}function GG(i,t){const e={},n=g(i,["taskType"]);t!==void 0&&n!=null&&y(t,["requests[]","taskType"],n);const s=g(i,["title"]);t!==void 0&&s!=null&&y(t,["requests[]","title"],s);const a=g(i,["outputDimensionality"]);if(t!==void 0&&a!=null&&y(t,["requests[]","outputDimensionality"],a),g(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function zG(i,t){const e={},n=g(t,["fileName"]);n!=null&&y(e,["file_name"],n);const s=g(t,["inlinedRequests"]);return s!=null&&y(e,["requests"],BG(i,s)),e}function qG(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function YG(i){const t={},e=g(i,["id"]);e!=null&&y(t,["id"],e);const n=g(i,["args"]);n!=null&&y(t,["args"],n);const s=g(i,["name"]);if(s!=null&&y(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function XG(i){const t={},e=g(i,["allowedFunctionNames"]);e!=null&&y(t,["allowedFunctionNames"],e);const n=g(i,["mode"]);if(n!=null&&y(t,["mode"],n),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function $G(i,t,e){const n={},s=g(t,["systemInstruction"]);e!==void 0&&s!=null&&y(e,["systemInstruction"],YN(Fn(s)));const a=g(t,["temperature"]);a!=null&&y(n,["temperature"],a);const l=g(t,["topP"]);l!=null&&y(n,["topP"],l);const u=g(t,["topK"]);u!=null&&y(n,["topK"],u);const h=g(t,["candidateCount"]);h!=null&&y(n,["candidateCount"],h);const d=g(t,["maxOutputTokens"]);d!=null&&y(n,["maxOutputTokens"],d);const p=g(t,["stopSequences"]);p!=null&&y(n,["stopSequences"],p);const v=g(t,["responseLogprobs"]);v!=null&&y(n,["responseLogprobs"],v);const A=g(t,["logprobs"]);A!=null&&y(n,["logprobs"],A);const T=g(t,["presencePenalty"]);T!=null&&y(n,["presencePenalty"],T);const E=g(t,["frequencyPenalty"]);E!=null&&y(n,["frequencyPenalty"],E);const C=g(t,["seed"]);C!=null&&y(n,["seed"],C);const x=g(t,["responseMimeType"]);x!=null&&y(n,["responseMimeType"],x);const R=g(t,["responseSchema"]);R!=null&&y(n,["responseSchema"],YT(R));const D=g(t,["responseJsonSchema"]);if(D!=null&&y(n,["responseJsonSchema"],D),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=g(t,["safetySettings"]);if(e!==void 0&&P!=null){let Tt=P;Array.isArray(Tt)&&(Tt=Tt.map(pt=>u3(pt))),y(e,["safetySettings"],Tt)}const k=g(t,["tools"]);if(e!==void 0&&k!=null){let Tt=Uh(k);Array.isArray(Tt)&&(Tt=Tt.map(pt=>h3(kh(pt)))),y(e,["tools"],Tt)}const L=g(t,["toolConfig"]);if(e!==void 0&&L!=null&&y(e,["toolConfig"],c3(L)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=g(t,["cachedContent"]);e!==void 0&&G!=null&&y(e,["cachedContent"],_r(i,G));const F=g(t,["responseModalities"]);F!=null&&y(n,["responseModalities"],F);const $=g(t,["mediaResolution"]);$!=null&&y(n,["mediaResolution"],$);const X=g(t,["speechConfig"]);if(X!=null&&y(n,["speechConfig"],XT(X)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const et=g(t,["thinkingConfig"]);et!=null&&y(n,["thinkingConfig"],et);const nt=g(t,["imageConfig"]);nt!=null&&y(n,["imageConfig"],jG(nt));const mt=g(t,["enableEnhancedCivicAnswers"]);if(mt!=null&&y(n,["enableEnhancedCivicAnswers"],mt),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function KG(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["candidates"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(d=>IG(d))),y(t,["candidates"],h)}const s=g(i,["modelVersion"]);s!=null&&y(t,["modelVersion"],s);const a=g(i,["promptFeedback"]);a!=null&&y(t,["promptFeedback"],a);const l=g(i,["responseId"]);l!=null&&y(t,["responseId"],l);const u=g(i,["usageMetadata"]);return u!=null&&y(t,["usageMetadata"],u),t}function JG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function WG(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],Oh(i,n)),e}function QG(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function ZG(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function jG(i){const t={},e=g(i,["aspectRatio"]);e!=null&&y(t,["aspectRatio"],e);const n=g(i,["imageSize"]);if(n!=null&&y(t,["imageSize"],n),g(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function t3(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["request","model"],jt(i,n));const s=g(t,["contents"]);if(s!=null){let u=ds(s);Array.isArray(u)&&(u=u.map(h=>YN(h))),y(e,["request","contents"],u)}const a=g(t,["metadata"]);a!=null&&y(e,["metadata"],a);const l=g(t,["config"]);return l!=null&&y(e,["request","generationConfig"],$G(i,l,g(e,["request"],{}))),e}function e3(i){const t={},e=g(i,["response"]);e!=null&&y(t,["response"],KG(e));const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["error"]);return s!=null&&y(t,["error"],s),t}function n3(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);if(t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),g(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function i3(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);t!==void 0&&s!=null&&y(t,["_query","pageToken"],s);const a=g(i,["filter"]);return t!==void 0&&a!=null&&y(t,["_query","filter"],a),e}function s3(i){const t={},e=g(i,["config"]);return e!=null&&n3(e,t),t}function o3(i){const t={},e=g(i,["config"]);return e!=null&&i3(e,t),t}function r3(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Dg(l))),y(t,["batchJobs"],a)}return t}function a3(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>F_(l))),y(t,["batchJobs"],a)}return t}function l3(i){const t={},e=g(i,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(i,["fileData"]);a!=null&&y(t,["fileData"],qG(a));const l=g(i,["functionCall"]);l!=null&&y(t,["functionCall"],YG(l));const u=g(i,["functionResponse"]);u!=null&&y(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&y(t,["inlineData"],xG(h));const d=g(i,["text"]);d!=null&&y(t,["text"],d);const p=g(i,["thought"]);p!=null&&y(t,["thought"],p);const v=g(i,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(i,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function u3(i){const t={},e=g(i,["category"]);if(e!=null&&y(t,["category"],e),g(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=g(i,["threshold"]);return n!=null&&y(t,["threshold"],n),t}function c3(i){const t={},e=g(i,["retrievalConfig"]);e!=null&&y(t,["retrievalConfig"],e);const n=g(i,["functionCallingConfig"]);return n!=null&&y(t,["functionCallingConfig"],XG(n)),t}function h3(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(i,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>v)),y(t,["functionDeclarations"],p)}const l=g(i,["googleMaps"]);l!=null&&y(t,["googleMaps"],QG(l));const u=g(i,["googleSearch"]);u!=null&&y(t,["googleSearch"],ZG(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const d=g(i,["urlContext"]);return d!=null&&y(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gr;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(gr||(gr={}));class vu{constructor(t,e,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,n,s)}init(t,e,n){var s,a;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!n||Object.keys(n).length===0?l={config:{}}:typeof n=="object"?l=Object.assign({},n):l=n,l.config&&(l.config.pageToken=e.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d3 extends Ar{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new vu(gr.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=sM(this.apiClient,t),n=e._url,s=at("{model}:batchGenerateContent",n),u=e.batch.inputConfig.requests,h=u.requests,d=[];for(const p of h){const v=Object.assign({},p);if(v.systemInstruction){const A=v.systemInstruction;delete v.systemInstruction;const T=v.request;T.systemInstruction=A,v.request=T}d.push(v)}return u.requests=d,delete e.config,delete e._url,delete e._query,{path:s,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const n=e?Object.assign({},e):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const a=this.getGcsUri(t),l=this.getBigqueryUri(t);if(a)a.endsWith(".jsonl")?n.dest=`${a.slice(0,-6)}/dest`:n.dest=`${a}_dest_${s}`;else if(l)n.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=LG(this.apiClient,t);return u=at("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>F_(p))}else{const d=sM(this.apiClient,t);return u=at("{model}:batchGenerateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Dg(p))}}async createEmbeddingsInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UG(this.apiClient,t);return a=at("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>Dg(h))}}async get(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=WG(this.apiClient,t);return u=at("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>F_(p))}else{const d=JG(this.apiClient,t);return u=at("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>Dg(p))}}async cancel(t){var e,n,s,a;let l="",u={};if(this.apiClient.isVertexAI()){const h=MG(this.apiClient,t);l=at("batchPredictionJobs/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}else{const h=RG(this.apiClient,t);l=at("batches/{name}:cancel",h._url),u=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=o3(t);return u=at("batchPredictionJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=a3(p),A=new tM;return Object.assign(A,v),A})}else{const d=s3(t);return u=at("batches",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=r3(p),A=new tM;return Object.assign(A,v),A})}}async delete(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=FG(this.apiClient,t);return u=at("batchPredictionJobs/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>HG(p))}else{const d=OG(this.apiClient,t);return u=at("batches/{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>VG(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(i){const t={},e=g(i,["data"]);if(e!=null&&y(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function oM(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>U3(a))),y(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&y(t,["role"],n),t}function p3(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(i,["expireTime"]);t!==void 0&&s!=null&&y(t,["expireTime"],s);const a=g(i,["displayName"]);t!==void 0&&a!=null&&y(t,["displayName"],a);const l=g(i,["contents"]);if(t!==void 0&&l!=null){let p=ds(l);Array.isArray(p)&&(p=p.map(v=>oM(v))),y(t,["contents"],p)}const u=g(i,["systemInstruction"]);t!==void 0&&u!=null&&y(t,["systemInstruction"],oM(Fn(u)));const h=g(i,["tools"]);if(t!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>F3(v))),y(t,["tools"],p)}const d=g(i,["toolConfig"]);if(t!==void 0&&d!=null&&y(t,["toolConfig"],O3(d)),g(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function m3(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(i,["expireTime"]);t!==void 0&&s!=null&&y(t,["expireTime"],s);const a=g(i,["displayName"]);t!==void 0&&a!=null&&y(t,["displayName"],a);const l=g(i,["contents"]);if(t!==void 0&&l!=null){let v=ds(l);Array.isArray(v)&&(v=v.map(A=>A)),y(t,["contents"],v)}const u=g(i,["systemInstruction"]);t!==void 0&&u!=null&&y(t,["systemInstruction"],Fn(u));const h=g(i,["tools"]);if(t!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(A=>V3(A))),y(t,["tools"],v)}const d=g(i,["toolConfig"]);t!==void 0&&d!=null&&y(t,["toolConfig"],d);const p=g(i,["kmsKeyName"]);return t!==void 0&&p!=null&&y(t,["encryption_spec","kmsKeyName"],p),e}function g3(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],PN(i,n));const s=g(t,["config"]);return s!=null&&p3(s,e),e}function y3(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["model"],PN(i,n));const s=g(t,["config"]);return s!=null&&m3(s,e),e}function v3(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],_r(i,n)),e}function A3(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],_r(i,n)),e}function _3(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function S3(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function T3(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function E3(i){const t={},e=g(i,["id"]);e!=null&&y(t,["id"],e);const n=g(i,["args"]);n!=null&&y(t,["args"],n);const s=g(i,["name"]);if(s!=null&&y(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function b3(i){const t={},e=g(i,["allowedFunctionNames"]);e!=null&&y(t,["allowedFunctionNames"],e);const n=g(i,["mode"]);if(n!=null&&y(t,["mode"],n),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function C3(i){const t={},e=g(i,["description"]);e!=null&&y(t,["description"],e);const n=g(i,["name"]);n!=null&&y(t,["name"],n);const s=g(i,["parameters"]);s!=null&&y(t,["parameters"],s);const a=g(i,["parametersJsonSchema"]);a!=null&&y(t,["parametersJsonSchema"],a);const l=g(i,["response"]);l!=null&&y(t,["response"],l);const u=g(i,["responseJsonSchema"]);if(u!=null&&y(t,["responseJsonSchema"],u),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function w3(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],_r(i,n)),e}function x3(i,t){const e={},n=g(t,["name"]);return n!=null&&y(e,["_url","name"],_r(i,n)),e}function R3(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function M3(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function I3(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function N3(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function D3(i){const t={},e=g(i,["config"]);return e!=null&&I3(e,t),t}function P3(i){const t={},e=g(i,["config"]);return e!=null&&N3(e,t),t}function L3(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["cachedContents"],a)}return t}function k3(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["cachedContents"],a)}return t}function U3(i){const t={},e=g(i,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(i,["fileData"]);a!=null&&y(t,["fileData"],T3(a));const l=g(i,["functionCall"]);l!=null&&y(t,["functionCall"],E3(l));const u=g(i,["functionResponse"]);u!=null&&y(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&y(t,["inlineData"],f3(h));const d=g(i,["text"]);d!=null&&y(t,["text"],d);const p=g(i,["thought"]);p!=null&&y(t,["thought"],p);const v=g(i,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(i,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function O3(i){const t={},e=g(i,["retrievalConfig"]);e!=null&&y(t,["retrievalConfig"],e);const n=g(i,["functionCallingConfig"]);return n!=null&&y(t,["functionCallingConfig"],b3(n)),t}function F3(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(i,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>v)),y(t,["functionDeclarations"],p)}const l=g(i,["googleMaps"]);l!=null&&y(t,["googleMaps"],R3(l));const u=g(i,["googleSearch"]);u!=null&&y(t,["googleSearch"],M3(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const d=g(i,["urlContext"]);return d!=null&&y(t,["urlContext"],d),t}function V3(i){const t={},e=g(i,["retrieval"]);e!=null&&y(t,["retrieval"],e);const n=g(i,["computerUse"]);if(n!=null&&y(t,["computerUse"],n),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(i,["codeExecution"]);s!=null&&y(t,["codeExecution"],s);const a=g(i,["enterpriseWebSearch"]);a!=null&&y(t,["enterpriseWebSearch"],a);const l=g(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>C3(A))),y(t,["functionDeclarations"],v)}const u=g(i,["googleMaps"]);u!=null&&y(t,["googleMaps"],u);const h=g(i,["googleSearch"]);h!=null&&y(t,["googleSearch"],h);const d=g(i,["googleSearchRetrieval"]);d!=null&&y(t,["googleSearchRetrieval"],d);const p=g(i,["urlContext"]);return p!=null&&y(t,["urlContext"],p),t}function H3(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(i,["expireTime"]);return t!==void 0&&s!=null&&y(t,["expireTime"],s),e}function B3(i,t){const e={},n=g(i,["ttl"]);t!==void 0&&n!=null&&y(t,["ttl"],n);const s=g(i,["expireTime"]);return t!==void 0&&s!=null&&y(t,["expireTime"],s),e}function G3(i,t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],_r(i,n));const s=g(t,["config"]);return s!=null&&H3(s,e),e}function z3(i,t){const e={},n=g(t,["name"]);n!=null&&y(e,["_url","name"],_r(i,n));const s=g(t,["config"]);return s!=null&&B3(s,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q3 extends Ar{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new vu(gr.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(e),e)}async create(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=y3(this.apiClient,t);return u=at("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=g3(this.apiClient,t);return u=at("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=x3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=w3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=A3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=S3(p),A=new Z1;return Object.assign(A,v),A})}else{const d=v3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=_3(p),A=new Z1;return Object.assign(A,v),A})}}async update(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=z3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=G3(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=P3(t);return u=at("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=k3(p),A=new j1;return Object.assign(A,v),A})}else{const d=D3(t);return u=at("cachedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=L3(p),A=new j1;return Object.assign(A,v),A})}}}function Sy(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e}function rM(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function It(i){return this instanceof It?(this.v=i,this):new It(i)}function Os(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(T){return function(E){return Promise.resolve(E).then(T,v)}}function u(T,E){n[T]&&(s[T]=function(C){return new Promise(function(x,R){a.push([T,C,x,R])>1||h(T,C)})},E&&(s[T]=E(s[T])))}function h(T,E){try{d(n[T](E))}catch(C){A(a[0][3],C)}}function d(T){T.value instanceof It?Promise.resolve(T.value.v).then(p,v):A(a[0][2],T)}function p(T){h("next",T)}function v(T){h("throw",T)}function A(T,E){T(E),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Fs(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof rM=="function"?rM(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(a){e[a]=i[a]&&function(l){return new Promise(function(u,h){l=i[a](l),s(u,h,l.done,l.value)})}}function s(a,l,u,h){Promise.resolve(h).then(function(d){a({value:d,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y3(i){var t;if(i.candidates==null||i.candidates.length===0)return!1;const e=(t=i.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:XN(e)}function XN(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const t of i.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function X3(i){if(i.length!==0){for(const t of i)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function aM(i){if(i===void 0||i.length===0)return[];const t=[],e=i.length;let n=0;for(;n<e;)if(i[n].role==="user")t.push(i[n]),n++;else{const s=[];let a=!0;for(;n<e&&i[n].role==="model";)s.push(i[n]),a&&!XN(i[n])&&(a=!1),n++;a?t.push(...s):t.pop()}return t}class $3{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new K3(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class K3{constructor(t,e,n,s={},a=[]){this.apiClient=t,this.modelsModule=e,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),X3(a)}async sendMessage(t){var e;await this.sendPromise;const n=Fn(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var a,l,u;const h=await s,d=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,p=h.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let A=[];p!=null&&(A=(u=p.slice(v))!==null&&u!==void 0?u:[]);const T=d?[d]:[];this.recordHistory(n,T,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const n=Fn(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(t=!1){const e=t?aM(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return Os(this,arguments,function*(){var s,a,l,u,h,d;const p=[];try{for(var v=!0,A=Fs(t),T;T=yield It(A.next()),s=T.done,!s;v=!0){u=T.value,v=!1;const E=u;if(Y3(E)){const C=(d=(h=E.candidates)===null||h===void 0?void 0:h[0])===null||d===void 0?void 0:d.content;C!==void 0&&p.push(C)}yield yield It(E)}}catch(E){a={error:E}}finally{try{!v&&!s&&(l=A.return)&&(yield It(l.call(A)))}finally{if(a)throw a.error}}this.recordHistory(e,p)})}recordHistory(t,e,n){let s=[];e.length>0&&e.every(a=>a.role!==void 0)?s=e:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...aM(n)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gf extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,gf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J3(i){const t={},e=g(i,["file"]);return e!=null&&y(t,["file"],e),t}function W3(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function Q3(i){const t={},e=g(i,["name"]);return e!=null&&y(t,["_url","file"],VN(e)),t}function Z3(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}function j3(i){const t={},e=g(i,["name"]);return e!=null&&y(t,["_url","file"],VN(e)),t}function tz(i){const t={},e=g(i,["uris"]);return e!=null&&y(t,["uris"],e),t}function ez(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function nz(i){const t={},e=g(i,["config"]);return e!=null&&ez(e,t),t}function iz(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["files"],a)}return t}function sz(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["files"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oz extends Ar{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new vu(gr.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nz(t);return a=at("files",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const d=iz(h),p=new rG;return Object.assign(p,d),p})}}async createInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=J3(t);return a=at("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=W3(h),p=new aG;return Object.assign(p,d),p})}}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=j3(t);return a=at("files/{file}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Q3(t);return a=at("files/{file}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const d=Z3(h),p=new lG;return Object.assign(p,d),p})}}async registerFilesInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tz(t);return a=at("files:register",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=sz(h),p=new uG;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pg(i){const t={},e=g(i,["data"]);if(e!=null&&y(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function rz(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>Tz(a))),y(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&y(t,["role"],n),t}function az(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function lz(i){const t={},e=g(i,["id"]);e!=null&&y(t,["id"],e);const n=g(i,["args"]);n!=null&&y(t,["args"],n);const s=g(i,["name"]);if(s!=null&&y(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function uz(i){const t={},e=g(i,["description"]);e!=null&&y(t,["description"],e);const n=g(i,["name"]);n!=null&&y(t,["name"],n);const s=g(i,["parameters"]);s!=null&&y(t,["parameters"],s);const a=g(i,["parametersJsonSchema"]);a!=null&&y(t,["parametersJsonSchema"],a);const l=g(i,["response"]);l!=null&&y(t,["response"],l);const u=g(i,["responseJsonSchema"]);if(u!=null&&y(t,["responseJsonSchema"],u),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function cz(i){const t={},e=g(i,["modelSelectionConfig"]);e!=null&&y(t,["modelConfig"],e);const n=g(i,["responseJsonSchema"]);n!=null&&y(t,["responseJsonSchema"],n);const s=g(i,["audioTimestamp"]);s!=null&&y(t,["audioTimestamp"],s);const a=g(i,["candidateCount"]);a!=null&&y(t,["candidateCount"],a);const l=g(i,["enableAffectiveDialog"]);l!=null&&y(t,["enableAffectiveDialog"],l);const u=g(i,["frequencyPenalty"]);u!=null&&y(t,["frequencyPenalty"],u);const h=g(i,["logprobs"]);h!=null&&y(t,["logprobs"],h);const d=g(i,["maxOutputTokens"]);d!=null&&y(t,["maxOutputTokens"],d);const p=g(i,["mediaResolution"]);p!=null&&y(t,["mediaResolution"],p);const v=g(i,["presencePenalty"]);v!=null&&y(t,["presencePenalty"],v);const A=g(i,["responseLogprobs"]);A!=null&&y(t,["responseLogprobs"],A);const T=g(i,["responseMimeType"]);T!=null&&y(t,["responseMimeType"],T);const E=g(i,["responseModalities"]);E!=null&&y(t,["responseModalities"],E);const C=g(i,["responseSchema"]);C!=null&&y(t,["responseSchema"],C);const x=g(i,["routingConfig"]);x!=null&&y(t,["routingConfig"],x);const R=g(i,["seed"]);R!=null&&y(t,["seed"],R);const D=g(i,["speechConfig"]);D!=null&&y(t,["speechConfig"],D);const P=g(i,["stopSequences"]);P!=null&&y(t,["stopSequences"],P);const k=g(i,["temperature"]);k!=null&&y(t,["temperature"],k);const L=g(i,["thinkingConfig"]);L!=null&&y(t,["thinkingConfig"],L);const G=g(i,["topK"]);G!=null&&y(t,["topK"],G);const F=g(i,["topP"]);if(F!=null&&y(t,["topP"],F),g(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function hz(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function dz(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function fz(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],n);const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(i,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(i,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const u=g(i,["topK"]);t!==void 0&&u!=null&&y(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const d=g(i,["mediaResolution"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","mediaResolution"],d);const p=g(i,["seed"]);t!==void 0&&p!=null&&y(t,["setup","generationConfig","seed"],p);const v=g(i,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],$T(v));const A=g(i,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const T=g(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],T);const E=g(i,["systemInstruction"]);t!==void 0&&E!=null&&y(t,["setup","systemInstruction"],rz(Fn(E)));const C=g(i,["tools"]);if(t!==void 0&&C!=null){let G=Uh(C);Array.isArray(G)&&(G=G.map(F=>bz(kh(F)))),y(t,["setup","tools"],G)}const x=g(i,["sessionResumption"]);t!==void 0&&x!=null&&y(t,["setup","sessionResumption"],Ez(x));const R=g(i,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const D=g(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&y(t,["setup","outputAudioTranscription"],D);const P=g(i,["realtimeInputConfig"]);t!==void 0&&P!=null&&y(t,["setup","realtimeInputConfig"],P);const k=g(i,["contextWindowCompression"]);t!==void 0&&k!=null&&y(t,["setup","contextWindowCompression"],k);const L=g(i,["proactivity"]);if(t!==void 0&&L!=null&&y(t,["setup","proactivity"],L),g(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function pz(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],cz(n));const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(i,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(i,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const u=g(i,["topK"]);t!==void 0&&u!=null&&y(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const d=g(i,["mediaResolution"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","mediaResolution"],d);const p=g(i,["seed"]);t!==void 0&&p!=null&&y(t,["setup","generationConfig","seed"],p);const v=g(i,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],$T(v));const A=g(i,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const T=g(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],T);const E=g(i,["systemInstruction"]);t!==void 0&&E!=null&&y(t,["setup","systemInstruction"],Fn(E));const C=g(i,["tools"]);if(t!==void 0&&C!=null){let F=Uh(C);Array.isArray(F)&&(F=F.map($=>Cz(kh($)))),y(t,["setup","tools"],F)}const x=g(i,["sessionResumption"]);t!==void 0&&x!=null&&y(t,["setup","sessionResumption"],x);const R=g(i,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const D=g(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&y(t,["setup","outputAudioTranscription"],D);const P=g(i,["realtimeInputConfig"]);t!==void 0&&P!=null&&y(t,["setup","realtimeInputConfig"],P);const k=g(i,["contextWindowCompression"]);t!==void 0&&k!=null&&y(t,["setup","contextWindowCompression"],k);const L=g(i,["proactivity"]);t!==void 0&&L!=null&&y(t,["setup","proactivity"],L);const G=g(i,["explicitVadSignal"]);return t!==void 0&&G!=null&&y(t,["setup","explicitVadSignal"],G),e}function mz(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],jt(i,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],fz(s,e)),e}function gz(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],jt(i,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],pz(s,e)),e}function yz(i){const t={},e=g(i,["musicGenerationConfig"]);return e!=null&&y(t,["musicGenerationConfig"],e),t}function vz(i){const t={},e=g(i,["weightedPrompts"]);if(e!=null){let n=e;Array.isArray(n)&&(n=n.map(s=>s)),y(t,["weightedPrompts"],n)}return t}function Az(i){const t={},e=g(i,["media"]);if(e!=null){let d=LN(e);Array.isArray(d)&&(d=d.map(p=>Pg(p))),y(t,["mediaChunks"],d)}const n=g(i,["audio"]);n!=null&&y(t,["audio"],Pg(UN(n)));const s=g(i,["audioStreamEnd"]);s!=null&&y(t,["audioStreamEnd"],s);const a=g(i,["video"]);a!=null&&y(t,["video"],Pg(kN(a)));const l=g(i,["text"]);l!=null&&y(t,["text"],l);const u=g(i,["activityStart"]);u!=null&&y(t,["activityStart"],u);const h=g(i,["activityEnd"]);return h!=null&&y(t,["activityEnd"],h),t}function _z(i){const t={},e=g(i,["media"]);if(e!=null){let d=LN(e);Array.isArray(d)&&(d=d.map(p=>p)),y(t,["mediaChunks"],d)}const n=g(i,["audio"]);n!=null&&y(t,["audio"],UN(n));const s=g(i,["audioStreamEnd"]);s!=null&&y(t,["audioStreamEnd"],s);const a=g(i,["video"]);a!=null&&y(t,["video"],kN(a));const l=g(i,["text"]);l!=null&&y(t,["text"],l);const u=g(i,["activityStart"]);u!=null&&y(t,["activityStart"],u);const h=g(i,["activityEnd"]);return h!=null&&y(t,["activityEnd"],h),t}function Sz(i){const t={},e=g(i,["setupComplete"]);e!=null&&y(t,["setupComplete"],e);const n=g(i,["serverContent"]);n!=null&&y(t,["serverContent"],n);const s=g(i,["toolCall"]);s!=null&&y(t,["toolCall"],s);const a=g(i,["toolCallCancellation"]);a!=null&&y(t,["toolCallCancellation"],a);const l=g(i,["usageMetadata"]);l!=null&&y(t,["usageMetadata"],wz(l));const u=g(i,["goAway"]);u!=null&&y(t,["goAway"],u);const h=g(i,["sessionResumptionUpdate"]);h!=null&&y(t,["sessionResumptionUpdate"],h);const d=g(i,["voiceActivityDetectionSignal"]);d!=null&&y(t,["voiceActivityDetectionSignal"],d);const p=g(i,["voiceActivity"]);return p!=null&&y(t,["voiceActivity"],xz(p)),t}function Tz(i){const t={},e=g(i,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(i,["fileData"]);a!=null&&y(t,["fileData"],az(a));const l=g(i,["functionCall"]);l!=null&&y(t,["functionCall"],lz(l));const u=g(i,["functionResponse"]);u!=null&&y(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&y(t,["inlineData"],Pg(h));const d=g(i,["text"]);d!=null&&y(t,["text"],d);const p=g(i,["thought"]);p!=null&&y(t,["thought"],p);const v=g(i,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(i,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function Ez(i){const t={},e=g(i,["handle"]);if(e!=null&&y(t,["handle"],e),g(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function bz(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(i,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>v)),y(t,["functionDeclarations"],p)}const l=g(i,["googleMaps"]);l!=null&&y(t,["googleMaps"],hz(l));const u=g(i,["googleSearch"]);u!=null&&y(t,["googleSearch"],dz(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const d=g(i,["urlContext"]);return d!=null&&y(t,["urlContext"],d),t}function Cz(i){const t={},e=g(i,["retrieval"]);e!=null&&y(t,["retrieval"],e);const n=g(i,["computerUse"]);if(n!=null&&y(t,["computerUse"],n),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=g(i,["codeExecution"]);s!=null&&y(t,["codeExecution"],s);const a=g(i,["enterpriseWebSearch"]);a!=null&&y(t,["enterpriseWebSearch"],a);const l=g(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>uz(A))),y(t,["functionDeclarations"],v)}const u=g(i,["googleMaps"]);u!=null&&y(t,["googleMaps"],u);const h=g(i,["googleSearch"]);h!=null&&y(t,["googleSearch"],h);const d=g(i,["googleSearchRetrieval"]);d!=null&&y(t,["googleSearchRetrieval"],d);const p=g(i,["urlContext"]);return p!=null&&y(t,["urlContext"],p),t}function wz(i){const t={},e=g(i,["promptTokenCount"]);e!=null&&y(t,["promptTokenCount"],e);const n=g(i,["cachedContentTokenCount"]);n!=null&&y(t,["cachedContentTokenCount"],n);const s=g(i,["candidatesTokenCount"]);s!=null&&y(t,["responseTokenCount"],s);const a=g(i,["toolUsePromptTokenCount"]);a!=null&&y(t,["toolUsePromptTokenCount"],a);const l=g(i,["thoughtsTokenCount"]);l!=null&&y(t,["thoughtsTokenCount"],l);const u=g(i,["totalTokenCount"]);u!=null&&y(t,["totalTokenCount"],u);const h=g(i,["promptTokensDetails"]);if(h!=null){let T=h;Array.isArray(T)&&(T=T.map(E=>E)),y(t,["promptTokensDetails"],T)}const d=g(i,["cacheTokensDetails"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(E=>E)),y(t,["cacheTokensDetails"],T)}const p=g(i,["candidatesTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(E=>E)),y(t,["responseTokensDetails"],T)}const v=g(i,["toolUsePromptTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),y(t,["toolUsePromptTokensDetails"],T)}const A=g(i,["trafficType"]);return A!=null&&y(t,["trafficType"],A),t}function xz(i){const t={},e=g(i,["type"]);return e!=null&&y(t,["voiceActivityType"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rz(i,t){const e={},n=g(i,["data"]);if(n!=null&&y(e,["data"],n),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=g(i,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Mz(i,t){const e={},n=g(i,["content"]);n!=null&&y(e,["content"],n);const s=g(i,["citationMetadata"]);s!=null&&y(e,["citationMetadata"],Iz(s));const a=g(i,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const l=g(i,["finishReason"]);l!=null&&y(e,["finishReason"],l);const u=g(i,["avgLogprobs"]);u!=null&&y(e,["avgLogprobs"],u);const h=g(i,["groundingMetadata"]);h!=null&&y(e,["groundingMetadata"],h);const d=g(i,["index"]);d!=null&&y(e,["index"],d);const p=g(i,["logprobsResult"]);p!=null&&y(e,["logprobsResult"],p);const v=g(i,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(E=>E)),y(e,["safetyRatings"],T)}const A=g(i,["urlContextMetadata"]);return A!=null&&y(e,["urlContextMetadata"],A),e}function Iz(i,t){const e={},n=g(i,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["citations"],s)}return e}function Nz(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let l=ds(a);Array.isArray(l)&&(l=l.map(u=>u)),y(n,["contents"],l)}return n}function Dz(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["tokensInfo"],a)}return e}function Pz(i,t){const e={},n=g(i,["values"]);n!=null&&y(e,["values"],n);const s=g(i,["statistics"]);return s!=null&&y(e,["statistics"],Lz(s)),e}function Lz(i,t){const e={},n=g(i,["truncated"]);n!=null&&y(e,["truncated"],n);const s=g(i,["token_count"]);return s!=null&&y(e,["tokenCount"],s),e}function e0(i,t){const e={},n=g(i,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>z4(l))),y(e,["parts"],a)}const s=g(i,["role"]);return s!=null&&y(e,["role"],s),e}function kz(i,t){const e={},n=g(i,["controlType"]);n!=null&&y(e,["controlType"],n);const s=g(i,["enableControlImageComputation"]);return s!=null&&y(e,["computeControl"],s),e}function Uz(i,t){const e={};if(g(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Oz(i,t,e){const n={},s=g(i,["systemInstruction"]);t!==void 0&&s!=null&&y(t,["systemInstruction"],Fn(s));const a=g(i,["tools"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>WN(h))),y(t,["tools"],u)}const l=g(i,["generationConfig"]);return t!==void 0&&l!=null&&y(t,["generationConfig"],R4(l)),n}function Fz(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let u=ds(a);Array.isArray(u)&&(u=u.map(h=>e0(h))),y(n,["contents"],u)}const l=g(t,["config"]);return l!=null&&Uz(l),n}function Vz(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let u=ds(a);Array.isArray(u)&&(u=u.map(h=>h)),y(n,["contents"],u)}const l=g(t,["config"]);return l!=null&&Oz(l,n),n}function Hz(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["totalTokens"]);s!=null&&y(e,["totalTokens"],s);const a=g(i,["cachedContentTokenCount"]);return a!=null&&y(e,["cachedContentTokenCount"],a),e}function Bz(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["totalTokens"]);return s!=null&&y(e,["totalTokens"],s),e}function Gz(i,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],jt(i,s)),n}function zz(i,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],jt(i,s)),n}function qz(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Yz(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Xz(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(i,["negativePrompt"]);t!==void 0&&a!=null&&y(t,["parameters","negativePrompt"],a);const l=g(i,["numberOfImages"]);t!==void 0&&l!=null&&y(t,["parameters","sampleCount"],l);const u=g(i,["aspectRatio"]);t!==void 0&&u!=null&&y(t,["parameters","aspectRatio"],u);const h=g(i,["guidanceScale"]);t!==void 0&&h!=null&&y(t,["parameters","guidanceScale"],h);const d=g(i,["seed"]);t!==void 0&&d!=null&&y(t,["parameters","seed"],d);const p=g(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&y(t,["parameters","safetySetting"],p);const v=g(i,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(i,["includeSafetyAttributes"]);t!==void 0&&A!=null&&y(t,["parameters","includeSafetyAttributes"],A);const T=g(i,["includeRaiReason"]);t!==void 0&&T!=null&&y(t,["parameters","includeRaiReason"],T);const E=g(i,["language"]);t!==void 0&&E!=null&&y(t,["parameters","language"],E);const C=g(i,["outputMimeType"]);t!==void 0&&C!=null&&y(t,["parameters","outputOptions","mimeType"],C);const x=g(i,["outputCompressionQuality"]);t!==void 0&&x!=null&&y(t,["parameters","outputOptions","compressionQuality"],x);const R=g(i,["addWatermark"]);t!==void 0&&R!=null&&y(t,["parameters","addWatermark"],R);const D=g(i,["labels"]);t!==void 0&&D!=null&&y(t,["labels"],D);const P=g(i,["editMode"]);t!==void 0&&P!=null&&y(t,["parameters","editMode"],P);const k=g(i,["baseSteps"]);return t!==void 0&&k!=null&&y(t,["parameters","editConfig","baseSteps"],k),n}function $z(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(d=>J4(d))),y(n,["instances[0]","referenceImages"],h)}const u=g(t,["config"]);return u!=null&&Xz(u,n),n}function Kz(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>n0(l))),y(e,["generatedImages"],a)}return e}function Jz(i,t,e){const n={},s=g(i,["taskType"]);t!==void 0&&s!=null&&y(t,["requests[]","taskType"],s);const a=g(i,["title"]);t!==void 0&&a!=null&&y(t,["requests[]","title"],a);const l=g(i,["outputDimensionality"]);if(t!==void 0&&l!=null&&y(t,["requests[]","outputDimensionality"],l),g(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Wz(i,t,e){const n={},s=g(i,["taskType"]);t!==void 0&&s!=null&&y(t,["instances[]","task_type"],s);const a=g(i,["title"]);t!==void 0&&a!=null&&y(t,["instances[]","title"],a);const l=g(i,["outputDimensionality"]);t!==void 0&&l!=null&&y(t,["parameters","outputDimensionality"],l);const u=g(i,["mimeType"]);t!==void 0&&u!=null&&y(t,["instances[]","mimeType"],u);const h=g(i,["autoTruncate"]);return t!==void 0&&h!=null&&y(t,["parameters","autoTruncate"],h),n}function Qz(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let h=qT(i,a);Array.isArray(h)&&(h=h.map(d=>d)),y(n,["requests[]","content"],h)}const l=g(t,["config"]);l!=null&&Jz(l,n);const u=g(t,["model"]);return u!==void 0&&y(n,["requests[]","model"],jt(i,u)),n}function Zz(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let u=qT(i,a);Array.isArray(u)&&(u=u.map(h=>h)),y(n,["instances[]","content"],u)}const l=g(t,["config"]);return l!=null&&Wz(l,n),n}function jz(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),y(e,["embeddings"],l)}const a=g(i,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function t4(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Pz(u))),y(e,["embeddings"],l)}const a=g(i,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function e4(i,t){const e={},n=g(i,["endpoint"]);n!=null&&y(e,["name"],n);const s=g(i,["deployedModelId"]);return s!=null&&y(e,["deployedModelId"],s),e}function n4(i,t){const e={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["fileUri"]);n!=null&&y(e,["fileUri"],n);const s=g(i,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function i4(i,t){const e={},n=g(i,["id"]);n!=null&&y(e,["id"],n);const s=g(i,["args"]);s!=null&&y(e,["args"],s);const a=g(i,["name"]);if(a!=null&&y(e,["name"],a),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function s4(i,t){const e={},n=g(i,["allowedFunctionNames"]);n!=null&&y(e,["allowedFunctionNames"],n);const s=g(i,["mode"]);if(s!=null&&y(e,["mode"],s),g(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function o4(i,t){const e={},n=g(i,["description"]);n!=null&&y(e,["description"],n);const s=g(i,["name"]);s!=null&&y(e,["name"],s);const a=g(i,["parameters"]);a!=null&&y(e,["parameters"],a);const l=g(i,["parametersJsonSchema"]);l!=null&&y(e,["parametersJsonSchema"],l);const u=g(i,["response"]);u!=null&&y(e,["response"],u);const h=g(i,["responseJsonSchema"]);if(h!=null&&y(e,["responseJsonSchema"],h),g(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function r4(i,t,e,n){const s={},a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],e0(Fn(a)));const l=g(t,["temperature"]);l!=null&&y(s,["temperature"],l);const u=g(t,["topP"]);u!=null&&y(s,["topP"],u);const h=g(t,["topK"]);h!=null&&y(s,["topK"],h);const d=g(t,["candidateCount"]);d!=null&&y(s,["candidateCount"],d);const p=g(t,["maxOutputTokens"]);p!=null&&y(s,["maxOutputTokens"],p);const v=g(t,["stopSequences"]);v!=null&&y(s,["stopSequences"],v);const A=g(t,["responseLogprobs"]);A!=null&&y(s,["responseLogprobs"],A);const T=g(t,["logprobs"]);T!=null&&y(s,["logprobs"],T);const E=g(t,["presencePenalty"]);E!=null&&y(s,["presencePenalty"],E);const C=g(t,["frequencyPenalty"]);C!=null&&y(s,["frequencyPenalty"],C);const x=g(t,["seed"]);x!=null&&y(s,["seed"],x);const R=g(t,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const D=g(t,["responseSchema"]);D!=null&&y(s,["responseSchema"],YT(D));const P=g(t,["responseJsonSchema"]);if(P!=null&&y(s,["responseJsonSchema"],P),g(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=g(t,["safetySettings"]);if(e!==void 0&&k!=null){let pt=k;Array.isArray(pt)&&(pt=pt.map(Dt=>W4(Dt))),y(e,["safetySettings"],pt)}const L=g(t,["tools"]);if(e!==void 0&&L!=null){let pt=Uh(L);Array.isArray(pt)&&(pt=pt.map(Dt=>i5(kh(Dt)))),y(e,["tools"],pt)}const G=g(t,["toolConfig"]);if(e!==void 0&&G!=null&&y(e,["toolConfig"],n5(G)),g(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=g(t,["cachedContent"]);e!==void 0&&F!=null&&y(e,["cachedContent"],_r(i,F));const $=g(t,["responseModalities"]);$!=null&&y(s,["responseModalities"],$);const X=g(t,["mediaResolution"]);X!=null&&y(s,["mediaResolution"],X);const et=g(t,["speechConfig"]);if(et!=null&&y(s,["speechConfig"],XT(et)),g(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const nt=g(t,["thinkingConfig"]);nt!=null&&y(s,["thinkingConfig"],nt);const mt=g(t,["imageConfig"]);mt!=null&&y(s,["imageConfig"],P4(mt));const Tt=g(t,["enableEnhancedCivicAnswers"]);if(Tt!=null&&y(s,["enableEnhancedCivicAnswers"],Tt),g(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function a4(i,t,e,n){const s={},a=g(t,["systemInstruction"]);e!==void 0&&a!=null&&y(e,["systemInstruction"],Fn(a));const l=g(t,["temperature"]);l!=null&&y(s,["temperature"],l);const u=g(t,["topP"]);u!=null&&y(s,["topP"],u);const h=g(t,["topK"]);h!=null&&y(s,["topK"],h);const d=g(t,["candidateCount"]);d!=null&&y(s,["candidateCount"],d);const p=g(t,["maxOutputTokens"]);p!=null&&y(s,["maxOutputTokens"],p);const v=g(t,["stopSequences"]);v!=null&&y(s,["stopSequences"],v);const A=g(t,["responseLogprobs"]);A!=null&&y(s,["responseLogprobs"],A);const T=g(t,["logprobs"]);T!=null&&y(s,["logprobs"],T);const E=g(t,["presencePenalty"]);E!=null&&y(s,["presencePenalty"],E);const C=g(t,["frequencyPenalty"]);C!=null&&y(s,["frequencyPenalty"],C);const x=g(t,["seed"]);x!=null&&y(s,["seed"],x);const R=g(t,["responseMimeType"]);R!=null&&y(s,["responseMimeType"],R);const D=g(t,["responseSchema"]);D!=null&&y(s,["responseSchema"],YT(D));const P=g(t,["responseJsonSchema"]);P!=null&&y(s,["responseJsonSchema"],P);const k=g(t,["routingConfig"]);k!=null&&y(s,["routingConfig"],k);const L=g(t,["modelSelectionConfig"]);L!=null&&y(s,["modelConfig"],L);const G=g(t,["safetySettings"]);if(e!==void 0&&G!=null){let ot=G;Array.isArray(ot)&&(ot=ot.map(Et=>Et)),y(e,["safetySettings"],ot)}const F=g(t,["tools"]);if(e!==void 0&&F!=null){let ot=Uh(F);Array.isArray(ot)&&(ot=ot.map(Et=>WN(kh(Et)))),y(e,["tools"],ot)}const $=g(t,["toolConfig"]);e!==void 0&&$!=null&&y(e,["toolConfig"],$);const X=g(t,["labels"]);e!==void 0&&X!=null&&y(e,["labels"],X);const et=g(t,["cachedContent"]);e!==void 0&&et!=null&&y(e,["cachedContent"],_r(i,et));const nt=g(t,["responseModalities"]);nt!=null&&y(s,["responseModalities"],nt);const mt=g(t,["mediaResolution"]);mt!=null&&y(s,["mediaResolution"],mt);const Tt=g(t,["speechConfig"]);Tt!=null&&y(s,["speechConfig"],XT(Tt));const pt=g(t,["audioTimestamp"]);pt!=null&&y(s,["audioTimestamp"],pt);const Dt=g(t,["thinkingConfig"]);Dt!=null&&y(s,["thinkingConfig"],Dt);const B=g(t,["imageConfig"]);if(B!=null&&y(s,["imageConfig"],L4(B)),g(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const J=g(t,["modelArmorConfig"]);return e!==void 0&&J!=null&&y(e,["modelArmorConfig"],J),s}function lM(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let u=ds(a);Array.isArray(u)&&(u=u.map(h=>e0(h))),y(n,["contents"],u)}const l=g(t,["config"]);return l!=null&&y(n,["generationConfig"],r4(i,l,n)),n}function uM(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["contents"]);if(a!=null){let u=ds(a);Array.isArray(u)&&(u=u.map(h=>h)),y(n,["contents"],u)}const l=g(t,["config"]);return l!=null&&y(n,["generationConfig"],a4(i,l,n)),n}function cM(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["candidates"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>Mz(p))),y(e,["candidates"],d)}const a=g(i,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const l=g(i,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const u=g(i,["responseId"]);u!=null&&y(e,["responseId"],u);const h=g(i,["usageMetadata"]);return h!=null&&y(e,["usageMetadata"],h),e}function hM(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["candidates"],p)}const a=g(i,["createTime"]);a!=null&&y(e,["createTime"],a);const l=g(i,["modelVersion"]);l!=null&&y(e,["modelVersion"],l);const u=g(i,["promptFeedback"]);u!=null&&y(e,["promptFeedback"],u);const h=g(i,["responseId"]);h!=null&&y(e,["responseId"],h);const d=g(i,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function l4(i,t,e){const n={};if(g(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=g(i,["numberOfImages"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(i,["aspectRatio"]);t!==void 0&&a!=null&&y(t,["parameters","aspectRatio"],a);const l=g(i,["guidanceScale"]);if(t!==void 0&&l!=null&&y(t,["parameters","guidanceScale"],l),g(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=g(i,["safetyFilterLevel"]);t!==void 0&&u!=null&&y(t,["parameters","safetySetting"],u);const h=g(i,["personGeneration"]);t!==void 0&&h!=null&&y(t,["parameters","personGeneration"],h);const d=g(i,["includeSafetyAttributes"]);t!==void 0&&d!=null&&y(t,["parameters","includeSafetyAttributes"],d);const p=g(i,["includeRaiReason"]);t!==void 0&&p!=null&&y(t,["parameters","includeRaiReason"],p);const v=g(i,["language"]);t!==void 0&&v!=null&&y(t,["parameters","language"],v);const A=g(i,["outputMimeType"]);t!==void 0&&A!=null&&y(t,["parameters","outputOptions","mimeType"],A);const T=g(i,["outputCompressionQuality"]);if(t!==void 0&&T!=null&&y(t,["parameters","outputOptions","compressionQuality"],T),g(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=g(i,["imageSize"]);if(t!==void 0&&E!=null&&y(t,["parameters","sampleImageSize"],E),g(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function u4(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(i,["negativePrompt"]);t!==void 0&&a!=null&&y(t,["parameters","negativePrompt"],a);const l=g(i,["numberOfImages"]);t!==void 0&&l!=null&&y(t,["parameters","sampleCount"],l);const u=g(i,["aspectRatio"]);t!==void 0&&u!=null&&y(t,["parameters","aspectRatio"],u);const h=g(i,["guidanceScale"]);t!==void 0&&h!=null&&y(t,["parameters","guidanceScale"],h);const d=g(i,["seed"]);t!==void 0&&d!=null&&y(t,["parameters","seed"],d);const p=g(i,["safetyFilterLevel"]);t!==void 0&&p!=null&&y(t,["parameters","safetySetting"],p);const v=g(i,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(i,["includeSafetyAttributes"]);t!==void 0&&A!=null&&y(t,["parameters","includeSafetyAttributes"],A);const T=g(i,["includeRaiReason"]);t!==void 0&&T!=null&&y(t,["parameters","includeRaiReason"],T);const E=g(i,["language"]);t!==void 0&&E!=null&&y(t,["parameters","language"],E);const C=g(i,["outputMimeType"]);t!==void 0&&C!=null&&y(t,["parameters","outputOptions","mimeType"],C);const x=g(i,["outputCompressionQuality"]);t!==void 0&&x!=null&&y(t,["parameters","outputOptions","compressionQuality"],x);const R=g(i,["addWatermark"]);t!==void 0&&R!=null&&y(t,["parameters","addWatermark"],R);const D=g(i,["labels"]);t!==void 0&&D!=null&&y(t,["labels"],D);const P=g(i,["imageSize"]);t!==void 0&&P!=null&&y(t,["parameters","sampleImageSize"],P);const k=g(i,["enhancePrompt"]);return t!==void 0&&k!=null&&y(t,["parameters","enhancePrompt"],k),n}function c4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["config"]);return l!=null&&l4(l,n),n}function h4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["config"]);return l!=null&&u4(l,n),n}function d4(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>b4(u))),y(e,["generatedImages"],l)}const a=g(i,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],KN(a)),e}function f4(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>n0(u))),y(e,["generatedImages"],l)}const a=g(i,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],JN(a)),e}function p4(i,t,e){const n={},s=g(i,["numberOfVideos"]);if(t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s),g(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=g(i,["durationSeconds"]);if(t!==void 0&&a!=null&&y(t,["parameters","durationSeconds"],a),g(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=g(i,["aspectRatio"]);t!==void 0&&l!=null&&y(t,["parameters","aspectRatio"],l);const u=g(i,["resolution"]);t!==void 0&&u!=null&&y(t,["parameters","resolution"],u);const h=g(i,["personGeneration"]);if(t!==void 0&&h!=null&&y(t,["parameters","personGeneration"],h),g(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=g(i,["negativePrompt"]);t!==void 0&&d!=null&&y(t,["parameters","negativePrompt"],d);const p=g(i,["enhancePrompt"]);if(t!==void 0&&p!=null&&y(t,["parameters","enhancePrompt"],p),g(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=g(i,["lastFrame"]);t!==void 0&&v!=null&&y(t,["instances[0]","lastFrame"],i0(v));const A=g(i,["referenceImages"]);if(t!==void 0&&A!=null){let T=A;Array.isArray(T)&&(T=T.map(E=>g5(E))),y(t,["instances[0]","referenceImages"],T)}if(g(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(g(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function m4(i,t,e){const n={},s=g(i,["numberOfVideos"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(i,["outputGcsUri"]);t!==void 0&&a!=null&&y(t,["parameters","storageUri"],a);const l=g(i,["fps"]);t!==void 0&&l!=null&&y(t,["parameters","fps"],l);const u=g(i,["durationSeconds"]);t!==void 0&&u!=null&&y(t,["parameters","durationSeconds"],u);const h=g(i,["seed"]);t!==void 0&&h!=null&&y(t,["parameters","seed"],h);const d=g(i,["aspectRatio"]);t!==void 0&&d!=null&&y(t,["parameters","aspectRatio"],d);const p=g(i,["resolution"]);t!==void 0&&p!=null&&y(t,["parameters","resolution"],p);const v=g(i,["personGeneration"]);t!==void 0&&v!=null&&y(t,["parameters","personGeneration"],v);const A=g(i,["pubsubTopic"]);t!==void 0&&A!=null&&y(t,["parameters","pubsubTopic"],A);const T=g(i,["negativePrompt"]);t!==void 0&&T!=null&&y(t,["parameters","negativePrompt"],T);const E=g(i,["enhancePrompt"]);t!==void 0&&E!=null&&y(t,["parameters","enhancePrompt"],E);const C=g(i,["generateAudio"]);t!==void 0&&C!=null&&y(t,["parameters","generateAudio"],C);const x=g(i,["lastFrame"]);t!==void 0&&x!=null&&y(t,["instances[0]","lastFrame"],Bs(x));const R=g(i,["referenceImages"]);if(t!==void 0&&R!=null){let k=R;Array.isArray(k)&&(k=k.map(L=>y5(L))),y(t,["instances[0]","referenceImages"],k)}const D=g(i,["mask"]);t!==void 0&&D!=null&&y(t,["instances[0]","mask"],m5(D));const P=g(i,["compressionQuality"]);return t!==void 0&&P!=null&&y(t,["parameters","compressionQuality"],P),n}function g4(i,t){const e={},n=g(i,["name"]);n!=null&&y(e,["name"],n);const s=g(i,["metadata"]);s!=null&&y(e,["metadata"],s);const a=g(i,["done"]);a!=null&&y(e,["done"],a);const l=g(i,["error"]);l!=null&&y(e,["error"],l);const u=g(i,["response","generateVideoResponse"]);return u!=null&&y(e,["response"],_4(u)),e}function y4(i,t){const e={},n=g(i,["name"]);n!=null&&y(e,["name"],n);const s=g(i,["metadata"]);s!=null&&y(e,["metadata"],s);const a=g(i,["done"]);a!=null&&y(e,["done"],a);const l=g(i,["error"]);l!=null&&y(e,["error"],l);const u=g(i,["response"]);return u!=null&&y(e,["response"],S4(u)),e}function v4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["image"]);l!=null&&y(n,["instances[0]","image"],i0(l));const u=g(t,["video"]);u!=null&&y(n,["instances[0]","video"],QN(u));const h=g(t,["source"]);h!=null&&T4(h,n);const d=g(t,["config"]);return d!=null&&p4(d,n),n}function A4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const l=g(t,["image"]);l!=null&&y(n,["instances[0]","image"],Bs(l));const u=g(t,["video"]);u!=null&&y(n,["instances[0]","video"],ZN(u));const h=g(t,["source"]);h!=null&&E4(h,n);const d=g(t,["config"]);return d!=null&&m4(d,n),n}function _4(i,t){const e={},n=g(i,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>w4(u))),y(e,["generatedVideos"],l)}const s=g(i,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const a=g(i,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function S4(i,t){const e={},n=g(i,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>x4(u))),y(e,["generatedVideos"],l)}const s=g(i,["raiMediaFilteredCount"]);s!=null&&y(e,["raiMediaFilteredCount"],s);const a=g(i,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function T4(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(i,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],i0(a));const l=g(i,["video"]);return t!==void 0&&l!=null&&y(t,["instances[0]","video"],QN(l)),n}function E4(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(i,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],Bs(a));const l=g(i,["video"]);return t!==void 0&&l!=null&&y(t,["instances[0]","video"],ZN(l)),n}function b4(i,t){const e={},n=g(i,["_self"]);n!=null&&y(e,["image"],k4(n));const s=g(i,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const a=g(i,["_self"]);return a!=null&&y(e,["safetyAttributes"],KN(a)),e}function n0(i,t){const e={},n=g(i,["_self"]);n!=null&&y(e,["image"],$N(n));const s=g(i,["raiFilteredReason"]);s!=null&&y(e,["raiFilteredReason"],s);const a=g(i,["_self"]);a!=null&&y(e,["safetyAttributes"],JN(a));const l=g(i,["prompt"]);return l!=null&&y(e,["enhancedPrompt"],l),e}function C4(i,t){const e={},n=g(i,["_self"]);n!=null&&y(e,["mask"],$N(n));const s=g(i,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(e,["labels"],a)}return e}function w4(i,t){const e={},n=g(i,["video"]);return n!=null&&y(e,["video"],f5(n)),e}function x4(i,t){const e={},n=g(i,["_self"]);return n!=null&&y(e,["video"],p5(n)),e}function R4(i,t){const e={},n=g(i,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const s=g(i,["responseJsonSchema"]);s!=null&&y(e,["responseJsonSchema"],s);const a=g(i,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const l=g(i,["candidateCount"]);l!=null&&y(e,["candidateCount"],l);const u=g(i,["enableAffectiveDialog"]);u!=null&&y(e,["enableAffectiveDialog"],u);const h=g(i,["frequencyPenalty"]);h!=null&&y(e,["frequencyPenalty"],h);const d=g(i,["logprobs"]);d!=null&&y(e,["logprobs"],d);const p=g(i,["maxOutputTokens"]);p!=null&&y(e,["maxOutputTokens"],p);const v=g(i,["mediaResolution"]);v!=null&&y(e,["mediaResolution"],v);const A=g(i,["presencePenalty"]);A!=null&&y(e,["presencePenalty"],A);const T=g(i,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const E=g(i,["responseMimeType"]);E!=null&&y(e,["responseMimeType"],E);const C=g(i,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const x=g(i,["responseSchema"]);x!=null&&y(e,["responseSchema"],x);const R=g(i,["routingConfig"]);R!=null&&y(e,["routingConfig"],R);const D=g(i,["seed"]);D!=null&&y(e,["seed"],D);const P=g(i,["speechConfig"]);P!=null&&y(e,["speechConfig"],P);const k=g(i,["stopSequences"]);k!=null&&y(e,["stopSequences"],k);const L=g(i,["temperature"]);L!=null&&y(e,["temperature"],L);const G=g(i,["thinkingConfig"]);G!=null&&y(e,["thinkingConfig"],G);const F=g(i,["topK"]);F!=null&&y(e,["topK"],F);const $=g(i,["topP"]);if($!=null&&y(e,["topP"],$),g(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function M4(i,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],jt(i,s)),n}function I4(i,t,e){const n={},s=g(t,["model"]);return s!=null&&y(n,["_url","name"],jt(i,s)),n}function N4(i,t){const e={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=g(i,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function D4(i,t){const e={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=g(i,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function P4(i,t){const e={},n=g(i,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const s=g(i,["imageSize"]);if(s!=null&&y(e,["imageSize"],s),g(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(g(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(g(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function L4(i,t){const e={},n=g(i,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const s=g(i,["imageSize"]);s!=null&&y(e,["imageSize"],s);const a=g(i,["personGeneration"]);a!=null&&y(e,["personGeneration"],a);const l=g(i,["outputMimeType"]);l!=null&&y(e,["imageOutputOptions","mimeType"],l);const u=g(i,["outputCompressionQuality"]);return u!=null&&y(e,["imageOutputOptions","compressionQuality"],u),e}function k4(i,t){const e={},n=g(i,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Pa(n));const s=g(i,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function $N(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=g(i,["bytesBase64Encoded"]);s!=null&&y(e,["imageBytes"],Pa(s));const a=g(i,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function i0(i,t){const e={};if(g(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=g(i,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Pa(n));const s=g(i,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function Bs(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const s=g(i,["imageBytes"]);s!=null&&y(e,["bytesBase64Encoded"],Pa(s));const a=g(i,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function U4(i,t,e,n){const s={},a=g(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const l=g(t,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const u=g(t,["filter"]);e!==void 0&&u!=null&&y(e,["_query","filter"],u);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&y(e,["_url","models_url"],HN(i,h)),s}function O4(i,t,e,n){const s={},a=g(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const l=g(t,["pageToken"]);e!==void 0&&l!=null&&y(e,["_query","pageToken"],l);const u=g(t,["filter"]);e!==void 0&&u!=null&&y(e,["_query","filter"],u);const h=g(t,["queryBase"]);return e!==void 0&&h!=null&&y(e,["_url","models_url"],HN(i,h)),s}function F4(i,t,e){const n={},s=g(t,["config"]);return s!=null&&U4(i,s,n),n}function V4(i,t,e){const n={},s=g(t,["config"]);return s!=null&&O4(i,s,n),n}function H4(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(i,["_self"]);if(a!=null){let l=BN(a);Array.isArray(l)&&(l=l.map(u=>V_(u))),y(e,["models"],l)}return e}function B4(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(i,["_self"]);if(a!=null){let l=BN(a);Array.isArray(l)&&(l=l.map(u=>H_(u))),y(e,["models"],l)}return e}function G4(i,t){const e={},n=g(i,["maskMode"]);n!=null&&y(e,["maskMode"],n);const s=g(i,["segmentationClasses"]);s!=null&&y(e,["maskClasses"],s);const a=g(i,["maskDilation"]);return a!=null&&y(e,["dilation"],a),e}function V_(i,t){const e={},n=g(i,["name"]);n!=null&&y(e,["name"],n);const s=g(i,["displayName"]);s!=null&&y(e,["displayName"],s);const a=g(i,["description"]);a!=null&&y(e,["description"],a);const l=g(i,["version"]);l!=null&&y(e,["version"],l);const u=g(i,["_self"]);u!=null&&y(e,["tunedModelInfo"],s5(u));const h=g(i,["inputTokenLimit"]);h!=null&&y(e,["inputTokenLimit"],h);const d=g(i,["outputTokenLimit"]);d!=null&&y(e,["outputTokenLimit"],d);const p=g(i,["supportedGenerationMethods"]);p!=null&&y(e,["supportedActions"],p);const v=g(i,["temperature"]);v!=null&&y(e,["temperature"],v);const A=g(i,["maxTemperature"]);A!=null&&y(e,["maxTemperature"],A);const T=g(i,["topP"]);T!=null&&y(e,["topP"],T);const E=g(i,["topK"]);E!=null&&y(e,["topK"],E);const C=g(i,["thinking"]);return C!=null&&y(e,["thinking"],C),e}function H_(i,t){const e={},n=g(i,["name"]);n!=null&&y(e,["name"],n);const s=g(i,["displayName"]);s!=null&&y(e,["displayName"],s);const a=g(i,["description"]);a!=null&&y(e,["description"],a);const l=g(i,["versionId"]);l!=null&&y(e,["version"],l);const u=g(i,["deployedModels"]);if(u!=null){let A=u;Array.isArray(A)&&(A=A.map(T=>e4(T))),y(e,["endpoints"],A)}const h=g(i,["labels"]);h!=null&&y(e,["labels"],h);const d=g(i,["_self"]);d!=null&&y(e,["tunedModelInfo"],o5(d));const p=g(i,["defaultCheckpointId"]);p!=null&&y(e,["defaultCheckpointId"],p);const v=g(i,["checkpoints"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(T=>T)),y(e,["checkpoints"],A)}return e}function z4(i,t){const e={},n=g(i,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const s=g(i,["codeExecutionResult"]);s!=null&&y(e,["codeExecutionResult"],s);const a=g(i,["executableCode"]);a!=null&&y(e,["executableCode"],a);const l=g(i,["fileData"]);l!=null&&y(e,["fileData"],n4(l));const u=g(i,["functionCall"]);u!=null&&y(e,["functionCall"],i4(u));const h=g(i,["functionResponse"]);h!=null&&y(e,["functionResponse"],h);const d=g(i,["inlineData"]);d!=null&&y(e,["inlineData"],Rz(d));const p=g(i,["text"]);p!=null&&y(e,["text"],p);const v=g(i,["thought"]);v!=null&&y(e,["thought"],v);const A=g(i,["thoughtSignature"]);A!=null&&y(e,["thoughtSignature"],A);const T=g(i,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function q4(i,t){const e={},n=g(i,["productImage"]);return n!=null&&y(e,["image"],Bs(n)),e}function Y4(i,t,e){const n={},s=g(i,["numberOfImages"]);t!==void 0&&s!=null&&y(t,["parameters","sampleCount"],s);const a=g(i,["baseSteps"]);t!==void 0&&a!=null&&y(t,["parameters","baseSteps"],a);const l=g(i,["outputGcsUri"]);t!==void 0&&l!=null&&y(t,["parameters","storageUri"],l);const u=g(i,["seed"]);t!==void 0&&u!=null&&y(t,["parameters","seed"],u);const h=g(i,["safetyFilterLevel"]);t!==void 0&&h!=null&&y(t,["parameters","safetySetting"],h);const d=g(i,["personGeneration"]);t!==void 0&&d!=null&&y(t,["parameters","personGeneration"],d);const p=g(i,["addWatermark"]);t!==void 0&&p!=null&&y(t,["parameters","addWatermark"],p);const v=g(i,["outputMimeType"]);t!==void 0&&v!=null&&y(t,["parameters","outputOptions","mimeType"],v);const A=g(i,["outputCompressionQuality"]);t!==void 0&&A!=null&&y(t,["parameters","outputOptions","compressionQuality"],A);const T=g(i,["enhancePrompt"]);t!==void 0&&T!=null&&y(t,["parameters","enhancePrompt"],T);const E=g(i,["labels"]);return t!==void 0&&E!=null&&y(t,["labels"],E),n}function X4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["source"]);a!=null&&K4(a,n);const l=g(t,["config"]);return l!=null&&Y4(l,n),n}function $4(i,t){const e={},n=g(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>n0(a))),y(e,["generatedImages"],s)}return e}function K4(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(i,["personImage"]);t!==void 0&&a!=null&&y(t,["instances[0]","personImage","image"],Bs(a));const l=g(i,["productImages"]);if(t!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>q4(h))),y(t,["instances[0]","productImages"],u)}return n}function J4(i,t){const e={},n=g(i,["referenceImage"]);n!=null&&y(e,["referenceImage"],Bs(n));const s=g(i,["referenceId"]);s!=null&&y(e,["referenceId"],s);const a=g(i,["referenceType"]);a!=null&&y(e,["referenceType"],a);const l=g(i,["maskImageConfig"]);l!=null&&y(e,["maskImageConfig"],G4(l));const u=g(i,["controlImageConfig"]);u!=null&&y(e,["controlImageConfig"],kz(u));const h=g(i,["styleImageConfig"]);h!=null&&y(e,["styleImageConfig"],h);const d=g(i,["subjectImageConfig"]);return d!=null&&y(e,["subjectImageConfig"],d),e}function KN(i,t){const e={},n=g(i,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=g(i,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const a=g(i,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function JN(i,t){const e={},n=g(i,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const s=g(i,["safetyAttributes","scores"]);s!=null&&y(e,["scores"],s);const a=g(i,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function W4(i,t){const e={},n=g(i,["category"]);if(n!=null&&y(e,["category"],n),g(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=g(i,["threshold"]);return s!=null&&y(e,["threshold"],s),e}function Q4(i,t){const e={},n=g(i,["image"]);return n!=null&&y(e,["image"],Bs(n)),e}function Z4(i,t,e){const n={},s=g(i,["mode"]);t!==void 0&&s!=null&&y(t,["parameters","mode"],s);const a=g(i,["maxPredictions"]);t!==void 0&&a!=null&&y(t,["parameters","maxPredictions"],a);const l=g(i,["confidenceThreshold"]);t!==void 0&&l!=null&&y(t,["parameters","confidenceThreshold"],l);const u=g(i,["maskDilation"]);t!==void 0&&u!=null&&y(t,["parameters","maskDilation"],u);const h=g(i,["binaryColorThreshold"]);t!==void 0&&h!=null&&y(t,["parameters","binaryColorThreshold"],h);const d=g(i,["labels"]);return t!==void 0&&d!=null&&y(t,["labels"],d),n}function j4(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["source"]);a!=null&&e5(a,n);const l=g(t,["config"]);return l!=null&&Z4(l,n),n}function t5(i,t){const e={},n=g(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>C4(a))),y(e,["generatedMasks"],s)}return e}function e5(i,t,e){const n={},s=g(i,["prompt"]);t!==void 0&&s!=null&&y(t,["instances[0]","prompt"],s);const a=g(i,["image"]);t!==void 0&&a!=null&&y(t,["instances[0]","image"],Bs(a));const l=g(i,["scribbleImage"]);return t!==void 0&&l!=null&&y(t,["instances[0]","scribble"],Q4(l)),n}function n5(i,t){const e={},n=g(i,["retrievalConfig"]);n!=null&&y(e,["retrievalConfig"],n);const s=g(i,["functionCallingConfig"]);return s!=null&&y(e,["functionCallingConfig"],s4(s)),e}function i5(i,t){const e={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=g(i,["computerUse"]);n!=null&&y(e,["computerUse"],n);const s=g(i,["fileSearch"]);s!=null&&y(e,["fileSearch"],s);const a=g(i,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=g(i,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(A=>A)),y(e,["functionDeclarations"],v)}const u=g(i,["googleMaps"]);u!=null&&y(e,["googleMaps"],N4(u));const h=g(i,["googleSearch"]);h!=null&&y(e,["googleSearch"],D4(h));const d=g(i,["googleSearchRetrieval"]);d!=null&&y(e,["googleSearchRetrieval"],d);const p=g(i,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function WN(i,t){const e={},n=g(i,["retrieval"]);n!=null&&y(e,["retrieval"],n);const s=g(i,["computerUse"]);if(s!=null&&y(e,["computerUse"],s),g(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=g(i,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const l=g(i,["enterpriseWebSearch"]);l!=null&&y(e,["enterpriseWebSearch"],l);const u=g(i,["functionDeclarations"]);if(u!=null){let A=u;Array.isArray(A)&&(A=A.map(T=>o4(T))),y(e,["functionDeclarations"],A)}const h=g(i,["googleMaps"]);h!=null&&y(e,["googleMaps"],h);const d=g(i,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=g(i,["googleSearchRetrieval"]);p!=null&&y(e,["googleSearchRetrieval"],p);const v=g(i,["urlContext"]);return v!=null&&y(e,["urlContext"],v),e}function s5(i,t){const e={},n=g(i,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(i,["createTime"]);s!=null&&y(e,["createTime"],s);const a=g(i,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function o5(i,t){const e={},n=g(i,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const s=g(i,["createTime"]);s!=null&&y(e,["createTime"],s);const a=g(i,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function r5(i,t,e){const n={},s=g(i,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(i,["description"]);t!==void 0&&a!=null&&y(t,["description"],a);const l=g(i,["defaultCheckpointId"]);return t!==void 0&&l!=null&&y(t,["defaultCheckpointId"],l),n}function a5(i,t,e){const n={},s=g(i,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(i,["description"]);t!==void 0&&a!=null&&y(t,["description"],a);const l=g(i,["defaultCheckpointId"]);return t!==void 0&&l!=null&&y(t,["defaultCheckpointId"],l),n}function l5(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","name"],jt(i,s));const a=g(t,["config"]);return a!=null&&r5(a,n),n}function u5(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["config"]);return a!=null&&a5(a,n),n}function c5(i,t,e){const n={},s=g(i,["outputGcsUri"]);t!==void 0&&s!=null&&y(t,["parameters","storageUri"],s);const a=g(i,["safetyFilterLevel"]);t!==void 0&&a!=null&&y(t,["parameters","safetySetting"],a);const l=g(i,["personGeneration"]);t!==void 0&&l!=null&&y(t,["parameters","personGeneration"],l);const u=g(i,["includeRaiReason"]);t!==void 0&&u!=null&&y(t,["parameters","includeRaiReason"],u);const h=g(i,["outputMimeType"]);t!==void 0&&h!=null&&y(t,["parameters","outputOptions","mimeType"],h);const d=g(i,["outputCompressionQuality"]);t!==void 0&&d!=null&&y(t,["parameters","outputOptions","compressionQuality"],d);const p=g(i,["enhanceInputImage"]);t!==void 0&&p!=null&&y(t,["parameters","upscaleConfig","enhanceInputImage"],p);const v=g(i,["imagePreservationFactor"]);t!==void 0&&v!=null&&y(t,["parameters","upscaleConfig","imagePreservationFactor"],v);const A=g(i,["labels"]);t!==void 0&&A!=null&&y(t,["labels"],A);const T=g(i,["numberOfImages"]);t!==void 0&&T!=null&&y(t,["parameters","sampleCount"],T);const E=g(i,["mode"]);return t!==void 0&&E!=null&&y(t,["parameters","mode"],E),n}function h5(i,t,e){const n={},s=g(t,["model"]);s!=null&&y(n,["_url","model"],jt(i,s));const a=g(t,["image"]);a!=null&&y(n,["instances[0]","image"],Bs(a));const l=g(t,["upscaleFactor"]);l!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=g(t,["config"]);return u!=null&&c5(u,n),n}function d5(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>n0(l))),y(e,["generatedImages"],a)}return e}function f5(i,t){const e={},n=g(i,["uri"]);n!=null&&y(e,["uri"],n);const s=g(i,["encodedVideo"]);s!=null&&y(e,["videoBytes"],Pa(s));const a=g(i,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function p5(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&y(e,["uri"],n);const s=g(i,["bytesBase64Encoded"]);s!=null&&y(e,["videoBytes"],Pa(s));const a=g(i,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function m5(i,t){const e={},n=g(i,["image"]);n!=null&&y(e,["_self"],Bs(n));const s=g(i,["maskMode"]);return s!=null&&y(e,["maskMode"],s),e}function g5(i,t){const e={},n=g(i,["image"]);n!=null&&y(e,["image"],i0(n));const s=g(i,["referenceType"]);return s!=null&&y(e,["referenceType"],s),e}function y5(i,t){const e={},n=g(i,["image"]);n!=null&&y(e,["image"],Bs(n));const s=g(i,["referenceType"]);return s!=null&&y(e,["referenceType"],s),e}function QN(i,t){const e={},n=g(i,["uri"]);n!=null&&y(e,["uri"],n);const s=g(i,["videoBytes"]);s!=null&&y(e,["encodedVideo"],Pa(s));const a=g(i,["mimeType"]);return a!=null&&y(e,["encoding"],a),e}function ZN(i,t){const e={},n=g(i,["uri"]);n!=null&&y(e,["gcsUri"],n);const s=g(i,["videoBytes"]);s!=null&&y(e,["bytesBase64Encoded"],Pa(s));const a=g(i,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v5(i,t){const e={},n=g(i,["displayName"]);return t!==void 0&&n!=null&&y(t,["displayName"],n),e}function A5(i){const t={},e=g(i,["config"]);return e!=null&&v5(e,t),t}function _5(i,t){const e={},n=g(i,["force"]);return t!==void 0&&n!=null&&y(t,["_query","force"],n),e}function S5(i){const t={},e=g(i,["name"]);e!=null&&y(t,["_url","name"],e);const n=g(i,["config"]);return n!=null&&_5(n,t),t}function T5(i){const t={},e=g(i,["name"]);return e!=null&&y(t,["_url","name"],e),t}function E5(i,t){const e={},n=g(i,["customMetadata"]);if(t!==void 0&&n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["customMetadata"],a)}const s=g(i,["chunkingConfig"]);return t!==void 0&&s!=null&&y(t,["chunkingConfig"],s),e}function b5(i){const t={},e=g(i,["name"]);e!=null&&y(t,["name"],e);const n=g(i,["metadata"]);n!=null&&y(t,["metadata"],n);const s=g(i,["done"]);s!=null&&y(t,["done"],s);const a=g(i,["error"]);a!=null&&y(t,["error"],a);const l=g(i,["response"]);return l!=null&&y(t,["response"],w5(l)),t}function C5(i){const t={},e=g(i,["fileSearchStoreName"]);e!=null&&y(t,["_url","file_search_store_name"],e);const n=g(i,["fileName"]);n!=null&&y(t,["fileName"],n);const s=g(i,["config"]);return s!=null&&E5(s,t),t}function w5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["parent"]);n!=null&&y(t,["parent"],n);const s=g(i,["documentName"]);return s!=null&&y(t,["documentName"],s),t}function x5(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function R5(i){const t={},e=g(i,["config"]);return e!=null&&x5(e,t),t}function M5(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["fileSearchStores"],a)}return t}function jN(i,t){const e={},n=g(i,["mimeType"]);t!==void 0&&n!=null&&y(t,["mimeType"],n);const s=g(i,["displayName"]);t!==void 0&&s!=null&&y(t,["displayName"],s);const a=g(i,["customMetadata"]);if(t!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(h=>h)),y(t,["customMetadata"],u)}const l=g(i,["chunkingConfig"]);return t!==void 0&&l!=null&&y(t,["chunkingConfig"],l),e}function I5(i){const t={},e=g(i,["fileSearchStoreName"]);e!=null&&y(t,["_url","file_search_store_name"],e);const n=g(i,["config"]);return n!=null&&jN(n,t),t}function N5(i){const t={},e=g(i,["sdkHttpResponse"]);return e!=null&&y(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D5="Content-Type",P5="X-Server-Timeout",L5="User-Agent",B_="x-goog-api-client",k5="1.39.0",U5=`google-genai-sdk/${k5}`,O5="v1beta1",F5="v1beta";class V5{constructor(t){var e,n,s;this.clientOptions=Object.assign({},t),this.customBaseUrl=(e=t.httpOptions)===null||e===void 0?void 0:e.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!u?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:O5}else{if(!this.clientOptions.apiKey)throw new gf({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:F5,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&n.push(t.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,n){const s=[this.getRequestUrlInternal(e)];return n&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t,e){return!(e.baseUrl&&e.baseUrlResourceScope===k_.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);if(t.queryParams)for(const[l,u]of Object.entries(t.queryParams))s.searchParams.append(l,String(u));let a={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=t.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,e,s.toString(),t.abortSignal),this.unaryApiCall(s,a,t.httpMethod)}patchHttpOptions(t,e){const n=JSON.parse(JSON.stringify(t));for(const[s,a]of Object.entries(e))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const n=this.shouldPrependVertexProjectPath(t,e),s=this.constructUrl(t.path,e,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=t.body,a=await this.includeExtraHttpOptionsToRequestInit(a,e,s.toString(),t.abortSignal),this.streamApiCall(s,a,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,n,s){if(e&&e.timeout||s){const a=new AbortController,l=a.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const u=setTimeout(()=>a.abort(),e.timeout);u&&typeof u.unref=="function"&&u.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),t.signal=l}return e&&e.extraBody!==null&&H5(t,e.extraBody),t.headers=await this.getHeadersInternal(e,n),t}async unaryApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await dM(s),new U_(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,n){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:n})).then(async s=>(await dM(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return Os(this,arguments,function*(){var n;const s=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const u="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:p}=yield It(s.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=a.decode(p,{stream:!0});try{const E=JSON.parse(v);if("error"in E){const C=JSON.parse(JSON.stringify(E.error)),x=C.status,R=C.code,D=`got status: ${x}. ${JSON.stringify(E)}`;if(R>=400&&R<600)throw new gf({message:D,status:R})}}catch(E){if(E.name==="ApiError")throw E}l+=v;let A=-1,T=0;for(;;){A=-1,T=0;for(const x of h){const R=l.indexOf(x);R!==-1&&(A===-1||R<A)&&(A=R,T=x.length)}if(A===-1)break;const E=l.substring(0,A);l=l.substring(A+T);const C=E.trim();if(C.startsWith(u)){const x=C.substring(u.length).trim();try{const R=new Response(x,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield It(new U_(R))}catch(R){throw new Error(`exception parsing stream chunk ${x}. ${R}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const t={},e=U5+" "+this.clientOptions.userAgentExtra;return t[L5]=e,t[B_]=e,t[D5]="application/json",t}async getHeadersInternal(t,e){const n=new Headers;if(t&&t.headers){for(const[s,a]of Object.entries(t.headers))n.append(s,a);t.timeout&&t.timeout>0&&n.append(P5,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,e),n}getFileName(t){var e;let n="";return typeof t=="string"&&(n=t.replace(/[/\\]+$/,""),n=(e=n.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),n}async uploadFile(t,e){var n;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(t);s.sizeBytes=String(l.size);const u=(n=e==null?void 0:e.mimeType)!==null&&n!==void 0?n:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=u;const h={file:s},d=this.getFileName(t),p=at("upload/v1beta/files",h._url),v=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,d,h,e==null?void 0:e.httpOptions);return a.upload(t,v,this)}async uploadFileToFileSearchStore(t,e,n){var s;const a=this.clientOptions.uploader,l=await a.stat(e),u=String(l.size),h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(e),v={};n!=null&&jN(n,v);const A=await this.fetchUploadUrl(d,u,h,p,v,n==null?void 0:n.httpOptions);return a.uploadToFileSearchStore(e,A,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,n,s,a,l){var u;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=await this.request({path:t,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function dM(i){var t;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const e=i.status;let n;!((t=i.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=JSON.stringify(n);throw e>=400&&e<600?new gf({message:s,status:e}):new Error(s)}}function H5(i,t){if(!t||Object.keys(t).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof i.body=="string"&&i.body.length>0)try{const a=JSON.parse(i.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))e=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,l){const u=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const d=l[h],p=u[h];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?u[h]=n(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),u[h]=d)}return u}const s=n(e,t);i.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B5="mcp_used/unknown";let G5=!1;function tD(i){for(const t of i)if(z5(t)||typeof t=="object"&&"inputSchema"in t)return!0;return G5}function eD(i){var t;const e=(t=i[B_])!==null&&t!==void 0?t:"";i[B_]=(e+` ${B5}`).trimStart()}function z5(i){return i!==null&&typeof i=="object"&&i instanceof KT}function q5(i){return Os(this,arguments,function*(e,n=100){let s,a=0;for(;a<n;){const l=yield It(e.listTools({cursor:s}));for(const u of l.tools)yield yield It(u),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class KT{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new KT(t,e)}async initialize(){var t,e,n,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const p of this.mcpClients)try{for(var u=!0,h=(e=void 0,Fs(q5(p))),d;d=await h.next(),t=d.done,!t;u=!0){s=d.value,u=!1;const v=s;l.push(v);const A=v.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=p}}catch(v){e={error:v}}finally{try{!u&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),AG(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const n of t)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:n.name,arguments:n.args},void 0,a);e.push({functionResponse:{name:n.name,response:l.isError?{error:l}:l}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Y5(i,t,e){const n=new hG;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data),Object.assign(n,s),t(n)}class X5{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n}async connect(t){var e,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=J5(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const p=new Promise(P=>{d=P}),v=t.callbacks,A=function(){d({})},T=this.apiClient,E={onopen:A,onmessage:P=>{Y5(T,v.onmessage,P)},onerror:(e=v==null?void 0:v.onerror)!==null&&e!==void 0?e:function(P){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(P){}},C=this.webSocketFactory.create(h,K5(l),E);C.connect(),await p;const D={setup:{model:jt(this.apiClient,t.model)}};return C.send(JSON.stringify(D)),new $5(C,this.apiClient)}}class $5{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=vz(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=yz(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(yc.PLAY)}pause(){this.sendPlaybackControl(yc.PAUSE)}stop(){this.sendPlaybackControl(yc.STOP)}resetContext(){this.sendPlaybackControl(yc.RESET_CONTEXT)}close(){this.conn.close()}}function K5(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function J5(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Q5(i,t,e){const n=new cG;let s;e.data instanceof Blob?s=await e.data.text():e.data instanceof ArrayBuffer?s=new TextDecoder().decode(e.data):s=e.data;const a=JSON.parse(s);if(i.isVertexAI()){const l=Sz(a);Object.assign(n,l)}else Object.assign(n,a);t(n)}class Z5{constructor(t,e,n){this.apiClient=t,this.auth=e,this.webSocketFactory=n,this.music=new X5(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,n,s,a,l,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();t.config&&t.config.tools&&tD(t.config.tools)&&eD(v);const A=nq(v);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),et=this.apiClient.getLocation(),nt=this.apiClient.getApiKey(),mt=!!X&&!!et||!!nt;this.apiClient.getCustomBaseUrl()&&!mt?p=h:(p=`${h}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,p))}else{const X=this.apiClient.getApiKey();let et="BidiGenerateContent",nt="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),et="BidiGenerateContentConstrained",nt="access_token"),p=`${h}/ws/google.ai.generativelanguage.${d}.GenerativeService.${et}?${nt}=${X}`}let T=()=>{};const E=new Promise(X=>{T=X}),C=t.callbacks,x=function(){var X;(X=C==null?void 0:C.onopen)===null||X===void 0||X.call(C),T({})},R=this.apiClient,D={onopen:x,onmessage:X=>{Q5(R,C.onmessage,X)},onerror:(e=C==null?void 0:C.onerror)!==null&&e!==void 0?e:function(X){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(X){}},P=this.webSocketFactory.create(p,eq(A),D);P.connect(),await E;let k=jt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const X=this.apiClient.getProject(),et=this.apiClient.getLocation();X&&et&&(k=`projects/${X}/locations/${et}/`+k)}let L={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[vy.AUDIO]}:t.config.responseModalities=[vy.AUDIO]),!((a=t.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(u=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],F=[];for(const X of G)if(this.isCallableTool(X)){const et=X;F.push(await et.tool())}else F.push(X);F.length>0&&(t.config.tools=F);const $={model:k,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?L=gz(this.apiClient,$):L=mz(this.apiClient,$),delete L.config,P.send(JSON.stringify(L)),new tq(P,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const j5={turnComplete:!0};class tq{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let n=[];try{n=ds(e.turns),t.isVertexAI()||(n=n.map(s=>e0(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:n,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let n=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?n=e.functionResponses:n=[e.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!t.isVertexAI()&&!("id"in a))throw new Error(W5)}return{toolResponse:{functionResponses:n}}}sendClientContent(t){t=Object.assign(Object.assign({},j5),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:_z(t)}:e={realtimeInput:Az(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function eq(i){const t={};return i.forEach((e,n)=>{t[n]=e}),t}function nq(i){const t=new Headers;for(const[e,n]of Object.entries(i))t.append(e,n);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fM=10;function pM(i){var t,e,n;if(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const l of(e=i==null?void 0:i.tools)!==null&&e!==void 0?e:[])if(Ec(l)){s=!0;break}if(!s)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ec(i){return"callTool"in i&&typeof i.callTool=="function"}function iq(i){var t,e,n;return(n=(e=(t=i.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>Ec(s)))!==null&&n!==void 0?n:!1}function mM(i){var t;const e=[];return!((t=i==null?void 0:i.config)===null||t===void 0)&&t.tools&&i.config.tools.forEach((n,s)=>{if(Ec(n))return;const a=n;a.functionDeclarations&&a.functionDeclarations.length>0&&e.push(s)}),e}function gM(i){var t;return!(!((t=i==null?void 0:i.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sq extends Ar{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var n,s,a,l,u;const h=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!iq(e)||pM(e.config))return await this.generateContentInternal(h);const d=mM(e);if(d.length>0){const C=d.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let p,v;const A=ds(h.contents),T=(a=(s=(n=h.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:fM;let E=0;for(;E<T&&(p=await this.generateContentInternal(h),!(!p.functionCalls||p.functionCalls.length===0));){const C=p.candidates[0].content,x=[];for(const R of(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(Ec(R)){const P=await R.callTool(p.functionCalls);x.push(...P)}E++,v={role:"user",parts:x},h.contents=ds(h.contents),h.contents.push(C),h.contents.push(v),gM(h.config)&&(A.push(C),A.push(v))}return gM(h.config)&&(p.automaticFunctionCallingHistory=A),p},this.generateContentStream=async e=>{var n,s,a,l,u;if(this.maybeMoveToResponseJsonSchem(e),pM(e.config)){const v=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(v)}const h=mM(e);if(h.length>0){const v=h.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(s=(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,p=(u=(l=e==null?void 0:e.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(n=>{var s;let a;const l=[];if(n!=null&&n.generatedImages)for(const h of n.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let u;return a?u={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async e=>{var n;const l={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((n=l.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new vu(gr.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async e=>{const n={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(n.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async e=>{let n={numberOfImages:1,mode:"upscale"};e.config&&(n=Object.assign(Object.assign({},n),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async e=>{var n,s,a,l,u,h;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=e.video)===null||n===void 0)&&n.uri&&(!((s=e.video)===null||s===void 0)&&s.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((l=(a=e.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(u=e.source)===null||u===void 0?void 0:u.video)===null||h===void 0)&&h.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,n,s;const a=(e=t.config)===null||e===void 0?void 0:e.tools;if(!a)return t;const l=await Promise.all(a.map(async h=>Ec(h)?await h.tool():h)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(u.config.tools=l,t.config&&t.config.tools&&tD(t.config.tools)){const h=(s=(n=t.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},h);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),eD(d),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(t){var e,n,s;const a=new Map;for(const l of(n=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&n!==void 0?n:[])if(Ec(l)){const u=l,h=await u.tool();for(const d of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,u)}}return a}async processAfcStream(t){var e,n,s;const a=(s=(n=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:fM;let l=!1,u=0;const h=await this.initAfcToolsMap(t);return(function(d,p,v){return Os(this,arguments,function*(){for(var A,T,E,C,x,R;u<a;){l&&(u++,l=!1);const L=yield It(d.processParamsMaybeAddMcpUsage(v)),G=yield It(d.generateContentStreamInternal(L)),F=[],$=[];try{for(var D=!0,P=(T=void 0,Fs(G)),k;k=yield It(P.next()),A=k.done,!A;D=!0){C=k.value,D=!1;const X=C;if(yield yield It(X),X.candidates&&(!((x=X.candidates[0])===null||x===void 0)&&x.content)){$.push(X.candidates[0].content);for(const et of(R=X.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(u<a&&et.functionCall){if(!et.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(et.functionCall.name)){const nt=yield It(p.get(et.functionCall.name).callTool([et.functionCall]));F.push(...nt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${et.functionCall.name}`)}}}}catch(X){T={error:X}}finally{try{!D&&!A&&(E=P.return)&&(yield It(E.call(P)))}finally{if(T)throw T.error}}if(F.length>0){l=!0;const X=new Pd;X.candidates=[{content:{role:"user",parts:F}}],yield yield It(X);const et=[];et.push(...$),et.push({role:"user",parts:F});const nt=ds(v.contents).concat(et);v.contents=nt}else break}})})(this,h,t)}async generateContentInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=uM(this.apiClient,t);return u=at("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=hM(p),A=new Pd;return Object.assign(A,v),A})}else{const d=lM(this.apiClient,t);return u=at("{model}:generateContent",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=cM(p),A=new Pd;return Object.assign(A,v),A})}}async generateContentStreamInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=uM(this.apiClient,t);return u=at("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}),l.then(function(v){return Os(this,arguments,function*(){var A,T,E,C;try{for(var x=!0,R=Fs(v),D;D=yield It(R.next()),A=D.done,!A;x=!0){C=D.value,x=!1;const P=C,k=hM(yield It(P.json()),t);k.sdkHttpResponse={headers:P.headers};const L=new Pd;Object.assign(L,k),yield yield It(L)}}catch(P){T={error:P}}finally{try{!x&&!A&&(E=R.return)&&(yield It(E.call(R)))}finally{if(T)throw T.error}}})})}else{const d=lM(this.apiClient,t);return u=at("{model}:streamGenerateContent?alt=sse",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(v){return Os(this,arguments,function*(){var A,T,E,C;try{for(var x=!0,R=Fs(v),D;D=yield It(R.next()),A=D.done,!A;x=!0){C=D.value,x=!1;const P=C,k=cM(yield It(P.json()),t);k.sdkHttpResponse={headers:P.headers};const L=new Pd;Object.assign(L,k),yield yield It(L)}}catch(P){T={error:P}}finally{try{!x&&!A&&(E=R.return)&&(yield It(E.call(R)))}finally{if(T)throw T.error}}})})}}async embedContent(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=Zz(this.apiClient,t);return u=at("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=t4(p),A=new Y1;return Object.assign(A,v),A})}else{const d=Qz(this.apiClient,t);return u=at("{model}:batchEmbedContents",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=jz(p),A=new Y1;return Object.assign(A,v),A})}}async generateImagesInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=h4(this.apiClient,t);return u=at("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=f4(p),A=new X1;return Object.assign(A,v),A})}else{const d=c4(this.apiClient,t);return u=at("{model}:predict",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=d4(p),A=new X1;return Object.assign(A,v),A})}}async editImageInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=$z(this.apiClient,t);return a=at("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const d=Kz(h),p=new ZB;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=h5(this.apiClient,t);return a=at("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const d=d5(h),p=new jB;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=X4(this.apiClient,t);return a=at("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=$4(h),p=new tG;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=j4(this.apiClient,t);return a=at("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=t5(h),p=new eG;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=I4(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>H_(p))}else{const d=M4(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>V_(p))}}async listInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=V4(this.apiClient,t);return u=at("{models_url}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=B4(p),A=new $1;return Object.assign(A,v),A})}else{const d=F4(this.apiClient,t);return u=at("{models_url}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=H4(p),A=new $1;return Object.assign(A,v),A})}}async update(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=u5(this.apiClient,t);return u=at("{model}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>H_(p))}else{const d=l5(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>V_(p))}}async delete(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=zz(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=Yz(p),A=new K1;return Object.assign(A,v),A})}else{const d=Gz(this.apiClient,t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=qz(p),A=new K1;return Object.assign(A,v),A})}}async countTokens(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=Vz(this.apiClient,t);return u=at("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=Bz(p),A=new J1;return Object.assign(A,v),A})}else{const d=Fz(this.apiClient,t);return u=at("{model}:countTokens",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=Hz(p),A=new J1;return Object.assign(A,v),A})}}async computeTokens(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Nz(this.apiClient,t);return a=at("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>{const d=Dz(h),p=new nG;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=A4(this.apiClient,t);return u=at("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l.then(p=>{const v=y4(p),A=new Ay;return Object.assign(A,v),A})}else{const d=v4(this.apiClient,t);return u=at("{model}:predictLongRunning",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l.then(p=>{const v=g4(p),A=new Ay;return Object.assign(A,v),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oq extends Ar{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const e=t.operation,n=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:a}});return e._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:n});return e._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=XB(t);return u=at("{operationName}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),l}else{const d=YB(t);return u=at("{operationName}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=FB(t);return a=at("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rq(i){const t={},e=g(i,["data"]);if(e!=null&&y(t,["data"],e),g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function aq(i){const t={},e=g(i,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(a=>gq(a))),y(t,["parts"],s)}const n=g(i,["role"]);return n!=null&&y(t,["role"],n),t}function lq(i,t,e){const n={},s=g(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const a=g(t,["newSessionExpireTime"]);e!==void 0&&a!=null&&y(e,["newSessionExpireTime"],a);const l=g(t,["uses"]);e!==void 0&&l!=null&&y(e,["uses"],l);const u=g(t,["liveConnectConstraints"]);e!==void 0&&u!=null&&y(e,["bidiGenerateContentSetup"],mq(i,u));const h=g(t,["lockAdditionalFields"]);return e!==void 0&&h!=null&&y(e,["fieldMask"],h),n}function uq(i,t){const e={},n=g(t,["config"]);return n!=null&&y(e,["config"],lq(i,n,e)),e}function cq(i){const t={};if(g(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=g(i,["fileUri"]);e!=null&&y(t,["fileUri"],e);const n=g(i,["mimeType"]);return n!=null&&y(t,["mimeType"],n),t}function hq(i){const t={},e=g(i,["id"]);e!=null&&y(t,["id"],e);const n=g(i,["args"]);n!=null&&y(t,["args"],n);const s=g(i,["name"]);if(s!=null&&y(t,["name"],s),g(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(g(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function dq(i){const t={};if(g(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=g(i,["enableWidget"]);return e!=null&&y(t,["enableWidget"],e),t}function fq(i){const t={};if(g(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(g(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=g(i,["timeRangeFilter"]);return e!=null&&y(t,["timeRangeFilter"],e),t}function pq(i,t){const e={},n=g(i,["generationConfig"]);t!==void 0&&n!=null&&y(t,["setup","generationConfig"],n);const s=g(i,["responseModalities"]);t!==void 0&&s!=null&&y(t,["setup","generationConfig","responseModalities"],s);const a=g(i,["temperature"]);t!==void 0&&a!=null&&y(t,["setup","generationConfig","temperature"],a);const l=g(i,["topP"]);t!==void 0&&l!=null&&y(t,["setup","generationConfig","topP"],l);const u=g(i,["topK"]);t!==void 0&&u!=null&&y(t,["setup","generationConfig","topK"],u);const h=g(i,["maxOutputTokens"]);t!==void 0&&h!=null&&y(t,["setup","generationConfig","maxOutputTokens"],h);const d=g(i,["mediaResolution"]);t!==void 0&&d!=null&&y(t,["setup","generationConfig","mediaResolution"],d);const p=g(i,["seed"]);t!==void 0&&p!=null&&y(t,["setup","generationConfig","seed"],p);const v=g(i,["speechConfig"]);t!==void 0&&v!=null&&y(t,["setup","generationConfig","speechConfig"],$T(v));const A=g(i,["thinkingConfig"]);t!==void 0&&A!=null&&y(t,["setup","generationConfig","thinkingConfig"],A);const T=g(i,["enableAffectiveDialog"]);t!==void 0&&T!=null&&y(t,["setup","generationConfig","enableAffectiveDialog"],T);const E=g(i,["systemInstruction"]);t!==void 0&&E!=null&&y(t,["setup","systemInstruction"],aq(Fn(E)));const C=g(i,["tools"]);if(t!==void 0&&C!=null){let G=Uh(C);Array.isArray(G)&&(G=G.map(F=>vq(kh(F)))),y(t,["setup","tools"],G)}const x=g(i,["sessionResumption"]);t!==void 0&&x!=null&&y(t,["setup","sessionResumption"],yq(x));const R=g(i,["inputAudioTranscription"]);t!==void 0&&R!=null&&y(t,["setup","inputAudioTranscription"],R);const D=g(i,["outputAudioTranscription"]);t!==void 0&&D!=null&&y(t,["setup","outputAudioTranscription"],D);const P=g(i,["realtimeInputConfig"]);t!==void 0&&P!=null&&y(t,["setup","realtimeInputConfig"],P);const k=g(i,["contextWindowCompression"]);t!==void 0&&k!=null&&y(t,["setup","contextWindowCompression"],k);const L=g(i,["proactivity"]);if(t!==void 0&&L!=null&&y(t,["setup","proactivity"],L),g(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function mq(i,t){const e={},n=g(t,["model"]);n!=null&&y(e,["setup","model"],jt(i,n));const s=g(t,["config"]);return s!=null&&y(e,["config"],pq(s,e)),e}function gq(i){const t={},e=g(i,["mediaResolution"]);e!=null&&y(t,["mediaResolution"],e);const n=g(i,["codeExecutionResult"]);n!=null&&y(t,["codeExecutionResult"],n);const s=g(i,["executableCode"]);s!=null&&y(t,["executableCode"],s);const a=g(i,["fileData"]);a!=null&&y(t,["fileData"],cq(a));const l=g(i,["functionCall"]);l!=null&&y(t,["functionCall"],hq(l));const u=g(i,["functionResponse"]);u!=null&&y(t,["functionResponse"],u);const h=g(i,["inlineData"]);h!=null&&y(t,["inlineData"],rq(h));const d=g(i,["text"]);d!=null&&y(t,["text"],d);const p=g(i,["thought"]);p!=null&&y(t,["thought"],p);const v=g(i,["thoughtSignature"]);v!=null&&y(t,["thoughtSignature"],v);const A=g(i,["videoMetadata"]);return A!=null&&y(t,["videoMetadata"],A),t}function yq(i){const t={},e=g(i,["handle"]);if(e!=null&&y(t,["handle"],e),g(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function vq(i){const t={};if(g(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=g(i,["computerUse"]);e!=null&&y(t,["computerUse"],e);const n=g(i,["fileSearch"]);n!=null&&y(t,["fileSearch"],n);const s=g(i,["codeExecution"]);if(s!=null&&y(t,["codeExecution"],s),g(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=g(i,["functionDeclarations"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>v)),y(t,["functionDeclarations"],p)}const l=g(i,["googleMaps"]);l!=null&&y(t,["googleMaps"],dq(l));const u=g(i,["googleSearch"]);u!=null&&y(t,["googleSearch"],fq(u));const h=g(i,["googleSearchRetrieval"]);h!=null&&y(t,["googleSearchRetrieval"],h);const d=g(i,["urlContext"]);return d!=null&&y(t,["urlContext"],d),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aq(i){const t=[];for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const n=i[e];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${e}.${a}`);t.push(...s)}else t.push(e)}return t.join(",")}function _q(i,t){let e=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(i.bidiGenerateContentSetup=a,e=a):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const s=i.fieldMask;if(e){const a=Aq(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)a?i.fieldMask=a:delete i.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];s.length>0&&(u=s.map(d=>l.includes(d)?`generationConfig.${d}`:d));const h=[];a&&h.push(a),u.length>0&&h.push(...u),h.length>0?i.fieldMask=h.join(","):delete i.fieldMask}else delete i.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?i.fieldMask=s.join(","):delete i.fieldMask;return i}class Sq extends Ar{constructor(t){super(),this.apiClient=t}async create(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=uq(this.apiClient,t);a=at("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const h=_q(u,t.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tq(i,t){const e={},n=g(i,["force"]);return t!==void 0&&n!=null&&y(t,["_query","force"],n),e}function Eq(i){const t={},e=g(i,["name"]);e!=null&&y(t,["_url","name"],e);const n=g(i,["config"]);return n!=null&&Tq(n,t),t}function bq(i){const t={},e=g(i,["name"]);return e!=null&&y(t,["_url","name"],e),t}function Cq(i,t){const e={},n=g(i,["pageSize"]);t!==void 0&&n!=null&&y(t,["_query","pageSize"],n);const s=g(i,["pageToken"]);return t!==void 0&&s!=null&&y(t,["_query","pageToken"],s),e}function wq(i){const t={},e=g(i,["parent"]);e!=null&&y(t,["_url","parent"],e);const n=g(i,["config"]);return n!=null&&Cq(n,t),t}function xq(i){const t={},e=g(i,["sdkHttpResponse"]);e!=null&&y(t,["sdkHttpResponse"],e);const n=g(i,["nextPageToken"]);n!=null&&y(t,["nextPageToken"],n);const s=g(i,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),y(t,["documents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rq extends Ar{constructor(t){super(),this.apiClient=t,this.list=async e=>new vu(gr.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:e.parent,config:n.config}),await this.listInternal(e),e)}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bq(t);return a=at("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Eq(t);s=at("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=wq(t);return a=at("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=xq(h),p=new iG;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mq extends Ar{constructor(t,e=new Rq(t)){super(),this.apiClient=t,this.documents=e,this.list=async(n={})=>new vu(gr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=A5(t);return a=at("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=T5(t);return a=at("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(t){var e,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=S5(t);s=at("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=R5(t);return a=at("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=M5(h),p=new sG;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=I5(t);return a=at("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=N5(h),p=new oG;return Object.assign(p,d),p})}}async importFile(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=C5(t);return a=at("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),s.then(h=>{const d=b5(h),p=new GT;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nD=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return nD=i.randomUUID.bind(i),i.randomUUID();const t=new Uint8Array(1),e=i?()=>i.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};const Iq=()=>nD();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G_(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const z_=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const t=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(t.stack=i.stack),i.cause&&!t.cause&&(t.cause=i.cause),i.name&&(t.name=i.name),t}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ps extends Error{}class jn extends ps{constructor(t,e,n,s){super(`${jn.makeMessage(t,e,n)}`),this.status=t,this.headers=s,this.error=e}static makeMessage(t,e,n){const s=e!=null&&e.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,e,n,s){if(!t||!s)return new s0({message:n,cause:z_(e)});const a=e;return t===400?new sD(t,a,n,s):t===401?new oD(t,a,n,s):t===403?new rD(t,a,n,s):t===404?new aD(t,a,n,s):t===409?new lD(t,a,n,s):t===422?new uD(t,a,n,s):t===429?new cD(t,a,n,s):t>=500?new hD(t,a,n,s):new jn(t,a,n,s)}}class q_ extends jn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class s0 extends jn{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class iD extends s0{constructor({message:t}={}){super({message:t??"Request timed out."})}}class sD extends jn{}class oD extends jn{}class rD extends jn{}class aD extends jn{}class lD extends jn{}class uD extends jn{}class cD extends jn{}class hD extends jn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nq=/^[a-z][a-z0-9+.-]*:/i,Dq=i=>Nq.test(i);let Y_=i=>(Y_=Array.isArray,Y_(i));const Pq=Y_;let Lq=Pq;const yM=Lq;function kq(i){if(!i)return!0;for(const t in i)return!1;return!0}function Uq(i,t){return Object.prototype.hasOwnProperty.call(i,t)}const Oq=(i,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ps(`${i} must be an integer`);if(t<0)throw new ps(`${i} must be a positive integer`);return t},Fq=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vq=i=>new Promise(t=>setTimeout(t,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hq(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Bq=()=>{var i,t,e,n,s;const a=Hq();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oc,"X-Stainless-OS":AM(Deno.build.os),"X-Stainless-Arch":vM(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oc,"X-Stainless-OS":AM((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":vM((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=Gq();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":oc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Gq(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of i){const n=e.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,l=n[3]||0;return{browser:t,version:`${s}.${a}.${l}`}}}return null}const vM=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",AM=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Ag;const zq=()=>Ag??(Ag=Bq());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qq(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function dD(...i){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...i)}function Yq(i){let t=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return dD({start(){},async pull(e){const{done:n,value:s}=await t.next();n?e.close():e.enqueue(s)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function fD(i){if(i[Symbol.asyncIterator])return i;const t=i.getReader();return{async next(){try{const e=await t.read();return e!=null&&e.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Xq(i){var t,e;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((e=(t=i[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const n=i.getReader(),s=n.cancel();n.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $q=({headers:i,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pD=()=>{var i;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((i=t==null?void 0:t.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ZA(i,t,e){return pD(),new File(i,t??"unknown_file",e)}function Kq(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const Jq=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mD=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",Wq=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&mD(i),Qq=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function Zq(i,t,e){if(pD(),i=await i,Wq(i))return i instanceof File?i:ZA([await i.arrayBuffer()],i.name);if(Qq(i)){const s=await i.blob();return t||(t=new URL(i.url).pathname.split(/[\\/]/).pop()),ZA(await X_(s),t,e)}const n=await X_(i);if(t||(t=Kq(i)),!(e!=null&&e.type)){const s=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(e=Object.assign(Object.assign({},e),{type:s}))}return ZA(n,t,e)}async function X_(i){var t,e,n,s,a;let l=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)l.push(i);else if(mD(i))l.push(i instanceof Blob?i:await i.arrayBuffer());else if(Jq(i))try{for(var u=!0,h=Fs(i),d;d=await h.next(),t=d.done,!t;u=!0){s=d.value,u=!1;const p=s;l.push(...await X_(p))}}catch(p){e={error:p}}finally{try{!u&&!t&&(n=h.return)&&await n.call(h)}finally{if(e)throw e.error}}else{const p=(a=i==null?void 0:i.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof i}${p?`; constructor: ${p}`:""}${jq(i)}`)}return l}function jq(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gD{constructor(t){this._client=t}}gD._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _M=Object.freeze(Object.create(null)),t6=(i=yD)=>(function(e,...n){if(e.length===1)return e[0];let s=!1;const a=[],l=e.reduce((p,v,A)=>{var T,E,C;/[?#]/.test(v)&&(s=!0);const x=n[A];let R=(s?encodeURIComponent:i)(""+x);return A!==n.length&&(x==null||typeof x=="object"&&x.toString===((C=Object.getPrototypeOf((E=Object.getPrototypeOf((T=x.hasOwnProperty)!==null&&T!==void 0?T:_M))!==null&&E!==void 0?E:_M))===null||C===void 0?void 0:C.toString))&&(R=x+"",a.push({start:p.length+v.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),p+v+(A===n.length?"":R)},""),u=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(u))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((p,v)=>p.start-v.start),a.length>0){let p=0;const v=a.reduce((A,T)=>{const E=" ".repeat(T.start-p),C="^".repeat(T.length);return p=T.start+T.length,A+E+C},"");throw new ps(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${l}
${v}`)}return l}),_g=t6(yD);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vD extends gD{create(t,e){var n;const{api_version:s=this._client.apiVersion}=t,a=Sy(t,["api_version"]);if("model"in a&&"agent_config"in a)throw new ps("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ps("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(_g`/${s}/interactions`,Object.assign(Object.assign({body:a},e),{stream:(n=t.stream)!==null&&n!==void 0?n:!1}))}delete(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.delete(_g`/${s}/interactions/${t}`,n)}cancel(t,e={},n){const{api_version:s=this._client.apiVersion}=e??{};return this._client.post(_g`/${s}/interactions/${t}/cancel`,n)}get(t,e={},n){var s;const a=e??{},{api_version:l=this._client.apiVersion}=a,u=Sy(a,["api_version"]);return this._client.get(_g`/${l}/interactions/${t}`,Object.assign(Object.assign({query:u},n),{stream:(s=e==null?void 0:e.stream)!==null&&s!==void 0?s:!1}))}}vD._key=Object.freeze(["interactions"]);class AD extends vD{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e6(i){let t=0;for(const s of i)t+=s.length;const e=new Uint8Array(t);let n=0;for(const s of i)e.set(s,n),n+=s.length;return e}let Sg;function JT(i){let t;return(Sg??(t=new globalThis.TextEncoder,Sg=t.encode.bind(t)))(i)}let Tg;function SM(i){let t;return(Tg??(t=new globalThis.TextDecoder,Tg=t.decode.bind(t)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?JT(t):t;this.buffer=e6([this.buffer,e]);const n=[];let s;for(;(s=n6(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){n.push(SM(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=SM(this.buffer.subarray(0,a));n.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}o0.NEWLINE_CHARS=new Set([`
`,"\r"]);o0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function n6(i,t){for(let s=t??0;s<i.length;s++){if(i[s]===10)return{preceding:s,index:s+1,carriage:!1};if(i[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function i6(i){for(let n=0;n<i.length-1;n++){if(i[n]===10&&i[n+1]===10||i[n]===13&&i[n+1]===13)return n+2;if(i[n]===13&&i[n+1]===10&&n+3<i.length&&i[n+2]===13&&i[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ty={off:0,error:200,warn:300,info:400,debug:500},TM=(i,t,e)=>{if(i){if(Uq(Ty,i))return i;$n(e).warn(`${t} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(Ty))}`)}};function Bd(){}function Eg(i,t,e){return!t||Ty[i]>Ty[e]?Bd:t[i].bind(t)}const s6={error:Bd,warn:Bd,info:Bd,debug:Bd};let EM=new WeakMap;function $n(i){var t;const e=i.logger,n=(t=i.logLevel)!==null&&t!==void 0?t:"off";if(!e)return s6;const s=EM.get(e);if(s&&s[0]===n)return s[1];const a={error:Eg("error",e,n),warn:Eg("warn",e,n),info:Eg("info",e,n),debug:Eg("debug",e,n)};return EM.set(e,[n,a]),a}const el=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vc{constructor(t,e,n){this.iterator=t,this.controller=e,this.client=n}static fromSSEResponse(t,e,n){let s=!1;const a=n?$n(n):console;function l(){return Os(this,arguments,function*(){var h,d,p,v;if(s)throw new ps("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let A=!1;try{try{for(var T=!0,E=Fs(o6(t,e)),C;C=yield It(E.next()),h=C.done,!h;T=!0){v=C.value,T=!1;const x=v;if(!A)if(x.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield It(JSON.parse(x.data))}catch(R){throw a.error("Could not parse message into JSON:",x.data),a.error("From chunk:",x.raw),R}}}catch(x){d={error:x}}finally{try{!T&&!h&&(p=E.return)&&(yield It(p.call(E)))}finally{if(d)throw d.error}}A=!0}catch(x){if(G_(x))return yield It(void 0);throw x}finally{A||e.abort()}})}return new vc(l,e,n)}static fromReadableStream(t,e,n){let s=!1;function a(){return Os(this,arguments,function*(){var h,d,p,v;const A=new o0,T=fD(t);try{for(var E=!0,C=Fs(T),x;x=yield It(C.next()),h=x.done,!h;E=!0){v=x.value,E=!1;const R=v;for(const D of A.decode(R))yield yield It(D)}}catch(R){d={error:R}}finally{try{!E&&!h&&(p=C.return)&&(yield It(p.call(C)))}finally{if(d)throw d.error}}for(const R of A.flush())yield yield It(R)})}function l(){return Os(this,arguments,function*(){var h,d,p,v;if(s)throw new ps("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let A=!1;try{try{for(var T=!0,E=Fs(a()),C;C=yield It(E.next()),h=C.done,!h;T=!0){v=C.value,T=!1;const x=v;A||x&&(yield yield It(JSON.parse(x)))}}catch(x){d={error:x}}finally{try{!T&&!h&&(p=E.return)&&(yield It(p.call(E)))}finally{if(d)throw d.error}}A=!0}catch(x){if(G_(x))return yield It(void 0);throw x}finally{A||e.abort()}})}return new vc(l,e,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=n.next();t.push(l),e.push(l)}return a.shift()}});return[new vc(()=>s(t),this.controller,this.client),new vc(()=>s(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return dD({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:s,done:a}=await e.next();if(a)return n.close();const l=JT(JSON.stringify(s)+`
`);n.enqueue(l)}catch(s){n.error(s)}},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}}function o6(i,t){return Os(this,arguments,function*(){var n,s,a,l;if(!i.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ps("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ps("Attempted to iterate over a response with no body");const u=new a6,h=new o0,d=fD(i.body);try{for(var p=!0,v=Fs(r6(d)),A;A=yield It(v.next()),n=A.done,!n;p=!0){l=A.value,p=!1;const T=l;for(const E of h.decode(T)){const C=u.decode(E);C&&(yield yield It(C))}}}catch(T){s={error:T}}finally{try{!p&&!n&&(a=v.return)&&(yield It(a.call(v)))}finally{if(s)throw s.error}}for(const T of h.flush()){const E=u.decode(T);E&&(yield yield It(E))}})}function r6(i){return Os(this,arguments,function*(){var e,n,s,a;let l=new Uint8Array;try{for(var u=!0,h=Fs(i),d;d=yield It(h.next()),e=d.done,!e;u=!0){a=d.value,u=!1;const p=a;if(p==null)continue;const v=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?JT(p):p;let A=new Uint8Array(l.length+v.length);A.set(l),A.set(v,l.length),l=A;let T;for(;(T=i6(l))!==-1;)yield yield It(l.slice(0,T)),l=l.slice(T)}}catch(p){n={error:p}}finally{try{!u&&!e&&(s=h.return)&&(yield It(s.call(h)))}finally{if(n)throw n.error}}l.length>0&&(yield yield It(l))})}class a6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,s]=l6(t,":");return s.startsWith(" ")&&(s=s.substring(1)),e==="event"?this.event=s:e==="data"&&this.data.push(s),null}}function l6(i,t){const e=i.indexOf(t);return e!==-1?[i.substring(0,e),t,i.substring(e+t.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function u6(i,t){const{response:e,requestLogID:n,retryOfRequestLogID:s,startTime:a}=t,l=await(async()=>{var u;if(t.options.stream)return $n(i).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,i):vc.fromSSEResponse(e,t.controller,i);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const h=e.headers.get("content-type"),d=(u=h==null?void 0:h.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await e.json():await e.text()})();return $n(i).debug(`[${n}] response parsed`,el({retryOfRequestLogID:s,url:e.url,status:e.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WT extends Promise{constructor(t,e,n=u6){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=n,this.client=t}_thenUnwrap(t){return new WT(this.client,this.responsePromise,async(e,n)=>t(await this.parseResponse(e,n),n))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _D=Symbol("brand.privateNullableHeaders");function*c6(i){if(!i)return;if(_D in i){const{values:n,nulls:s}=i;yield*n.entries();for(const a of s)yield[a,null];return}let t=!1,e;i instanceof Headers?e=i.entries():yM(i)?e=i:(t=!0,e=Object.entries(i??{}));for(let n of e){const s=n[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=yM(n[1])?n[1]:[n[1]];let l=!1;for(const u of a)u!==void 0&&(t&&!l&&(l=!0,yield[s,null]),yield[s,u])}}const Ld=i=>{const t=new Headers,e=new Set;for(const n of i){const s=new Set;for(const[a,l]of c6(n)){const u=a.toLowerCase();s.has(u)||(t.delete(a),s.add(u)),l===null?(t.delete(a),e.add(u)):(t.append(a,l),e.delete(u))}}return{[_D]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jA=i=>{var t,e,n,s,a,l;if(typeof globalThis.process<"u")return(n=(e=(t=DB)===null||t===void 0?void 0:t[i])===null||e===void 0?void 0:e.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,i))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var SD;class r0{constructor(t){var e,n,s,a,l,u,h,{baseURL:d=jA("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(e=jA("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:v="v1beta"}=t,A=Sy(t,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:p,apiVersion:v},A),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(n=T.timeout)!==null&&n!==void 0?n:r0.DEFAULT_TIMEOUT,this.logger=(s=T.logger)!==null&&s!==void 0?s:console;const E="warn";this.logLevel=E,this.logLevel=(l=(a=TM(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:TM(jA("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:E,this.fetchOptions=T.fetchOptions,this.maxRetries=(u=T.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(h=T.fetch)!==null&&h!==void 0?h:qq(),this.encoder=$q,this._options=T,this.apiKey=p,this.apiVersion=v,this.clientAdapter=T.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=Ld([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return Ld([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ld([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,n])=>typeof n<"u").map(([e,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(e)}=`;throw new ps(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${oc}`}defaultIdempotencyKey(){return`stainless-node-retry-${Iq()}`}makeStatusError(t,e,n,s){return jn.generate(t,e,n,s)}buildURL(t,e,n){const s=!this.baseURLOverridden()&&n||this.baseURL,a=Dq(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return kq(l)||(e=Object.assign(Object.assign({},l),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(a.search=this.stringifyQuery(e)),a.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(s=>Object.assign({method:t,path:e},s)))}request(t,e=null){return new WT(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){var s,a,l;const u=await t,h=(s=u.maxRetries)!==null&&s!==void 0?s:this.maxRetries;e==null&&(e=h),await this.prepareOptions(u);const{req:d,url:p,timeout:v}=await this.buildRequest(u,{retryCount:h-e});await this.prepareRequest(d,{url:p,options:u});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=n===void 0?"":`, retryOf: ${n}`,E=Date.now();if($n(this).debug(`[${A}] sending request`,el({retryOfRequestLogID:n,method:u.method,url:p,options:u,headers:d.headers})),!((a=u.signal)===null||a===void 0)&&a.aborted)throw new q_;const C=new AbortController,x=await this.fetchWithTimeout(p,d,v,C).catch(z_),R=Date.now();if(x instanceof globalThis.Error){const P=`retrying, ${e} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new q_;const k=G_(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(e)return $n(this).info(`[${A}] connection ${k?"timed out":"failed"} - ${P}`),$n(this).debug(`[${A}] connection ${k?"timed out":"failed"} (${P})`,el({retryOfRequestLogID:n,url:p,durationMs:R-E,message:x.message})),this.retryRequest(u,e,n??A);throw $n(this).info(`[${A}] connection ${k?"timed out":"failed"} - error; no more retries left`),$n(this).debug(`[${A}] connection ${k?"timed out":"failed"} (error; no more retries left)`,el({retryOfRequestLogID:n,url:p,durationMs:R-E,message:x.message})),k?new iD:new s0({cause:x})}const D=`[${A}${T}] ${d.method} ${p} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${R-E}ms`;if(!x.ok){const P=await this.shouldRetry(x);if(e&&P){const X=`retrying, ${e} attempts remaining`;return await Xq(x.body),$n(this).info(`${D} - ${X}`),$n(this).debug(`[${A}] response error (${X})`,el({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:R-E})),this.retryRequest(u,e,n??A,x.headers)}const k=P?"error; no more retries left":"error; not retryable";$n(this).info(`${D} - ${k}`);const L=await x.text().catch(X=>z_(X).message),G=Fq(L),F=G?void 0:L;throw $n(this).debug(`[${A}] response error (${k})`,el({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,message:F,durationMs:Date.now()-E})),this.makeStatusError(x.status,G,F,x.headers)}return $n(this).info(D),$n(this).debug(`[${A}] response start`,el({retryOfRequestLogID:n,url:x.url,status:x.status,headers:x.headers,durationMs:R-E})),{response:x,options:u,controller:C,requestLogID:A,retryOfRequestLogID:n,startTime:E}}async fetchWithTimeout(t,e,n,s){const a=e||{},{signal:l,method:u}=a,h=Sy(a,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const d=setTimeout(()=>s.abort(),n),p=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),h);u&&(v.method=u.toUpperCase());try{return await this.fetch.call(void 0,t,v)}finally{clearTimeout(d)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,s){var a;let l;const u=s==null?void 0:s.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(l=d)}const h=s==null?void 0:s.get("retry-after");if(h&&!l){const d=parseFloat(h);Number.isNaN(d)?l=Date.parse(h)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(a=t.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(e,d)}return await Vq(l),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const a=e-t,l=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(t,{retryCount:e=0}={}){var n,s,a;const l=Object.assign({},t),{method:u,path:h,query:d,defaultBaseURL:p}=l,v=this.buildURL(h,d,p);"timeout"in l&&Oq("timeout",l.timeout),l.timeout=(n=l.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:A,body:T}=this.buildBody({options:l}),E=await this.buildHeaders({options:t,method:u,bodyHeaders:A,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:E},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:v,timeout:l.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:s}){let a={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let u=Ld([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),zq()),this._options.defaultHeaders,n,t.headers,l]);return this.validateHeaders(u),u.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Ld([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:Yq(t)}:this.encoder({body:t,headers:n})}}r0.DEFAULT_TIMEOUT=6e4;class fn extends r0{constructor(){super(...arguments),this.interactions=new AD(this)}}SD=fn;fn.GeminiNextGenAPIClient=SD;fn.GeminiNextGenAPIClientError=ps;fn.APIError=jn;fn.APIConnectionError=s0;fn.APIConnectionTimeoutError=iD;fn.APIUserAbortError=q_;fn.NotFoundError=aD;fn.ConflictError=lD;fn.RateLimitError=cD;fn.BadRequestError=sD;fn.AuthenticationError=oD;fn.InternalServerError=hD;fn.PermissionDeniedError=rD;fn.UnprocessableEntityError=uD;fn.toFile=Zq;fn.Interactions=AD;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h6(i,t){const e={},n=g(i,["name"]);return n!=null&&y(e,["_url","name"],n),e}function d6(i,t){const e={},n=g(i,["name"]);return n!=null&&y(e,["_url","name"],n),e}function f6(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function p6(i,t){const e={},n=g(i,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function m6(i,t,e){const n={};if(g(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=g(i,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&y(t,["displayName"],s),g(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=g(i,["epochCount"]);t!==void 0&&a!=null&&y(t,["tuningTask","hyperparameters","epochCount"],a);const l=g(i,["learningRateMultiplier"]);if(l!=null&&y(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),g(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(g(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(g(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(g(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(g(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=g(i,["batchSize"]);t!==void 0&&u!=null&&y(t,["tuningTask","hyperparameters","batchSize"],u);const h=g(i,["learningRate"]);if(t!==void 0&&h!=null&&y(t,["tuningTask","hyperparameters","learningRate"],h),g(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(g(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(g(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(g(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(g(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(g(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return n}function g6(i,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const L=g(i,["validationDataset"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec"],t_(L))}else if(s==="PREFERENCE_TUNING"){const L=g(i,["validationDataset"]);t!==void 0&&L!=null&&y(t,["preferenceOptimizationSpec"],t_(L))}else if(s==="DISTILLATION"){const L=g(i,["validationDataset"]);t!==void 0&&L!=null&&y(t,["distillationSpec"],t_(L))}const a=g(i,["tunedModelDisplayName"]);t!==void 0&&a!=null&&y(t,["tunedModelDisplayName"],a);const l=g(i,["description"]);t!==void 0&&l!=null&&y(t,["description"],l);let u=g(e,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const L=g(i,["epochCount"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","hyperParameters","epochCount"],L)}else if(u==="PREFERENCE_TUNING"){const L=g(i,["epochCount"]);t!==void 0&&L!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],L)}else if(u==="DISTILLATION"){const L=g(i,["epochCount"]);t!==void 0&&L!=null&&y(t,["distillationSpec","hyperParameters","epochCount"],L)}let h=g(e,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const L=g(i,["learningRateMultiplier"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],L)}else if(h==="PREFERENCE_TUNING"){const L=g(i,["learningRateMultiplier"]);t!==void 0&&L!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],L)}else if(h==="DISTILLATION"){const L=g(i,["learningRateMultiplier"]);t!==void 0&&L!=null&&y(t,["distillationSpec","hyperParameters","learningRateMultiplier"],L)}let d=g(e,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const L=g(i,["exportLastCheckpointOnly"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","exportLastCheckpointOnly"],L)}else if(d==="PREFERENCE_TUNING"){const L=g(i,["exportLastCheckpointOnly"]);t!==void 0&&L!=null&&y(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],L)}else if(d==="DISTILLATION"){const L=g(i,["exportLastCheckpointOnly"]);t!==void 0&&L!=null&&y(t,["distillationSpec","exportLastCheckpointOnly"],L)}let p=g(e,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const L=g(i,["adapterSize"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","hyperParameters","adapterSize"],L)}else if(p==="PREFERENCE_TUNING"){const L=g(i,["adapterSize"]);t!==void 0&&L!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],L)}else if(p==="DISTILLATION"){const L=g(i,["adapterSize"]);t!==void 0&&L!=null&&y(t,["distillationSpec","hyperParameters","adapterSize"],L)}let v=g(e,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const L=g(i,["tuningMode"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","tuningMode"],L)}const A=g(i,["customBaseModel"]);t!==void 0&&A!=null&&y(t,["customBaseModel"],A);let T=g(e,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const L=g(i,["batchSize"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","hyperParameters","batchSize"],L)}let E=g(e,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const L=g(i,["learningRate"]);t!==void 0&&L!=null&&y(t,["supervisedTuningSpec","hyperParameters","learningRate"],L)}const C=g(i,["labels"]);t!==void 0&&C!=null&&y(t,["labels"],C);const x=g(i,["beta"]);t!==void 0&&x!=null&&y(t,["preferenceOptimizationSpec","hyperParameters","beta"],x);const R=g(i,["baseTeacherModel"]);t!==void 0&&R!=null&&y(t,["distillationSpec","baseTeacherModel"],R);const D=g(i,["tunedTeacherModelSource"]);t!==void 0&&D!=null&&y(t,["distillationSpec","tunedTeacherModelSource"],D);const P=g(i,["sftLossWeightMultiplier"]);t!==void 0&&P!=null&&y(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],P);const k=g(i,["outputUri"]);return t!==void 0&&k!=null&&y(t,["outputUri"],k),n}function y6(i,t){const e={},n=g(i,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(i,["preTunedModel"]);s!=null&&y(e,["preTunedModel"],s);const a=g(i,["trainingDataset"]);a!=null&&R6(a);const l=g(i,["config"]);return l!=null&&m6(l,e),e}function v6(i,t){const e={},n=g(i,["baseModel"]);n!=null&&y(e,["baseModel"],n);const s=g(i,["preTunedModel"]);s!=null&&y(e,["preTunedModel"],s);const a=g(i,["trainingDataset"]);a!=null&&M6(a,e,t);const l=g(i,["config"]);return l!=null&&g6(l,e,t),e}function A6(i,t){const e={},n=g(i,["name"]);return n!=null&&y(e,["_url","name"],n),e}function _6(i,t){const e={},n=g(i,["name"]);return n!=null&&y(e,["_url","name"],n),e}function S6(i,t,e){const n={},s=g(i,["pageSize"]);t!==void 0&&s!=null&&y(t,["_query","pageSize"],s);const a=g(i,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const l=g(i,["filter"]);return t!==void 0&&l!=null&&y(t,["_query","filter"],l),n}function T6(i,t,e){const n={},s=g(i,["pageSize"]);t!==void 0&&s!=null&&y(t,["_query","pageSize"],s);const a=g(i,["pageToken"]);t!==void 0&&a!=null&&y(t,["_query","pageToken"],a);const l=g(i,["filter"]);return t!==void 0&&l!=null&&y(t,["_query","filter"],l),n}function E6(i,t){const e={},n=g(i,["config"]);return n!=null&&S6(n,e),e}function b6(i,t){const e={},n=g(i,["config"]);return n!=null&&T6(n,e),e}function C6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(i,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>TD(u))),y(e,["tuningJobs"],l)}return e}function w6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["nextPageToken"]);s!=null&&y(e,["nextPageToken"],s);const a=g(i,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(u=>$_(u))),y(e,["tuningJobs"],l)}return e}function x6(i,t){const e={},n=g(i,["name"]);n!=null&&y(e,["model"],n);const s=g(i,["name"]);return s!=null&&y(e,["endpoint"],s),e}function R6(i,t){const e={};if(g(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(g(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=g(i,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),y(e,["examples","examples"],s)}return e}function M6(i,t,e){const n={};let s=g(e,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=g(i,["gcsUri"]);t!==void 0&&l!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=g(i,["gcsUri"]);t!==void 0&&l!=null&&y(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(s==="DISTILLATION"){const l=g(i,["gcsUri"]);t!==void 0&&l!=null&&y(t,["distillationSpec","promptDatasetUri"],l)}let a=g(e,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=g(i,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=g(i,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(a==="DISTILLATION"){const l=g(i,["vertexDatasetResource"]);t!==void 0&&l!=null&&y(t,["distillationSpec","promptDatasetUri"],l)}if(g(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function TD(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&y(e,["name"],s);const a=g(i,["state"]);a!=null&&y(e,["state"],FN(a));const l=g(i,["createTime"]);l!=null&&y(e,["createTime"],l);const u=g(i,["tuningTask","startTime"]);u!=null&&y(e,["startTime"],u);const h=g(i,["tuningTask","completeTime"]);h!=null&&y(e,["endTime"],h);const d=g(i,["updateTime"]);d!=null&&y(e,["updateTime"],d);const p=g(i,["description"]);p!=null&&y(e,["description"],p);const v=g(i,["baseModel"]);v!=null&&y(e,["baseModel"],v);const A=g(i,["_self"]);return A!=null&&y(e,["tunedModel"],x6(A)),e}function $_(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&y(e,["name"],s);const a=g(i,["state"]);a!=null&&y(e,["state"],FN(a));const l=g(i,["createTime"]);l!=null&&y(e,["createTime"],l);const u=g(i,["startTime"]);u!=null&&y(e,["startTime"],u);const h=g(i,["endTime"]);h!=null&&y(e,["endTime"],h);const d=g(i,["updateTime"]);d!=null&&y(e,["updateTime"],d);const p=g(i,["error"]);p!=null&&y(e,["error"],p);const v=g(i,["description"]);v!=null&&y(e,["description"],v);const A=g(i,["baseModel"]);A!=null&&y(e,["baseModel"],A);const T=g(i,["tunedModel"]);T!=null&&y(e,["tunedModel"],T);const E=g(i,["preTunedModel"]);E!=null&&y(e,["preTunedModel"],E);const C=g(i,["supervisedTuningSpec"]);C!=null&&y(e,["supervisedTuningSpec"],C);const x=g(i,["preferenceOptimizationSpec"]);x!=null&&y(e,["preferenceOptimizationSpec"],x);const R=g(i,["distillationSpec"]);R!=null&&y(e,["distillationSpec"],R);const D=g(i,["tuningDataStats"]);D!=null&&y(e,["tuningDataStats"],D);const P=g(i,["encryptionSpec"]);P!=null&&y(e,["encryptionSpec"],P);const k=g(i,["partnerModelTuningSpec"]);k!=null&&y(e,["partnerModelTuningSpec"],k);const L=g(i,["customBaseModel"]);L!=null&&y(e,["customBaseModel"],L);const G=g(i,["experiment"]);G!=null&&y(e,["experiment"],G);const F=g(i,["labels"]);F!=null&&y(e,["labels"],F);const $=g(i,["outputUri"]);$!=null&&y(e,["outputUri"],$);const X=g(i,["pipelineJob"]);X!=null&&y(e,["pipelineJob"],X);const et=g(i,["serviceAccount"]);et!=null&&y(e,["serviceAccount"],et);const nt=g(i,["tunedModelDisplayName"]);nt!=null&&y(e,["tunedModelDisplayName"],nt);const mt=g(i,["veoTuningSpec"]);return mt!=null&&y(e,["veoTuningSpec"],mt),e}function I6(i,t){const e={},n=g(i,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const s=g(i,["name"]);s!=null&&y(e,["name"],s);const a=g(i,["metadata"]);a!=null&&y(e,["metadata"],a);const l=g(i,["done"]);l!=null&&y(e,["done"],l);const u=g(i,["error"]);return u!=null&&y(e,["error"],u),e}function t_(i,t){const e={},n=g(i,["gcsUri"]);n!=null&&y(e,["validationDatasetUri"],n);const s=g(i,["vertexDatasetResource"]);return s!=null&&y(e,["validationDatasetUri"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N6 extends Ar{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new vu(gr.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var n;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const s={tunedModelName:e.baseModel};!((n=e.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=e.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},e),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},e);return await this.tuneInternal(s)}else{const s=Object.assign({},e),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:L_.JOB_STATE_QUEUED}}}}async getInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=_6(t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>$_(p))}else{const d=A6(t);return u=at("{name}",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>TD(p))}}async listInternal(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=b6(t);return u=at("tuningJobs",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=w6(p),A=new W1;return Object.assign(A,v),A})}else{const d=E6(t);return u=at("tunedModels",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=C6(p),A=new W1;return Object.assign(A,v),A})}}async cancel(t){var e,n,s,a;let l,u="",h={};if(this.apiClient.isVertexAI()){const d=d6(t);return u=at("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=p6(p),A=new Q1;return Object.assign(A,v),A})}else{const d=h6(t);return u=at("{name}:cancel",d._url),h=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=t.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(v=>{const A=v;return A.sdkHttpResponse={headers:p.headers},A})),l.then(p=>{const v=f6(p),A=new Q1;return Object.assign(A,v),A})}}async tuneInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=v6(t,t);return a=at("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>$_(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,n;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=y6(t);return a=at("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:h.headers},p})),s.then(h=>I6(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const P6=1024*1024*8,L6=3,k6=1e3,U6=2,Ey="x-goog-upload-status";async function O6(i,t,e){var n;const s=await ED(i,t,e),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Ey])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function F6(i,t,e){var n;const s=await ED(i,t,e),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[Ey])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=DN(a),u=new zT;return Object.assign(u,l),u}async function ED(i,t,e){var n,s;let a=0,l=0,u=new U_(new Response),h="upload";for(a=i.size;l<a;){const d=Math.min(P6,a-l),p=i.slice(l,l+d);l+d>=a&&(h+=", finalize");let v=0,A=k6;for(;v<L6&&(u=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[Ey]));)v++,await H6(A),A=A*U6;if(l+=d,((s=u==null?void 0:u.headers)===null||s===void 0?void 0:s[Ey])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function V6(i){return{size:i.size,type:i.type}}function H6(i){return new Promise(t=>setTimeout(t,i))}class B6{async upload(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await O6(t,e,n)}async uploadToFileSearchStore(t,e,n){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await F6(t,e,n)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await V6(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G6{create(t,e,n){return new z6(t,e,n)}}class z6{constructor(t,e,n){this.url=t,this.headers=e,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bM="x-goog-api-key";class q6{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(bM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(bM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y6="gl-node/";class X6{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new fn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const n=UB(t.httpOptions,t.vertexai,void 0,void 0);n&&(t.httpOptions?t.httpOptions.baseUrl=n:t.httpOptions={baseUrl:n}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new q6(this.apiKey);this.apiClient=new V5({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Y6+"web",uploader:new B6,downloader:new D6}),this.models=new sq(this.apiClient),this.live=new Z5(this.apiClient,s,new G6),this.batches=new d3(this.apiClient),this.chats=new $3(this.models,this.apiClient),this.caches=new q3(this.apiClient),this.files=new oz(this.apiClient),this.operations=new oq(this.apiClient),this.authTokens=new Sq(this.apiClient),this.tunings=new N6(this.apiClient),this.fileSearchStores=new Mq(this.apiClient)}}var uf={};uf.d=(i,t)=>{for(var e in t)uf.o(t,e)&&!uf.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};uf.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Mt=globalThis.pdfjsLib={};uf.d(Mt,{AbortException:()=>Ma,AnnotationEditorLayer:()=>nT,AnnotationEditorParamsType:()=>$t,AnnotationEditorType:()=>Ut,AnnotationEditorUIManager:()=>mu,AnnotationLayer:()=>BY,AnnotationMode:()=>Kr,ColorPicker:()=>My,DOMSVGFactory:()=>oE,DrawLayer:()=>oT,FeatureTest:()=>Wn,GlobalWorkerOptions:()=>hr,ImageKind:()=>Lg,InvalidPDFException:()=>J_,MissingPDFException:()=>yf,OPS:()=>Ts,OutputScale:()=>Q_,PDFDataRangeTransport:()=>CP,PDFDateString:()=>eE,PDFWorker:()=>Cc,PasswordResponses:()=>W6,PermissionFlag:()=>J6,PixelsPerInch:()=>Ia,RenderingCancelledException:()=>jT,TextLayer:()=>vf,TouchManager:()=>xy,UnexpectedResponseException:()=>by,Util:()=>vt,VerbosityLevel:()=>a0,XfaLayer:()=>xP,build:()=>SY,createValidAbsoluteUrl:()=>t8,fetchData:()=>h0,getDocument:()=>dY,getFilenameFromUrl:()=>u8,getPdfFilenameFromUrl:()=>c8,getXfaPageViewport:()=>h8,isDataScheme:()=>d0,isPdfFile:()=>tE,noContextMenu:()=>Vs,normalizeUnicode:()=>r8,setLayerDimensions:()=>pu,shadow:()=>Bt,stopEvent:()=>Hi,version:()=>_Y});const Un=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),bD=[1,0,0,1,0,0],K_=[.001,0,0,.001,0,0],$6=1e7,e_=1.35,Fi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Kr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},K6="pdfjs_internal_editor_",Ut={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},$t={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},J6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Lg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ze={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},kd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},a0={ERRORS:0,WARNINGS:1,INFOS:5},Ts={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},W6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let l0=a0.WARNINGS;function Q6(i){Number.isInteger(i)&&(l0=i)}function Z6(){return l0}function u0(i){l0>=a0.INFOS&&console.log(`Info: ${i}`)}function Ot(i){l0>=a0.WARNINGS&&console.log(`Warning: ${i}`)}function fe(i){throw new Error(i)}function $e(i,t){i||fe(t)}function j6(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function t8(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=o8(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(j6(n))return n}catch{}return null}function Bt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const La=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class CM extends La{constructor(t,e){super(t,"PasswordException"),this.code=e}}class n_ extends La{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class J_ extends La{constructor(t){super(t,"InvalidPDFException")}}class yf extends La{constructor(t){super(t,"MissingPDFException")}}class by extends La{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class e8 extends La{constructor(t){super(t,"FormatError")}}class Ma extends La{constructor(t){super(t,"AbortException")}}function CD(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&fe("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const a=Math.min(s+e,t),l=i.subarray(s,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function c0(i){typeof i!="string"&&fe("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function n8(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function QT(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function i8(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function s8(){try{return new Function(""),!0}catch{return!1}}class Wn{static get isLittleEndian(){return Bt(this,"isLittleEndian",i8())}static get isEvalSupported(){return Bt(this,"isEvalSupported",s8())}static get isOffscreenCanvasSupported(){return Bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Bt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Bt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Bt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const i_=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var fr,kg,W_;class vt{static makeHexColor(t,e,n){return`#${i_[t]}${i_[e]}${i_[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,a]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),l=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],a[0],l[0]),Math.min(n[1],s[1],a[1],l[1]),Math.max(n[0],s[0],a[0],l[0]),Math.max(n[1],s[1],a[1],l[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],l=t[2]*e[1]+t[3]*e[3],u=(n+l)/2,h=Math.sqrt((n+l)**2-4*(n*l-a*s))/2,d=u+h||1,p=u-h||1;return[Math.sqrt(d),Math.sqrt(p)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,s,l]}static bezierBoundingBox(t,e,n,s,a,l,u,h,d){return d?(d[0]=Math.min(d[0],t,u),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,u),d[3]=Math.max(d[3],e,h)):d=[Math.min(t,u),Math.min(e,h),Math.max(t,u),Math.max(e,h)],I(this,fr,W_).call(this,t,n,a,u,e,s,l,h,3*(-t+3*(n-a)+u),6*(t-2*n+a),3*(n-t),d),I(this,fr,W_).call(this,t,n,a,u,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),d),d}}fr=new WeakSet,kg=function(t,e,n,s,a,l,u,h,d,p){if(d<=0||d>=1)return;const v=1-d,A=d*d,T=A*d,E=v*(v*(v*t+3*d*e)+3*A*n)+T*s,C=v*(v*(v*a+3*d*l)+3*A*u)+T*h;p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],C),p[2]=Math.max(p[2],E),p[3]=Math.max(p[3],C)},W_=function(t,e,n,s,a,l,u,h,d,p,v,A){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&I(this,fr,kg).call(this,t,e,n,s,a,l,u,h,-v/p,A);return}const T=p**2-4*v*d;if(T<0)return;const E=Math.sqrt(T),C=2*d;I(this,fr,kg).call(this,t,e,n,s,a,l,u,h,(-p+E)/C,A),I(this,fr,kg).call(this,t,e,n,s,a,l,u,h,(-p-E)/C,A)},M(vt,fr);function o8(i){return decodeURIComponent(escape(i))}let s_=null,wM=null;function r8(i){return s_||(s_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,wM=new Map([["","t"]])),i.replaceAll(s_,(t,e,n)=>e?e.normalize("NFKC"):wM.get(n))}function a8(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),CD(i)}const ZT="pdfjs_internal_id_";function l8(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(CD(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});const ko="http://www.w3.org/2000/svg",ol=class ol{};Ct(ol,"CSS",96),Ct(ol,"PDF",72),Ct(ol,"PDF_TO_CSS_UNITS",ol.CSS/ol.PDF);let Ia=ol;async function h0(i,t="text"){if(Gd(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Jp{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:a=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,v,A,T;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,v=0,A=0,T=1;break;case 90:p=0,v=1,A=1,T=0;break;case 270:p=0,v=-1,A=-1,T=0;break;case 0:p=1,v=0,A=0,T=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(A=-A,T=-T);let E,C,x,R;p===0?(E=Math.abs(d-t[1])*n+a,C=Math.abs(h-t[0])*n+l,x=(t[3]-t[1])*n,R=(t[2]-t[0])*n):(E=Math.abs(h-t[0])*n+a,C=Math.abs(d-t[1])*n+l,x=(t[2]-t[0])*n,R=(t[3]-t[1])*n),this.transform=[p*n,v*n,A*n,T*n,E-p*n*h-A*n*d,C-v*n*h-T*n*d],this.width=x,this.height=R}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(s=>s*t);return Bt(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new Jp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(t,e){return vt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=vt.applyTransform([t[0],t[1]],this.transform),n=vt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return vt.applyInverseTransform([t,e],this.transform)}}class jT extends La{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function d0(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function tE(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function u8(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function c8(i,t="document.pdf"){if(typeof i!="string")return t;if(d0(i))return Ot('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0],a.includes("%")))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class xM{constructor(){Ct(this,"started",Object.create(null));Ct(this,"times",[])}time(t){t in this.started&&Ot(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ot(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-s}ms
`);return t.join("")}}function Gd(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Vs(i){i.preventDefault()}function Hi(i){i.preventDefault(),i.stopPropagation()}var _f;class eE{static toDateObject(t){if(!t||typeof t!="string")return null;m(this,_f)||w(this,_f,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=m(this,_f).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,d==="-"?(l+=p,u+=v):d==="+"&&(l-=p,u-=v),new Date(Date.UTC(n,s,a,l,u,h))}}_f=new WeakMap,M(eE,_f);function h8(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new Jp({viewBox:a,userUnit:1,scale:t,rotation:e})}function nE(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ot(`Not a valid color format: "${i}"`),[0,0,0])}function d8(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,nE(n))}t.remove()}function be(i){const{a:t,b:e,c:n,d:s,e:a,f:l}=i.getTransform();return[t,e,n,s,a,l]}function Xs(i){const{a:t,b:e,c:n,d:s,e:a,f:l}=i.getTransform().invertSelf();return[t,e,n,s,a,l]}function pu(i,t,e=!1,n=!0){if(t instanceof Jp){const{pageWidth:s,pageHeight:a}=t.rawDims,{style:l}=i,u=Wn.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,d=`var(--scale-factor) * ${a}px`,p=u?`round(down, ${h}, var(--scale-round-x, 1px))`:`calc(${h})`,v=u?`round(down, ${d}, var(--scale-round-y, 1px))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=p,l.height=v):(l.width=v,l.height=p)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Q_{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Jr,ul,Es,cl,Sf,Tf,Dy,wD,Qn,xD,RD,Ug,MD,j_;const Fo=class Fo{constructor(t){M(this,Qn);M(this,Jr,null);M(this,ul,null);M(this,Es);M(this,cl,null);M(this,Sf,null);w(this,Es,t),m(Fo,Tf)||w(Fo,Tf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=w(this,Jr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=m(this,Es)._uiManager._signal;t.addEventListener("contextmenu",Vs,{signal:e}),t.addEventListener("pointerdown",I(Fo,Dy,wD),{signal:e});const n=w(this,cl,document.createElement("div"));n.className="buttons",t.append(n);const s=m(this,Es).toolbarPosition;if(s){const{style:a}=t,l=m(this,Es)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return I(this,Qn,MD).call(this),t}get div(){return m(this,Jr)}hide(){var t;m(this,Jr).classList.add("hidden"),(t=m(this,ul))==null||t.hideDropdown()}show(){var t;m(this,Jr).classList.remove("hidden"),(t=m(this,Sf))==null||t.shown()}async addAltText(t){const e=await t.render();I(this,Qn,Ug).call(this,e),m(this,cl).prepend(e,m(this,Qn,j_)),w(this,Sf,t)}addColorPicker(t){w(this,ul,t);const e=t.renderButton();I(this,Qn,Ug).call(this,e),m(this,cl).prepend(e,m(this,Qn,j_))}remove(){var t;m(this,Jr).remove(),(t=m(this,ul))==null||t.destroy(),w(this,ul,null)}};Jr=new WeakMap,ul=new WeakMap,Es=new WeakMap,cl=new WeakMap,Sf=new WeakMap,Tf=new WeakMap,Dy=new WeakSet,wD=function(t){t.stopPropagation()},Qn=new WeakSet,xD=function(t){m(this,Es)._focusEventsAllowed=!1,Hi(t)},RD=function(t){m(this,Es)._focusEventsAllowed=!0,Hi(t)},Ug=function(t){const e=m(this,Es)._uiManager._signal;t.addEventListener("focusin",I(this,Qn,xD).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",I(this,Qn,RD).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Vs,{signal:e})},MD=function(){const{editorType:t,_uiManager:e}=m(this,Es),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",m(Fo,Tf)[t]),I(this,Qn,Ug).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),m(this,cl).append(n)},j_=function(){const t=document.createElement("div");return t.className="divider",t},M(Fo,Dy),M(Fo,Tf,null);let Z_=Fo;var Ef,hl,dl,Na,ID,ND,DD;class f8{constructor(t){M(this,Na);M(this,Ef,null);M(this,hl,null);M(this,dl);w(this,dl,t)}show(t,e,n){const[s,a]=I(this,Na,ND).call(this,e,n),{style:l}=m(this,hl)||w(this,hl,I(this,Na,ID).call(this));t.append(m(this,hl)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,hl).remove()}}Ef=new WeakMap,hl=new WeakMap,dl=new WeakMap,Na=new WeakSet,ID=function(){const t=w(this,hl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Vs,{signal:m(this,dl)._signal});const e=w(this,Ef,document.createElement("div"));return e.className="buttons",t.append(e),I(this,Na,DD).call(this),t},ND=function(t,e){let n=0,s=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const u=a.x+(e?a.width:0);if(l>n){s=u,n=l;continue}e?u>s&&(s=u):u<s&&(s=u)}return[e?1-s:s,n]},DD=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=m(this,dl)._signal;t.addEventListener("contextmenu",Vs,{signal:n}),t.addEventListener("click",()=>{m(this,dl).highlightSelection("floating_button")},{signal:n}),m(this,Ef).append(t)};function Cy(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var Py;class p8{constructor(){M(this,Py,0)}get id(){return`${K6}${Bn(this,Py)._++}`}}Py=new WeakMap;var wc,bf,In,xc,Og;const aE=class aE{constructor(){M(this,xc);M(this,wc,a8());M(this,bf,0);M(this,In,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Bt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:a}=t;return I(this,xc,Og).call(this,`${e}_${n}_${s}_${a}`,t)}async getFromUrl(t){return I(this,xc,Og).call(this,t,t)}async getFromBlob(t,e){const n=await e;return I(this,xc,Og).call(this,t,n)}async getFromId(t){m(this,In)||w(this,In,new Map);const e=m(this,In).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){m(this,In)||w(this,In,new Map);let n=m(this,In).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${m(this,wc)}_${Bn(this,bf)._++}`,refCounter:1,isSvg:!1},m(this,In).set(t,n),m(this,In).set(n.id,n),n}getSvgUrl(t){const e=m(this,In).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;m(this,In)||w(this,In,new Map);const e=m(this,In).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${m(this,wc)}_`)}};wc=new WeakMap,bf=new WeakMap,In=new WeakMap,xc=new WeakSet,Og=async function(t,e){m(this,In)||w(this,In,new Map);let n=m(this,In).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,wc)}_${Bn(this,bf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await h0(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const a=aE._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((d,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,d()},l.onload=async()=>{const v=n.svgUrl=l.result;u.src=await a?`${v}#svgView(preserveAspectRatio(none))`:v},u.onerror=l.onerror=p});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ot(s),n=null}return m(this,In).set(t,n),n&&m(this,In).set(n.id,n),n};let tS=aE;var Oe,Wr,Cf,we;class m8{constructor(t=128){M(this,Oe,[]);M(this,Wr,!1);M(this,Cf);M(this,we,-1);w(this,Cf,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(s&&t(),m(this,Wr))return;const h={cmd:t,undo:e,post:n,type:a};if(m(this,we)===-1){m(this,Oe).length>0&&(m(this,Oe).length=0),w(this,we,0),m(this,Oe).push(h);return}if(l&&m(this,Oe)[m(this,we)].type===a){u&&(h.undo=m(this,Oe)[m(this,we)].undo),m(this,Oe)[m(this,we)]=h;return}const d=m(this,we)+1;d===m(this,Cf)?m(this,Oe).splice(0,1):(w(this,we,d),d<m(this,Oe).length&&m(this,Oe).splice(d)),m(this,Oe).push(h)}undo(){if(m(this,we)===-1)return;w(this,Wr,!0);const{undo:t,post:e}=m(this,Oe)[m(this,we)];t(),e==null||e(),w(this,Wr,!1),w(this,we,m(this,we)-1)}redo(){if(m(this,we)<m(this,Oe).length-1){w(this,we,m(this,we)+1),w(this,Wr,!0);const{cmd:t,post:e}=m(this,Oe)[m(this,we)];t(),e==null||e(),w(this,Wr,!1)}}hasSomethingToUndo(){return m(this,we)!==-1}hasSomethingToRedo(){return m(this,we)<m(this,Oe).length-1}cleanType(t){if(m(this,we)!==-1){for(let e=m(this,we);e>=0;e--)if(m(this,Oe)[e].type!==t){m(this,Oe).splice(e+1,m(this,we)-e),w(this,we,e);return}m(this,Oe).length=0,w(this,we,-1)}}destroy(){w(this,Oe,null)}}Oe=new WeakMap,Wr=new WeakMap,Cf=new WeakMap,we=new WeakMap;var Ly,PD;class Wp{constructor(t){M(this,Ly);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Wn.platform;for(const[n,s,a={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:s,options:a}),this.allKeys.add(l.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(I(this,Ly,PD).call(this,e));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(s.bind(t,...l,e)(),a||Hi(e))}}Ly=new WeakSet,PD=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ky=class ky{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return d8(t),Bt(this,"_colors",t)}convert(t){const e=nE(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((a,l)=>a===e[l]))return ky._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?vt.makeHexColor(...e):t}};Ct(ky,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let eS=ky;var Rc,wi,tn,An,Mc,Ho,Ic,es,Qr,fl,Nc,pl,Js,bs,ml,wf,xf,Dc,Rf,Ws,Zr,Pc,jr,Qs,Uy,ta,Mf,ea,gl,If,Nf,an,se,Bo,yl,Df,Pf,na,Zs,Go,Lf,ns,rt,Fg,nS,LD,kD,Vg,UD,OD,FD,iS,VD,sS,oS,HD,Gn,Uo,BD,GD,rS,zD,zd,aS;const Ac=class Ac{constructor(t,e,n,s,a,l,u,h,d,p,v,A,T){M(this,rt);M(this,Rc,new AbortController);M(this,wi,null);M(this,tn,new Map);M(this,An,new Map);M(this,Mc,null);M(this,Ho,null);M(this,Ic,null);M(this,es,new m8);M(this,Qr,null);M(this,fl,null);M(this,Nc,0);M(this,pl,new Set);M(this,Js,null);M(this,bs,null);M(this,ml,new Set);Ct(this,"_editorUndoBar",null);M(this,wf,!1);M(this,xf,!1);M(this,Dc,!1);M(this,Rf,null);M(this,Ws,null);M(this,Zr,null);M(this,Pc,null);M(this,jr,!1);M(this,Qs,null);M(this,Uy,new p8);M(this,ta,!1);M(this,Mf,!1);M(this,ea,null);M(this,gl,null);M(this,If,null);M(this,Nf,null);M(this,an,Ut.NONE);M(this,se,new Set);M(this,Bo,null);M(this,yl,null);M(this,Df,null);M(this,Pf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});M(this,na,[0,0]);M(this,Zs,null);M(this,Go,null);M(this,Lf,null);M(this,ns,null);const E=this._signal=m(this,Rc).signal;w(this,Go,t),w(this,Lf,e),w(this,Mc,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:E}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),s._on("setpreference",this.onSetPreference.bind(this),{signal:E}),s._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:E}),I(this,rt,UD).call(this),I(this,rt,HD).call(this),I(this,rt,iS).call(this),w(this,Ho,a.annotationStorage),w(this,Rf,a.filterFactory),w(this,yl,l),w(this,Pc,u||null),w(this,wf,h),w(this,xf,d),w(this,Dc,p),w(this,Nf,v||null),this.viewParameters={realScale:Ia.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=T!==!1}static get _keyboardManager(){const t=Ac.prototype,e=l=>m(l,Go).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Bt(this,"_keyboardManager",new Wp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&m(l,Go).contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&m(l,Go).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,n,s,a;(t=m(this,ns))==null||t.resolve(),w(this,ns,null),(e=m(this,Rc))==null||e.abort(),w(this,Rc,null),this._signal=null;for(const l of m(this,An).values())l.destroy();m(this,An).clear(),m(this,tn).clear(),m(this,ml).clear(),w(this,wi,null),m(this,se).clear(),m(this,es).destroy(),(n=m(this,Mc))==null||n.destroy(),(s=m(this,Qs))==null||s.hide(),w(this,Qs,null),m(this,Ws)&&(clearTimeout(m(this,Ws)),w(this,Ws,null)),m(this,Zs)&&(clearTimeout(m(this,Zs)),w(this,Zs,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return m(this,Nf)}get useNewAltTextFlow(){return m(this,xf)}get useNewAltTextWhenAddingImage(){return m(this,Dc)}get hcmFilter(){return Bt(this,"hcmFilter",m(this,yl)?m(this,Rf).addHCMFilter(m(this,yl).foreground,m(this,yl).background):"none")}get direction(){return Bt(this,"direction",getComputedStyle(m(this,Go)).direction)}get highlightColors(){return Bt(this,"highlightColors",m(this,Pc)?new Map(m(this,Pc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,fl,t)}setMainHighlightColorPicker(t){w(this,If,t)}editAltText(t,e=!1){var n;(n=m(this,Mc))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":w(this,Dc,e);break}}onPageChanging({pageNumber:t}){w(this,Nc,t-1)}focusMainContainer(){m(this,Go).focus()}findParent(t,e){for(const n of m(this,An).values()){const{x:s,y:a,width:l,height:u}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=a&&e<=a+u)return n}return null}disableUserSelect(t=!1){m(this,Lf).classList.toggle("noUserSelect",t)}addShouldRescale(t){m(this,ml).add(t)}removeShouldRescale(t){m(this,ml).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ia.PDF_TO_CSS_UNITS;for(const n of m(this,ml))n.onScaleChanging();(e=m(this,fl))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l}=e,u=e.toString(),d=I(this,rt,Fg).call(this,e).closest(".textLayer"),p=this.getSelectionBoxes(d);if(!p)return;e.empty();const v=I(this,rt,nS).call(this,d),A=m(this,an)===Ut.NONE,T=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:l,text:u}),A&&this.showAllEditors("highlight",!0,!0)};if(A){this.switchToMode(Ut.HIGHLIGHT,T);return}T()}addToAnnotationStorage(t){!t.isEmpty()&&m(this,Ho)&&!m(this,Ho).has(t.id)&&m(this,Ho).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,m(this,jr)&&(w(this,jr,!1),I(this,rt,Vg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of m(this,se))if(e.div.contains(t)){w(this,gl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!m(this,gl))return;const[t,e]=m(this,gl);w(this,gl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){I(this,rt,iS).call(this),I(this,rt,sS).call(this)}removeEditListeners(){I(this,rt,VD).call(this),I(this,rt,oS).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of m(this,bs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of m(this,bs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=m(this,wi))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of m(this,se)){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of m(this,bs))if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Ot(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const h of n){const d=await s.deserialize(h);if(!d)return;a.push(d)}const l=()=>{for(const h of a)I(this,rt,rS).call(this,h);I(this,rt,aS).call(this,a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(a){Ot(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,an)!==Ut.NONE&&!this.isEditorHandlingKeyboard&&Ac._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,jr)&&(w(this,jr,!1),I(this,rt,Vg).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(I(this,rt,OD).call(this),I(this,rt,sS).call(this),I(this,rt,Gn).call(this,{isEditing:m(this,an)!==Ut.NONE,isEmpty:I(this,rt,zd).call(this),hasSomethingToUndo:m(this,es).hasSomethingToUndo(),hasSomethingToRedo:m(this,es).hasSomethingToRedo(),hasSelectedEditor:!1})):(I(this,rt,FD).call(this),I(this,rt,oS).call(this),I(this,rt,Gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!m(this,bs)){w(this,bs,t);for(const e of m(this,bs))I(this,rt,Uo).call(this,e.defaultPropertiesToUpdate)}}getId(){return m(this,Uy).id}get currentLayer(){return m(this,An).get(m(this,Nc))}getLayer(t){return m(this,An).get(t)}get currentPageIndex(){return m(this,Nc)}addLayer(t){m(this,An).set(t.pageIndex,t),m(this,ta)?t.enable():t.disable()}removeLayer(t){m(this,An).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var s;if(m(this,an)!==t&&!(m(this,ns)&&(await m(this,ns).promise,!m(this,ns)))){if(w(this,ns,Promise.withResolvers()),w(this,an,t),t===Ut.NONE){this.setEditingState(!1),I(this,rt,GD).call(this),(s=this._editorUndoBar)==null||s.hide(),m(this,ns).resolve();return}this.setEditingState(!0),await I(this,rt,BD).call(this),this.unselectAll();for(const a of m(this,An).values())a.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),m(this,ns).resolve();return}for(const a of m(this,tn).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();m(this,ns).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==m(this,an)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(m(this,bs)){switch(t){case $t.CREATE:this.currentLayer.addNewEditor();return;case $t.HIGHLIGHT_DEFAULT_COLOR:(n=m(this,If))==null||n.updateColor(e);break;case $t.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,Df)||w(this,Df,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of m(this,se))s.updateParams(t,e);for(const s of m(this,bs))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var a;for(const l of m(this,tn).values())l.editorType===t&&l.show(e);(((a=m(this,Df))==null?void 0:a.get($t.HIGHLIGHT_SHOW_ALL))??!0)!==e&&I(this,rt,Uo).call(this,[[$t.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(m(this,Mf)!==t){w(this,Mf,t);for(const e of m(this,An).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of m(this,tn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return m(this,tn).get(t)}addEditor(t){m(this,tn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(m(this,Ws)&&clearTimeout(m(this,Ws)),w(this,Ws,setTimeout(()=>{this.focusMainContainer(),w(this,Ws,null)},0))),m(this,tn).delete(t.id),this.unselect(t),(!t.annotationElementId||!m(this,pl).has(t.annotationElementId))&&((e=m(this,Ho))==null||e.remove(t.id))}addDeletedAnnotationElement(t){m(this,pl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return m(this,pl).has(t)}removeDeletedAnnotationElement(t){m(this,pl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){m(this,wi)!==t&&(w(this,wi,t),t&&I(this,rt,Uo).call(this,t.propertiesToUpdate))}updateUI(t){m(this,rt,zD)===t&&I(this,rt,Uo).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){I(this,rt,Uo).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(m(this,se).has(t)){m(this,se).delete(t),t.unselect(),I(this,rt,Gn).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,se).add(t),t.select(),I(this,rt,Uo).call(this,t.propertiesToUpdate),I(this,rt,Gn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=m(this,fl))==null||e.commitOrRemove();for(const n of m(this,se))n!==t&&n.unselect();m(this,se).clear(),m(this,se).add(t),t.select(),I(this,rt,Uo).call(this,t.propertiesToUpdate),I(this,rt,Gn).call(this,{hasSelectedEditor:!0})}isSelected(t){return m(this,se).has(t)}get firstSelectedEditor(){return m(this,se).values().next().value}unselect(t){t.unselect(),m(this,se).delete(t),I(this,rt,Gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,se).size!==0}get isEnterHandled(){return m(this,se).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;m(this,es).undo(),I(this,rt,Gn).call(this,{hasSomethingToUndo:m(this,es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:I(this,rt,zd).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){m(this,es).redo(),I(this,rt,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,es).hasSomethingToRedo(),isEmpty:I(this,rt,zd).call(this)})}addCommands(t){m(this,es).add(t),I(this,rt,Gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:I(this,rt,zd).call(this)})}cleanUndoStack(t){m(this,es).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...m(this,se)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,e.length===1?e[0].editorType:e.length);for(const u of e)u.remove()},s=()=>{for(const l of e)I(this,rt,rS).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=m(this,wi))==null||t.commitOrRemove()}hasSomethingToControl(){return m(this,wi)||this.hasSelection}selectAll(){for(const t of m(this,se))t.commit();I(this,rt,aS).call(this,m(this,tn).values())}unselectAll(){var t;if(!(m(this,wi)&&(m(this,wi).commitOrRemove(),m(this,an)!==Ut.NONE))&&!((t=m(this,fl))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of m(this,se))e.unselect();m(this,se).clear(),I(this,rt,Gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,na)[0]+=t,m(this,na)[1]+=e;const[s,a]=m(this,na),l=[...m(this,se)],u=1e3;m(this,Zs)&&clearTimeout(m(this,Zs)),w(this,Zs,setTimeout(()=>{w(this,Zs,null),m(this,na)[0]=m(this,na)[1]=0,this.addCommands({cmd:()=>{for(const h of l)m(this,tn).has(h.id)&&h.translateInPage(s,a)},undo:()=>{for(const h of l)m(this,tn).has(h.id)&&h.translateInPage(-s,-a)},mustExec:!1})},u));for(const h of l)h.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,Js,new Map);for(const t of m(this,se))m(this,Js).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,Js))return!1;this.disableUserSelect(!1);const t=m(this,Js);w(this,Js,null);let e=!1;for(const[{x:s,y:a,pageIndex:l},u]of t)u.newX=s,u.newY=a,u.newPageIndex=l,e||(e=s!==u.savedX||a!==u.savedY||l!==u.savedPageIndex);if(!e)return!1;const n=(s,a,l,u)=>{if(m(this,tn).has(s.id)){const h=m(this,An).get(u);h?s._setParentAndPosition(h,a,l):(s.pageIndex=u,s.x=a,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:l,newPageIndex:u}]of t)n(s,a,l,u)},undo:()=>{for(const[s,{savedX:a,savedY:l,savedPageIndex:u}]of t)n(s,a,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(m(this,Js))for(const n of m(this,Js).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||m(this,se).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return m(this,wi)===t}getActive(){return m(this,wi)}getMode(){return m(this,an)}get imageManager(){return Bt(this,"imageManager",new tS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(d,p,v,A)=>({x:(p-s)/l,y:1-(d+v-n)/a,width:A/l,height:v/a});break;case"180":u=(d,p,v,A)=>({x:1-(d+v-n)/a,y:1-(p+A-s)/l,width:v/a,height:A/l});break;case"270":u=(d,p,v,A)=>({x:1-(p+A-s)/l,y:(d-n)/a,width:A/l,height:v/a});break;default:u=(d,p,v,A)=>({x:(d-n)/a,y:(p-s)/l,width:v/a,height:A/l});break}const h=[];for(let d=0,p=e.rangeCount;d<p;d++){const v=e.getRangeAt(d);if(!v.collapsed)for(const{x:A,y:T,width:E,height:C}of v.getClientRects())E===0||C===0||h.push(u(A,T,E,C))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(m(this,Ic)||w(this,Ic,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=m(this,Ic))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=m(this,Ic))==null?void 0:s.get(t.data.id);if(!e)return;const n=m(this,Ho).getRawValue(e);n&&(m(this,an)===Ut.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};Rc=new WeakMap,wi=new WeakMap,tn=new WeakMap,An=new WeakMap,Mc=new WeakMap,Ho=new WeakMap,Ic=new WeakMap,es=new WeakMap,Qr=new WeakMap,fl=new WeakMap,Nc=new WeakMap,pl=new WeakMap,Js=new WeakMap,bs=new WeakMap,ml=new WeakMap,wf=new WeakMap,xf=new WeakMap,Dc=new WeakMap,Rf=new WeakMap,Ws=new WeakMap,Zr=new WeakMap,Pc=new WeakMap,jr=new WeakMap,Qs=new WeakMap,Uy=new WeakMap,ta=new WeakMap,Mf=new WeakMap,ea=new WeakMap,gl=new WeakMap,If=new WeakMap,Nf=new WeakMap,an=new WeakMap,se=new WeakMap,Bo=new WeakMap,yl=new WeakMap,Df=new WeakMap,Pf=new WeakMap,na=new WeakMap,Zs=new WeakMap,Go=new WeakMap,Lf=new WeakMap,ns=new WeakMap,rt=new WeakSet,Fg=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},nS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of m(this,An).values())if(n.hasTextLayer(t))return n;return null},LD=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=I(this,rt,Fg).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(m(this,Qs)||w(this,Qs,new f8(this)),m(this,Qs).show(n,s,this.direction==="ltr"))},kD=function(){var a,l,u;const t=document.getSelection();if(!t||t.isCollapsed){m(this,Bo)&&((a=m(this,Qs))==null||a.hide(),w(this,Bo,null),I(this,rt,Gn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===m(this,Bo))return;const s=I(this,rt,Fg).call(this,t).closest(".textLayer");if(!s){m(this,Bo)&&((l=m(this,Qs))==null||l.hide(),w(this,Bo,null),I(this,rt,Gn).call(this,{hasSelectedText:!1}));return}if((u=m(this,Qs))==null||u.hide(),w(this,Bo,e),I(this,rt,Gn).call(this,{hasSelectedText:!0}),!(m(this,an)!==Ut.HIGHLIGHT&&m(this,an)!==Ut.NONE)&&(m(this,an)===Ut.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,jr,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=m(this,an)===Ut.HIGHLIGHT?I(this,rt,nS).call(this,s):null;h==null||h.toggleDrawing();const d=new AbortController,p=this.combinedSignal(d),v=A=>{A.type==="pointerup"&&A.button!==0||(d.abort(),h==null||h.toggleDrawing(!0),A.type==="pointerup"&&I(this,rt,Vg).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:p}),window.addEventListener("blur",v,{signal:p})}},Vg=function(t=""){m(this,an)===Ut.HIGHLIGHT?this.highlightSelection(t):m(this,wf)&&I(this,rt,LD).call(this)},UD=function(){document.addEventListener("selectionchange",I(this,rt,kD).bind(this),{signal:this._signal})},OD=function(){if(m(this,Zr))return;w(this,Zr,new AbortController);const t=this.combinedSignal(m(this,Zr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},FD=function(){var t;(t=m(this,Zr))==null||t.abort(),w(this,Zr,null)},iS=function(){if(m(this,ea))return;w(this,ea,new AbortController);const t=this.combinedSignal(m(this,ea));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},VD=function(){var t;(t=m(this,ea))==null||t.abort(),w(this,ea,null)},sS=function(){if(m(this,Qr))return;w(this,Qr,new AbortController);const t=this.combinedSignal(m(this,Qr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},oS=function(){var t;(t=m(this,Qr))==null||t.abort(),w(this,Qr,null)},HD=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Gn=function(t){Object.entries(t).some(([n,s])=>m(this,Pf)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,Pf),t)}),m(this,an)===Ut.HIGHLIGHT&&t.hasSelectedEditor===!1&&I(this,rt,Uo).call(this,[[$t.HIGHLIGHT_FREE,!0]]))},Uo=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},BD=async function(){if(!m(this,ta)){w(this,ta,!0);const t=[];for(const e of m(this,An).values())t.push(e.enable());await Promise.all(t);for(const e of m(this,tn).values())e.enable()}},GD=function(){if(this.unselectAll(),m(this,ta)){w(this,ta,!1);for(const t of m(this,An).values())t.disable();for(const t of m(this,tn).values())t.disable()}},rS=function(t){const e=m(this,An).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},zD=function(){let t=null;for(t of m(this,se));return t},zd=function(){if(m(this,tn).size===0)return!0;if(m(this,tn).size===1)for(const t of m(this,tn).values())return t.isEmpty();return!1},aS=function(t){for(const e of m(this,se))e.unselect();m(this,se).clear();for(const e of t)e.isEmpty()||(m(this,se).add(e),e.select());I(this,rt,Gn).call(this,{hasSelectedEditor:this.hasSelection})},Ct(Ac,"TRANSLATE_SMALL",1),Ct(Ac,"TRANSLATE_BIG",10);let mu=Ac;var ln,js,Cs,Lc,to,xi,kc,eo,hi,zo,vl,no,ia,Us,qd,Hg;const zn=class zn{constructor(t){M(this,Us);M(this,ln,null);M(this,js,!1);M(this,Cs,null);M(this,Lc,null);M(this,to,null);M(this,xi,null);M(this,kc,!1);M(this,eo,null);M(this,hi,null);M(this,zo,null);M(this,vl,null);M(this,no,!1);w(this,hi,t),w(this,no,t._uiManager.useNewAltTextFlow),m(zn,ia)||w(zn,ia,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){zn._l10n??(zn._l10n=t)}async render(){const t=w(this,Cs,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=w(this,Lc,document.createElement("span"));t.append(e),m(this,no)?(t.classList.add("new"),t.setAttribute("data-l10n-id",m(zn,ia).missing),e.setAttribute("data-l10n-id",m(zn,ia)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,hi)._uiManager._signal;t.addEventListener("contextmenu",Vs,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),m(this,hi)._uiManager.editAltText(m(this,hi)),m(this,no)&&m(this,hi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,Us,qd)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(w(this,kc,!0),s(a))},{signal:n}),await I(this,Us,Hg).call(this),t}finish(){m(this,Cs)&&(m(this,Cs).focus({focusVisible:m(this,kc)}),w(this,kc,!1))}isEmpty(){return m(this,no)?m(this,ln)===null:!m(this,ln)&&!m(this,js)}hasData(){return m(this,no)?m(this,ln)!==null||!!m(this,zo):this.isEmpty()}get guessedText(){return m(this,zo)}async setGuessedText(t){m(this,ln)===null&&(w(this,zo,t),w(this,vl,await zn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),I(this,Us,Hg).call(this))}toggleAltTextBadge(t=!1){var e;if(!m(this,no)||m(this,ln)){(e=m(this,eo))==null||e.remove(),w(this,eo,null);return}if(!m(this,eo)){const n=w(this,eo,document.createElement("div"));n.className="noAltTextBadge",m(this,hi).div.append(n)}m(this,eo).classList.toggle("hidden",!t)}serialize(t){let e=m(this,ln);return!t&&m(this,zo)===e&&(e=m(this,vl)),{altText:e,decorative:m(this,js),guessedText:m(this,zo),textWithDisclaimer:m(this,vl)}}get data(){return{altText:m(this,ln),decorative:m(this,js)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(w(this,zo,n),w(this,vl,s)),!(m(this,ln)===t&&m(this,js)===e)&&(a||(w(this,ln,t),w(this,js,e)),I(this,Us,Hg).call(this))}toggle(t=!1){m(this,Cs)&&(!t&&m(this,xi)&&(clearTimeout(m(this,xi)),w(this,xi,null)),m(this,Cs).disabled=!t)}shown(){m(this,hi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,Us,qd)}})}destroy(){var t,e;(t=m(this,Cs))==null||t.remove(),w(this,Cs,null),w(this,Lc,null),w(this,to,null),(e=m(this,eo))==null||e.remove(),w(this,eo,null)}};ln=new WeakMap,js=new WeakMap,Cs=new WeakMap,Lc=new WeakMap,to=new WeakMap,xi=new WeakMap,kc=new WeakMap,eo=new WeakMap,hi=new WeakMap,zo=new WeakMap,vl=new WeakMap,no=new WeakMap,ia=new WeakMap,Us=new WeakSet,qd=function(){return m(this,ln)&&"added"||m(this,ln)===null&&this.guessedText&&"review"||"missing"},Hg=async function(){var s,a,l;const t=m(this,Cs);if(!t)return;if(m(this,no)){if(t.classList.toggle("done",!!m(this,ln)),t.setAttribute("data-l10n-id",m(zn,ia)[m(this,Us,qd)]),(s=m(this,Lc))==null||s.setAttribute("data-l10n-id",m(zn,ia)[`${m(this,Us,qd)}-label`]),!m(this,ln)){(a=m(this,to))==null||a.remove();return}}else{if(!m(this,ln)&&!m(this,js)){t.classList.remove("done"),(l=m(this,to))==null||l.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=m(this,to);if(!e){w(this,to,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${m(this,hi).id}`;const u=100,h=m(this,hi)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(m(this,xi)),w(this,xi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{w(this,xi,setTimeout(()=>{w(this,xi,null),m(this,to).classList.add("show"),m(this,hi)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:h}),t.addEventListener("mouseleave",()=>{var d;m(this,xi)&&(clearTimeout(m(this,xi)),w(this,xi,null)),(d=m(this,to))==null||d.classList.remove("show")},{signal:h})}m(this,js)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=m(this,ln)),e.parentNode||t.append(e);const n=m(this,hi).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},M(zn,ia,null),Ct(zn,"_l10n",null);let wy=zn;var kf,Al,Uf,Of,Ff,Vf,Hf,Uc,qo,_l,sa,yr,qD,YD,lS;const lE=class lE{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:l=null,signal:u}){M(this,yr);M(this,kf);M(this,Al,!1);M(this,Uf,null);M(this,Of);M(this,Ff);M(this,Vf);M(this,Hf);M(this,Uc);M(this,qo,null);M(this,_l);M(this,sa,null);w(this,kf,t),w(this,Uf,n),w(this,Of,e),w(this,Ff,s),w(this,Vf,a),w(this,Hf,l),w(this,_l,new AbortController),w(this,Uc,AbortSignal.any([u,m(this,_l).signal])),t.addEventListener("touchstart",I(this,yr,qD).bind(this),{passive:!1,signal:m(this,Uc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Bt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=m(this,_l))==null||t.abort(),w(this,_l,null)}};kf=new WeakMap,Al=new WeakMap,Uf=new WeakMap,Of=new WeakMap,Ff=new WeakMap,Vf=new WeakMap,Hf=new WeakMap,Uc=new WeakMap,qo=new WeakMap,_l=new WeakMap,sa=new WeakMap,yr=new WeakSet,qD=function(t){var s,a,l;if((s=m(this,Of))!=null&&s.call(this)||t.touches.length<2)return;if(!m(this,sa)){w(this,sa,new AbortController);const u=AbortSignal.any([m(this,Uc),m(this,sa).signal]),h=m(this,kf),d={signal:u,passive:!1};h.addEventListener("touchmove",I(this,yr,YD).bind(this),d),h.addEventListener("touchend",I(this,yr,lS).bind(this),d),h.addEventListener("touchcancel",I(this,yr,lS).bind(this),d),(a=m(this,Ff))==null||a.call(this)}if(Hi(t),t.touches.length!==2||(l=m(this,Uf))!=null&&l.call(this)){w(this,qo,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),w(this,qo,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},YD=function(t){var k;if(!m(this,qo)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:a}=e,{screenX:l,screenY:u}=n,h=m(this,qo),{touch0X:d,touch0Y:p,touch1X:v,touch1Y:A}=h,T=v-d,E=A-p,C=l-s,x=u-a,R=Math.hypot(C,x)||1,D=Math.hypot(T,E)||1;if(!m(this,Al)&&Math.abs(D-R)<=lE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=a,h.touch1X=l,h.touch1Y=u,t.preventDefault(),!m(this,Al)){w(this,Al,!0);return}const P=[(s+l)/2,(a+u)/2];(k=m(this,Vf))==null||k.call(this,P,D,R)},lS=function(t){var e;m(this,sa).abort(),w(this,sa,null),(e=m(this,Hf))==null||e.call(this),m(this,qo)&&(t.preventDefault(),w(this,qo,null),w(this,Al,!1))};let xy=lE;var Sl,ws,Ae,Oc,oa,Bf,Tl,_n,El,Yo,ra,Gf,bl,Ri,zf,Cl,Xo,io,Fc,Vc,is,wl,qf,Oy,wt,uS,Yf,cS,Bg,XD,$D,hS,Gg,dS,KD,JD,WD,fS,QD,pS,ZD,jD,tP,mS,Yd;const Vt=class Vt{constructor(t){M(this,wt);M(this,Sl,null);M(this,ws,null);M(this,Ae,null);M(this,Oc,!1);M(this,oa,null);M(this,Bf,"");M(this,Tl,!1);M(this,_n,null);M(this,El,null);M(this,Yo,null);M(this,ra,null);M(this,Gf,"");M(this,bl,!1);M(this,Ri,null);M(this,zf,!1);M(this,Cl,!1);M(this,Xo,!1);M(this,io,null);M(this,Fc,0);M(this,Vc,0);M(this,is,null);M(this,wl,null);Ct(this,"_editToolbar",null);Ct(this,"_initialOptions",Object.create(null));Ct(this,"_initialData",null);Ct(this,"_isVisible",!0);Ct(this,"_uiManager",null);Ct(this,"_focusEventsAllowed",!0);M(this,qf,!1);M(this,Oy,Vt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Vt.prototype._resizeWithKeyboard,e=mu.TRANSLATE_SMALL,n=mu.TRANSLATE_BIG;return Bt(this,"_resizerKeyboardManager",new Wp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new g8({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Vt._l10n??(Vt._l10n=t),Vt._l10nResizer||(Vt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Vt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Vt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,qf)}set _isDraggable(t){var e;w(this,qf,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,Oy)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):I(this,wt,Yd).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(m(this,bl)?w(this,bl,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[a,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/a,this.y=(e+s)/l,this.fixAndSetPosition()}translate(t,e){I(this,wt,uS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){m(this,Ri)||w(this,Ri,[this.x,this.y,this.width,this.height]),I(this,wt,uS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){m(this,Ri)||w(this,Ri,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,a]}=this;if(this.x+=t/s,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:A}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,A)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,d]=this.getBaseTranslation();l+=h,u+=d;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!m(this,Ri)&&(m(this,Ri)[0]!==this.x||m(this,Ri)[1]!==this.y)}get _hasBeenResized(){return!!m(this,Ri)&&(m(this,Ri)[2]!==this.width||m(this,Ri)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Vt,s=n/t,a=n/e;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:a,y:l,width:u,height:h}=this;if(u*=n,h*=s,a*=n,l*=s,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(n-u,a)),l=Math.max(0,Math.min(s-h,l));break;case 90:a=Math.max(0,Math.min(n-h,a)),l=Math.min(s,Math.max(u,l));break;case 180:a=Math.min(n,Math.max(u,a)),l=Math.min(s,Math.max(h,l));break;case 270:a=Math.min(n,Math.max(h,a)),l=Math.max(0,Math.min(s-u,l));break}this.x=a/=n,this.y=l/=s;const[d,p]=this.getBaseTranslation();a+=d,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return I(n=Vt,Yf,cS).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return I(n=Vt,Yf,cS).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/n).toFixed(2)}%`,m(this,Tl)||(a.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),a=!m(this,Tl)&&e.endsWith("%");if(s&&a)return;const[l,u]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!m(this,Tl)&&!a&&(t.height=`${(100*parseFloat(e)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=m(this,Ae))==null||t.finish()}async addEditToolbar(){return this._editToolbar||m(this,Cl)?this._editToolbar:(this._editToolbar=new Z_(this),this.div.append(this._editToolbar.render()),m(this,Ae)&&await this._editToolbar.addAltText(m(this,Ae)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=m(this,Ae))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){m(this,Ae)||(wy.initialize(Vt._l10n),w(this,Ae,new wy(this)),m(this,Sl)&&(m(this,Ae).data=m(this,Sl),w(this,Sl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=m(this,Ae))==null?void 0:t.data}set altTextData(t){m(this,Ae)&&(m(this,Ae).data=t)}get guessedAltText(){var t;return(t=m(this,Ae))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=m(this,Ae))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=m(this,Ae))==null?void 0:e.serialize(t)}hasAltText(){return!!m(this,Ae)&&!m(this,Ae).isEmpty()}hasAltTextData(){var t;return((t=m(this,Ae))==null?void 0:t.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=m(this,Oc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),I(this,wt,pS).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Cy(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,wl)||w(this,wl,new xy({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:I(this,wt,KD).bind(this),onPinching:I(this,wt,JD).bind(this),onPinchEnd:I(this,wt,WD).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(t){const{isMac:e}=Wn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(w(this,bl,!0),this._isDraggable){I(this,wt,QD).call(this,t);return}I(this,wt,fS).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,io)&&clearTimeout(m(this,io)),w(this,io,setTimeout(()=>{var t;w(this,io,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[a,l]=this.pageDimensions,[u,h]=this.pageTranslation,d=t/s,p=e/s,v=this.x*a,A=this.y*l,T=this.width*a,E=this.height*l;switch(n){case 0:return[v+d+u,l-A-p-E+h,v+d+T+u,l-A-p+h];case 90:return[v+p+u,l-A+d+h,v+p+E+u,l-A+d+T+h];case 180:return[v-d-T+u,l-A+p+h,v-d+u,l-A+p+E+h];case 270:return[v-p-E+u,l-A-d-T+h,v-p+u,l-A-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,a,l]=t,u=a-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-s,h,u];case 180:return[a,e-s,u,h];case 270:return[a,e-l,h,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){w(this,Cl,!0)}disableEditMode(){w(this,Cl,!1)}isInEditMode(){return m(this,Cl)}shouldGetKeyboardEvents(){return m(this,Xo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&s>0&&t<a&&n>0}rebuild(){I(this,wt,pS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){fe("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,w(s,Sl,t.accessibilityData);const[a,l]=s.pageDimensions,[u,h,d,p]=s.getRectInCurrentCoords(t.rect,l);return s.x=u/a,s.y=h/l,s.width=d/a,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=m(this,ra))==null||t.abort(),w(this,ra,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),m(this,io)&&(clearTimeout(m(this,io)),w(this,io,null)),I(this,wt,Yd).call(this),this.removeEditToolbar(),m(this,is)){for(const n of m(this,is).values())clearTimeout(n);w(this,is,null)}this.parent=null,(e=m(this,wl))==null||e.destroy(),w(this,wl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(I(this,wt,XD).call(this),m(this,_n).classList.remove("hidden"),Cy(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),w(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=m(this,_n).children;if(!m(this,ws)){w(this,ws,Array.from(e));const l=I(this,wt,ZD).bind(this),u=I(this,wt,jD).bind(this),h=this._uiManager._signal;for(const d of m(this,ws)){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",I(this,wt,tP).bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",Vt._l10nResizer[p])}}const n=m(this,ws)[0];let s=0;for(const l of e){if(l===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(m(this,ws).length/4);if(a!==s){if(a<s)for(let u=0;u<s-a;u++)m(this,_n).append(m(this,_n).firstChild);else if(a>s)for(let u=0;u<a-s;u++)m(this,_n).firstChild.before(m(this,_n).lastChild);let l=0;for(const u of e){const d=m(this,ws)[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Vt._l10nResizer[d])}}I(this,wt,mS).call(this,0),w(this,Xo,!0),m(this,_n).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){m(this,Xo)&&I(this,wt,dS).call(this,m(this,Gf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){I(this,wt,Yd).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(n=m(this,Ae))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,a;(t=m(this,_n))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=m(this,Ae))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return m(this,zf)}set isEditing(t){w(this,zf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){w(this,Tl,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){m(this,is)||w(this,is,new Map);const{action:n}=t;let s=m(this,is).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),m(this,is).delete(n),m(this,is).size===0&&w(this,is,null)},Vt._telemetryTimeout),m(this,is).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),w(this,Oc,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,Oc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Sl=new WeakMap,ws=new WeakMap,Ae=new WeakMap,Oc=new WeakMap,oa=new WeakMap,Bf=new WeakMap,Tl=new WeakMap,_n=new WeakMap,El=new WeakMap,Yo=new WeakMap,ra=new WeakMap,Gf=new WeakMap,bl=new WeakMap,Ri=new WeakMap,zf=new WeakMap,Cl=new WeakMap,Xo=new WeakMap,io=new WeakMap,Fc=new WeakMap,Vc=new WeakMap,is=new WeakMap,wl=new WeakMap,qf=new WeakMap,Oy=new WeakMap,wt=new WeakSet,uS=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Yf=new WeakSet,cS=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Bg=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},XD=function(){if(m(this,_n))return;w(this,_n,document.createElement("div")),m(this,_n).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");m(this,_n).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",I(this,wt,$D).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Vs,{signal:e}),s.tabIndex=-1}this.div.prepend(m(this,_n))},$D=function(t,e){var p;e.preventDefault();const{isMac:n}=Wn.platform;if(e.button!==0||e.ctrlKey&&n)return;(p=m(this,Ae))==null||p.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,w(this,El,[e.screenX,e.screenY]);const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",I(this,wt,dS).bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Hi,{passive:!1,signal:l}),window.addEventListener("contextmenu",Vs,{signal:l}),w(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{var v;a.abort(),this.parent.togglePointerEvents(!0),(v=m(this,Ae))==null||v.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=h,I(this,wt,Gg).call(this)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})},hS=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[a,l]=this.parentDimensions;this.setDims(a*n,l*s),this.fixAndSetPosition(),this._onResized()},Gg=function(){if(!m(this,Yo))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=m(this,Yo);w(this,Yo,null);const a=this.x,l=this.y,u=this.width,h=this.height;a===t&&l===e&&u===n&&h===s||this.addCommands({cmd:I(this,wt,hS).bind(this,a,l,u,h),undo:I(this,wt,hS).bind(this,t,e,n,s),mustExec:!0})},dS=function(t,e){const[n,s]=this.parentDimensions,a=this.x,l=this.y,u=this.width,h=this.height,d=Vt.MIN_SIZE/n,p=Vt.MIN_SIZE/s,v=I(this,wt,Bg).call(this,this.rotation),A=(B,J)=>[v[0]*B+v[2]*J,v[1]*B+v[3]*J],T=I(this,wt,Bg).call(this,360-this.rotation),E=(B,J)=>[T[0]*B+T[2]*J,T[1]*B+T[3]*J];let C,x,R=!1,D=!1;switch(t){case"topLeft":R=!0,C=(B,J)=>[0,0],x=(B,J)=>[B,J];break;case"topMiddle":C=(B,J)=>[B/2,0],x=(B,J)=>[B/2,J];break;case"topRight":R=!0,C=(B,J)=>[B,0],x=(B,J)=>[0,J];break;case"middleRight":D=!0,C=(B,J)=>[B,J/2],x=(B,J)=>[0,J/2];break;case"bottomRight":R=!0,C=(B,J)=>[B,J],x=(B,J)=>[0,0];break;case"bottomMiddle":C=(B,J)=>[B/2,J],x=(B,J)=>[B/2,0];break;case"bottomLeft":R=!0,C=(B,J)=>[0,J],x=(B,J)=>[B,0];break;case"middleLeft":D=!0,C=(B,J)=>[0,J/2],x=(B,J)=>[B,J/2];break}const P=C(u,h),k=x(u,h);let L=A(...k);const G=Vt._round(a+L[0]),F=Vt._round(l+L[1]);let $=1,X=1,et,nt;if(e.fromKeyboard)({deltaX:et,deltaY:nt}=e);else{const{screenX:B,screenY:J}=e,[ot,Et]=m(this,El);[et,nt]=this.screenToPageTranslation(B-ot,J-Et),m(this,El)[0]=B,m(this,El)[1]=J}if([et,nt]=E(et/n,nt/s),R){const B=Math.hypot(u,h);$=X=Math.max(Math.min(Math.hypot(k[0]-P[0]-et,k[1]-P[1]-nt)/B,1/u,1/h),d/u,p/h)}else D?$=Math.max(d,Math.min(1,Math.abs(k[0]-P[0]-et)))/u:X=Math.max(p,Math.min(1,Math.abs(k[1]-P[1]-nt)))/h;const mt=Vt._round(u*$),Tt=Vt._round(h*X);L=A(...x(mt,Tt));const pt=G-L[0],Dt=F-L[1];m(this,Ri)||w(this,Ri,[this.x,this.y,this.width,this.height]),this.width=mt,this.height=Tt,this.x=pt,this.y=Dt,this.setDims(n*mt,s*Tt),this.fixAndSetPosition(),this._onResizing()},KD=function(){var t;w(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=m(this,Ae))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},JD=function(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=I(this,wt,Bg).call(this,this.rotation),u=(G,F)=>[l[0]*G+l[2]*F,l[1]*G+l[3]*F],[h,d]=this.parentDimensions,p=this.x,v=this.y,A=this.width,T=this.height,E=Vt.MIN_SIZE/h,C=Vt.MIN_SIZE/d;a=Math.max(Math.min(a,1/A,1/T),E/A,C/T);const x=Vt._round(A*a),R=Vt._round(T*a);if(x===A&&R===T)return;m(this,Ri)||w(this,Ri,[p,v,A,T]);const D=u(A/2,T/2),P=Vt._round(p+D[0]),k=Vt._round(v+D[1]),L=u(x/2,R/2);this.x=P-L[0],this.y=k-L[1],this.width=x,this.height=R,this.setDims(h*x,d*R),this.fixAndSetPosition(),this._onResizing()},WD=function(){var t;(t=m(this,Ae))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),I(this,wt,Gg).call(this)},fS=function(t){const{isMac:e}=Wn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},QD=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:a},u=d=>{s.abort(),w(this,oa,null),w(this,bl,!1),this._uiManager.endDragSession()||I(this,wt,fS).call(this,d),n&&this._onStopDragging()};e&&(w(this,Fc,t.clientX),w(this,Vc,t.clientY),w(this,oa,t.pointerId),w(this,Bf,t.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:v,pointerId:A}=d;if(A!==m(this,oa)){Hi(d);return}const[T,E]=this.screenToPageTranslation(p-m(this,Fc),v-m(this,Vc));w(this,Fc,p),w(this,Vc,v),this._uiManager.dragSelectedEditors(T,E)},l),window.addEventListener("touchmove",Hi,l),window.addEventListener("pointerdown",d=>{d.pointerType===m(this,Bf)&&(m(this,wl)||d.isPrimary)&&u(d),Hi(d)},l));const h=d=>{if(!m(this,oa)||m(this,oa)===d.pointerId){u(d);return}Hi(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})},pS=function(){if(m(this,ra)||!this.div)return;w(this,ra,new AbortController);const t=this._uiManager.combinedSignal(m(this,ra));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},ZD=function(t){Vt._resizerKeyboardManager.exec(this,t)},jD=function(t){var e;m(this,Xo)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==m(this,_n)&&I(this,wt,Yd).call(this)},tP=function(t){w(this,Gf,m(this,Xo)?t:"")},mS=function(t){if(m(this,ws))for(const e of m(this,ws))e.tabIndex=t},Yd=function(){w(this,Xo,!1),I(this,wt,mS).call(this,-1),I(this,wt,Gg).call(this)},M(Vt,Yf),Ct(Vt,"_l10n",null),Ct(Vt,"_l10nResizer",null),Ct(Vt,"_borderLineWidth",-1),Ct(Vt,"_colorManager",new eS),Ct(Vt,"_zIndex",1),Ct(Vt,"_telemetryTimeout",1e3);let Me=Vt;class g8 extends Me{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const RM=3285377520,ji=4294901760,$s=65535;class eP{constructor(t){this.h1=t?t&4294967295:RM,this.h2=t?t&4294967295:RM}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let C=0,x=t.length;C<x;C++){const R=t.charCodeAt(C);R<=255?e[n++]=R:(e[n++]=R>>>8,e[n++]=R&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,l=new Uint32Array(e.buffer,0,s);let u=0,h=0,d=this.h1,p=this.h2;const v=3432918353,A=461845907,T=v&$s,E=A&$s;for(let C=0;C<s;C++)C&1?(u=l[C],u=u*v&ji|u*T&$s,u=u<<15|u>>>17,u=u*A&ji|u*E&$s,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[C],h=h*v&ji|h*T&$s,h=h<<15|h>>>17,h=h*A&ji|h*E&$s,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,a){case 3:u^=e[s*4+2]<<16;case 2:u^=e[s*4+1]<<8;case 1:u^=e[s*4],u=u*v&ji|u*T&$s,u=u<<15|u>>>17,u=u*A&ji|u*E&$s,s&1?d^=u:p^=u}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ji|t*36045&$s,e=e*4283543511&ji|((e<<16|t>>>16)*2950163797&ji)>>>16,t^=e>>>1,t=t*444984403&ji|t*60499&$s,e=e*3301882366&ji|((e<<16|t>>>16)*3120437893&ji)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const gS=Object.freeze({map:null,hash:"",transfer:void 0});var xl,Rl,un,Fy,nP;class iE{constructor(){M(this,Fy);M(this,xl,!1);M(this,Rl,null);M(this,un,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=m(this,un).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return m(this,un).get(t)}remove(t){if(m(this,un).delete(t),m(this,un).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of m(this,un).values())if(e instanceof Me)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=m(this,un).get(t);let s=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(s=!0,n[a]=l);else s=!0,m(this,un).set(t,e);s&&I(this,Fy,nP).call(this),e instanceof Me&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return m(this,un).has(t)}getAll(){return m(this,un).size>0?QT(m(this,un)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return m(this,un).size}resetModified(){m(this,xl)&&(w(this,xl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iP(this)}get serializable(){if(m(this,un).size===0)return gS;const t=new Map,e=new eP,n=[],s=Object.create(null);let a=!1;for(const[l,u]of m(this,un)){const h=u instanceof Me?u.serialize(!1,s):u;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||(a=!!h.bitmap))}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:gS}get editorStats(){let t=null;const e=new Map;for(const n of m(this,un).values()){if(!(n instanceof Me))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:a}=s;e.has(a)||e.set(a,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const l=t[a]||(t[a]=new Map);for(const[u,h]of Object.entries(s)){if(u==="type")continue;let d=l.get(u);d||(d=new Map,l.set(u,d));const p=d.get(h)??0;d.set(h,p+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){w(this,Rl,null)}get modifiedIds(){if(m(this,Rl))return m(this,Rl);const t=[];for(const e of m(this,un).values())!(e instanceof Me)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return w(this,Rl,{ids:new Set(t),hash:t.join(",")})}}xl=new WeakMap,Rl=new WeakMap,un=new WeakMap,Fy=new WeakSet,nP=function(){m(this,xl)||(w(this,xl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xf;class iP extends iE{constructor(e){super();M(this,Xf);const{map:n,hash:s,transfer:a}=e.serializable,l=structuredClone(n,a?{transfer:a}:null);w(this,Xf,{map:l,hash:s,transfer:a})}get print(){fe("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,Xf)}get modifiedIds(){return Bt(this,"modifiedIds",{ids:new Set,hash:""})}}Xf=new WeakMap;var Hc;class y8{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){M(this,Hc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),m(this,Hc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||m(this,Hc).has(t.loadedName))){if($e(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:a}=t,l=new FontFace(n,s,a);this.addNativeFontFace(l);try{await l.load(),m(this,Hc).add(n),e==null||e(t)}catch{Ot(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ot(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Bt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Un||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Bt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for($e(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Bt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(k,L){return k.charCodeAt(L)<<24|k.charCodeAt(L+1)<<16|k.charCodeAt(L+2)<<8|k.charCodeAt(L+3)&255}function s(k,L,G,F){const $=k.substring(0,L),X=k.substring(L+G);return $+F+X}let a,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function p(k,L){if(++d>30){Ot("Load test font never loaded."),L();return}if(h.font="30px "+k,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(p.bind(null,k,L))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let A=this._loadTestFont;A=s(A,976,v.length,v);const E=16,C=1482184792;let x=n(A,E);for(a=0,l=v.length-3;a<l;a+=4)x=x-C+n(v,a)|0;a<v.length&&(x=x-C+n(v+"XXX",a)|0),A=s(A,E,4,n8(x));const R=`url(data:font/opentype;base64,${btoa(A)});`,D=`@font-face {font-family:"${v}";src:${R}}`;this.insertRule(D);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const k of[t.loadedName,v]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=k,P.append(L)}this._document.body.append(P),p(v,()=>{P.remove(),e.complete()})}}Hc=new WeakMap;class v8{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${l8(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){Ot(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}}const bg={DATA:1,ERROR:2},qe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function MM(){}function ui(i){if(i instanceof Ma||i instanceof J_||i instanceof yf||i instanceof CM||i instanceof by||i instanceof n_)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ma(i.message);case"InvalidPDFException":return new J_(i.message);case"MissingPDFException":return new yf(i.message);case"PasswordException":return new CM(i.message,i.code);case"UnexpectedResponseException":return new by(i.message,i.status);case"UnknownErrorException":return new n_(i.message,i.details)}return new n_(i.message,i.toString())}var Bc,fs,sP,oP,rP,zg;class Xd{constructor(t,e,n){M(this,fs);M(this,Bc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",I(this,fs,sP).bind(this),{signal:m(this,Bc).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,s){const a=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:a,data:e,desiredSize:d.desiredSize},s),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:qe.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{$e(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:qe.CANCEL,streamId:a,reason:ui(d)}),p.promise}},n)}destroy(){var t;(t=m(this,Bc))==null||t.abort(),w(this,Bc,null)}}Bc=new WeakMap,fs=new WeakSet,sP=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){I(this,fs,rP).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===bg.DATA)s.resolve(t.data);else if(t.callback===bg.ERROR)s.reject(ui(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:s,callback:bg.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:s,callback:bg.ERROR,callbackId:t.callbackId,reason:ui(l)})});return}if(t.streamId){I(this,fs,oP).call(this,t);return}e(t.data)},oP=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(d,p=1,v){if(this.isCancelled)return;const A=this.desiredSize;this.desiredSize-=p,A>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:qe.ENQUEUE,streamId:e,chunk:d},v)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:qe.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){$e(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:qe.ERROR,streamId:e,reason:ui(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qe.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qe.START_COMPLETE,streamId:e,reason:ui(d)})})},rP=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,a=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case qe.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(ui(t.reason));break;case qe.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(ui(t.reason));break;case qe.PULL:if(!u){a.postMessage({sourceName:n,targetName:s,stream:qe.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||MM).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qe.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qe.PULL_COMPLETE,streamId:e,reason:ui(d)})});break;case qe.ENQUEUE:if($e(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case qe.CLOSE:if($e(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),I(this,fs,zg).call(this,l,e);break;case qe.ERROR:$e(l,"error should have stream controller"),l.controller.error(ui(t.reason)),I(this,fs,zg).call(this,l,e);break;case qe.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(ui(t.reason)),I(this,fs,zg).call(this,l,e);break;case qe.CANCEL:if(!u)break;const h=ui(t.reason);Promise.try(u.onCancel||MM,h).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qe.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qe.CANCEL_COMPLETE,streamId:e,reason:ui(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},zg=async function(t,e){var n,s,a;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var $f;class aP{constructor({enableHWA:t=!1}){M(this,$f,!1);w(this,$f,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,$f)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){fe("Abstract method `_createCanvas` called.")}}$f=new WeakMap;class A8 extends aP{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class lP{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class uP extends lP{async _fetch(t){const e=await h0(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):c0(e)}}class cP{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,a){return"none"}destroy(t=!1){}}var Ml,Gc,$o,Ko,Nn,Il,Nl,ut,Rn,$d,rc,qg,ac,hP,yS,lc,Kd,Jd,vS,Wd;class _8 extends cP{constructor({docId:e,ownerDocument:n=globalThis.document}){super();M(this,ut);M(this,Ml);M(this,Gc);M(this,$o);M(this,Ko);M(this,Nn);M(this,Il);M(this,Nl,0);w(this,Ko,e),w(this,Nn,n)}addFilter(e){if(!e)return"none";let n=m(this,ut,Rn).get(e);if(n)return n;const[s,a,l]=I(this,ut,qg).call(this,e),u=e.length===1?s:`${s}${a}${l}`;if(n=m(this,ut,Rn).get(u),n)return m(this,ut,Rn).set(e,n),n;const h=`g_${m(this,Ko)}_transfer_map_${Bn(this,Nl)._++}`,d=I(this,ut,ac).call(this,h);m(this,ut,Rn).set(e,d),m(this,ut,Rn).set(u,d);const p=I(this,ut,lc).call(this,h);return I(this,ut,Jd).call(this,s,a,l,p),d}addHCMFilter(e,n){var E;const s=`${e}-${n}`,a="base";let l=m(this,ut,$d).get(a);if((l==null?void 0:l.key)===s||(l?((E=l.filter)==null||E.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},m(this,ut,$d).set(a,l)),!e||!n))return l.url;const u=I(this,ut,Wd).call(this,e);e=vt.makeHexColor(...u);const h=I(this,ut,Wd).call(this,n);if(n=vt.makeHexColor(...h),m(this,ut,rc).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return l.url;const d=new Array(256);for(let C=0;C<=255;C++){const x=C/255;d[C]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const p=d.join(","),v=`g_${m(this,Ko)}_hcm_filter`,A=l.filter=I(this,ut,lc).call(this,v);I(this,ut,Jd).call(this,p,p,p,A),I(this,ut,yS).call(this,A);const T=(C,x)=>{const R=u[C]/255,D=h[C]/255,P=new Array(x+1);for(let k=0;k<=x;k++)P[k]=R+k/x*(D-R);return P.join(",")};return I(this,ut,Jd).call(this,T(0,5),T(1,5),T(2,5),A),l.url=I(this,ut,ac).call(this,v),l.url}addAlphaFilter(e){let n=m(this,ut,Rn).get(e);if(n)return n;const[s]=I(this,ut,qg).call(this,[e]),a=`alpha_${s}`;if(n=m(this,ut,Rn).get(a),n)return m(this,ut,Rn).set(e,n),n;const l=`g_${m(this,Ko)}_alpha_map_${Bn(this,Nl)._++}`,u=I(this,ut,ac).call(this,l);m(this,ut,Rn).set(e,u),m(this,ut,Rn).set(a,u);const h=I(this,ut,lc).call(this,l);return I(this,ut,vS).call(this,s,h),u}addLuminosityFilter(e){let n=m(this,ut,Rn).get(e||"luminosity");if(n)return n;let s,a;if(e?([s]=I(this,ut,qg).call(this,[e]),a=`luminosity_${s}`):a="luminosity",n=m(this,ut,Rn).get(a),n)return m(this,ut,Rn).set(e,n),n;const l=`g_${m(this,Ko)}_luminosity_map_${Bn(this,Nl)._++}`,u=I(this,ut,ac).call(this,l);m(this,ut,Rn).set(e,u),m(this,ut,Rn).set(a,u);const h=I(this,ut,lc).call(this,l);return I(this,ut,hP).call(this,h),e&&I(this,ut,vS).call(this,s,h),u}addHighlightHCMFilter(e,n,s,a,l){var D;const u=`${n}-${s}-${a}-${l}`;let h=m(this,ut,$d).get(e);if((h==null?void 0:h.key)===u||(h?((D=h.filter)==null||D.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},m(this,ut,$d).set(e,h)),!n||!s))return h.url;const[d,p]=[n,s].map(I(this,ut,Wd).bind(this));let v=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),A=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[T,E]=[a,l].map(I(this,ut,Wd).bind(this));A<v&&([v,A,T,E]=[A,v,E,T]),m(this,ut,rc).style.color="";const C=(P,k,L)=>{const G=new Array(256),F=(A-v)/L,$=P/255,X=(k-P)/(255*L);let et=0;for(let nt=0;nt<=L;nt++){const mt=Math.round(v+nt*F),Tt=$+nt*X;for(let pt=et;pt<=mt;pt++)G[pt]=Tt;et=mt+1}for(let nt=et;nt<256;nt++)G[nt]=G[et-1];return G.join(",")},x=`g_${m(this,Ko)}_hcm_${e}_filter`,R=h.filter=I(this,ut,lc).call(this,x);return I(this,ut,yS).call(this,R),I(this,ut,Jd).call(this,C(T[0],E[0],5),C(T[1],E[1],5),C(T[2],E[2],5),R),h.url=I(this,ut,ac).call(this,x),h.url}destroy(e=!1){var n,s,a,l;e&&((n=m(this,Il))!=null&&n.size)||((s=m(this,$o))==null||s.parentNode.parentNode.remove(),w(this,$o,null),(a=m(this,Gc))==null||a.clear(),w(this,Gc,null),(l=m(this,Il))==null||l.clear(),w(this,Il,null),w(this,Nl,0))}}Ml=new WeakMap,Gc=new WeakMap,$o=new WeakMap,Ko=new WeakMap,Nn=new WeakMap,Il=new WeakMap,Nl=new WeakMap,ut=new WeakSet,Rn=function(){return m(this,Gc)||w(this,Gc,new Map)},$d=function(){return m(this,Il)||w(this,Il,new Map)},rc=function(){if(!m(this,$o)){const e=m(this,Nn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=m(this,Nn).createElementNS(ko,"svg");s.setAttribute("width",0),s.setAttribute("height",0),w(this,$o,m(this,Nn).createElementNS(ko,"defs")),e.append(s),s.append(m(this,$o)),m(this,Nn).body.append(e)}return m(this,$o)},qg=function(e){if(e.length===1){const d=e[0],p=new Array(256);for(let A=0;A<256;A++)p[A]=d[A]/255;const v=p.join(",");return[v,v,v]}const[n,s,a]=e,l=new Array(256),u=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=n[d]/255,u[d]=s[d]/255,h[d]=a[d]/255;return[l.join(","),u.join(","),h.join(",")]},ac=function(e){if(m(this,Ml)===void 0){w(this,Ml,"");const n=m(this,Nn).URL;n!==m(this,Nn).baseURI&&(d0(n)?Ot('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,Ml,n.split("#",1)[0]))}return`url(${m(this,Ml)}#${e})`},hP=function(e){const n=m(this,Nn).createElementNS(ko,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},yS=function(e){const n=m(this,Nn).createElementNS(ko,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},lc=function(e){const n=m(this,Nn).createElementNS(ko,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),m(this,ut,rc).append(n),n},Kd=function(e,n,s){const a=m(this,Nn).createElementNS(ko,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),e.append(a)},Jd=function(e,n,s,a){const l=m(this,Nn).createElementNS(ko,"feComponentTransfer");a.append(l),I(this,ut,Kd).call(this,l,"feFuncR",e),I(this,ut,Kd).call(this,l,"feFuncG",n),I(this,ut,Kd).call(this,l,"feFuncB",s)},vS=function(e,n){const s=m(this,Nn).createElementNS(ko,"feComponentTransfer");n.append(s),I(this,ut,Kd).call(this,s,"feFuncA",e)},Wd=function(e){return m(this,ut,rc).style.color=e,nE(getComputedStyle(m(this,ut,rc)).getPropertyValue("color"))};class dP{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class fP extends dP{async _fetch(t){const e=await h0(t,"arraybuffer");return new Uint8Array(e)}}Un&&Ot("Please use the `legacy` build in Node.js environments.");async function pP(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class S8 extends cP{}class T8 extends aP{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class E8 extends lP{async _fetch(t){return pP(t)}}class b8 extends dP{async _fetch(t){return pP(t)}}const kn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function AS(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class sE{getPattern(){fe("Abstract method `getPattern` called.")}}class C8 extends sE{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let a;if(s===kn.STROKE||s===kn.FILL){const l=e.current.getClippedPathBoundingBox(s,be(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",u,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=vt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),AS(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(d.canvas,"no-repeat");const v=new DOMMatrix(n);a.setTransform(v)}else AS(t,this._bbox),a=this._createGradient(t);return a}}function o_(i,t,e,n,s,a,l,u){const h=t.coords,d=t.colors,p=i.data,v=i.width*4;let A;h[e+1]>h[n+1]&&(A=e,e=n,n=A,A=a,a=l,l=A),h[n+1]>h[s+1]&&(A=n,n=s,s=A,A=l,l=u,u=A),h[e+1]>h[n+1]&&(A=e,e=n,n=A,A=a,a=l,l=A);const T=(h[e]+t.offsetX)*t.scaleX,E=(h[e+1]+t.offsetY)*t.scaleY,C=(h[n]+t.offsetX)*t.scaleX,x=(h[n+1]+t.offsetY)*t.scaleY,R=(h[s]+t.offsetX)*t.scaleX,D=(h[s+1]+t.offsetY)*t.scaleY;if(E>=D)return;const P=d[a],k=d[a+1],L=d[a+2],G=d[l],F=d[l+1],$=d[l+2],X=d[u],et=d[u+1],nt=d[u+2],mt=Math.round(E),Tt=Math.round(D);let pt,Dt,B,J,ot,Et,Rt,O;for(let Q=mt;Q<=Tt;Q++){if(Q<x){const At=Q<E?0:(E-Q)/(E-x);pt=T-(T-C)*At,Dt=P-(P-G)*At,B=k-(k-F)*At,J=L-(L-$)*At}else{let At;Q>D?At=1:x===D?At=0:At=(x-Q)/(x-D),pt=C-(C-R)*At,Dt=G-(G-X)*At,B=F-(F-et)*At,J=$-($-nt)*At}let it;Q<E?it=0:Q>D?it=1:it=(E-Q)/(E-D),ot=T-(T-R)*it,Et=P-(P-X)*it,Rt=k-(k-et)*it,O=L-(L-nt)*it;const lt=Math.round(Math.min(pt,ot)),xt=Math.round(Math.max(pt,ot));let St=v*Q+lt*4;for(let At=lt;At<=xt;At++)it=(pt-At)/(pt-ot),it<0?it=0:it>1&&(it=1),p[St++]=Dt-(Dt-Et)*it|0,p[St++]=B-(B-Rt)*it|0,p[St++]=J-(J-O)*it|0,p[St++]=255}}function w8(i,t,e){const n=t.coords,s=t.colors;let a,l;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,d=u-1;for(a=0;a<h;a++){let p=a*u;for(let v=0;v<d;v++,p++)o_(i,e,n[p],n[p+1],n[p+u],s[p],s[p+1],s[p+u]),o_(i,e,n[p+u+1],n[p+1],n[p+u],s[p+u+1],s[p+1],s[p+u])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)o_(i,e,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class x8 extends sE{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,v=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),A=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),T=d/v,E=p/A,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/T,scaleY:1/E},x=v+4,R=A+4,D=n.getCanvas("mesh",x,R),P=D.context,k=P.createImageData(v,A);if(e){const G=k.data;for(let F=0,$=G.length;F<$;F+=4)G[F]=e[0],G[F+1]=e[1],G[F+2]=e[2],G[F+3]=255}for(const G of this._figures)w8(k,G,C);return P.putImageData(k,2,2),{canvas:D.canvas,offsetX:u-2*T,offsetY:h-2*E,scaleX:T,scaleY:E}}getPattern(t,e,n,s){AS(t,this._bbox);let a;if(s===kn.SHADING)a=vt.singularValueDecompose2dScale(be(t));else if(a=vt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const u=vt.singularValueDecompose2dScale(this.matrix);a=[a[0]*u[0],a[1]*u[1]]}const l=this._createMeshCanvas(a,s===kn.SHADING?null:this._background,e.cachedCanvases);return s!==kn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class R8 extends sE{getPattern(){return"hotpink"}}function M8(i){switch(i[0]){case"RadialAxial":return new C8(i);case"Mesh":return new x8(i);case"Dummy":return new R8}throw new Error(`Unknown IR type: ${i[0]}`)}const IM={COLORED:1,UNCOLORED:2},Vy=class Vy{constructor(t,e,n,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:d}=this;h=Math.abs(h),d=Math.abs(d),u0("TilingType: "+a);const p=e[0],v=e[1],A=e[2],T=e[3],E=A-p,C=T-v,x=vt.singularValueDecompose2dScale(this.matrix),R=vt.singularValueDecompose2dScale(this.baseTransform),D=x[0]*R[0],P=x[1]*R[1];let k=E,L=C,G=!1,F=!1;const $=Math.ceil(h*D),X=Math.ceil(d*P),et=Math.ceil(E*D),nt=Math.ceil(C*P);$>=et?k=h:G=!0,X>=nt?L=d:F=!0;const mt=this.getSizeAndScale(k,this.ctx.canvas.width,D),Tt=this.getSizeAndScale(L,this.ctx.canvas.height,P),pt=t.cachedCanvases.getCanvas("pattern",mt.size,Tt.size),Dt=pt.context,B=u.createCanvasGraphics(Dt);if(B.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(B,s,l),Dt.translate(-mt.scale*p,-Tt.scale*v),B.transform(mt.scale,0,0,Tt.scale,0,0),Dt.save(),this.clipBbox(B,p,v,A,T),B.baseTransform=be(B.ctx),B.executeOperatorList(n),B.endDrawing(),Dt.restore(),G||F){const J=pt.canvas;G&&(k=h),F&&(L=d);const ot=this.getSizeAndScale(k,this.ctx.canvas.width,D),Et=this.getSizeAndScale(L,this.ctx.canvas.height,P),Rt=ot.size,O=Et.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",Rt,O),it=Q.context,lt=G?Math.floor(E/h):0,xt=F?Math.floor(C/d):0;for(let St=0;St<=lt;St++)for(let At=0;At<=xt;At++)it.drawImage(J,Rt*St,O*At,Rt,O,0,0,Rt,O);return{canvas:Q.canvas,scaleX:ot.scale,scaleY:Et.scale,offsetX:p,offsetY:v}}return{canvas:pt.canvas,scaleX:mt.scale,scaleY:Tt.scale,offsetX:p,offsetY:v}}getSizeAndScale(t,e,n){const s=Math.max(Vy.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=s?a=s:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,s,a){const l=s-e,u=a-n;t.ctx.rect(e,n,l,u),t.current.updateRectMinMax(be(t.ctx),[e,n,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,a=t.current;switch(e){case IM.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,a.fillColor=l.fillStyle,a.strokeColor=l.strokeStyle;break;case IM.UNCOLORED:const u=vt.makeHexColor(n[0],n[1],n[2]);s.fillStyle=u,s.strokeStyle=u,a.fillColor=u,a.strokeColor=u;break;default:throw new e8(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let a=n;s!==kn.SHADING&&(a=vt.transform(a,e.baseTransform),this.matrix&&(a=vt.transform(a,this.matrix)));const l=this.createPatternCanvas(e);let u=new DOMMatrix(a);u=u.translate(l.offsetX,l.offsetY),u=u.scale(1/l.scaleX,1/l.scaleY);const h=t.createPattern(l.canvas,"repeat");return h.setTransform(u),h}};Ct(Vy,"MAX_PATTERN_SIZE",3e3);let _S=Vy;function I8({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const u=Wn.isLittleEndian?4278190080:255,[h,d]=l?[a,u]:[u,a],p=n>>3,v=n&7,A=i.length;e=new Uint32Array(e.buffer);let T=0;for(let E=0;E<s;E++){for(const x=t+p;t<x;t++){const R=t<A?i[t]:255;e[T++]=R&128?d:h,e[T++]=R&64?d:h,e[T++]=R&32?d:h,e[T++]=R&16?d:h,e[T++]=R&8?d:h,e[T++]=R&4?d:h,e[T++]=R&2?d:h,e[T++]=R&1?d:h}if(v===0)continue;const C=t<A?i[t++]:255;for(let x=0;x<v;x++)e[T++]=C&1<<7-x?d:h}return{srcPos:t,destPos:T}}const NM=16,DM=100,N8=15,PM=10,LM=1e3,pi=16;function D8(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,a,l,u,h){t.transform(n,s,a,l,u,h),this.__originalTransform(n,s,a,l,u,h)},i.setTransform=function(n,s,a,l,u,h){t.setTransform(n,s,a,l,u,h),this.__originalSetTransform(n,s,a,l,u,h)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,a,l,u){t.bezierCurveTo(e,n,s,a,l,u),this.__originalBezierCurveTo(e,n,s,a,l,u)},i.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class P8{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Cg(i,t,e,n,s,a,l,u,h,d){const[p,v,A,T,E,C]=be(i);if(v===0&&A===0){const D=l*p+E,P=Math.round(D),k=u*T+C,L=Math.round(k),G=(l+h)*p+E,F=Math.abs(Math.round(G)-P)||1,$=(u+d)*T+C,X=Math.abs(Math.round($)-L)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(T),P,L),i.drawImage(t,e,n,s,a,0,0,F,X),i.setTransform(p,v,A,T,E,C),[F,X]}if(p===0&&T===0){const D=u*A+E,P=Math.round(D),k=l*v+C,L=Math.round(k),G=(u+d)*A+E,F=Math.abs(Math.round(G)-P)||1,$=(l+h)*v+C,X=Math.abs(Math.round($)-L)||1;return i.setTransform(0,Math.sign(v),Math.sign(A),0,P,L),i.drawImage(t,e,n,s,a,0,0,X,F),i.setTransform(p,v,A,T,E,C),[X,F]}i.drawImage(t,e,n,s,a,l,u,h,d);const x=Math.hypot(p,v),R=Math.hypot(A,T);return[x*h,R*d]}function L8(i){const{width:t,height:e}=i;if(t>LM||e>LM)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let l=new Uint8Array(a*(e+1)),u,h,d;const p=t+7&-8;let v=new Uint8Array(p*e),A=0;for(const R of i.data){let D=128;for(;D>0;)v[A++]=R&D?0:255,D>>=1}let T=0;for(A=0,v[A]!==0&&(l[0]=1,++T),h=1;h<t;h++)v[A]!==v[A+1]&&(l[h]=v[A]?2:1,++T),A++;for(v[A]!==0&&(l[h]=2,++T),u=1;u<e;u++){A=u*p,d=u*a,v[A-p]!==v[A]&&(l[d]=v[A]?1:8,++T);let R=(v[A]?4:0)+(v[A-p]?8:0);for(h=1;h<t;h++)R=(R>>2)+(v[A+1]?4:0)+(v[A-p+1]?8:0),s[R]&&(l[d+h]=s[R],++T),A++;if(v[A-p]!==v[A]&&(l[d+h]=v[A]?2:4,++T),T>n)return null}for(A=p*(e-1),d=u*a,v[A]!==0&&(l[d]=8,++T),h=1;h<t;h++)v[A]!==v[A+1]&&(l[d+h]=v[A]?4:8,++T),A++;if(v[A]!==0&&(l[d+h]=4,++T),T>n)return null;const E=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(u=0;T&&u<=e;u++){let R=u*a;const D=R+t;for(;R<D&&!l[R];)R++;if(R===D)continue;C.moveTo(R%a,u);const P=R;let k=l[R];do{const L=E[k];do R+=L;while(!l[R]);const G=l[R];G!==5&&G!==10?(k=G,l[R]=0):(k=G&51*k>>4,l[R]&=k>>2|k<<2),C.lineTo(R%a,R/a|0),l[R]||--T}while(P!==R);--u}return v=null,l=null,function(R){R.save(),R.scale(1/t,-1/e),R.translate(0,-e),R.fill(C),R.beginPath(),R.restore()}}class kM{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=bD,this.textMatrixScale=1,this.fontMatrix=K_,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=xn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=vt.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=vt.applyTransform(e,t),s=vt.applyTransform(e.slice(2),t),a=vt.applyTransform([e[0],e[3]],t),l=vt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],a[0],l[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],l[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],l[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],l[1])}updateScalingPathMinMax(t,e){vt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,a,l,u,h,d,p){const v=vt.bezierBoundingBox(e,n,s,a,l,u,h,d,p);p||this.updateRectMinMax(t,v)}getPathBoundingBox(t=kn.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===kn.STROKE){e||fe("Stroke bounding box must include transform.");const s=vt.singularValueDecompose2dScale(e),a=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;n[0]-=a,n[1]-=l,n[2]+=a,n[3]+=l}return n}updateClipFromPath(){const t=vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=kn.FILL,e=null){return vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function UM(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%pi,a=(e-s)/pi,l=s===0?a:a+1,u=i.createImageData(n,pi);let h=0,d;const p=t.data,v=u.data;let A,T,E,C;if(t.kind===Lg.GRAYSCALE_1BPP){const x=p.byteLength,R=new Uint32Array(v.buffer,0,v.byteLength>>2),D=R.length,P=n+7>>3,k=4294967295,L=Wn.isLittleEndian?4278190080:255;for(A=0;A<l;A++){for(E=A<a?pi:s,d=0,T=0;T<E;T++){const G=x-h;let F=0;const $=G>P?n:G*8-7,X=$&-8;let et=0,nt=0;for(;F<X;F+=8)nt=p[h++],R[d++]=nt&128?k:L,R[d++]=nt&64?k:L,R[d++]=nt&32?k:L,R[d++]=nt&16?k:L,R[d++]=nt&8?k:L,R[d++]=nt&4?k:L,R[d++]=nt&2?k:L,R[d++]=nt&1?k:L;for(;F<$;F++)et===0&&(nt=p[h++],et=128),R[d++]=nt&et?k:L,et>>=1}for(;d<D;)R[d++]=0;i.putImageData(u,0,A*pi)}}else if(t.kind===Lg.RGBA_32BPP){for(T=0,C=n*pi*4,A=0;A<a;A++)v.set(p.subarray(h,h+C)),h+=C,i.putImageData(u,0,T),T+=pi;A<l&&(C=n*s*4,v.set(p.subarray(h,h+C)),i.putImageData(u,0,T))}else if(t.kind===Lg.RGB_24BPP)for(E=pi,C=n*E,A=0;A<l;A++){for(A>=a&&(E=s,C=n*E),d=0,T=C;T--;)v[d++]=p[h++],v[d++]=p[h++],v[d++]=p[h++],v[d++]=255;i.putImageData(u,0,A*pi)}else throw new Error(`bad image kind: ${t.kind}`)}function OM(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%pi,a=(e-s)/pi,l=s===0?a:a+1,u=i.createImageData(n,pi);let h=0;const d=t.data,p=u.data;for(let v=0;v<l;v++){const A=v<a?pi:s;({srcPos:h}=I8({src:d,srcPos:h,dest:p,width:n,height:A,nonBlackColor:0})),i.putImageData(u,0,v*pi)}}function Ud(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function wg(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Un){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function FM(i,t){if(t)return!0;const e=vt.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Ia.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const k8=["butt","round","square"],U8=["miter","round","bevel"],O8={},VM={};var Hs,SS,TS,ES;const uE=class uE{constructor(t,e,n,s,a,{optionalContentConfig:l,markedContentStack:u=null},h,d){M(this,Hs);this.ctx=t,this.current=new kM(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new P8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...be(this.compositeCtx))}this.ctx.save(),wg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=be(this.ctx)}executeOperatorList(t,e,n,s){const a=t.argsArray,l=t.fnArray;let u=e||0;const h=a.length;if(h===u)return u;const d=h-u>PM&&typeof n=="function",p=d?Date.now()+N8:0;let v=0;const A=this.commonObjs,T=this.objs;let E;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(E=l[u],E!==Ts.dependency)this[E].apply(this,a[u]);else for(const C of a[u]){const x=C.startsWith("g_")?A:T;if(!x.has(C))return x.get(C,n),u}if(u++,u===h)return u;if(d&&++v>PM){if(Date.now()>p)return n(),u;v=0}}}endDrawing(){I(this,Hs,SS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),I(this,Hs,TS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=s,d="prescale1",p,v;for(;a>2&&u>1||l>2&&h>1;){let A=u,T=h;a>2&&u>1&&(A=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/A),l>2&&h>1&&(T=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/T),p=this.cachedCanvases.getCanvas(d,A,T),v=p.context,v.clearRect(0,0,A,T),v.drawImage(t,0,0,u,h,0,0,A,T),t=p.canvas,u=A,h=T,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,l=this.current.patternFill,u=be(e);let h,d,p,v;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;d=JSON.stringify(l?u:[u.slice(0,4),a]),h=this._cachedBitmapsMap.get($),h||(h=new Map,this._cachedBitmapsMap.set($,h));const X=h.get(d);if(X&&!l){const et=Math.round(Math.min(u[0],u[2])+u[4]),nt=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:X,offsetX:et,offsetY:nt}}p=X}p||(v=this.cachedCanvases.getCanvas("maskCanvas",n,s),OM(v.context,t));let A=vt.transform(u,[1/n,0,0,-1/s,0,0]);A=vt.transform(A,[1,0,0,1,0,-s]);const[T,E,C,x]=vt.getAxialAlignedBoundingBox([0,0,n,s],A),R=Math.round(C-T)||1,D=Math.round(x-E)||1,P=this.cachedCanvases.getCanvas("fillCanvas",R,D),k=P.context,L=T,G=E;k.translate(-L,-G),k.transform(...A),p||(p=this._scaleImage(v.canvas,Xs(k)),p=p.img,h&&l&&h.set(d,p)),k.imageSmoothingEnabled=FM(be(k),t.interpolate),Cg(k,p,0,0,p.width,p.height,0,0,n,s),k.globalCompositeOperation="source-in";const F=vt.transform(Xs(k),[1,0,0,1,-L,-G]);return k.fillStyle=l?a.getPattern(e,this,F,kn.FILL):a,k.fillRect(0,0,n,s),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(d,P.canvas)),{canvas:P.canvas,offsetX:Math.round(L),offsetY:Math.round(G)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=k8[t]}setLineJoin(t){this.ctx.lineJoin=U8[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const a=this.ctx;a.setTransform(...be(this.suspendedCtx)),Ud(this.suspendedCtx,a),D8(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ud(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const a=s[0],l=s[1],u=s[2]-a,h=s[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,a,l,u,h,d,p,v){let A=t.canvas,T=h-p,E=d-v;if(l){const x=vt.makeHexColor(...l);if(T<0||E<0||T+n>A.width||E+s>A.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,s),D=R.context;D.drawImage(A,-T,-E),D.globalCompositeOperation="destination-atop",D.fillStyle=x,D.fillRect(0,0,n,s),D.globalCompositeOperation="source-over",A=R.canvas,T=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(T,E,n,s),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(T,E,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(h,d,n,s),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(A,T,E,n,s,h,d,n,s),e.restore()}save(){this.inSMaskMode?(Ud(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ud(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,a,l){this.ctx.transform(t,e,n,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,a=this.current;let l=a.x,u=a.y,h,d;const p=be(s),v=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,A=v?n.slice(0):null;for(let T=0,E=0,C=t.length;T<C;T++)switch(t[T]|0){case Ts.rectangle:l=e[E++],u=e[E++];const x=e[E++],R=e[E++],D=l+x,P=u+R;s.moveTo(l,u),x===0||R===0?s.lineTo(D,P):(s.lineTo(D,u),s.lineTo(D,P),s.lineTo(l,P)),v||a.updateRectMinMax(p,[l,u,D,P]),s.closePath();break;case Ts.moveTo:l=e[E++],u=e[E++],s.moveTo(l,u),v||a.updatePathMinMax(p,l,u);break;case Ts.lineTo:l=e[E++],u=e[E++],s.lineTo(l,u),v||a.updatePathMinMax(p,l,u);break;case Ts.curveTo:h=l,d=u,l=e[E+4],u=e[E+5],s.bezierCurveTo(e[E],e[E+1],e[E+2],e[E+3],l,u),a.updateCurvePathMinMax(p,h,d,e[E],e[E+1],e[E+2],e[E+3],l,u,A),E+=6;break;case Ts.curveTo2:h=l,d=u,s.bezierCurveTo(l,u,e[E],e[E+1],e[E+2],e[E+3]),a.updateCurvePathMinMax(p,h,d,l,u,e[E],e[E+1],e[E+2],e[E+3],A),l=e[E+2],u=e[E+3],E+=4;break;case Ts.curveTo3:h=l,d=u,l=e[E+2],u=e[E+3],s.bezierCurveTo(e[E],e[E+1],l,u,l,u),a.updateCurvePathMinMax(p,h,d,e[E],e[E+1],l,u,l,u,A),E+=4;break;case Ts.closePath:s.closePath();break}v&&a.updateScalingPathMinMax(p,A),a.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,Xs(e),kn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let a=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,Xs(e),kn.FILL),a=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=O8}eoClip(){this.pendingClip=VM}beginText(){this.current.textMatrix=bD,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,s=e.getTransform().invertSelf();for(const{transform:a,x:l,y:u,fontSize:h,path:d}of t)n.addPath(d,new DOMMatrix(a).preMultiplySelf(s).translate(l,u).scale(h,-h));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var p;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||K_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ot("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const a=n.loadedName||"sans-serif",l=((p=n.systemFontInfo)==null?void 0:p.css)||`"${a}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const h=n.italic?"italic":"normal";let d=e;e<NM?d=NM:e>DM&&(d=DM),this.current.fontSizeScale=e/d,this.ctx.font=`${h} ${u} ${d}px ${l}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,a,l){this.current.textMatrix=[t,e,n,s,a,l],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s,a){const l=this.ctx,u=this.current,h=u.font,d=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,v=d&xn.FILL_STROKE_MASK,A=!!(d&xn.ADD_TO_PATH_FLAG),T=u.patternFill&&!h.missingFile,E=u.patternStroke&&!h.missingFile;let C;if((h.disableFontFace||A||T||E)&&(C=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||T||E){if(l.save(),l.translate(e,n),l.scale(p,-p),v===xn.FILL||v===xn.FILL_STROKE)if(s){const x=l.getTransform();l.setTransform(...s),l.fill(I(this,Hs,ES).call(this,C,x,s))}else l.fill(C);if(v===xn.STROKE||v===xn.FILL_STROKE)if(a){const x=l.getTransform();l.setTransform(...a),l.stroke(I(this,Hs,ES).call(this,C,x,a))}else l.lineWidth/=p,l.stroke(C);l.restore()}else(v===xn.FILL||v===xn.FILL_STROKE)&&l.fillText(t,e,n),(v===xn.STROKE||v===xn.FILL_STROKE)&&l.strokeText(t,e,n);A&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:be(l),x:e,y:n,fontSize:p,path:C})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Bt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const a=this.ctx,l=e.fontSizeScale,u=e.charSpacing,h=e.wordSpacing,d=e.fontDirection,p=e.textHScale*d,v=t.length,A=n.vertical,T=A?1:-1,E=n.defaultVMetrics,C=s*e.fontMatrix[0],x=e.textRenderingMode===xn.FILL&&!n.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),d>0?a.scale(p,-1):a.scale(p,1);let R,D;if(e.patternFill){a.save();const F=e.fillColor.getPattern(a,this,Xs(a),kn.FILL);R=be(a),a.restore(),a.fillStyle=F}if(e.patternStroke){a.save();const F=e.strokeColor.getPattern(a,this,Xs(a),kn.STROKE);D=be(a),a.restore(),a.strokeStyle=F}let P=e.lineWidth;const k=e.textMatrixScale;if(k===0||P===0){const F=e.textRenderingMode&xn.FILL_STROKE_MASK;(F===xn.STROKE||F===xn.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=k;if(l!==1&&(a.scale(l,l),P/=l),a.lineWidth=P,n.isInvalidPDFjsFont){const F=[];let $=0;for(const X of t)F.push(X.unicode),$+=X.width;a.fillText(F.join(""),0,0),e.x+=$*C*p,a.restore(),this.compose();return}let L=0,G;for(G=0;G<v;++G){const F=t[G];if(typeof F=="number"){L+=T*F*s/1e3;continue}let $=!1;const X=(F.isSpace?h:0)+u,et=F.fontChar,nt=F.accent;let mt,Tt,pt=F.width;if(A){const B=F.vmetric||E,J=-(F.vmetric?B[1]:pt*.5)*C,ot=B[2]*C;pt=B?-B[0]:pt,mt=J/l,Tt=(L+ot)/l}else mt=L/l,Tt=0;if(n.remeasure&&pt>0){const B=a.measureText(et).width*1e3/s*l;if(pt<B&&this.isFontSubpixelAAEnabled){const J=pt/B;$=!0,a.save(),a.scale(J,1),mt/=J}else pt!==B&&(mt+=(pt-B)/2e3*s/l)}if(this.contentVisible&&(F.isInFont||n.missingFile)){if(x&&!nt)a.fillText(et,mt,Tt);else if(this.paintChar(et,mt,Tt,R,D),nt){const B=mt+s*nt.offset.x/l,J=Tt-s*nt.offset.y/l;this.paintChar(nt.fontChar,B,J,R,D)}}const Dt=A?pt*C-X*d:pt*C+X*d;L+=Dt,$&&a.restore()}A?e.y-=L:e.x+=L*p,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,a=n.fontSize,l=n.fontDirection,u=s.vertical?1:-1,h=n.charSpacing,d=n.wordSpacing,p=n.textHScale*l,v=n.fontMatrix||K_,A=t.length,T=n.textRenderingMode===xn.INVISIBLE;let E,C,x,R;if(!(T||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(p,l),E=0;E<A;++E){if(C=t[E],typeof C=="number"){R=u*C*a/1e3,this.ctx.translate(R,0),n.x+=R*p;continue}const D=(C.isSpace?d:0)+h,P=s.charProcOperatorList[C.operatorListId];if(!P){Ot(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(a,a),e.transform(...v),this.executeOperatorList(P),this.restore()),x=vt.applyTransform([C.width,0],v)[0]*a+D,e.translate(x,0),n.x+=x*p}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,a,l){this.ctx.rect(n,s,a-n,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||be(this.ctx),a={createCanvasGraphics:l=>new uE(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new _S(t,n,this.ctx,a,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=vt.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=vt.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=M8(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Xs(e),kn.SHADING);const s=Xs(e);if(s){const{width:a,height:l}=e.canvas,[u,h,d,p]=vt.getAxialAlignedBoundingBox([0,0,a,l],s);this.ctx.fillRect(u,h,d-u,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){fe("Should not call beginInlineImage")}beginImageData(){fe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=be(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(be(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||u0("TODO: Support non-isolated groups."),t.knockout&&Ot("Knockout groups not supported.");const n=be(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=vt.getAxialAlignedBoundingBox(t.bbox,be(e));const a=[0,0,e.canvas.width,e.canvas.height];s=vt.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),u=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-l,1),d=Math.max(Math.ceil(s[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,d]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(p,h,d),A=v.context;A.translate(-l,-u),A.transform(...n),t.smask?this.smaskStack.push({canvas:v.canvas,context:A,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,u),e.save()),Ud(e,A),this.ctx=A,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=be(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const a=vt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,s,a){if(I(this,Hs,SS).call(this),wg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const l=e[2]-e[0],u=e[3]-e[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=l,e[3]=u;const[h,d]=vt.singularValueDecompose2dScale(be(this.ctx)),{viewportScale:p}=this,v=Math.ceil(l*this.outputScaleX*p),A=Math.ceil(u*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(v,A);const{canvas:T,context:E}=this.annotationCanvas;this.annotationCanvasMap.set(t,T),this.annotationCanvas.savedCtx=this.ctx,this.ctx=E,this.ctx.save(),this.ctx.setTransform(h,0,0,-d,0,u*d),wg(this.ctx)}else wg(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],l,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new kM(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),I(this,Hs,TS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=L8(t)),s.compiled)){s.compiled(n);return}const a=this._createMaskCanvas(t),l=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,a,l){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const h=be(u);u.transform(e,n,s,a,0,0);const d=this._createMaskCanvas(t);u.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let p=0,v=l.length;p<v;p+=2){const A=vt.transform(h,[e,n,s,a,l[p],l[p+1]]),[T,E]=vt.applyTransform([0,0],A);u.drawImage(d.canvas,T,E)}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const a of t){const{data:l,width:u,height:h,transform:d}=a,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),v=p.context;v.save();const A=this.getObject(l,a);OM(v,A),v.globalCompositeOperation="source-in",v.fillStyle=s?n.getPattern(v,this,Xs(e),kn.FILL):n,v.fillRect(0,0,u,h),v.restore(),e.save(),e.transform(...d),e.scale(1,-1),Cg(e,p.canvas,0,0,u,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Ot("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Ot("Dependent image isn't ready yet");return}const l=a.width,u=a.height,h=[];for(let d=0,p=s.length;d<p;d+=2)h.push({transform:[e,0,0,n,s[d],s[d+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,s),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!Un){const{filter:u}=s;u!=="none"&&u!==""&&(s.filter="none")}s.scale(1/e,-1/n);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,n).context;UM(h,t),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,Xs(s));s.imageSmoothingEnabled=FM(be(s),t.interpolate),Cg(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const a=t.width,l=t.height,h=this.cachedCanvases.getCanvas("inlineImage",a,l).context;UM(h,t),s=this.applyTransferMapsToCanvas(h)}for(const a of e)n.save(),n.transform(...a.transform),n.scale(1,-1),Cg(n,s,a.x,a.y,a.w,a.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===VM?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=be(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:a}=this.ctx.getTransform();let l,u;if(n===0&&s===0){const h=Math.abs(e),d=Math.abs(a);if(h===d)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/d;else{const p=h*t,v=d*t;l=p<1?1/p:1,u=v<1?1/v:1}}else{const h=Math.abs(e*a-n*s),d=Math.hypot(e,n),p=Math.hypot(s,a);if(t===0)l=p/h,u=d/h;else{const v=t*h;l=p>v?p/v:1,u=d>v?d/v:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&a===1){e.stroke();return}const l=e.getLineDash();if(t&&e.save(),e.scale(s,a),l.length>0){const u=Math.max(s,a);e.setLineDash(l.map(h=>h/u)),e.lineDashOffset/=u}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Hs=new WeakSet,SS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},TS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ES=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let bc=uE;for(const i in Ts)bc.prototype[i]!==void 0&&(bc.prototype[Ts[i]]=bc.prototype[i]);var Kf,Jf;class hr{static get workerPort(){return m(this,Kf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");w(this,Kf,t)}static get workerSrc(){return m(this,Jf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");w(this,Jf,t)}}Kf=new WeakMap,Jf=new WeakMap,M(hr,Kf,null),M(hr,Jf,"");var Dl,Wf;class F8{constructor({parsedData:t,rawData:e}){M(this,Dl);M(this,Wf);w(this,Dl,t),w(this,Wf,e)}getRaw(){return m(this,Wf)}get(t){return m(this,Dl).get(t)??null}getAll(){return QT(m(this,Dl))}has(t){return m(this,Dl).has(t)}}Dl=new WeakMap,Wf=new WeakMap;const uc=Symbol("INTERNAL");var Qf,Zf,jf,zc;class V8{constructor(t,{name:e,intent:n,usage:s,rbGroups:a}){M(this,Qf,!1);M(this,Zf,!1);M(this,jf,!1);M(this,zc,!0);w(this,Qf,!!(t&Fi.DISPLAY)),w(this,Zf,!!(t&Fi.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(m(this,jf))return m(this,zc);if(!m(this,zc))return!1;const{print:t,view:e}=this.usage;return m(this,Qf)?(e==null?void 0:e.viewState)!=="OFF":m(this,Zf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==uc&&fe("Internal method `_setVisible` called."),w(this,jf,n),w(this,zc,e)}}Qf=new WeakMap,Zf=new WeakMap,jf=new WeakMap,zc=new WeakMap;var aa,oe,qc,Yc,tp,bS;class H8{constructor(t,e=Fi.DISPLAY){M(this,tp);M(this,aa,null);M(this,oe,new Map);M(this,qc,null);M(this,Yc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,w(this,Yc,t.order);for(const n of t.groups)m(this,oe).set(n.id,new V8(e,n));if(t.baseState==="OFF")for(const n of m(this,oe).values())n._setVisible(uc,!1);for(const n of t.on)m(this,oe).get(n)._setVisible(uc,!0);for(const n of t.off)m(this,oe).get(n)._setVisible(uc,!1);w(this,qc,this.getHash())}}isVisible(t){if(m(this,oe).size===0)return!0;if(!t)return u0("Optional content group not defined."),!0;if(t.type==="OCG")return m(this,oe).has(t.id)?m(this,oe).get(t.id).visible:(Ot(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return I(this,tp,bS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!m(this,oe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(m(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!m(this,oe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!m(this,oe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!m(this,oe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!m(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!m(this,oe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(m(this,oe).get(e).visible)return!1}return!0}return Ot(`Unknown optional content policy ${t.policy}.`),!0}return Ot(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var a;const s=m(this,oe).get(t);if(!s){Ot(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const l of s.rbGroups)for(const u of l)u!==t&&((a=m(this,oe).get(u))==null||a._setVisible(uc,!1,!0));s._setVisible(uc,!!e,!0),w(this,aa,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=m(this,oe).get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!a.visible,e);break}}w(this,aa,null)}get hasInitialVisibility(){return m(this,qc)===null||this.getHash()===m(this,qc)}getOrder(){return m(this,oe).size?m(this,Yc)?m(this,Yc).slice():[...m(this,oe).keys()]:null}getGroups(){return m(this,oe).size>0?QT(m(this,oe)):null}getGroup(t){return m(this,oe).get(t)||null}getHash(){if(m(this,aa)!==null)return m(this,aa);const t=new eP;for(const[e,n]of m(this,oe))t.update(`${e}:${n.visible}`);return w(this,aa,t.hexdigest())}}aa=new WeakMap,oe=new WeakMap,qc=new WeakMap,Yc=new WeakMap,tp=new WeakSet,bS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const a=t[s];let l;if(Array.isArray(a))l=I(this,tp,bS).call(this,a);else if(m(this,oe).has(a))l=m(this,oe).get(a).visible;else return Ot(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class B8{constructor(t,{disableRange:e=!1,disableStream:n=!1}){$e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,(a==null?void 0:a.length)>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});$e(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,a;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(a=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||a.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){$e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new G8(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new z8(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class G8{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=tE(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class z8{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function q8(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=d(p),a(p)}if(e=l(i),e){const p=d(e);return a(p)}if(e=n("filename","i").exec(i),e){e=e[1];let p=u(e);return p=d(p),a(p)}function n(p,v){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function s(p,v){if(p){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const A=new TextDecoder(p,{fatal:!0}),T=c0(v);v=A.decode(T),t=!1}catch{}}return v}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function l(p){const v=[];let A;const T=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=T.exec(p))!==null;){let[,C,x,R]=A;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[x,R]}const E=[];for(let C=0;C<v.length&&C in v;++C){let[x,R]=v[C];R=u(R),x&&(R=unescape(R),C===0&&(R=h(R))),E.push(R)}return E.join("")}function u(p){if(p.startsWith('"')){const v=p.slice(1).split('\\"');for(let A=0;A<v.length;++A){const T=v[A].indexOf('"');T!==-1&&(v[A]=v[A].slice(0,T),v.length=A+1),v[A]=v[A].replaceAll(/\\(.)/g,"$1")}p=v.join('"')}return p}function h(p){const v=p.indexOf("'");if(v===-1)return p;const A=p.slice(0,v),E=p.slice(v+1).replace(/^[^']*'/,"");return s(A,E)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,A,T,E){if(T==="q"||T==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,x){return String.fromCharCode(parseInt(x,16))}),s(A,E);try{E=atob(E)}catch{}return s(A,E)})}return""}function mP(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function f0(i){try{return new URL(i).origin}catch{}return null}function gP({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function yP(i){const t=i.get("Content-Disposition");if(t){let e=q8(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(tE(e))return e}return null}function p0(i,t){return i===404||i===0&&t.startsWith("file:")?new yf('Missing PDF "'+t+'".'):new by(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function vP(i){return i===200||i===206}function AP(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function _P(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ot(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class HM{constructor(t){Ct(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=mP(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Y8(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new X8(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Y8{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,AP(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=f0(a.url),!vP(a.status))throw p0(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:u,suggestedLength:h}=gP({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=yP(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ma("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_P(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class X8{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=s.url;fetch(l,AP(a,this._withCredentials,this._abortController)).then(u=>{const h=f0(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!vP(u.status))throw p0(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:_P(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const r_=200,a_=206;function $8(i){const t=i.response;return typeof t!="string"?t:c0(t).buffer}class K8{constructor({url:t,httpHeaders:e,withCredentials:n}){Ct(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=mP(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=a_):s.expectedStatus=r_,e.responseType="arraybuffer",$e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||r_;if(!(a===r_&&n.expectedStatus===a_)&&a!==n.expectedStatus){n.onError(s.status);return}const u=$8(s);if(a===a_){const h=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:u}):(Ot('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class J8{constructor(t){this._source=t,this._manager=new K8(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return $e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W8(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Q8(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class W8{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=f0(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=gP({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=yP(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=p0(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Q8{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=f0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=p0(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Z8=/^[a-z][a-z0-9\-+.]+:/i;function j8(i){if(Z8.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class tY{constructor(t){this.source=t,this.url=j8(t.url),$e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new eY(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new nY(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class eY{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new yf(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ma("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class nY{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const iY=1e5,li=30,sY=.8;var $M,la,di,ep,np,Pl,Jo,ip,sp,Ll,Xc,$c,ua,Kc,op,Jc,kl,rp,ap,Ul,Ol,lp,ca,Wc,vr,SP,TP,CS,Bi,Yg,wS,EP,bP;const je=class je{constructor({textContentSource:t,container:e,viewport:n}){M(this,vr);M(this,la,Promise.withResolvers());M(this,di,null);M(this,ep,!1);M(this,np,!!(($M=globalThis.FontInspector)!=null&&$M.enabled));M(this,Pl,null);M(this,Jo,null);M(this,ip,0);M(this,sp,0);M(this,Ll,null);M(this,Xc,null);M(this,$c,0);M(this,ua,0);M(this,Kc,Object.create(null));M(this,op,[]);M(this,Jc,null);M(this,kl,[]);M(this,rp,new WeakMap);M(this,ap,null);var h;if(t instanceof ReadableStream)w(this,Jc,t);else if(typeof t=="object")w(this,Jc,new ReadableStream({start(d){d.enqueue(t),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,di,w(this,Xc,e)),w(this,ua,n.scale*(globalThis.devicePixelRatio||1)),w(this,$c,n.rotation),w(this,Jo,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:l,pageY:u}=n.rawDims;w(this,ap,[1,0,0,-1,-l,u+a]),w(this,sp,s),w(this,ip,a),I(h=je,Bi,EP).call(h),pu(e,n),m(this,la).promise.finally(()=>{m(je,Wc).delete(this),w(this,Jo,null),w(this,Kc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Wn.platform;return Bt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{m(this,Ll).read().then(({value:e,done:n})=>{if(n){m(this,la).resolve();return}m(this,Pl)??w(this,Pl,e.lang),Object.assign(m(this,Kc),e.styles),I(this,vr,SP).call(this,e.items),t()},m(this,la).reject)};return w(this,Ll,m(this,Jc).getReader()),m(je,Wc).add(this),t(),m(this,la).promise}update({viewport:t,onBefore:e=null}){var a;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==m(this,$c)&&(e==null||e(),w(this,$c,s),pu(m(this,Xc),{rotation:s})),n!==m(this,ua)){e==null||e(),w(this,ua,n);const l={div:null,properties:null,ctx:I(a=je,Bi,Yg).call(a,m(this,Pl))};for(const u of m(this,kl))l.properties=m(this,rp).get(u),l.div=u,I(this,vr,CS).call(this,l)}}cancel(){var e;const t=new Ma("TextLayer task cancelled.");(e=m(this,Ll))==null||e.cancel(t).catch(()=>{}),w(this,Ll,null),m(this,la).reject(t)}get textDivs(){return m(this,kl)}get textContentItemsStr(){return m(this,op)}static cleanup(){if(!(m(this,Wc).size>0)){m(this,Ul).clear();for(const{canvas:t}of m(this,Ol).values())t.remove();m(this,Ol).clear()}}};la=new WeakMap,di=new WeakMap,ep=new WeakMap,np=new WeakMap,Pl=new WeakMap,Jo=new WeakMap,ip=new WeakMap,sp=new WeakMap,Ll=new WeakMap,Xc=new WeakMap,$c=new WeakMap,ua=new WeakMap,Kc=new WeakMap,op=new WeakMap,Jc=new WeakMap,kl=new WeakMap,rp=new WeakMap,ap=new WeakMap,Ul=new WeakMap,Ol=new WeakMap,lp=new WeakMap,ca=new WeakMap,Wc=new WeakMap,vr=new WeakSet,SP=function(t){var s,a;if(m(this,ep))return;(a=m(this,Jo)).ctx??(a.ctx=I(s=je,Bi,Yg).call(s,m(this,Pl)));const e=m(this,kl),n=m(this,op);for(const l of t){if(e.length>iY){Ot("Ignoring additional textDivs for performance reasons."),w(this,ep,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const u=m(this,di);w(this,di,document.createElement("span")),m(this,di).classList.add("markedContent"),l.id!==null&&m(this,di).setAttribute("id",`${l.id}`),u.append(m(this,di))}else l.type==="endMarkedContent"&&w(this,di,m(this,di).parentNode);continue}n.push(l.str),I(this,vr,TP).call(this,l)}},TP=function(t){var C;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};m(this,kl).push(e);const s=vt.transform(m(this,ap),t.transform);let a=Math.atan2(s[1],s[0]);const l=m(this,Kc)[t.fontName];l.vertical&&(a+=Math.PI/2);let u=m(this,np)&&l.fontSubstitution||l.fontFamily;u=je.fontFamilyMap.get(u)||u;const h=Math.hypot(s[2],s[3]),d=h*I(C=je,Bi,bP).call(C,u,m(this,Pl));let p,v;a===0?(p=s[4],v=s[5]-d):(p=s[4]+d*Math.sin(a),v=s[5]-d*Math.cos(a));const A="calc(var(--scale-factor)*",T=e.style;m(this,di)===m(this,Xc)?(T.left=`${(100*p/m(this,sp)).toFixed(2)}%`,T.top=`${(100*v/m(this,ip)).toFixed(2)}%`):(T.left=`${A}${p.toFixed(2)}px)`,T.top=`${A}${v.toFixed(2)}px)`),T.fontSize=`${A}${(m(je,ca)*h).toFixed(2)}px)`,T.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,m(this,np)&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);x!==R&&Math.max(x,R)/Math.min(x,R)>1.5&&(E=!0)}if(E&&(n.canvasWidth=l.vertical?t.height:t.width),m(this,rp).set(e,n),m(this,Jo).div=e,m(this,Jo).properties=n,I(this,vr,CS).call(this,m(this,Jo)),n.hasText&&m(this,di).append(e),n.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),m(this,di).append(x)}},CS=function(t){var u;const{div:e,properties:n,ctx:s}=t,{style:a}=e;let l="";if(m(je,ca)>1&&(l=`scale(${1/m(je,ca)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=a,{canvasWidth:d,fontSize:p}=n;I(u=je,Bi,wS).call(u,s,p*m(this,ua),h);const{width:v}=s.measureText(e.textContent);v>0&&(l=`scaleX(${d*m(this,ua)/v}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)},Bi=new WeakSet,Yg=function(t=null){let e=m(this,Ol).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,Ol).set(t,e),m(this,lp).set(e,{size:0,family:""})}return e},wS=function(t,e,n){const s=m(this,lp).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},EP=function(){if(m(this,ca)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),w(this,ca,t.getBoundingClientRect().height),t.remove()},bP=function(t,e){const n=m(this,Ul).get(t);if(n)return n;const s=I(this,Bi,Yg).call(this,e);s.canvas.width=s.canvas.height=li,I(this,Bi,wS).call(this,s,li,t);const a=s.measureText("");let l=a.fontBoundingBoxAscent,u=Math.abs(a.fontBoundingBoxDescent);if(l){const p=l/(l+u);return m(this,Ul).set(t,p),s.canvas.width=s.canvas.height=0,p}s.strokeStyle="red",s.clearRect(0,0,li,li),s.strokeText("g",0,0);let h=s.getImageData(0,0,li,li).data;u=0;for(let p=h.length-1-3;p>=0;p-=4)if(h[p]>0){u=Math.ceil(p/4/li);break}s.clearRect(0,0,li,li),s.strokeText("A",0,li),h=s.getImageData(0,0,li,li).data,l=0;for(let p=0,v=h.length;p<v;p+=4)if(h[p]>0){l=li-Math.floor(p/4/li);break}s.canvas.width=s.canvas.height=0;const d=l?l/(l+u):sY;return m(this,Ul).set(t,d),d},M(je,Bi),M(je,Ul,new Map),M(je,Ol,new Map),M(je,lp,new WeakMap),M(je,ca,null),M(je,Wc,new Set);let vf=je;class Af{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(a){var h;if(!a)return;let l=null;const u=a.name;if(u==="#text")l=a.value;else if(Af.shouldBuildText(u))(h=a==null?void 0:a.attributes)!=null&&h.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const d of a.children)s(d)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const oY=65536,rY=100,aY=5e3,lY=Un?T8:A8,uY=Un?E8:uP,cY=Un?S8:_8,hY=Un?b8:fP;function dY(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new xS,{docId:e}=t,n=i.url?fY(i.url):null,s=i.data?pY(i.data):null,a=i.httpHeaders||null,l=i.withCredentials===!0,u=i.password??null,h=i.range instanceof CP?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:oY;let p=i.worker instanceof Cc?i.worker:null;const v=i.verbosity,A=typeof i.docBaseUrl=="string"&&!d0(i.docBaseUrl)?i.docBaseUrl:null,T=typeof i.cMapUrl=="string"?i.cMapUrl:null,E=i.cMapPacked!==!1,C=i.CMapReaderFactory||uY,x=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,R=i.StandardFontDataFactory||hY,D=i.stopAtErrors!==!0,P=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,L=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Un,G=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Un&&(Wn.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,$=typeof i.disableFontFace=="boolean"?i.disableFontFace:Un,X=i.fontExtraProperties===!0,et=i.enableXfa===!0,nt=i.ownerDocument||globalThis.document,mt=i.disableRange===!0,Tt=i.disableStream===!0,pt=i.disableAutoFetch===!0,Dt=i.pdfBug===!0,B=i.CanvasFactory||lY,J=i.FilterFactory||cY,ot=i.enableHWA===!0,Et=h?h.length:i.length??NaN,Rt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Un&&!$,O=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:C===uP&&R===fP&&T&&x&&Gd(T,document.baseURI)&&Gd(x,document.baseURI),Q=null;Q6(v);const it={canvasFactory:new B({ownerDocument:nt,enableHWA:ot}),filterFactory:new J({docId:e,ownerDocument:nt}),cMapReaderFactory:O?null:new C({baseUrl:T,isCompressed:E}),standardFontDataFactory:O?null:new R({baseUrl:x})};if(!p){const St={verbosity:v,port:hr.workerPort};p=St.port?Cc.fromPort(St):new Cc(St),t._worker=p}const lt={docId:e,apiVersion:"4.10.38",data:s,password:u,disableAutoFetch:pt,rangeChunkSize:d,length:Et,docBaseUrl:A,enableXfa:et,evaluatorOptions:{maxImageSize:P,disableFontFace:$,ignoreErrors:D,isEvalSupported:k,isOffscreenCanvasSupported:L,isImageDecoderSupported:G,canvasMaxAreaInBytes:F,fontExtraProperties:X,useSystemFonts:Rt,cMapUrl:O?T:null,standardFontDataUrl:O?x:null}},xt={disableFontFace:$,fontExtraProperties:X,ownerDocument:nt,pdfBug:Dt,styleElement:Q,loadingParams:{disableAutoFetch:pt,enableXfa:et}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const St=p.messageHandler.sendWithPromise("GetDocRequest",lt,s?[s.buffer]:null);let At;if(h)At=new B8(h,{disableRange:mt,disableStream:Tt});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Se;if(Un)if(Gd(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Se=HM}else Se=tY;else Se=Gd(n)?HM:J8;At=new Se({url:n,length:Et,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:mt,disableStream:Tt})}return St.then(Se=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const pe=new Xd(e,Se,p.port),go=new vY(pe,t,At,xt,it);t._transport=go,pe.send("Ready",null)})}).catch(t._capability.reject),t}function fY(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Un&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pY(i){if(Un&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return c0(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function BM(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Hy;const By=class By{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Bn(By,Hy)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};Hy=new WeakMap,M(By,Hy,0);let xS=By;class CP{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mY{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ha,Wo,ls,cc,Xg;class gY{constructor(t,e,n,s=!1){M(this,ls);M(this,ha,null);M(this,Wo,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new xM:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new wP,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new Jp({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=Kr.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:d=null,printAnnotationStorage:p=null,isEditing:v=!1}){var k,L;(k=this._stats)==null||k.time("Overall");const A=this._transport.getRenderingIntent(n,s,p,v),{renderingIntent:T,cacheKey:E}=A;w(this,Wo,!1),I(this,ls,Xg).call(this),u||(u=this._transport.getOptionalContentConfig(T));let C=this._intentStates.get(E);C||(C=Object.create(null),this._intentStates.set(E,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const x=!!(T&Fi.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(A));const R=G=>{var F;C.renderTasks.delete(D),(this._maybeCleanupAfterRender||x)&&w(this,Wo,!0),I(this,ls,cc).call(this,!x),G?(D.capability.reject(G),this._abortOperatorList({intentState:C,reason:G instanceof Error?G:new Error(G)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new MS({callback:R,params:{canvasContext:t,viewport:e,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:d});(C.renderTasks||(C.renderTasks=new Set)).add(D);const P=D.task;return Promise.all([C.displayReadyCapability.promise,u]).then(([G,F])=>{var $;if(this.destroyed){R();return}if(($=this._stats)==null||$.time("Rendering"),!(F.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:G,optionalContentConfig:F}),D.operatorListChanged()}).catch(R),P}getOperatorList({intent:t="display",annotationMode:e=Kr.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var d;function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Af.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function a(){l.read().then(function({value:h,done:d}){if(d){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},s)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),w(this,Wo,!1),I(this,ls,Xg).call(this),Promise.all(t)}cleanup(t=!1){w(this,Wo,!0);const e=I(this,ls,cc).call(this,!1);return t&&e&&this._stats&&(this._stats=new xM),e}_startRenderPage(t,e){var s,a;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&I(this,ls,cc).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:s},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const p=()=>{h.read().then(({value:v,done:A})=>{if(A){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,d),p())},v=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const A of d.renderTasks)A.operatorListChanged();I(this,ls,cc).call(this,!0)}if(d.displayReadyCapability)d.displayReadyCapability.reject(v);else if(d.opListReadCapability)d.opListReadCapability.reject(v);else throw v}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof jT){let s=rY;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ma(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ha=new WeakMap,Wo=new WeakMap,ls=new WeakSet,cc=function(t=!1){if(I(this,ls,Xg).call(this),!m(this,Wo)||this.destroyed)return!1;if(t)return w(this,ha,setTimeout(()=>{w(this,ha,null),I(this,ls,cc).call(this,!1)},aY)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,Wo,!1),!0},Xg=function(){m(this,ha)&&(clearTimeout(m(this,ha)),w(this,ha,null))};var Qo,Gy;class yY{constructor(){M(this,Qo,new Map);M(this,Gy,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};m(this,Gy).then(()=>{for(const[s]of m(this,Qo))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Ot("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}m(this,Qo).set(e,s)}removeEventListener(t,e){const n=m(this,Qo).get(e);n==null||n(),m(this,Qo).delete(e)}terminate(){for(const[,t]of m(this,Qo))t==null||t();m(this,Qo).clear()}}Qo=new WeakMap,Gy=new WeakMap;var zy,Fl,Vl,Qc,$g,Zc,Kg;const Ee=class Ee{constructor({name:t=null,port:e=null,verbosity:n=Z6()}={}){M(this,Qc);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=m(Ee,Vl))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(m(Ee,Vl)||w(Ee,Vl,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Xd("main","worker",t),this._messageHandler.on("ready",function(){}),I(this,Qc,$g).call(this)}_initialize(){if(m(Ee,Fl)||m(Ee,Zc,Kg)){this._setupFakeWorker();return}let{workerSrc:t}=Ee;try{Ee._isSameOrigin(window.location.href,t)||(t=Ee._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Xd("main","worker",e),s=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:a.signal}),n.on("test",u=>{if(a.abort(),this.destroyed||!u){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,I(this,Qc,$g).call(this)}),n.on("ready",u=>{if(a.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{u0("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){m(Ee,Fl)||(Ot("Setting up fake worker."),w(Ee,Fl,!0)),Ee._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new yY;this._port=e;const n=`fake${Bn(Ee,zy)._++}`,s=new Xd(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new Xd(n,n+"_worker",e),I(this,Qc,$g).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=m(Ee,Vl))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=m(this,Vl))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ee(t)}static get workerSrc(){if(hr.workerSrc)return hr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Bt(this,"_setupFakeWorkerGlobal",(async()=>m(this,Zc,Kg)?m(this,Zc,Kg):(await import(this.workerSrc)).WorkerMessageHandler)())}};zy=new WeakMap,Fl=new WeakMap,Vl=new WeakMap,Qc=new WeakSet,$g=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Zc=new WeakSet,Kg=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},M(Ee,Zc),M(Ee,zy,0),M(Ee,Fl,!1),M(Ee,Vl),Un&&(w(Ee,Fl,!0),hr.workerSrc||(hr.workerSrc="./pdf.worker.mjs")),Ee._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Ee._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Cc=Ee;var Zo,so,jc,th,jo,Hl,Qd;class vY{constructor(t,e,n,s,a){M(this,Hl);M(this,Zo,new Map);M(this,so,new Map);M(this,jc,new Map);M(this,th,new Map);M(this,jo,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new wP,this.fontLoader=new y8({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Bt(this,"annotationStorage",new iE)}getRenderingIntent(t,e=Kr.ENABLE,n=null,s=!1,a=!1){let l=Fi.DISPLAY,u=gS;switch(t){case"any":l=Fi.ANY;break;case"display":break;case"print":l=Fi.PRINT;break;default:Ot(`getRenderingIntent - invalid intent: ${t}`)}const h=l&Fi.PRINT&&n instanceof iP?n:this.annotationStorage;switch(e){case Kr.DISABLE:l+=Fi.ANNOTATIONS_DISABLE;break;case Kr.ENABLE:break;case Kr.ENABLE_FORMS:l+=Fi.ANNOTATIONS_FORMS;break;case Kr.ENABLE_STORAGE:l+=Fi.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ot(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=Fi.IS_EDITING),a&&(l+=Fi.OPLIST);const{ids:d,hash:p}=h.modifiedIds,v=[l,u.hash,p];return{renderingIntent:l,cacheKey:v.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,jo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of m(this,so).values())t.push(s._destroy());m(this,so).clear(),m(this,jc).clear(),m(this,th).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,a;this.commonObjs.clear(),this.fontLoader.clear(),m(this,Zo).clear(),this.filterFactory.destroy(),vf.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ma("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{$e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){s.close();return}$e(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:l}=this._fullReader;return(!s||!a)&&(this._lastProgress&&((u=e.onProgress)==null||u.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var d;(d=e.onProgress)==null||d.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{$e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:l,done:u}){if(u){s.close();return}$e(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{a.cancel(l),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new mY(n,this))}),t.on("DocException",n=>{e._capability.reject(ui(n))}),t.on("PasswordRequest",n=>{w(this,jo,Promise.withResolvers());try{if(!e.onPassword)throw ui(n);const s=a=>{a instanceof Error?m(this,jo).reject(a):m(this,jo).resolve({password:a})};e.onPassword(s,n.code)}catch(s){m(this,jo).reject(s)}return m(this,jo).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,so).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,a])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:u,fontExtraProperties:h,pdfBug:d}=this._params;if("error"in a){const T=a.error;Ot(`Error during font loading: ${T}`),this.commonObjs.resolve(n,T);break}const p=d&&((l=globalThis.FontInspector)!=null&&l.enabled)?(T,E)=>globalThis.FontInspector.fontAdded(T,E):null,v=new v8(a,{disableFontFace:u,fontExtraProperties:h,inspectFont:p});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h&&v.data&&(v.data=null),this.commonObjs.resolve(n,v)});break;case"CopyLocalImage":const{imageRef:A}=a;$e(A,"The imageRef must be defined.");for(const T of m(this,so).values())for(const[,E]of T.objs)if((E==null?void 0:E.ref)===A)return E.dataLen?(this.commonObjs.resolve(n,structuredClone(E)),E.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,a,l])=>{var h;if(this.destroyed)return;const u=m(this,so).get(s);if(!u.objs.has(n)){if(u._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(a){case"Image":u.objs.resolve(n,l),(l==null?void 0:l.dataLen)>$6&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ot("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=m(this,jc).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&m(this,th).set(a.refStr,t);const l=new gY(e,a,this,this._params.pdfBug);return m(this,so).set(e,l),l});return m(this,jc).set(e,s),s}getPageIndex(t){return BM(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return I(this,Hl,Qd).call(this,"GetFieldObjects")}hasJSActions(){return I(this,Hl,Qd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return I(this,Hl,Qd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return I(this,Hl,Qd).call(this,"GetOptionalContentConfig").then(e=>new H8(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=m(this,Zo).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var a,l;return{info:s[0],metadata:s[1]?new F8(s[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return m(this,Zo).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of m(this,so).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),m(this,Zo).clear(),this.filterFactory.destroy(!0),vf.cleanup()}}cachedPageNumber(t){if(!BM(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return m(this,th).get(e)??null}}Zo=new WeakMap,so=new WeakMap,jc=new WeakMap,th=new WeakMap,jo=new WeakMap,Hl=new WeakSet,Qd=function(t,e=null){const n=m(this,Zo).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return m(this,Zo).set(t,s),s};const Od=Symbol("INITIAL_DATA");var Mi,up,RS;class wP{constructor(){M(this,up);M(this,Mi,Object.create(null))}get(t,e=null){if(e){const s=I(this,up,RS).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=m(this,Mi)[t];if(!n||n.data===Od)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=m(this,Mi)[t];return!!e&&e.data!==Od}delete(t){const e=m(this,Mi)[t];return!e||e.data===Od?!1:(delete m(this,Mi)[t],!0)}resolve(t,e=null){const n=I(this,up,RS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in m(this,Mi)){const{data:n}=m(this,Mi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}w(this,Mi,Object.create(null))}*[Symbol.iterator](){for(const t in m(this,Mi)){const{data:e}=m(this,Mi)[t];e!==Od&&(yield[t,e])}}}Mi=new WeakMap,up=new WeakSet,RS=function(t){var e;return(e=m(this,Mi))[t]||(e[t]={...Promise.withResolvers(),data:Od})};var da;class AY{constructor(t){M(this,da,null);w(this,da,t),this.onContinue=null}get promise(){return m(this,da).capability.promise}cancel(t=0){m(this,da).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=m(this,da).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=m(this,da);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}da=new WeakMap;var fa,Bl;const rl=class rl{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:v=!1,pageColors:A=null}){M(this,fa,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=v,this.pageColors=A,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new AY(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,h;if(this.cancelled)return;if(this._canvas){if(m(rl,Bl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(rl,Bl).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:a,background:l}=this.params;this.gfx=new bc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,fa)&&(window.cancelAnimationFrame(m(this,fa)),w(this,fa,null)),m(rl,Bl).delete(this._canvas),this.callback(t||new jT(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,fa,window.requestAnimationFrame(()=>{w(this,fa,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(rl,Bl).delete(this._canvas),this.callback())))}};fa=new WeakMap,Bl=new WeakMap,M(rl,Bl,new WeakSet);let MS=rl;const _Y="4.10.38",SY="f9bea397f";function GM(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Fd(i){return Math.max(0,Math.min(255,255*i))}class zM{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Fd(t),[t,t,t]}static G_HTML([t]){const e=GM(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Fd)}static RGB_HTML(t){return`#${t.map(GM).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Fd(1-Math.min(1,t+s)),Fd(1-Math.min(1,n+s)),Fd(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,a=1-e,l=1-n,u=Math.min(s,a,l);return["CMYK",s,a,l,u]}}class TY{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){fe("Abstract method `_createSVG` called.")}}class oE extends TY{_createSVG(t){return document.createElementNS(ko,t)}}class xP{static setupStorage(t,e,n,s,a){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{s.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:a}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}u&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){var v,A;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,a=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:a,linkService:n});const u=a!=="richText",h=t.div;if(h.append(l),t.viewport){const T=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=T}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const T=document.createTextNode(s.value);l.append(T),u&&Af.shouldBuildText(s.name)&&d.push(T)}return{textDivs:d}}const p=[[s,-1,l]];for(;p.length>0;){const[T,E,C]=p.at(-1);if(E+1===T.children.length){p.pop();continue}const x=T.children[++p.at(-1)[1]];if(x===null)continue;const{name:R}=x;if(R==="#text"){const P=document.createTextNode(x.value);d.push(P),C.append(P);continue}const D=(v=x==null?void 0:x.attributes)!=null&&v.xmlns?document.createElementNS(x.attributes.xmlns,R):document.createElement(R);if(C.append(D),x.attributes&&this.setAttributes({html:D,element:x,storage:e,intent:a,linkService:n}),((A=x.children)==null?void 0:A.length)>0)p.push([x,-1,D]);else if(x.value){const P=document.createTextNode(x.value);u&&Af.shouldBuildText(R)&&d.push(P),D.append(P)}}for(const T of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))T.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qp=1e3,EY=9,gu=new WeakSet;function wa(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class bY{static create(t){switch(t.data.annotationType){case Ze.LINK:return new RP(t);case Ze.TEXT:return new CY(t);case Ze.WIDGET:switch(t.data.fieldType){case"Tx":return new wY(t);case"Btn":return t.data.radioButton?new NP(t):t.data.checkBox?new RY(t):new MY(t);case"Ch":return new IY(t);case"Sig":return new xY(t)}return new Au(t);case Ze.POPUP:return new NS(t);case Ze.FREETEXT:return new UP(t);case Ze.LINE:return new DY(t);case Ze.SQUARE:return new PY(t);case Ze.CIRCLE:return new LY(t);case Ze.POLYLINE:return new OP(t);case Ze.CARET:return new UY(t);case Ze.INK:return new rE(t);case Ze.POLYGON:return new kY(t);case Ze.HIGHLIGHT:return new FP(t);case Ze.UNDERLINE:return new OY(t);case Ze.SQUIGGLY:return new FY(t);case Ze.STRIKEOUT:return new VY(t);case Ze.STAMP:return new VP(t);case Ze.FILEATTACHMENT:return new HY(t);default:return new Ve(t)}}}var Gl,eh,nh,cp,IS;const cE=class cE{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){M(this,cp);M(this,Gl,null);M(this,eh,!1);M(this,nh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return cE._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;m(this,Gl)||w(this,Gl,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&I(this,cp,IS).call(this,e),(n=m(this,nh))==null||n.popup.updateEdited(t)}resetEdited(){var t;m(this,Gl)&&(I(this,cp,IS).call(this,m(this,Gl).rect),(t=m(this,nh))==null||t.popup.resetEdited(),w(this,Gl,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof Au||(a.tabIndex=Qp);const{style:l}=a;if(l.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof NS){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:u,height:h}=wa(e.rect);if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(C>0||x>0){const D=`calc(${C}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;l.borderRadius=D}else if(this instanceof NP){const D=`calc(${u}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;l.borderRadius=D}switch(e.borderStyle.style){case kd.SOLID:l.borderStyle="solid";break;case kd.DASHED:l.borderStyle="dashed";break;case kd.BEVELED:Ot("Unimplemented border style: beveled");break;case kd.INSET:Ot("Unimplemented border style: inset");break;case kd.UNDERLINE:l.borderBottomStyle="solid";break}const R=e.borderColor||null;R?(w(this,eh,!0),l.borderColor=vt.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):l.borderWidth=0}const d=vt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:v,pageX:A,pageY:T}=s.rawDims;l.left=`${100*(d[0]-A)/p}%`,l.top=`${100*(d[1]-T)/v}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(l.width=`${100*u/p}%`,l.height=`${100*h/v}%`):this.setRotation(E,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:a,height:l}=wa(this.data.rect);let u,h;t%180===0?(u=100*a/n,h=100*l/s):(u=100*l/n,h=100*a/s),e.style.width=`${u}%`,e.style.height=`${h}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const a=s.detail[e],l=a[0],u=a.slice(1);s.target.style[n]=zM[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:zM[`${l}_rgb`](u)})};return Bt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const a=t[s]||n[s];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,a]of Object.entries(e)){const l=n[s];if(l){const u={detail:{[s]:a},target:t};l(u),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,a]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,x,R,D]=t.subarray(2,6);if(s===C&&a===x&&e===R&&n===D)return}const{style:l}=this.container;let u;if(m(this,eh)){const{borderColor:C,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const h=s-e,d=a-n,{svgFactory:p}=this,v=p.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const A=p.createElement("defs");v.append(A);const T=p.createElement("clipPath"),E=`clippath_${this.data.id}`;T.setAttribute("id",E),T.setAttribute("clipPathUnits","objectBoundingBox"),A.append(T);for(let C=2,x=t.length;C<x;C+=8){const R=t[C],D=t[C+1],P=t[C+2],k=t[C+3],L=p.createElement("rect"),G=(P-e)/h,F=(a-D)/d,$=(R-P)/h,X=(D-k)/d;L.setAttribute("x",G),L.setAttribute("y",F),L.setAttribute("width",$),L.setAttribute("height",X),T.append(L),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${F}" width="${$}" height="${X}"/>`)}m(this,eh)&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(v),this.container.style.clipPath=`url(#${E})`}_createPopup(){const{data:t}=this,e=w(this,nh,new NS({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:a,id:l,exportValues:u}of s){if(a===-1||l===e)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!gu.has(d)){Ot(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:d})}return n}for(const s of document.getElementsByName(t)){const{exportValue:a}=s,l=s.getAttribute("data-element-id");l!==e&&gu.has(s)&&n.push({id:l,exportValue:a,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Gl=new WeakMap,eh=new WeakMap,nh=new WeakMap,cp=new WeakSet,IS=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:h}}}}=this;n==null||n.splice(0,4,...t);const{width:d,height:p}=wa(t);e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*d/a}%`,e.height=`${100*p/l}%`):this.setRotation(s)};let Ve=cE;var Vi,nl,MP,IP;class RP extends Ve{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});M(this,Vi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(s,e.action),a=!0):e.attachment?(I(this,Vi,MP).call(this,s,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(I(this,Vi,IP).call(this,s,e.setOCGState),a=!0):e.dest?(this._bindLink(s,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),a=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&I(this,Vi,nl).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),I(this,Vi,nl).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const l=s.get(a);l&&(e[l]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),I(this,Vi,nl).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),I(this,Vi,nl).call(this),!this._fieldObjects){Ot('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var v;s==null||s();const{fields:a,refs:l,include:u}=n,h=[];if(a.length!==0||l.length!==0){const A=new Set(l);for(const T of a){const E=this._fieldObjects[T]||[];for(const{id:C}of E)A.add(C)}for(const T of Object.values(this._fieldObjects))for(const E of T)A.has(E.id)===u&&h.push(E)}else for(const A of Object.values(this._fieldObjects))h.push(...A);const d=this.annotationStorage,p=[];for(const A of h){const{id:T}=A;switch(p.push(T),A.type){case"text":{const C=A.defaultValue||"";d.setValue(T,{value:C});break}case"checkbox":case"radiobutton":{const C=A.defaultValue===A.exportValues;d.setValue(T,{value:C});break}case"combobox":case"listbox":{const C=A.defaultValue||"";d.setValue(T,{value:C});break}default:continue}const E=document.querySelector(`[data-element-id="${T}"]`);if(E){if(!gu.has(E)){Ot(`_bindResetFormAction - element not allowed: ${T}`);continue}}else continue;E.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}Vi=new WeakSet,nl=function(){this.container.setAttribute("data-internal-link","")},MP=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},I(this,Vi,nl).call(this)},IP=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),I(this,Vi,nl).call(this)};class CY extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Au extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Wn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,a){n.includes("mouse")?t.addEventListener(n,l=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{var u;if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(l)}}))})}_setEventListeners(t,e,n,s){var a,l,u;for(const[h,d]of n)(d==="Action"||(a=this.data.actions)!=null&&a[d])&&((d==="Focus"||d==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,d,s),d==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(t,e,"blur","Blur",null):d==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||EY,a=t.style;let l;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(d/(e_*s))||1,v=d/p;l=Math.min(s,h(v/e_))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(s,h(d/e_))}a.fontSize=`calc(${l}px * var(--scale-factor))`,a.color=vt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class wY extends Au{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[s]:n})}render(){var s,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=t.getValue(e,{value:this.data.fieldValue});let u=l.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&u.length>h&&(u=u.slice(0,h));let d=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const p={userValue:u,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??u,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",d??u),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),gu.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Qp,this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",A=>{const T=this.data.defaultFieldValue??"";n.value=p.userValue=T,p.formattedValue=null});let v=A=>{const{formattedValue:T}=p;T!=null&&(A.target.value=T),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",T=>{var C;if(p.focused)return;const{target:E}=T;p.userValue&&(E.value=p.userValue),p.lastCommittedValue=E.value,p.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",T=>{this.showElementAndHideCanvas(T.target);const E={value(C){p.userValue=C.detail.value??"",t.setValue(e,{value:p.userValue.toString()}),C.target.value=p.userValue},formattedValue(C){const{formattedValue:x}=C.detail;p.formattedValue=x,x!=null&&C.target!==document.activeElement&&(C.target.value=x),t.setValue(e,{formattedValue:x})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var P;const{charLimit:x}=C.detail,{target:R}=C;if(x===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",x);let D=p.userValue;!D||D.length<=x||(D=D.slice(0,x),R.value=p.userValue=D,t.setValue(e,{value:D}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(E,T)}),n.addEventListener("keydown",T=>{var x;p.commitKey=1;let E=-1;if(T.key==="Escape"?E=0:T.key==="Enter"&&!this.data.multiLine?E=2:T.key==="Tab"&&(p.commitKey=3),E===-1)return;const{value:C}=T.target;p.lastCommittedValue!==C&&(p.lastCommittedValue=C,p.userValue=C,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}}))});const A=v;v=null,n.addEventListener("blur",T=>{var C,x;if(!p.focused||!T.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(p.focused=!1);const{value:E}=T.target;p.userValue=E,p.lastCommittedValue!==E&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:p.commitKey,selStart:T.target.selectionStart,selEnd:T.target.selectionEnd}})),A(T)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",T=>{var L;p.lastCommittedValue=null;const{data:E,target:C}=T,{value:x,selectionStart:R,selectionEnd:D}=C;let P=R,k=D;switch(T.inputType){case"deleteWordBackward":{const G=x.substring(0,R).match(/\w*[^\w]*$/);G&&(P-=G[0].length);break}case"deleteWordForward":{const G=x.substring(R).match(/^[^\w]*\w*/);G&&(k+=G[0].length);break}case"deleteContentBackward":R===D&&(P-=1);break;case"deleteContentForward":R===D&&(k+=1);break}T.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:E||"",willCommit:!1,selStart:P,selEnd:k}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],T=>T.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const T=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${T}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class xY extends Au{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class RY extends Au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return gu.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=Qp,a.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const d of this._getElementsByName(u,n)){const p=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class NP extends Au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(gu.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=Qp,a.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const d of this._getElementsByName(u,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const p=l===d.detail.value;for(const v of this._getElementsByName(d.target.name)){const A=p&&v.id===n;v.domElement&&(v.domElement.checked=A),t.setValue(v.id,{value:A})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class MY extends RP{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class IY extends Au{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");gu.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Qp;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const v=this.data.defaultFieldValue;for(const A of s.options)A.selected=A.value===v});for(const p of this.data.options){const v=document.createElement("option");v.textContent=p.displayValue,v.value=p.exportValue,n.value.includes(p.exportValue)&&(v.setAttribute("selected",!0),a=!1),s.append(v)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const u=p=>{const v=p?"value":"textContent",{options:A,multiple:T}=s;return T?Array.prototype.filter.call(A,E=>E.selected).map(E=>E[v]):A.selectedIndex===-1?null:A[A.selectedIndex][v]};let h=u(!1);const d=p=>{const v=p.target.options;return Array.prototype.map.call(v,A=>({displayValue:A.textContent,exportValue:A.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const v={value(A){l==null||l();const T=A.detail.value,E=new Set(Array.isArray(T)?T:[T]);for(const C of s.options)C.selected=E.has(C.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(A){s.multiple=!0},remove(A){const T=s.options,E=A.detail.remove;T[E].selected=!1,s.remove(E),T.length>0&&Array.prototype.findIndex.call(T,x=>x.selected)===-1&&(T[0].selected=!0),t.setValue(e,{value:u(!0),items:d(A)}),h=u(!1)},clear(A){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(A){const{index:T,displayValue:E,exportValue:C}=A.detail.insert,x=s.children[T],R=document.createElement("option");R.textContent=E,R.value=C,x?x.before(R):s.append(R),t.setValue(e,{value:u(!0),items:d(A)}),h=u(!1)},items(A){const{items:T}=A.detail;for(;s.length!==0;)s.remove(0);for(const E of T){const{displayValue:C,exportValue:x}=E,R=document.createElement("option");R.textContent=C,R.value=x,s.append(R)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:u(!0),items:d(A)}),h=u(!1)},indices(A){const T=new Set(A.detail.indices);for(const E of A.target.options)E.selected=T.has(E.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(A){A.target.disabled=!A.detail.editable}};this._dispatchEventFromSandbox(v,p)}),s.addEventListener("input",p=>{var T;const v=u(!0),A=u(!1);t.setValue(e,{value:v}),p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:A,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class NS extends Ve{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new NY({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${ZT}${n}`).join(",")),this.container}}var ih,qy,Yy,sh,zl,Pe,tr,oh,hp,dp,rh,er,xs,nr,fp,ir,pp,ql,Yl,he,Jg,DS,DP,PP,LP,kP,Wg,Qg,PS;class NY{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:a,contentsObj:l,richText:u,parent:h,rect:d,parentRect:p,open:v}){M(this,he);M(this,ih,I(this,he,LP).bind(this));M(this,qy,I(this,he,PS).bind(this));M(this,Yy,I(this,he,Qg).bind(this));M(this,sh,I(this,he,Wg).bind(this));M(this,zl,null);M(this,Pe,null);M(this,tr,null);M(this,oh,null);M(this,hp,null);M(this,dp,null);M(this,rh,null);M(this,er,!1);M(this,xs,null);M(this,nr,null);M(this,fp,null);M(this,ir,null);M(this,pp,null);M(this,ql,null);M(this,Yl,!1);var A;w(this,Pe,t),w(this,pp,s),w(this,tr,l),w(this,ir,u),w(this,dp,h),w(this,zl,e),w(this,fp,d),w(this,rh,p),w(this,hp,n),w(this,oh,eE.toDateObject(a)),this.trigger=n.flatMap(T=>T.getElementsToTriggerPopup());for(const T of this.trigger)T.addEventListener("click",m(this,sh)),T.addEventListener("mouseenter",m(this,Yy)),T.addEventListener("mouseleave",m(this,qy)),T.classList.add("popupTriggerArea");for(const T of n)(A=T.container)==null||A.addEventListener("keydown",m(this,ih));m(this,Pe).hidden=!0,v&&I(this,he,Wg).call(this)}render(){if(m(this,xs))return;const t=w(this,xs,document.createElement("div"));if(t.className="popup",m(this,zl)){const a=t.style.outlineColor=vt.makeHexColor(...m(this,zl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=vt.makeHexColor(...m(this,zl).map(u=>Math.floor(.7*(255-u)+u)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=m(this,pp),t.append(e),m(this,oh)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,oh).valueOf()})),e.append(a)}const s=m(this,he,Jg);if(s)xP.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(m(this,tr));t.append(a)}m(this,Pe).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let a=0,l=s.length;a<l;++a){const u=s[a];n.append(document.createTextNode(u)),a<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;m(this,ql)||w(this,ql,{contentsObj:m(this,tr),richText:m(this,ir)}),t&&w(this,nr,null),e&&(w(this,ir,I(this,he,PP).call(this,e)),w(this,tr,null)),(n=m(this,xs))==null||n.remove(),w(this,xs,null)}resetEdited(){var t;m(this,ql)&&({contentsObj:Bn(this,tr)._,richText:Bn(this,ir)._}=m(this,ql),w(this,ql,null),(t=m(this,xs))==null||t.remove(),w(this,xs,null),w(this,nr,null))}forceHide(){w(this,Yl,this.isVisible),m(this,Yl)&&(m(this,Pe).hidden=!0)}maybeShow(){m(this,Yl)&&(m(this,xs)||I(this,he,Qg).call(this),w(this,Yl,!1),m(this,Pe).hidden=!1)}get isVisible(){return m(this,Pe).hidden===!1}}ih=new WeakMap,qy=new WeakMap,Yy=new WeakMap,sh=new WeakMap,zl=new WeakMap,Pe=new WeakMap,tr=new WeakMap,oh=new WeakMap,hp=new WeakMap,dp=new WeakMap,rh=new WeakMap,er=new WeakMap,xs=new WeakMap,nr=new WeakMap,fp=new WeakMap,ir=new WeakMap,pp=new WeakMap,ql=new WeakMap,Yl=new WeakMap,he=new WeakSet,Jg=function(){const t=m(this,ir),e=m(this,tr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&m(this,ir).html||null},DS=function(){var t,e,n;return((n=(e=(t=m(this,he,Jg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},DP=function(){var t,e,n;return((n=(e=(t=m(this,he,Jg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},PP=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:m(this,he,DP),fontSize:m(this,he,DS)?`calc(${m(this,he,DS)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:s});return n},LP=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&m(this,er))&&I(this,he,Wg).call(this)},kP=function(){if(m(this,nr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:a}}}=m(this,dp);let l=!!m(this,rh),u=l?m(this,rh):m(this,fp);for(const E of m(this,hp))if(!u||vt.intersect(E.data.rect,u)!==null){u=E.data.rect,l=!0;break}const h=vt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,v=h[0]+p,A=h[1];w(this,nr,[100*(v-s)/e,100*(A-a)/n]);const{style:T}=m(this,Pe);T.left=`${m(this,nr)[0]}%`,T.top=`${m(this,nr)[1]}%`},Wg=function(){w(this,er,!m(this,er)),m(this,er)?(I(this,he,Qg).call(this),m(this,Pe).addEventListener("click",m(this,sh)),m(this,Pe).addEventListener("keydown",m(this,ih))):(I(this,he,PS).call(this),m(this,Pe).removeEventListener("click",m(this,sh)),m(this,Pe).removeEventListener("keydown",m(this,ih)))},Qg=function(){m(this,xs)||this.render(),this.isVisible?m(this,er)&&m(this,Pe).classList.add("focused"):(I(this,he,kP).call(this),m(this,Pe).hidden=!1,m(this,Pe).style.zIndex=parseInt(m(this,Pe).style.zIndex)+1e3)},PS=function(){m(this,Pe).classList.remove("focused"),!(m(this,er)||!this.isVisible)&&(m(this,Pe).hidden=!0,m(this,Pe).style.zIndex=parseInt(m(this,Pe).style.zIndex)-1e3)};class UP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ut.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var mp;class DY extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,mp,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=wa(e.rect),a=this.svgFactory.create(n,s,!0),l=w(this,mp,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,mp)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap;var gp;class PY extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,gp,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=wa(e.rect),a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,u=w(this,gp,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",l/2),u.setAttribute("y",l/2),u.setAttribute("width",n-l),u.setAttribute("height",s-l),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}gp=new WeakMap;var yp;class LY extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,yp,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=wa(e.rect),a=this.svgFactory.create(n,s,!0),l=e.borderStyle.width,u=w(this,yp,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",s/2),u.setAttribute("rx",n/2-l/2),u.setAttribute("ry",s/2-l/2),u.setAttribute("stroke-width",l||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,yp)}addHighlightArea(){this.container.classList.add("highlightArea")}}yp=new WeakMap;var vp;class OP extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,vp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:a}}=this;if(!n)return this.container;const{width:l,height:u}=wa(e),h=this.svgFactory.create(l,u,!0);let d=[];for(let v=0,A=n.length;v<A;v+=2){const T=n[v]-e[0],E=e[3]-n[v+1];d.push(`${T},${E}`)}d=d.join(" ");const p=w(this,vp,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,vp)}addHighlightArea(){this.container.classList.add("highlightArea")}}vp=new WeakMap;class kY extends OP{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class UY extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ap,Xl,_p,LS;class rE extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});M(this,_p);M(this,Ap,null);M(this,Xl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ut.HIGHLIGHT:Ut.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:a,popupRef:l}}=this,{transform:u,width:h,height:d}=I(this,_p,LS).call(this,n,e),p=this.svgFactory.create(h,d,!0),v=w(this,Ap,this.svgFactory.createElement("svg:g"));p.append(v),v.setAttribute("stroke-width",a.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",u);for(let A=0,T=s.length;A<T;A++){const E=this.svgFactory.createElement(this.svgElementName);m(this,Xl).push(E),E.setAttribute("points",s[A].join(",")),v.append(E)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:a}=e,l=m(this,Ap);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let u=0,h=m(this,Xl).length;u<h;u++)m(this,Xl)[u].setAttribute("points",s[u].join(","));if(a){const{transform:u,width:h,height:d}=I(this,_p,LS).call(this,this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",u)}}getElementsToTriggerPopup(){return m(this,Xl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ap=new WeakMap,Xl=new WeakMap,_p=new WeakSet,LS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class FP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ut.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class OY extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class FY extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class VY extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class VP extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ut.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sp,Tp,kS;class HY extends Ve{constructor(e){var s;super(e,{isRenderable:!0});M(this,Tp);M(this,Sp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",I(this,Tp,kS).bind(this)),w(this,Sp,s);const{isMac:a}=Wn.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&I(this,Tp,kS).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return m(this,Sp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sp=new WeakMap,Tp=new WeakSet,kS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Ep,$l,Kl,bp,yu,HP,US;class BY{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:l,structTreeLayer:u}){M(this,yu);M(this,Ep,null);M(this,$l,null);M(this,Kl,new Map);M(this,bp,null);this.div=t,w(this,Ep,e),w(this,$l,n),w(this,bp,u||null),this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return m(this,Kl).size>0}async render(t){var l;const{annotations:e}=t,n=this.div;pu(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new oE,annotationStorage:t.annotationStorage||new iE,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===Ze.POPUP;if(h){const v=s.get(u.id);if(!v)continue;a.elements=v}else{const{width:v,height:A}=wa(u.rect);if(v<=0||A<=0)continue}a.data=u;const d=bY.create(a);if(!d.isRenderable)continue;if(!h&&u.popupRef){const v=s.get(u.popupRef);v?v.push(d):s.set(u.popupRef,[d])}const p=d.render();u.hidden&&(p.style.visibility="hidden"),await I(this,yu,HP).call(this,p,u.id),d._isEditable&&(m(this,Kl).set(d.data.id,d),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(d))}I(this,yu,US).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,pu(e,{rotation:t.rotation}),I(this,yu,US).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(m(this,Kl).values())}getEditableAnnotation(t){return m(this,Kl).get(t)}}Ep=new WeakMap,$l=new WeakMap,Kl=new WeakMap,bp=new WeakMap,yu=new WeakSet,HP=async function(t,e){var l,u;const n=t.firstChild||t,s=n.id=`${ZT}${e}`,a=await((l=m(this,bp))==null?void 0:l.getAriaAttributes(s));if(a)for(const[h,d]of a)n.setAttribute(h,d);this.div.append(t),(u=m(this,Ep))==null||u.moveElementInDOM(this.div,t,n,!1)},US=function(){if(!m(this,$l))return;const t=this.div;for(const[e,n]of m(this,$l)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}m(this,$l).clear()};const xg=/\r\n?|\n/g;var Rs,Ii,Cp,Jl,Ni,Ke,BP,GP,zP,Zg,pr,jg,ty,qP,FS,YP;const me=class me extends Me{constructor(e){super({...e,name:"freeTextEditor"});M(this,Ke);M(this,Rs);M(this,Ii,"");M(this,Cp,`${this.id}-editor`);M(this,Jl,null);M(this,Ni);w(this,Rs,e.color||me._defaultColor||Me._defaultLineColor),w(this,Ni,e.fontSize||me._defaultFontSize)}static get _keyboardManager(){const e=me.prototype,n=l=>l.isEmpty(),s=mu.TRANSLATE_SMALL,a=mu.TRANSLATE_BIG;return Bt(this,"_keyboardManager",new Wp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,n){Me.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case $t.FREETEXT_SIZE:me._defaultFontSize=n;break;case $t.FREETEXT_COLOR:me._defaultColor=n;break}}updateParams(e,n){switch(e){case $t.FREETEXT_SIZE:I(this,Ke,BP).call(this,n);break;case $t.FREETEXT_COLOR:I(this,Ke,GP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[$t.FREETEXT_SIZE,me._defaultFontSize],[$t.FREETEXT_COLOR,me._defaultColor||Me._defaultLineColor]]}get propertiesToUpdate(){return[[$t.FREETEXT_SIZE,m(this,Ni)],[$t.FREETEXT_COLOR,m(this,Rs)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-me._internalPadding*e,-(me._internalPadding+m(this,Ni))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Ut.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,Jl,new AbortController);const e=this._uiManager.combinedSignal(m(this,Jl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,Cp)),this._isDraggable=!0,(e=m(this,Jl))==null||e.abort(),w(this,Jl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=m(this,Ii),n=w(this,Ii,I(this,Ke,zP).call(this).trimEnd());if(e===n)return;const s=a=>{if(w(this,Ii,a),!a){this.remove();return}I(this,Ke,ty).call(this),this._uiManager.rebuild(this),I(this,Ke,Zg).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),I(this,Ke,Zg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){me._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,Cp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${m(this,Ni)}px * var(--scale-factor))`,s.color=m(this,Rs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Cy(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[p,v]=this.pageDimensions,[A,T]=this.pageTranslation;let E,C;switch(this.rotation){case 0:E=e+(u[0]-A)/p,C=n+this.height-(u[1]-T)/v;break;case 90:E=e+(u[0]-A)/p,C=n-(u[1]-T)/v,[h,d]=[d,-h];break;case 180:E=e-this.width+(u[0]-A)/p,C=n-(u[1]-T)/v,[h,d]=[-h,-d];break;case 270:E=e+(u[0]-A-this.height*v)/p,C=n+(u[1]-T-this.width*p)/v,[h,d]=[-d,h];break}this.setAt(E*a,C*l,h,d)}else this.setAt(e*a,n*l,this.width*a,this.height*l);I(this,Ke,ty).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var E,C,x;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const a=I(E=me,pr,FS).call(E,n.getData("text")||"").replaceAll(xg,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const u=l.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=u,p=[],v=[];if(h.nodeType===Node.TEXT_NODE){const R=h.parentElement;if(v.push(h.nodeValue.slice(d).replaceAll(xg,"")),R!==this.editorDiv){let D=p;for(const P of this.editorDiv.childNodes){if(P===R){D=v;continue}D.push(I(C=me,pr,jg).call(C,P))}}p.push(h.nodeValue.slice(0,d).replaceAll(xg,""))}else if(h===this.editorDiv){let R=p,D=0;for(const P of this.editorDiv.childNodes)D++===d&&(R=v),R.push(I(x=me,pr,jg).call(x,P))}w(this,Ii,`${p.join(`
`)}${a}${v.join(`
`)}`),I(this,Ke,ty).call(this);const A=new Range;let T=p.reduce((R,D)=>R+D.length,0);for(const{firstChild:R}of this.editorDiv.childNodes)if(R.nodeType===Node.TEXT_NODE){const D=R.nodeValue.length;if(T<=D){A.setStart(R,T),A.setEnd(R,T);break}T-=D}l.removeAllRanges(),l.addRange(A)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var u;let a=null;if(e instanceof UP){const{data:{defaultAppearanceData:{fontSize:h,fontColor:d},rect:p,rotation:v,id:A,popupRef:T},textContent:E,textPosition:C,parent:{page:{pageNumber:x}}}=e;if(!E||E.length===0)return null;a=e={annotationType:Ut.FREETEXT,color:Array.from(d),fontSize:h,value:E.join(`
`),position:C,pageIndex:x-1,rect:p.slice(0),rotation:v,id:A,deleted:!1,popupRef:T}}const l=await super.deserialize(e,n,s);return w(l,Ni,e.fontSize),w(l,Rs,vt.makeHexColor(...e.color)),w(l,Ii,I(u=me,pr,FS).call(u,e.value)),l.annotationElementId=e.id||null,l._initialData=a,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=me._internalPadding*this.parentScale,s=this.getRect(n,n),a=Me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:m(this,Rs)),l={annotationType:Ut.FREETEXT,color:a,fontSize:m(this,Ni),value:I(this,Ke,qP).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!I(this,Ke,YP).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${m(this,Ni)}px * var(--scale-factor))`,s.color=m(this,Rs),n.replaceChildren();for(const l of m(this,Ii).split(`
`)){const u=document.createElement("div");u.append(l?document.createTextNode(l):document.createElement("br")),n.append(u)}const a=me._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:m(this,Ii)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Rs=new WeakMap,Ii=new WeakMap,Cp=new WeakMap,Jl=new WeakMap,Ni=new WeakMap,Ke=new WeakSet,BP=function(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-m(this,Ni))*this.parentScale),w(this,Ni,a),I(this,Ke,Zg).call(this)},s=m(this,Ni);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},GP=function(e){const n=a=>{w(this,Rs,this.editorDiv.style.color=a)},s=m(this,Rs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zP=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(I(s=me,pr,jg).call(s,a)),n=a);return e.join(`
`)},Zg=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,u=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=u,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},pr=new WeakSet,jg=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xg,"")},ty=function(){if(this.editorDiv.replaceChildren(),!!m(this,Ii))for(const e of m(this,Ii).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},qP=function(){return m(this,Ii).replaceAll(""," ")},FS=function(e){return e.replaceAll(" ","")},YP=function(e){const{value:n,fontSize:s,color:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((u,h)=>u!==a[h])||e.pageIndex!==l},M(me,pr),Ct(me,"_freeTextDefaultContent",""),Ct(me,"_internalPadding",0),Ct(me,"_defaultColor",null),Ct(me,"_defaultFontSize",10),Ct(me,"_type","freetext"),Ct(me,"_editorType",Ut.FREETEXT);let OS=me;class ct{toSVGPath(){fe("Abstract method `toSVGPath` must be implemented.")}get box(){fe("Abstract getter `box` must be implemented.")}serialize(t,e){fe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*s,l[u+1]=n+t[u+1]*a;return l}static _rescaleAndSwap(t,e,n,s,a,l){l||(l=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*s,l[u+1]=n+t[u]*a;return l}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)s[a]=e+t[a],s[a+1]=n+t[a+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,a){switch(a){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,a,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+a)/6,(5*s+l)/6,(n+a)/2,(s+l)/2]}}Ct(ct,"PRECISION",1e-4);var Di,Ms,ah,lh,oo,Ht,Wl,Ql,wp,xp,uh,ch,pa,Rp,Xy,$y,sn,Zd,XP,$P,KP,JP,WP,QP;const Vo=class Vo{constructor({x:t,y:e},n,s,a,l,u=0){M(this,sn);M(this,Di);M(this,Ms,[]);M(this,ah);M(this,lh);M(this,oo,[]);M(this,Ht,new Float32Array(18));M(this,Wl);M(this,Ql);M(this,wp);M(this,xp);M(this,uh);M(this,ch);M(this,pa,[]);w(this,Di,n),w(this,ch,a*s),w(this,lh,l),m(this,Ht).set([NaN,NaN,NaN,NaN,t,e],6),w(this,ah,u),w(this,xp,m(Vo,Rp)*s),w(this,wp,m(Vo,$y)*s),w(this,uh,s),m(this,pa).push(t,e)}isEmpty(){return isNaN(m(this,Ht)[8])}add({x:t,y:e}){var X;w(this,Wl,t),w(this,Ql,e);const[n,s,a,l]=m(this,Di);let[u,h,d,p]=m(this,Ht).subarray(8,12);const v=t-d,A=e-p,T=Math.hypot(v,A);if(T<m(this,wp))return!1;const E=T-m(this,xp),C=E/T,x=C*v,R=C*A;let D=u,P=h;u=d,h=p,d+=x,p+=R,(X=m(this,pa))==null||X.push(t,e);const k=-R/E,L=x/E,G=k*m(this,ch),F=L*m(this,ch);return m(this,Ht).set(m(this,Ht).subarray(2,8),0),m(this,Ht).set([d+G,p+F],4),m(this,Ht).set(m(this,Ht).subarray(14,18),12),m(this,Ht).set([d-G,p-F],16),isNaN(m(this,Ht)[6])?(m(this,oo).length===0&&(m(this,Ht).set([u+G,h+F],2),m(this,oo).push(NaN,NaN,NaN,NaN,(u+G-n)/a,(h+F-s)/l),m(this,Ht).set([u-G,h-F],14),m(this,Ms).push(NaN,NaN,NaN,NaN,(u-G-n)/a,(h-F-s)/l)),m(this,Ht).set([D,P,u,h,d,p],6),!this.isEmpty()):(m(this,Ht).set([D,P,u,h,d,p],6),Math.abs(Math.atan2(P-h,D-u)-Math.atan2(R,x))<Math.PI/2?([u,h,d,p]=m(this,Ht).subarray(2,6),m(this,oo).push(NaN,NaN,NaN,NaN,((u+d)/2-n)/a,((h+p)/2-s)/l),[u,h,D,P]=m(this,Ht).subarray(14,18),m(this,Ms).push(NaN,NaN,NaN,NaN,((D+u)/2-n)/a,((P+h)/2-s)/l),!0):([D,P,u,h,d,p]=m(this,Ht).subarray(0,6),m(this,oo).push(((D+5*u)/6-n)/a,((P+5*h)/6-s)/l,((5*u+d)/6-n)/a,((5*h+p)/6-s)/l,((u+d)/2-n)/a,((h+p)/2-s)/l),[d,p,u,h,D,P]=m(this,Ht).subarray(12,18),m(this,Ms).push(((D+5*u)/6-n)/a,((P+5*h)/6-s)/l,((5*u+d)/6-n)/a,((5*h+p)/6-s)/l,((u+d)/2-n)/a,((h+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=m(this,oo),e=m(this,Ms);if(isNaN(m(this,Ht)[6])&&!this.isEmpty())return I(this,sn,XP).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);I(this,sn,KP).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return I(this,sn,$P).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,a,l){return new ZP(t,e,n,s,a,l)}getOutlines(){var v;const t=m(this,oo),e=m(this,Ms),n=m(this,Ht),[s,a,l,u]=m(this,Di),h=new Float32Array((((v=m(this,pa))==null?void 0:v.length)??0)+2);for(let A=0,T=h.length-2;A<T;A+=2)h[A]=(m(this,pa)[A]-s)/l,h[A+1]=(m(this,pa)[A+1]-a)/u;if(h[h.length-2]=(m(this,Wl)-s)/l,h[h.length-1]=(m(this,Ql)-a)/u,isNaN(n[6])&&!this.isEmpty())return I(this,sn,JP).call(this,h);const d=new Float32Array(m(this,oo).length+24+m(this,Ms).length);let p=t.length;for(let A=0;A<p;A+=2){if(isNaN(t[A])){d[A]=d[A+1]=NaN;continue}d[A]=t[A],d[A+1]=t[A+1]}p=I(this,sn,QP).call(this,d,p);for(let A=e.length-6;A>=6;A-=6)for(let T=0;T<6;T+=2){if(isNaN(e[A+T])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[A+T],d[p+1]=e[A+T+1],p+=2}return I(this,sn,WP).call(this,d,p),this.newFreeDrawOutline(d,h,m(this,Di),m(this,uh),m(this,ah),m(this,lh))}};Di=new WeakMap,Ms=new WeakMap,ah=new WeakMap,lh=new WeakMap,oo=new WeakMap,Ht=new WeakMap,Wl=new WeakMap,Ql=new WeakMap,wp=new WeakMap,xp=new WeakMap,uh=new WeakMap,ch=new WeakMap,pa=new WeakMap,Rp=new WeakMap,Xy=new WeakMap,$y=new WeakMap,sn=new WeakSet,Zd=function(){const t=m(this,Ht).subarray(4,6),e=m(this,Ht).subarray(16,18),[n,s,a,l]=m(this,Di);return[(m(this,Wl)+(t[0]-e[0])/2-n)/a,(m(this,Ql)+(t[1]-e[1])/2-s)/l,(m(this,Wl)+(e[0]-t[0])/2-n)/a,(m(this,Ql)+(e[1]-t[1])/2-s)/l]},XP=function(){const[t,e,n,s]=m(this,Di),[a,l,u,h]=I(this,sn,Zd).call(this);return`M${(m(this,Ht)[2]-t)/n} ${(m(this,Ht)[3]-e)/s} L${(m(this,Ht)[4]-t)/n} ${(m(this,Ht)[5]-e)/s} L${a} ${l} L${u} ${h} L${(m(this,Ht)[16]-t)/n} ${(m(this,Ht)[17]-e)/s} L${(m(this,Ht)[14]-t)/n} ${(m(this,Ht)[15]-e)/s} Z`},$P=function(t){const e=m(this,Ms);t.push(`L${e[4]} ${e[5]} Z`)},KP=function(t){const[e,n,s,a]=m(this,Di),l=m(this,Ht).subarray(4,6),u=m(this,Ht).subarray(16,18),[h,d,p,v]=I(this,sn,Zd).call(this);t.push(`L${(l[0]-e)/s} ${(l[1]-n)/a} L${h} ${d} L${p} ${v} L${(u[0]-e)/s} ${(u[1]-n)/a}`)},JP=function(t){const e=m(this,Ht),[n,s,a,l]=m(this,Di),[u,h,d,p]=I(this,sn,Zd).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-s)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-s)/l],0),this.newFreeDrawOutline(v,t,m(this,Di),m(this,uh),m(this,ah),m(this,lh))},WP=function(t,e){const n=m(this,Ms);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},QP=function(t,e){const n=m(this,Ht).subarray(4,6),s=m(this,Ht).subarray(16,18),[a,l,u,h]=m(this,Di),[d,p,v,A]=I(this,sn,Zd).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,v,A,NaN,NaN,NaN,NaN,(s[0]-a)/u,(s[1]-l)/h],e),e+=24},M(Vo,Rp,8),M(Vo,Xy,2),M(Vo,$y,m(Vo,Rp)+m(Vo,Xy));let Ry=Vo;var hh,Zl,sr,Mp,Pi,Ip,Fe,Ky,jP;class ZP extends ct{constructor(e,n,s,a,l,u){super();M(this,Ky);M(this,hh);M(this,Zl,new Float32Array(4));M(this,sr);M(this,Mp);M(this,Pi);M(this,Ip);M(this,Fe);w(this,Fe,e),w(this,Pi,n),w(this,hh,s),w(this,Ip,a),w(this,sr,l),w(this,Mp,u),this.lastPoint=[NaN,NaN],I(this,Ky,jP).call(this,u);const[h,d,p,v]=m(this,Zl);for(let A=0,T=e.length;A<T;A+=2)e[A]=(e[A]-h)/p,e[A+1]=(e[A+1]-d)/v;for(let A=0,T=n.length;A<T;A+=2)n[A]=(n[A]-h)/p,n[A+1]=(n[A+1]-d)/v}toSVGPath(){const e=[`M${m(this,Fe)[4]} ${m(this,Fe)[5]}`];for(let n=6,s=m(this,Fe).length;n<s;n+=6){if(isNaN(m(this,Fe)[n])){e.push(`L${m(this,Fe)[n+4]} ${m(this,Fe)[n+5]}`);continue}e.push(`C${m(this,Fe)[n]} ${m(this,Fe)[n+1]} ${m(this,Fe)[n+2]} ${m(this,Fe)[n+3]} ${m(this,Fe)[n+4]} ${m(this,Fe)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,a],l){const u=s-e,h=a-n;let d,p;switch(l){case 0:d=ct._rescale(m(this,Fe),e,a,u,-h),p=ct._rescale(m(this,Pi),e,a,u,-h);break;case 90:d=ct._rescaleAndSwap(m(this,Fe),e,n,u,h),p=ct._rescaleAndSwap(m(this,Pi),e,n,u,h);break;case 180:d=ct._rescale(m(this,Fe),s,n,-u,h),p=ct._rescale(m(this,Pi),s,n,-u,h);break;case 270:d=ct._rescaleAndSwap(m(this,Fe),s,a,-u,-h),p=ct._rescaleAndSwap(m(this,Pi),s,a,-u,-h);break}return{outline:Array.from(d),points:[Array.from(p)]}}get box(){return m(this,Zl)}newOutliner(e,n,s,a,l,u=0){return new Ry(e,n,s,a,l,u)}getNewOutline(e,n){const[s,a,l,u]=m(this,Zl),[h,d,p,v]=m(this,hh),A=l*p,T=u*v,E=s*p+h,C=a*v+d,x=this.newOutliner({x:m(this,Pi)[0]*A+E,y:m(this,Pi)[1]*T+C},m(this,hh),m(this,Ip),e,m(this,Mp),n??m(this,sr));for(let R=2;R<m(this,Pi).length;R+=2)x.add({x:m(this,Pi)[R]*A+E,y:m(this,Pi)[R+1]*T+C});return x.getOutlines()}}hh=new WeakMap,Zl=new WeakMap,sr=new WeakMap,Mp=new WeakMap,Pi=new WeakMap,Ip=new WeakMap,Fe=new WeakMap,Ky=new WeakSet,jP=function(e){const n=m(this,Fe);let s=n[4],a=n[5],l=s,u=a,h=s,d=a,p=s,v=a;const A=e?Math.max:Math.min;for(let E=6,C=n.length;E<C;E+=6){if(isNaN(n[E]))l=Math.min(l,n[E+4]),u=Math.min(u,n[E+5]),h=Math.max(h,n[E+4]),d=Math.max(d,n[E+5]),v<n[E+5]?(p=n[E+4],v=n[E+5]):v===n[E+5]&&(p=A(p,n[E+4]));else{const x=vt.bezierBoundingBox(s,a,...n.slice(E,E+6));l=Math.min(l,x[0]),u=Math.min(u,x[1]),h=Math.max(h,x[2]),d=Math.max(d,x[3]),v<x[3]?(p=x[2],v=x[3]):v===x[3]&&(p=A(p,x[2]))}s=n[E+4],a=n[E+5]}const T=m(this,Zl);T[0]=l-m(this,sr),T[1]=u-m(this,sr),T[2]=h-l+2*m(this,sr),T[3]=d-u+2*m(this,sr),this.lastPoint=[p,v]};var Np,Dp,ma,Is,Zn,tL,ey,eL,nL,HS;class VS{constructor(t,e=0,n=0,s=!0){M(this,Zn);M(this,Np);M(this,Dp);M(this,ma,[]);M(this,Is,[]);let a=1/0,l=-1/0,u=1/0,h=-1/0;const d=10**-4;for(const{x,y:R,width:D,height:P}of t){const k=Math.floor((x-e)/d)*d,L=Math.ceil((x+D+e)/d)*d,G=Math.floor((R-e)/d)*d,F=Math.ceil((R+P+e)/d)*d,$=[k,G,F,!0],X=[L,G,F,!1];m(this,ma).push($,X),a=Math.min(a,k),l=Math.max(l,L),u=Math.min(u,G),h=Math.max(h,F)}const p=l-a+2*n,v=h-u+2*n,A=a-n,T=u-n,E=m(this,ma).at(s?-1:-2),C=[E[0],E[2]];for(const x of m(this,ma)){const[R,D,P]=x;x[0]=(R-A)/p,x[1]=(D-T)/v,x[2]=(P-T)/v}w(this,Np,new Float32Array([A,T,p,v])),w(this,Dp,C)}getOutlines(){m(this,ma).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of m(this,ma))e[3]?(t.push(...I(this,Zn,HS).call(this,e)),I(this,Zn,eL).call(this,e)):(I(this,Zn,nL).call(this,e),t.push(...I(this,Zn,HS).call(this,e)));return I(this,Zn,tL).call(this,t)}}Np=new WeakMap,Dp=new WeakMap,ma=new WeakMap,Is=new WeakMap,Zn=new WeakSet,tL=function(t){const e=[],n=new Set;for(const l of t){const[u,h,d]=l;e.push([u,h,l],[u,d,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const s=[];let a;for(;n.size>0;){const l=n.values().next().value;let[u,h,d,p,v]=l;n.delete(l);let A=u,T=h;for(a=[u,d],s.push(a);;){let E;if(n.has(p))E=p;else if(n.has(v))E=v;else break;n.delete(E),[u,h,d,p,v]=E,A!==u&&(a.push(A,T,u,T===h?h:d),A=u),T=T===h?d:h}a.push(A,T)}return new GY(s,m(this,Np),m(this,Dp))},ey=function(t){const e=m(this,Is);let n=0,s=e.length-1;for(;n<=s;){const a=n+s>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:s=a-1}return s+1},eL=function([,t,e]){const n=I(this,Zn,ey).call(this,t);m(this,Is).splice(n,0,[t,e])},nL=function([,t,e]){const n=I(this,Zn,ey).call(this,t);for(let s=n;s<m(this,Is).length;s++){const[a,l]=m(this,Is)[s];if(a!==t)break;if(a===t&&l===e){m(this,Is).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,l]=m(this,Is)[s];if(a!==t)break;if(a===t&&l===e){m(this,Is).splice(s,1);return}}},HS=function(t){const[e,n,s]=t,a=[[e,n,s]],l=I(this,Zn,ey).call(this,s);for(let u=0;u<l;u++){const[h,d]=m(this,Is)[u];for(let p=0,v=a.length;p<v;p++){const[,A,T]=a[p];if(!(d<=A||T<=h)){if(A>=h){if(T>d)a[p][1]=d;else{if(v===1)return[];a.splice(p,1),p--,v--}continue}a[p][2]=h,T>d&&a.push([e,d,T])}}}return a};var Pp,dh;class GY extends ct{constructor(e,n,s){super();M(this,Pp);M(this,dh);w(this,dh,e),w(this,Pp,n),this.lastPoint=s}toSVGPath(){const e=[];for(const n of m(this,dh)){let[s,a]=n;e.push(`M${s} ${a}`);for(let l=2;l<n.length;l+=2){const u=n[l],h=n[l+1];u===s?(e.push(`V${h}`),a=h):h===a&&(e.push(`H${u}`),s=u)}e.push("Z")}return e.join(" ")}serialize([e,n,s,a],l){const u=[],h=s-e,d=a-n;for(const p of m(this,dh)){const v=new Array(p.length);for(let A=0;A<p.length;A+=2)v[A]=e+p[A]*h,v[A+1]=a-p[A+1]*d;u.push(v)}return u}get box(){return m(this,Pp)}get classNamesForOutlining(){return["highlightOutline"]}}Pp=new WeakMap,dh=new WeakMap;class BS extends Ry{newFreeDrawOutline(t,e,n,s,a,l){return new zY(t,e,n,s,a,l)}}class zY extends ZP{newOutliner(t,e,n,s,a,l=0){return new BS(t,e,n,s,a,l)}}var Ns,jl,fh,en,Lp,ph,kp,Up,ga,Ds,mh,Op,ce,GS,zS,qS,il,iL,$r;const ci=class ci{constructor({editor:t=null,uiManager:e=null}){M(this,ce);M(this,Ns,null);M(this,jl,null);M(this,fh);M(this,en,null);M(this,Lp,!1);M(this,ph,!1);M(this,kp,null);M(this,Up);M(this,ga,null);M(this,Ds,null);M(this,mh);var n;t?(w(this,ph,!1),w(this,mh,$t.HIGHLIGHT_COLOR),w(this,kp,t)):(w(this,ph,!0),w(this,mh,$t.HIGHLIGHT_DEFAULT_COLOR)),w(this,Ds,(t==null?void 0:t._uiManager)||e),w(this,Up,m(this,Ds)._eventBus),w(this,fh,(t==null?void 0:t.color)||((n=m(this,Ds))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),m(ci,Op)||w(ci,Op,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Bt(this,"_keyboardManager",new Wp([[["Escape","mac+Escape"],ci.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ci.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ci.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ci.prototype._moveToPrevious],[["Home","mac+Home"],ci.prototype._moveToBeginning],[["End","mac+End"],ci.prototype._moveToEnd]]))}renderButton(){const t=w(this,Ns,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=m(this,Ds)._signal;t.addEventListener("click",I(this,ce,il).bind(this),{signal:e}),t.addEventListener("keydown",I(this,ce,qS).bind(this),{signal:e});const n=w(this,jl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=m(this,fh),t.append(n),t}renderMainDropdown(){const t=w(this,en,I(this,ce,GS).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===m(this,Ns)){I(this,ce,il).call(this,t);return}const e=t.target.getAttribute("data-color");e&&I(this,ce,zS).call(this,e,t)}_moveToNext(t){var e,n;if(!m(this,ce,$r)){I(this,ce,il).call(this,t);return}if(t.target===m(this,Ns)){(e=m(this,en).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=m(this,en))==null?void 0:e.firstChild)||t.target===m(this,Ns)){m(this,ce,$r)&&this._hideDropdownFromKeyboard();return}m(this,ce,$r)||I(this,ce,il).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!m(this,ce,$r)){I(this,ce,il).call(this,t);return}(e=m(this,en).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!m(this,ce,$r)){I(this,ce,il).call(this,t);return}(e=m(this,en).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=m(this,en))==null||t.classList.add("hidden"),(e=m(this,ga))==null||e.abort(),w(this,ga,null)}_hideDropdownFromKeyboard(){var t;if(!m(this,ph)){if(!m(this,ce,$r)){(t=m(this,kp))==null||t.unselect();return}this.hideDropdown(),m(this,Ns).focus({preventScroll:!0,focusVisible:m(this,Lp)})}}updateColor(t){if(m(this,jl)&&(m(this,jl).style.backgroundColor=t),!m(this,en))return;const e=m(this,Ds).highlightColors.values();for(const n of m(this,en).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=m(this,Ns))==null||t.remove(),w(this,Ns,null),w(this,jl,null),(e=m(this,en))==null||e.remove(),w(this,en,null)}};Ns=new WeakMap,jl=new WeakMap,fh=new WeakMap,en=new WeakMap,Lp=new WeakMap,ph=new WeakMap,kp=new WeakMap,Up=new WeakMap,ga=new WeakMap,Ds=new WeakMap,mh=new WeakMap,Op=new WeakMap,ce=new WeakSet,GS=function(){const t=document.createElement("div"),e=m(this,Ds)._signal;t.addEventListener("contextmenu",Vs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of m(this,Ds).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",m(ci,Op)[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=s,a.setAttribute("aria-selected",s===m(this,fh)),a.addEventListener("click",I(this,ce,zS).bind(this,s),{signal:e}),t.append(a)}return t.addEventListener("keydown",I(this,ce,qS).bind(this),{signal:e}),t},zS=function(t,e){e.stopPropagation(),m(this,Up).dispatch("switchannotationeditorparams",{source:this,type:m(this,mh),value:t})},qS=function(t){ci._keyboardManager.exec(this,t)},il=function(t){if(m(this,ce,$r)){this.hideDropdown();return}if(w(this,Lp,t.detail===0),m(this,ga)||(w(this,ga,new AbortController),window.addEventListener("pointerdown",I(this,ce,iL).bind(this),{signal:m(this,Ds).combinedSignal(m(this,ga))})),m(this,en)){m(this,en).classList.remove("hidden");return}const e=w(this,en,I(this,ce,GS).call(this));m(this,Ns).append(e)},iL=function(t){var e;(e=m(this,en))!=null&&e.contains(t.target)||this.hideDropdown()},$r=function(){return m(this,en)&&!m(this,en).classList.contains("hidden")},M(ci,Op,null);let My=ci;var gh,Fp,or,tu,yh,fi,Vp,Hp,eu,ss,Li,Sn,vh,rr,Dn,Ah,os,Bp,Lt,YS,ny,sL,oL,rL,XS,sl,us,hc,aL,iy,jd,lL,uL,cL,hL,dL;const ee=class ee extends Me{constructor(e){super({...e,name:"highlightEditor"});M(this,Lt);M(this,gh,null);M(this,Fp,0);M(this,or);M(this,tu,null);M(this,yh,null);M(this,fi,null);M(this,Vp,null);M(this,Hp,0);M(this,eu,null);M(this,ss,null);M(this,Li,null);M(this,Sn,!1);M(this,vh,null);M(this,rr);M(this,Dn,null);M(this,Ah,"");M(this,os);M(this,Bp,"");this.color=e.color||ee._defaultColor,w(this,os,e.thickness||ee._defaultThickness),w(this,rr,e.opacity||ee._defaultOpacity),w(this,or,e.boxes||null),w(this,Bp,e.methodOfCreation||""),w(this,Ah,e.text||""),this._isDraggable=!1,e.highlightId>-1?(w(this,Sn,!0),I(this,Lt,ny).call(this,e),I(this,Lt,sl).call(this)):m(this,or)&&(w(this,gh,e.anchorNode),w(this,Fp,e.anchorOffset),w(this,Vp,e.focusNode),w(this,Hp,e.focusOffset),I(this,Lt,YS).call(this),I(this,Lt,sl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ee.prototype;return Bt(this,"_keyboardManager",new Wp([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,Sn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:m(this,os),methodOfCreation:m(this,Bp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Me.initialize(e,n),ee._defaultColor||(ee._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case $t.HIGHLIGHT_DEFAULT_COLOR:ee._defaultColor=n;break;case $t.HIGHLIGHT_THICKNESS:ee._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return m(this,vh)}updateParams(e,n){switch(e){case $t.HIGHLIGHT_COLOR:I(this,Lt,sL).call(this,n);break;case $t.HIGHLIGHT_THICKNESS:I(this,Lt,oL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[$t.HIGHLIGHT_DEFAULT_COLOR,ee._defaultColor],[$t.HIGHLIGHT_THICKNESS,ee._defaultThickness]]}get propertiesToUpdate(){return[[$t.HIGHLIGHT_COLOR,this.color||ee._defaultColor],[$t.HIGHLIGHT_THICKNESS,m(this,os)||ee._defaultThickness],[$t.HIGHLIGHT_FREE,m(this,Sn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(w(this,yh,new My({editor:this})),e.addColorPicker(m(this,yh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(I(this,Lt,jd).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,I(this,Lt,jd).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){I(this,Lt,XS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Lt,sl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?I(this,Lt,XS).call(this):e&&(I(this,Lt,sl).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var a,l,u;const{drawLayer:n}=this.parent;let s;m(this,Sn)?(e=(e-this.rotation+360)%360,s=I(a=ee,us,hc).call(a,m(this,ss).box,e)):s=I(l=ee,us,hc).call(l,[this.x,this.y,this.width,this.height],e),n.updateProperties(m(this,Li),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(m(this,Dn),{bbox:I(u=ee,us,hc).call(u,m(this,fi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();m(this,Ah)&&(e.setAttribute("aria-label",m(this,Ah)),e.setAttribute("role","mark")),m(this,Sn)?e.classList.add("free"):this.div.addEventListener("keydown",I(this,Lt,aL).bind(this),{signal:this._uiManager._signal});const n=w(this,eu,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,tu);const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),Cy(this,m(this,eu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(m(this,Dn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(m(this,Dn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:I(this,Lt,iy).call(this,!0);break;case 1:case 3:I(this,Lt,iy).call(this,!1);break}}select(){var e;super.select(),m(this,Dn)&&((e=this.parent)==null||e.drawLayer.updateProperties(m(this,Dn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),m(this,Dn)&&((e=this.parent)==null||e.drawLayer.updateProperties(m(this,Dn),{rootClass:{selected:!1}}),m(this,Sn)||I(this,Lt,iy).call(this,!1))}get _mustFixPosition(){return!m(this,Sn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(m(this,Li),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(m(this,Dn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:a,y:l}){const{x:u,y:h,width:d,height:p}=s.getBoundingClientRect(),v=new AbortController,A=e.combinedSignal(v),T=E=>{v.abort(),I(this,us,hL).call(this,e,E)};window.addEventListener("blur",T,{signal:A}),window.addEventListener("pointerup",T,{signal:A}),window.addEventListener("pointerdown",Hi,{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Vs,{signal:A}),s.addEventListener("pointermove",I(this,us,cL).bind(this,e),{signal:A}),this._freeHighlight=new BS({x:a,y:l},[u,h,d,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var C,x,R,D;let a=null;if(e instanceof FP){const{data:{quadPoints:P,rect:k,rotation:L,id:G,color:F,opacity:$,popupRef:X},parent:{page:{pageNumber:et}}}=e;a=e={annotationType:Ut.HIGHLIGHT,color:Array.from(F),opacity:$,quadPoints:P,boxes:null,pageIndex:et-1,rect:k.slice(0),rotation:L,id:G,deleted:!1,popupRef:X}}else if(e instanceof rE){const{data:{inkLists:P,rect:k,rotation:L,id:G,color:F,borderStyle:{rawWidth:$},popupRef:X},parent:{page:{pageNumber:et}}}=e;a=e={annotationType:Ut.HIGHLIGHT,color:Array.from(F),thickness:$,inkLists:P,boxes:null,pageIndex:et-1,rect:k.slice(0),rotation:L,id:G,deleted:!1,popupRef:X}}const{color:l,quadPoints:u,inkLists:h,opacity:d}=e,p=await super.deserialize(e,n,s);p.color=vt.makeHexColor(...l),w(p,rr,d||1),h&&w(p,os,e.thickness),p.annotationElementId=e.id||null,p._initialData=a;const[v,A]=p.pageDimensions,[T,E]=p.pageTranslation;if(u){const P=w(p,or,[]);for(let k=0;k<u.length;k+=8)P.push({x:(u[k]-T)/v,y:1-(u[k+1]-E)/A,width:(u[k+2]-u[k])/v,height:(u[k+1]-u[k+5])/A});I(C=p,Lt,YS).call(C),I(x=p,Lt,sl).call(x),p.rotate(p.rotation)}else if(h){w(p,Sn,!0);const P=h[0],k={x:P[0]-T,y:A-(P[1]-E)},L=new BS(k,[0,0,v,A],1,m(p,os)/2,!0,.001);for(let $=0,X=P.length;$<X;$+=2)k.x=P[$]-T,k.y=A-(P[$+1]-E),L.add(k);const{id:G,clipPathId:F}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);I(R=p,Lt,ny).call(R,{highlightOutlines:L.getOutlines(),highlightId:G,clipPathId:F}),I(D=p,Lt,sl).call(D)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=Me._colorManager.convert(this.color),a={annotationType:Ut.HIGHLIGHT,color:s,opacity:m(this,rr),thickness:m(this,os),quadPoints:I(this,Lt,lL).call(this),outlines:I(this,Lt,uL).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:I(this,Lt,jd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!I(this,Lt,dL).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gh=new WeakMap,Fp=new WeakMap,or=new WeakMap,tu=new WeakMap,yh=new WeakMap,fi=new WeakMap,Vp=new WeakMap,Hp=new WeakMap,eu=new WeakMap,ss=new WeakMap,Li=new WeakMap,Sn=new WeakMap,vh=new WeakMap,rr=new WeakMap,Dn=new WeakMap,Ah=new WeakMap,os=new WeakMap,Bp=new WeakMap,Lt=new WeakSet,YS=function(){const e=new VS(m(this,or),.001);w(this,ss,e.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,ss).box;const n=new VS(m(this,or),.0025,.001,this._uiManager.direction==="ltr");w(this,fi,n.getOutlines());const{lastPoint:s}=m(this,fi);w(this,vh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},ny=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var v,A;if(w(this,ss,e),w(this,fi,e.getNewOutline(m(this,os)/2+1.5,.0025)),n>=0)w(this,Li,n),w(this,tu,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),w(this,Dn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,fi).box,path:{d:m(this,fi).toSVGPath()}},!0));else if(this.parent){const T=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,Li),{bbox:I(v=ee,us,hc).call(v,m(this,ss).box,(T-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Dn),{bbox:I(A=ee,us,hc).call(A,m(this,fi).box,T),path:{d:m(this,fi).toSVGPath()}})}const[l,u,h,d]=e.box;switch(this.rotation){case 0:this.x=l,this.y=u,this.width=h,this.height=d;break;case 90:{const[T,E]=this.parentDimensions;this.x=u,this.y=1-l,this.width=h*E/T,this.height=d*T/E;break}case 180:this.x=1-l,this.y=1-u,this.width=h,this.height=d;break;case 270:{const[T,E]=this.parentDimensions;this.x=1-u,this.y=l,this.width=h*E/T,this.height=d*T/E;break}}const{lastPoint:p}=m(this,fi);w(this,vh,[(p[0]-l)/h,(p[1]-u)/d])},sL=function(e){const n=(l,u)=>{var h,d;this.color=l,w(this,rr,u),(h=this.parent)==null||h.drawLayer.updateProperties(m(this,Li),{root:{fill:l,"fill-opacity":u}}),(d=m(this,yh))==null||d.updateColor(l)},s=this.color,a=m(this,rr);this.addCommands({cmd:n.bind(this,e,ee._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},oL=function(e){const n=m(this,os),s=a=>{w(this,os,a),I(this,Lt,rL).call(this,a)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},rL=function(e){if(!m(this,Sn))return;I(this,Lt,ny).call(this,{highlightOutlines:m(this,ss).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},XS=function(){m(this,Li)===null||!this.parent||(this.parent.drawLayer.remove(m(this,Li)),w(this,Li,null),this.parent.drawLayer.remove(m(this,Dn)),w(this,Dn,null))},sl=function(e=this.parent){m(this,Li)===null&&({id:Bn(this,Li)._,clipPathId:Bn(this,tu)._}=e.drawLayer.draw({bbox:m(this,ss).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":m(this,rr)},rootClass:{highlight:!0,free:m(this,Sn)},path:{d:m(this,ss).toSVGPath()}},!1,!0),w(this,Dn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,Sn)},bbox:m(this,fi).box,path:{d:m(this,fi).toSVGPath()}},m(this,Sn))),m(this,eu)&&(m(this,eu).style.clipPath=m(this,tu)))},us=new WeakSet,hc=function([e,n,s,a],l){switch(l){case 90:return[1-n-a,e,a,s];case 180:return[1-e-s,1-n-a,s,a];case 270:return[n,1-e-s,a,s]}return[e,n,s,a]},aL=function(e){ee._keyboardManager.exec(this,e)},iy=function(e){if(!m(this,gh))return;const n=window.getSelection();e?n.setPosition(m(this,gh),m(this,Fp)):n.setPosition(m(this,Vp),m(this,Hp))},jd=function(){return m(this,Sn)?this.rotation:0},lL=function(){if(m(this,Sn))return null;const[e,n]=this.pageDimensions,[s,a]=this.pageTranslation,l=m(this,or),u=new Float32Array(l.length*8);let h=0;for(const{x:d,y:p,width:v,height:A}of l){const T=d*e+s,E=(1-p)*n+a;u[h]=u[h+4]=T,u[h+1]=u[h+3]=E,u[h+2]=u[h+6]=T+v*e,u[h+5]=u[h+7]=E-A*n,h+=8}return u},uL=function(e){return m(this,ss).serialize(e,I(this,Lt,jd).call(this))},cL=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},hL=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dL=function(e){const{color:n}=this._initialData;return e.color.some((s,a)=>s!==n[a])},M(ee,us),Ct(ee,"_defaultColor",null),Ct(ee,"_defaultOpacity",1),Ct(ee,"_defaultThickness",12),Ct(ee,"_type","highlight"),Ct(ee,"_editorType",Ut.HIGHLIGHT),Ct(ee,"_freeHighlightId",-1),Ct(ee,"_freeHighlight",null),Ct(ee,"_freeHighlightClipId","");let Iy=ee;var nu;class qY{constructor(){M(this,nu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){m(this,nu)[t]=e}toSVGProperties(){const t=m(this,nu);return w(this,nu,Object.create(null)),{root:t}}reset(){w(this,nu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){fe("Not implemented")}}nu=new WeakMap;var ki,_h,cn,iu,su,ya,va,Aa,ou,Jt,KS,JS,WS,tf,fL,sy,ef,dc;const dt=class dt extends Me{constructor(e){super(e);M(this,Jt);M(this,ki,null);M(this,_h);Ct(this,"_drawId",null);w(this,_h,e.mustBeCommitted||!1),e.drawOutlines&&(I(this,Jt,KS).call(this,e),I(this,Jt,tf).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[a,l]of Object.entries(n))s.has(a)?Object.assign(e[a],l):e[a]=l;return e}static getDefaultDrawingOptions(e){fe("Not implemented")}static get typesMap(){fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(m(dt,cn).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)e.push([s,n[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)e.push([s,n[a]]);return e}_updateProperty(e,n,s){const a=this._drawingOptions,l=a[n],u=h=>{var p;a.updateProperty(n,h);const d=m(this,ki).updateProperty(n,h);d&&I(this,Jt,ef).call(this,d),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:u.bind(this,s),undo:u.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(m(this,ki).getPathResizingSVGProperties(I(this,Jt,sy).call(this)),{bbox:I(this,Jt,dc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(m(this,ki).getPathResizedSVGProperties(I(this,Jt,sy).call(this)),{bbox:I(this,Jt,dc).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:I(this,Jt,dc).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties(m(this,ki).getPathTranslatedSVGProperties(I(this,Jt,sy).call(this),this.parentDimensions),{bbox:I(this,Jt,dc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,_h)&&(w(this,_h,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){I(this,Jt,WS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(I(this,Jt,tf).call(this),I(this,Jt,ef).call(this,m(this,ki).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),I(this,Jt,WS).call(this)):e&&(this._uiManager.addShouldRescale(this),I(this,Jt,tf).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,dt._mergeSVGProperties({bbox:I(this,Jt,dc).call(this)},m(this,ki).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&I(this,Jt,ef).call(this,m(this,ki).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,s,a,l){fe("Not implemented")}static startDrawing(e,n,s,a){var x;const{target:l,offsetX:u,offsetY:h,pointerId:d,pointerType:p}=a;if(m(dt,va)&&m(dt,va)!==p)return;const{viewport:{rotation:v}}=e,{width:A,height:T}=l.getBoundingClientRect(),E=w(dt,iu,new AbortController),C=e.combinedSignal(E);if(m(dt,ya)||w(dt,ya,d),m(dt,va)??w(dt,va,p),window.addEventListener("pointerup",R=>{var D;m(dt,ya)===R.pointerId?this._endDraw(R):(D=m(dt,Aa))==null||D.delete(R.pointerId)},{signal:C}),window.addEventListener("pointercancel",R=>{var D;m(dt,ya)===R.pointerId?this._currentParent.endDrawingSession():(D=m(dt,Aa))==null||D.delete(R.pointerId)},{signal:C}),window.addEventListener("pointerdown",R=>{m(dt,va)===R.pointerType&&((m(dt,Aa)||w(dt,Aa,new Set)).add(R.pointerId),m(dt,cn).isCancellable()&&(m(dt,cn).removeLastElement(),m(dt,cn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Vs,{signal:C}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),l.addEventListener("touchmove",R=>{R.timeStamp===m(dt,ou)&&Hi(R)},{signal:C}),e.toggleDrawing(),(x=n._editorUndoBar)==null||x.hide(),m(dt,cn)){e.drawLayer.updateProperties(this._currentDrawId,m(dt,cn).startNew(u,h,A,T,v));return}n.updateUIForDefaultProperties(this),w(dt,cn,this.createDrawerInstance(u,h,A,T,v)),w(dt,su,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(m(dt,su).toSVGProperties(),m(dt,cn).defaultSVGProperties),!0,!1)}static _drawMove(e){var l;if(w(dt,ou,-1),!m(dt,cn))return;const{offsetX:n,offsetY:s,pointerId:a}=e;if(m(dt,ya)===a){if(((l=m(dt,Aa))==null?void 0:l.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(dt,cn).add(n,s)),w(dt,ou,e.timeStamp),Hi(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,w(dt,cn,null),w(dt,su,null),w(dt,va,null),w(dt,ou,NaN)),m(dt,iu)&&(m(dt,iu).abort(),w(dt,iu,null),w(dt,ya,NaN),w(dt,Aa,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,m(dt,cn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=m(dt,cn),a=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:$t.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack($t.DRAW_STEP),!m(dt,cn).isEmpty()){const{pageDimensions:[s,a],scale:l}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(dt,cn).getOutlines(s*l,a*l,l,this._INNER_MARGIN),drawingOptions:m(dt,su),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,a,l,u){fe("Not implemented")}static async deserialize(e,n,s){var v,A;const{rawDims:{pageWidth:a,pageHeight:l,pageX:u,pageY:h}}=n.viewport,d=this.deserializeDraw(u,h,a,l,this._INNER_MARGIN,e),p=await super.deserialize(e,n,s);return p.createDrawingOptions(e),I(v=p,Jt,KS).call(v,{drawOutlines:d}),I(A=p,Jt,tf).call(A),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,s]=this.pageTranslation,[a,l]=this.pageDimensions;return m(this,ki).serialize([n,s,a,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ki=new WeakMap,_h=new WeakMap,cn=new WeakMap,iu=new WeakMap,su=new WeakMap,ya=new WeakMap,va=new WeakMap,Aa=new WeakMap,ou=new WeakMap,Jt=new WeakSet,KS=function({drawOutlines:e,drawId:n,drawingOptions:s}){w(this,ki,e),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=I(this,Jt,JS).call(this,e,this.parent),I(this,Jt,ef).call(this,e.box)},JS=function(e,n){const{id:s}=n.drawLayer.draw(dt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},WS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},tf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=I(this,Jt,JS).call(this,m(this,ki),e)}},fL=function([e,n,s,a]){const{parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[n,1-e,s*(u/l),a*(l/u)];case 180:return[1-e,1-n,s,a];case 270:return[1-n,e,s*(u/l),a*(l/u)];default:return[e,n,s,a]}},sy=function(){const{x:e,y:n,width:s,height:a,parentDimensions:[l,u],rotation:h}=this;switch(h){case 90:return[1-n,e,s*(l/u),a*(u/l)];case 180:return[1-e,1-n,s,a];case 270:return[n,1-e,s*(l/u),a*(u/l)];default:return[e,n,s,a]}},ef=function(e){if([this.x,this.y,this.width,this.height]=I(this,Jt,fL).call(this,e),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},dc=function(){const{x:e,y:n,width:s,height:a,rotation:l,parentRotation:u,parentDimensions:[h,d]}=this;switch((l*4+u)/90){case 1:return[1-n-a,e,a,s];case 2:return[1-e-s,1-n-a,s,a];case 3:return[n,1-e-s,a,s];case 4:return[e,n-s*(h/d),a*(d/h),s*(h/d)];case 5:return[1-n,e,s*(h/d),a*(d/h)];case 6:return[1-e-a*(d/h),1-n,a*(d/h),s*(h/d)];case 7:return[n-s*(h/d),1-e-a*(d/h),s*(h/d),a*(d/h)];case 8:return[e-s,n-a,s,a];case 9:return[1-n,e-s,a,s];case 10:return[1-e,1-n,s,a];case 11:return[n-a,1-e,a,s];case 12:return[e-a*(d/h),n,a*(d/h),s*(h/d)];case 13:return[1-n-s*(h/d),e-a*(d/h),s*(h/d),a*(d/h)];case 14:return[1-e,1-n-s*(h/d),a*(d/h),s*(h/d)];case 15:return[n,1-e,s*(h/d),a*(d/h)];default:return[e,n,s,a]}},Ct(dt,"_currentDrawId",-1),Ct(dt,"_currentParent",null),M(dt,cn,null),M(dt,iu,null),M(dt,su,null),M(dt,ya,NaN),M(dt,va,null),M(dt,Aa,null),M(dt,ou,NaN),Ct(dt,"_INNER_MARGIN",3);let $S=dt;var ro,hn,dn,ru,Sh,qn,Tn,rs,au,lu,uu,Th,oy;class YY{constructor(t,e,n,s,a,l){M(this,Th);M(this,ro,new Float64Array(6));M(this,hn);M(this,dn);M(this,ru);M(this,Sh);M(this,qn);M(this,Tn,"");M(this,rs,0);M(this,au,new Ny);M(this,lu);M(this,uu);w(this,lu,n),w(this,uu,s),w(this,ru,a),w(this,Sh,l),[t,e]=I(this,Th,oy).call(this,t,e);const u=w(this,hn,[NaN,NaN,NaN,NaN,t,e]);w(this,qn,[t,e]),w(this,dn,[{line:u,points:m(this,qn)}]),m(this,ro).set(u,0)}updateProperty(t,e){t==="stroke-width"&&w(this,Sh,e)}isEmpty(){return!m(this,dn)||m(this,dn).length===0}isCancellable(){return m(this,qn).length<=10}add(t,e){[t,e]=I(this,Th,oy).call(this,t,e);const[n,s,a,l]=m(this,ro).subarray(2,6),u=t-a,h=e-l;return Math.hypot(m(this,lu)*u,m(this,uu)*h)<=2?null:(m(this,qn).push(t,e),isNaN(n)?(m(this,ro).set([a,l,t,e],2),m(this,hn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(m(this,ro)[0])&&m(this,hn).splice(6,6),m(this,ro).set([n,s,a,l,t,e],0),m(this,hn).push(...ct.createBezierPoints(n,s,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(m(this,qn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,a){w(this,lu,n),w(this,uu,s),w(this,ru,a),[t,e]=I(this,Th,oy).call(this,t,e);const l=w(this,hn,[NaN,NaN,NaN,NaN,t,e]);w(this,qn,[t,e]);const u=m(this,dn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),m(this,dn).push({line:l,points:m(this,qn)}),m(this,ro).set(l,0),w(this,rs,0),this.toSVGPath(),null}getLastElement(){return m(this,dn).at(-1)}setLastElement(t){return m(this,dn)?(m(this,dn).push(t),w(this,hn,t.line),w(this,qn,t.points),w(this,rs,0),{path:{d:this.toSVGPath()}}):m(this,au).setLastElement(t)}removeLastElement(){if(!m(this,dn))return m(this,au).removeLastElement();m(this,dn).pop(),w(this,Tn,"");for(let t=0,e=m(this,dn).length;t<e;t++){const{line:n,points:s}=m(this,dn)[t];w(this,hn,n),w(this,qn,s),w(this,rs,0),this.toSVGPath()}return{path:{d:m(this,Tn)}}}toSVGPath(){const t=ct.svgRound(m(this,hn)[4]),e=ct.svgRound(m(this,hn)[5]);if(m(this,qn).length===2)return w(this,Tn,`${m(this,Tn)} M ${t} ${e} Z`),m(this,Tn);if(m(this,qn).length<=6){const s=m(this,Tn).lastIndexOf("M");w(this,Tn,`${m(this,Tn).slice(0,s)} M ${t} ${e}`),w(this,rs,6)}if(m(this,qn).length===4){const s=ct.svgRound(m(this,hn)[10]),a=ct.svgRound(m(this,hn)[11]);return w(this,Tn,`${m(this,Tn)} L ${s} ${a}`),w(this,rs,12),m(this,Tn)}const n=[];m(this,rs)===0&&(n.push(`M ${t} ${e}`),w(this,rs,6));for(let s=m(this,rs),a=m(this,hn).length;s<a;s+=6){const[l,u,h,d,p,v]=m(this,hn).slice(s,s+6).map(ct.svgRound);n.push(`C${l} ${u} ${h} ${d} ${p} ${v}`)}return w(this,Tn,m(this,Tn)+n.join(" ")),w(this,rs,m(this,hn).length),m(this,Tn)}getOutlines(t,e,n,s){const a=m(this,dn).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),m(this,au).build(m(this,dn),t,e,n,m(this,ru),m(this,Sh),s),w(this,ro,null),w(this,hn,null),w(this,dn,null),w(this,Tn,null),m(this,au)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ro=new WeakMap,hn=new WeakMap,dn=new WeakMap,ru=new WeakMap,Sh=new WeakMap,qn=new WeakMap,Tn=new WeakMap,rs=new WeakMap,au=new WeakMap,lu=new WeakMap,uu=new WeakMap,Th=new WeakSet,oy=function(t,e){return ct._normalizePoint(t,e,m(this,lu),m(this,uu),m(this,ru))};var Yn,Gp,zp,Ui,ao,lo,Eh,bh,Ch,Cn,Oo,pL,mL,gL;const hE=class hE extends ct{constructor(){super(...arguments);M(this,Cn);M(this,Yn);M(this,Gp,0);M(this,zp);M(this,Ui);M(this,ao);M(this,lo);M(this,Eh);M(this,bh);M(this,Ch)}build(e,n,s,a,l,u,h){w(this,ao,n),w(this,lo,s),w(this,Eh,a),w(this,bh,l),w(this,Ch,u),w(this,zp,h??0),w(this,Ui,e),I(this,Cn,mL).call(this)}setLastElement(e){return m(this,Ui).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,Ui).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of m(this,Ui)){if(e.push(`M${ct.svgRound(n[4])} ${ct.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${ct.svgRound(n[10])} ${ct.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[l,u,h,d,p,v]=n.subarray(s,s+6).map(ct.svgRound);e.push(`C${l} ${u} ${h} ${d} ${p} ${v}`)}}return e.join("")}serialize([e,n,s,a],l){const u=[],h=[],[d,p,v,A]=I(this,Cn,pL).call(this);let T,E,C,x,R,D,P,k,L;switch(m(this,bh)){case 0:L=ct._rescale,T=e,E=n+a,C=s,x=-a,R=e+d*s,D=n+(1-p-A)*a,P=e+(d+v)*s,k=n+(1-p)*a;break;case 90:L=ct._rescaleAndSwap,T=e,E=n,C=s,x=a,R=e+p*s,D=n+d*a,P=e+(p+A)*s,k=n+(d+v)*a;break;case 180:L=ct._rescale,T=e+s,E=n,C=-s,x=a,R=e+(1-d-v)*s,D=n+p*a,P=e+(1-d)*s,k=n+(p+A)*a;break;case 270:L=ct._rescaleAndSwap,T=e+s,E=n+a,C=-s,x=-a,R=e+(1-p-A)*s,D=n+(1-d-v)*a,P=e+(1-p)*s,k=n+(1-d)*a;break}for(const{line:G,points:F}of m(this,Ui))u.push(L(G,T,E,C,x,l?new Array(G.length):null)),h.push(L(F,T,E,C,x,l?new Array(F.length):null));return{lines:u,points:h,rect:[R,D,P,k]}}static deserialize(e,n,s,a,l,{paths:{lines:u,points:h},rotation:d,thickness:p}){const v=[];let A,T,E,C,x;switch(d){case 0:x=ct._rescale,A=-e/s,T=n/a+1,E=1/s,C=-1/a;break;case 90:x=ct._rescaleAndSwap,A=-n/a,T=-e/s,E=1/a,C=1/s;break;case 180:x=ct._rescale,A=e/s+1,T=-n/a,E=-1/s,C=1/a;break;case 270:x=ct._rescaleAndSwap,A=n/a+1,T=e/s+1,E=-1/a,C=-1/s;break}if(!u){u=[];for(const D of h){const P=D.length;if(P===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(P===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const k=new Float32Array(3*(P-2));u.push(k);let[L,G,F,$]=D.subarray(0,4);k.set([NaN,NaN,NaN,NaN,L,G],0);for(let X=4;X<P;X+=2){const et=D[X],nt=D[X+1];k.set(ct.createBezierPoints(L,G,F,$,et,nt),(X-2)*3),[L,G,F,$]=[F,$,et,nt]}}}for(let D=0,P=u.length;D<P;D++)v.push({line:x(u[D].map(k=>k??NaN),A,T,E,C),points:x(h[D].map(k=>k??NaN),A,T,E,C)});const R=new hE;return R.build(v,s,a,1,d,p,l),R}get box(){return m(this,Yn)}updateProperty(e,n){return e==="stroke-width"?I(this,Cn,gL).call(this,n):null}updateParentDimensions([e,n],s){const[a,l]=I(this,Cn,Oo).call(this);w(this,ao,e),w(this,lo,n),w(this,Eh,s);const[u,h]=I(this,Cn,Oo).call(this),d=u-a,p=h-l,v=m(this,Yn);return v[0]-=d,v[1]-=p,v[2]+=2*d,v[3]+=2*p,v}updateRotation(e){return w(this,Gp,e),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,Yn).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,n]=m(this,Yn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=m(this,Yn);let s=0,a=0,l=0,u=0,h=0,d=0;switch(m(this,Gp)){case 90:a=n/e,l=-e/n,h=e;break;case 180:s=-1,u=-1,h=e,d=n;break;case 270:a=-n/e,l=e/n,d=n;break;default:return""}return`matrix(${s} ${a} ${l} ${u} ${ct.svgRound(h)} ${ct.svgRound(d)})`}getPathResizingSVGProperties([e,n,s,a]){const[l,u]=I(this,Cn,Oo).call(this),[h,d,p,v]=m(this,Yn);if(Math.abs(p-l)<=ct.PRECISION||Math.abs(v-u)<=ct.PRECISION){const x=e+s/2-(h+p/2),R=n+a/2-(d+v/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:`${this.rotationTransform} translate(${x} ${R})`}}}const A=(s-2*l)/(p-2*l),T=(a-2*u)/(v-2*u),E=p/s,C=v/a;return{path:{"transform-origin":`${ct.svgRound(h)} ${ct.svgRound(d)}`,transform:`${this.rotationTransform} scale(${E} ${C}) translate(${ct.svgRound(l)} ${ct.svgRound(u)}) scale(${A} ${T}) translate(${ct.svgRound(-l)} ${ct.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,s,a]){const[l,u]=I(this,Cn,Oo).call(this),h=m(this,Yn),[d,p,v,A]=h;if(h[0]=e,h[1]=n,h[2]=s,h[3]=a,Math.abs(v-l)<=ct.PRECISION||Math.abs(A-u)<=ct.PRECISION){const R=e+s/2-(d+v/2),D=n+a/2-(p+A/2);for(const{line:P,points:k}of m(this,Ui))ct._translate(P,R,D,P),ct._translate(k,R,D,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const T=(s-2*l)/(v-2*l),E=(a-2*u)/(A-2*u),C=-T*(d+l)+e+l,x=-E*(p+u)+n+u;if(T!==1||E!==1||C!==0||x!==0)for(const{line:R,points:D}of m(this,Ui))ct._rescale(R,C,x,T,E,R),ct._rescale(D,C,x,T,E,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[a,l]=s,u=m(this,Yn),h=e-u[0],d=n-u[1];if(m(this,ao)===a&&m(this,lo)===l)for(const{line:p,points:v}of m(this,Ui))ct._translate(p,h,d,p),ct._translate(v,h,d,v);else{const p=m(this,ao)/a,v=m(this,lo)/l;w(this,ao,a),w(this,lo,l);for(const{line:A,points:T}of m(this,Ui))ct._rescale(A,h,d,p,v,A),ct._rescale(T,h,d,p,v,T);u[2]*=p,u[3]*=v}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get defaultSVGProperties(){const e=m(this,Yn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Yn=new WeakMap,Gp=new WeakMap,zp=new WeakMap,Ui=new WeakMap,ao=new WeakMap,lo=new WeakMap,Eh=new WeakMap,bh=new WeakMap,Ch=new WeakMap,Cn=new WeakSet,Oo=function(e=m(this,Ch)){const n=m(this,zp)+e/2*m(this,Eh);return m(this,bh)%180===0?[n/m(this,ao),n/m(this,lo)]:[n/m(this,lo),n/m(this,ao)]},pL=function(){const[e,n,s,a]=m(this,Yn),[l,u]=I(this,Cn,Oo).call(this,0);return[e+l,n+u,s-2*l,a-2*u]},mL=function(){const e=w(this,Yn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of m(this,Ui)){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6){const[p,v]=a.subarray(h,h+2);e[0]=Math.min(e[0],p),e[1]=Math.min(e[1],v),e[2]=Math.max(e[2],p),e[3]=Math.max(e[3],v)}continue}let l=a[4],u=a[5];for(let h=6,d=a.length;h<d;h+=6){const[p,v,A,T,E,C]=a.subarray(h,h+6);vt.bezierBoundingBox(l,u,p,v,A,T,E,C,e),l=E,u=C}}const[n,s]=I(this,Cn,Oo).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-s)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+s)),e[2]-=e[0],e[3]-=e[1]},gL=function(e){const[n,s]=I(this,Cn,Oo).call(this);w(this,Ch,e);const[a,l]=I(this,Cn,Oo).call(this),[u,h]=[a-n,l-s],d=m(this,Yn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d};let Ny=hE;var wh;const dE=class dE extends qY{constructor(e){super();M(this,wh);w(this,wh,e),super.updateProperties({fill:"none",stroke:Me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=m(this,wh).realScale),super.updateSVGProperty(e,n)}clone(){const e=new dE(m(this,wh));return e.updateAll(this),e}};wh=new WeakMap;let QS=dE;var Jy,yL;const _c=class _c extends $S{constructor(e){super({...e,name:"inkEditor"});M(this,Jy);this._willKeepAspectRatio=!0}static initialize(e,n){Me.initialize(e,n),this._defaultDrawingOptions=new QS(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Bt(this,"typesMap",new Map([[$t.INK_THICKNESS,"stroke-width"],[$t.INK_COLOR,"stroke"],[$t.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,a,l){return new YY(e,n,s,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,a,l,u){return Ny.deserialize(e,n,s,a,l,u)}static async deserialize(e,n,s){let a=null;if(e instanceof rE){const{data:{inkLists:u,rect:h,rotation:d,id:p,color:v,opacity:A,borderStyle:{rawWidth:T},popupRef:E},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:Ut.INK,color:Array.from(v),thickness:T,opacity:A,paths:{points:u},boxes:null,pageIndex:C-1,rect:h.slice(0),rotation:d,id:p,deleted:!1,popupRef:E}}const l=await super.deserialize(e,n,s);return l.annotationElementId=e.id||null,l._initialData=a,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=_c.getDefaultDrawingOptions({stroke:vt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":u,"stroke-width":h}}=this,d={annotationType:Ut.INK,color:Me._colorManager.convert(l),opacity:u,thickness:h,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?d:this.annotationElementId&&!I(this,Jy,yL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(e){const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Jy=new WeakSet,yL=function(e){const{color:n,thickness:s,opacity:a,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==s||e.opacity!==a||e.pageIndex!==l},Ct(_c,"_type","ink"),Ct(_c,"_editorType",Ut.INK),Ct(_c,"_defaultDrawingOptions",null);let ZS=_c;var xe,En,_a,ar,Sa,xh,uo,co,Oi,Rh,Zt,nf,sf,ry,tT,ay,eT,ly,vL;const cf=class cf extends Me{constructor(e){super({...e,name:"stampEditor"});M(this,Zt);M(this,xe,null);M(this,En,null);M(this,_a,null);M(this,ar,null);M(this,Sa,null);M(this,xh,"");M(this,uo,null);M(this,co,null);M(this,Oi,!1);M(this,Rh,!1);w(this,ar,e.bitmapUrl),w(this,Sa,e.bitmapFile)}static initialize(e,n){Me.initialize(e,n)}static get supportedTypes(){return Bt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Bt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Ut.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:a,width:l,height:u,channels:a.length/(l*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var e;m(this,En)&&(w(this,xe,null),this._uiManager.imageManager.deleteId(m(this,En)),(e=m(this,uo))==null||e.remove(),w(this,uo,null),m(this,co)&&(clearTimeout(m(this,co)),w(this,co,null))),super.remove()}rebuild(){if(!this.parent){m(this,En)&&I(this,Zt,ry).call(this);return}super.rebuild(),this.div!==null&&(m(this,En)&&m(this,uo)===null&&I(this,Zt,ry).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(m(this,_a)||m(this,xe)||m(this,ar)||m(this,Sa)||m(this,En))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),m(this,xe)?I(this,Zt,tT).call(this):I(this,Zt,ry).call(this),this.width&&!this.annotationElementId){const[s,a]=this.parentDimensions;this.setAt(e*s,n*a,this.width*s,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,co)!==null&&clearTimeout(m(this,co)),w(this,co,setTimeout(()=>{w(this,co,null),I(this,Zt,eT).call(this)},200))}copyCanvas(e,n,s=!1){var T;e||(e=224);const{width:a,height:l}=m(this,xe),u=new Q_;let h=m(this,xe),d=a,p=l,v=null;if(n){if(a>n||l>n){const $=Math.min(n/a,n/l);d=Math.floor(a*$),p=Math.floor(l*$)}v=document.createElement("canvas");const E=v.width=Math.ceil(d*u.sx),C=v.height=Math.ceil(p*u.sy);m(this,Oi)||(h=I(this,Zt,ay).call(this,E,C));const x=v.getContext("2d");x.filter=this._uiManager.hcmFilter;let R="white",D="#cfcfd8";this._uiManager.hcmFilter!=="none"?D="black":(T=window.matchMedia)!=null&&T.call(window,"(prefers-color-scheme: dark)").matches&&(R="#8f8f9d",D="#42414d");const P=15,k=P*u.sx,L=P*u.sy,G=new OffscreenCanvas(k*2,L*2),F=G.getContext("2d");F.fillStyle=R,F.fillRect(0,0,k*2,L*2),F.fillStyle=D,F.fillRect(0,0,k,L),F.fillRect(k,L,k,L),x.fillStyle=x.createPattern(G,"repeat"),x.fillRect(0,0,E,C),x.drawImage(h,0,0,h.width,h.height,0,0,E,C)}let A=null;if(s){let E,C;if(u.symmetric&&h.width<e&&h.height<e)E=h.width,C=h.height;else if(h=m(this,xe),a>e||l>e){const D=Math.min(e/a,e/l);E=Math.floor(a*D),C=Math.floor(l*D),m(this,Oi)||(h=I(this,Zt,ay).call(this,E,C))}const R=new OffscreenCanvas(E,C).getContext("2d",{willReadFrequently:!0});R.drawImage(h,0,0,h.width,h.height,0,0,E,C),A={width:E,height:C,data:R.getImageData(0,0,E,C).data}}return{canvas:v,width:d,height:p,imageData:A}}getImageForAltText(){return m(this,uo)}static async deserialize(e,n,s){var C;let a=null;if(e instanceof VP){const{data:{rect:x,rotation:R,id:D,structParent:P,popupRef:k},container:L,parent:{page:{pageNumber:G}}}=e,F=L.querySelector("canvas"),$=s.imageManager.getFromCanvas(L.id,F);F.remove();const X=((C=await n._structTree.getAriaAttributes(`${ZT}${D}`))==null?void 0:C.get("aria-label"))||"";a=e={annotationType:Ut.STAMP,bitmapId:$.id,bitmap:$.bitmap,pageIndex:G-1,rect:x.slice(0),rotation:R,id:D,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:P,popupRef:k}}const l=await super.deserialize(e,n,s),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:v,accessibilityData:A}=e;p&&s.imageManager.isValidId(p)?(w(l,En,p),h&&w(l,xe,h)):w(l,ar,d),w(l,Oi,v);const[T,E]=l.pageDimensions;return l.width=(u[2]-u[0])/T,l.height=(u[3]-u[1])/E,l.annotationElementId=e.id||null,A&&(l.altTextData=A),l._initialData=a,w(l,Rh,!!a),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Ut.STAMP,bitmapId:m(this,En),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:m(this,Oi),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=I(this,Zt,ly).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=I(this,Zt,vL).call(this,s);if(h.isSame)return null;h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const u=m(this,Oi)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(m(this,En)))n.stamps.set(m(this,En),{area:u,serialized:s}),s.bitmap=I(this,Zt,ly).call(this,!1);else if(m(this,Oi)){const h=n.stamps.get(m(this,En));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=I(this,Zt,ly).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};xe=new WeakMap,En=new WeakMap,_a=new WeakMap,ar=new WeakMap,Sa=new WeakMap,xh=new WeakMap,uo=new WeakMap,co=new WeakMap,Oi=new WeakMap,Rh=new WeakMap,Zt=new WeakSet,nf=function(e,n=!1){if(!e){this.remove();return}w(this,xe,e.bitmap),n||(w(this,En,e.id),w(this,Oi,e.isSvg)),e.file&&w(this,xh,e.file.name),I(this,Zt,tT).call(this)},sf=function(){if(w(this,_a,null),this._uiManager.enableWaiting(!1),!!m(this,uo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,xe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,xe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ry=function(){if(m(this,En)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,En)).then(s=>I(this,Zt,nf).call(this,s,!0)).finally(()=>I(this,Zt,sf).call(this));return}if(m(this,ar)){const s=m(this,ar);w(this,ar,null),this._uiManager.enableWaiting(!0),w(this,_a,this._uiManager.imageManager.getFromUrl(s).then(a=>I(this,Zt,nf).call(this,a)).finally(()=>I(this,Zt,sf).call(this)));return}if(m(this,Sa)){const s=m(this,Sa);w(this,Sa,null),this._uiManager.enableWaiting(!0),w(this,_a,this._uiManager.imageManager.getFromFile(s).then(a=>I(this,Zt,nf).call(this,a)).finally(()=>I(this,Zt,sf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=cf.supportedTypesStr;const n=this._uiManager._signal;w(this,_a,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),I(this,Zt,nf).call(this,a)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>I(this,Zt,sf).call(this))),e.click()},tT=function(){var v;const{div:e}=this;let{width:n,height:s}=m(this,xe);const[a,l]=this.pageDimensions,u=.75;if(this.width)n=this.width*a,s=this.height*l;else if(n>u*a||s>u*l){const A=Math.min(u*a/n,u*l/s);n*=A,s*=A}const[h,d]=this.parentDimensions;this.setDims(n*h/a,s*d/l),this._uiManager.enableWaiting(!1);const p=w(this,uo,document.createElement("canvas"));p.setAttribute("role","img"),this.addContainer(p),this.width=n/a,this.height=s/l,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),I(this,Zt,eT).call(this),m(this,Rh)||(this.parent.addUndoableEditor(this),w(this,Rh,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,xh)&&p.setAttribute("aria-label",m(this,xh))},ay=function(e,n){const{width:s,height:a}=m(this,xe);let l=s,u=a,h=m(this,xe);for(;l>2*e||u>2*n;){const d=l,p=u;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const v=new OffscreenCanvas(l,u);v.getContext("2d").drawImage(h,0,0,d,p,0,0,l,u),h=v.transferToImageBitmap()}return h},eT=function(){const[e,n]=this.parentDimensions,{width:s,height:a}=this,l=new Q_,u=Math.ceil(s*e*l.sx),h=Math.ceil(a*n*l.sy),d=m(this,uo);if(!d||d.width===u&&d.height===h)return;d.width=u,d.height=h;const p=m(this,Oi)?m(this,xe):I(this,Zt,ay).call(this,u,h),v=d.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(p,0,0,p.width,p.height,0,0,u,h)},ly=function(e){if(e){if(m(this,Oi)){const a=this._uiManager.imageManager.getSvgUrl(m(this,En));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,xe),n.getContext("2d").drawImage(m(this,xe),0,0),n.toDataURL()}if(m(this,Oi)){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*Ia.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Ia.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,l);return u.getContext("2d").drawImage(m(this,xe),0,0,m(this,xe).width,m(this,xe).height,0,0,a,l),u.transferToImageBitmap()}return structuredClone(m(this,xe))},vL=function(e){var u;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=e.pageIndex===n,l=(((u=e.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}},Ct(cf,"_type","stamp"),Ct(cf,"_editorType",Ut.STAMP);let jS=cf;var cu,Mh,ho,Ta,lr,as,Ea,Ih,hu,Ps,ur,Pn,cr,yt,ba,Ce,AL,Ks,iT,sT,uy;const Ss=class Ss{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:l,drawLayer:u,textLayer:h,viewport:d,l10n:p}){M(this,Ce);M(this,cu);M(this,Mh,!1);M(this,ho,null);M(this,Ta,null);M(this,lr,null);M(this,as,new Map);M(this,Ea,!1);M(this,Ih,!1);M(this,hu,!1);M(this,Ps,null);M(this,ur,null);M(this,Pn,null);M(this,cr,null);M(this,yt);const v=[...m(Ss,ba).values()];if(!Ss._initialized){Ss._initialized=!0;for(const A of v)A.initialize(p,t)}t.registerEditorTypes(v),w(this,yt,t),this.pageIndex=e,this.div=n,w(this,cu,a),w(this,ho,l),this.viewport=d,w(this,Pn,h),this.drawLayer=u,this._structTree=s,m(this,yt).addLayer(this)}get isEmpty(){return m(this,as).size===0}get isInvisible(){return this.isEmpty&&m(this,yt).getMode()===Ut.NONE}updateToolbar(t){m(this,yt).updateToolbar(t)}updateMode(t=m(this,yt).getMode()){switch(I(this,Ce,uy).call(this),t){case Ut.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ut.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ut.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of m(Ss,ba).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=m(this,Pn))==null?void 0:e.div)}setEditingState(t){m(this,yt).setEditingState(t)}addCommands(t){m(this,yt).addCommands(t)}cleanUndoStack(t){m(this,yt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=m(this,ho))==null||e.div.classList.toggle("disabled",!t)}async enable(){w(this,hu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of m(this,as).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(m(this,yt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!m(this,ho)){w(this,hu,!1);return}const e=m(this,ho).getEditableAnnotations();for(const n of e){if(n.hide(),m(this,yt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}w(this,hu,!1)}disable(){var s;w(this,Ih,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of m(this,as).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}if(m(this,ho)){const a=m(this,ho).getEditableAnnotations();for(const l of a){const{id:u}=l.data;if(m(this,yt).isDeletedAnnotationElement(u))continue;let h=e.get(u);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=t.get(u),h&&(m(this,yt).addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}I(this,Ce,uy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of m(Ss,ba).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,Ih,!1)}getEditableAnnotation(t){var e;return((e=m(this,ho))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){m(this,yt).getActive()!==t&&m(this,yt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=m(this,Pn))!=null&&t.div&&!m(this,cr)){w(this,cr,new AbortController);const e=m(this,yt).combinedSignal(m(this,cr));m(this,Pn).div.addEventListener("pointerdown",I(this,Ce,AL).bind(this),{signal:e}),m(this,Pn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=m(this,Pn))!=null&&t.div&&m(this,cr)&&(m(this,cr).abort(),w(this,cr,null),m(this,Pn).div.classList.remove("highlighting"))}enableClick(){if(m(this,Ta))return;w(this,Ta,new AbortController);const t=m(this,yt).combinedSignal(m(this,Ta));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=m(this,Ta))==null||t.abort(),w(this,Ta,null)}attach(t){m(this,as).set(t.id,t);const{annotationElementId:e}=t;e&&m(this,yt).isDeletedAnnotationElement(e)&&m(this,yt).removeDeletedAnnotationElement(t)}detach(t){var e;m(this,as).delete(t.id),(e=m(this,cu))==null||e.removePointerInTextLayer(t.contentDiv),!m(this,Ih)&&t.annotationElementId&&m(this,yt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),m(this,yt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(m(this,yt).addDeletedAnnotationElement(t.annotationElementId),Me.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),m(this,yt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!m(this,hu)),m(this,yt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!m(this,lr)&&(t._focusEventsAllowed=!1,w(this,lr,setTimeout(()=>{w(this,lr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:m(this,yt)._signal}),e.focus())},0))),t._structTreeParentId=(n=m(this,cu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return m(this,yt).getId()}combinedSignal(t){return m(this,yt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=m(this,Ce,Ks))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){m(this,yt).updateToolbar(t),m(this,yt).updateMode(t);const{offsetX:n,offsetY:s}=I(this,Ce,sT).call(this),a=this.getNextId(),l=I(this,Ce,iT).call(this,{parent:this,id:a,x:n,y:s,uiManager:m(this,yt),isCentered:!0,...e});l&&this.add(l)}async deserialize(t){var e;return await((e=m(Ss,ba).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,m(this,yt)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),a=I(this,Ce,iT).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:m(this,yt),isCentered:e,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(I(this,Ce,sT).call(this),!0)}setSelected(t){m(this,yt).setSelected(t)}toggleSelected(t){m(this,yt).toggleSelected(t)}unselect(t){m(this,yt).unselect(t)}pointerup(t){var n;const{isMac:e}=Wn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&m(this,Ea)&&(w(this,Ea,!1),!((n=m(this,Ce,Ks))!=null&&n.isDrawer&&m(this,Ce,Ks).supportMultipleDrawings))){if(!m(this,Mh)){w(this,Mh,!0);return}if(m(this,yt).getMode()===Ut.STAMP){m(this,yt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var s;if(m(this,yt).getMode()===Ut.HIGHLIGHT&&this.enableTextSelection(),m(this,Ea)){w(this,Ea,!1);return}const{isMac:e}=Wn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(w(this,Ea,!0),(s=m(this,Ce,Ks))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=m(this,yt).getActive();w(this,Mh,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),m(this,Ps)){m(this,Ce,Ks).startDrawing(this,m(this,yt),!1,t);return}m(this,yt).setCurrentDrawingSession(this),w(this,Ps,new AbortController);const e=m(this,yt).combinedSignal(m(this,Ps));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(w(this,ur,null),this.commitOrRemove())},{signal:e}),m(this,Ce,Ks).startDrawing(this,m(this,yt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&w(this,ur,e);return}m(this,ur)&&setTimeout(()=>{var e;(e=m(this,ur))==null||e.focus(),w(this,ur,null)},0)}endDrawingSession(t=!1){return m(this,Ps)?(m(this,yt).setCurrentDrawingSession(null),m(this,Ps).abort(),w(this,Ps,null),w(this,ur,null),m(this,Ce,Ks).endDrawing(t)):null}findNewParent(t,e,n){const s=m(this,yt).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return m(this,Ps)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,Ps)&&m(this,Ce,Ks).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=m(this,yt).getActive())==null?void 0:t.parent)===this&&(m(this,yt).commitOrRemove(),m(this,yt).setActiveEditor(null)),m(this,lr)&&(clearTimeout(m(this,lr)),w(this,lr,null));for(const n of m(this,as).values())(e=m(this,cu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,as).clear(),m(this,yt).removeLayer(this)}render({viewport:t}){this.viewport=t,pu(this.div,t);for(const e of m(this,yt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){m(this,yt).commitOrRemove(),I(this,Ce,uy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,pu(this.div,{rotation:n}),e!==n)for(const s of m(this,as).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return m(this,yt).viewParameters.realScale}};cu=new WeakMap,Mh=new WeakMap,ho=new WeakMap,Ta=new WeakMap,lr=new WeakMap,as=new WeakMap,Ea=new WeakMap,Ih=new WeakMap,hu=new WeakMap,Ps=new WeakMap,ur=new WeakMap,Pn=new WeakMap,cr=new WeakMap,yt=new WeakMap,ba=new WeakMap,Ce=new WeakSet,AL=function(t){m(this,yt).unselectAll();const{target:e}=t;if(e===m(this,Pn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&m(this,Pn).div.contains(e)){const{isMac:n}=Wn.platform;if(t.button!==0||t.ctrlKey&&n)return;m(this,yt).showAllEditors("highlight",!0,!0),m(this,Pn).div.classList.add("free"),this.toggleDrawing(),Iy.startHighlighting(this,m(this,yt).direction==="ltr",{target:m(this,Pn).div,x:t.x,y:t.y}),m(this,Pn).div.addEventListener("pointerup",()=>{m(this,Pn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,yt)._signal}),t.preventDefault()}},Ks=function(){return m(Ss,ba).get(m(this,yt).getMode())},iT=function(t){const e=m(this,Ce,Ks);return e?new e.prototype.constructor(t):null},sT=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),d=(a+u)/2-t,p=(l+h)/2-e,[v,A]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:v,offsetY:A}},uy=function(){for(const t of m(this,as).values())t.isEmpty()&&t.remove()},Ct(Ss,"_initialized",!1),M(Ss,ba,new Map([OS,ZS,jS,Iy].map(t=>[t._editorType,t])));let nT=Ss;var Ls,qp,Xn,du,Wy,_L,mo,rT,SL,aT;const Mn=class Mn{constructor({pageIndex:t}){M(this,mo);M(this,Ls,null);M(this,qp,0);M(this,Xn,new Map);M(this,du,new Map);this.pageIndex=t}setParent(t){if(!m(this,Ls)){w(this,Ls,t);return}if(m(this,Ls)!==t){if(m(this,Xn).size>0)for(const e of m(this,Xn).values())e.remove(),t.append(e);w(this,Ls,t)}}static get _svgFactory(){return Bt(this,"_svgFactory",new oE)}draw(t,e=!1,n=!1){const s=Bn(this,qp)._++,a=I(this,mo,rT).call(this),l=Mn._svgFactory.createElement("defs");a.append(l);const u=Mn._svgFactory.createElement("path");l.append(u);const h=`path_p${this.pageIndex}_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&m(this,du).set(s,u);const d=n?I(this,mo,SL).call(this,l,h):null,p=Mn._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),m(this,Xn).set(s,a),{id:s,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=Bn(this,qp)._++,s=I(this,mo,rT).call(this),a=Mn._svgFactory.createElement("defs");s.append(a);const l=Mn._svgFactory.createElement("path");a.append(l);const u=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const v=Mn._svgFactory.createElement("mask");a.append(v),h=`mask_p${this.pageIndex}_${n}`,v.setAttribute("id",h),v.setAttribute("maskUnits","objectBoundingBox");const A=Mn._svgFactory.createElement("rect");v.append(A),A.setAttribute("width","1"),A.setAttribute("height","1"),A.setAttribute("fill","white");const T=Mn._svgFactory.createElement("use");v.append(T),T.setAttribute("href",`#${u}`),T.setAttribute("stroke","none"),T.setAttribute("fill","black"),T.setAttribute("fill-rule","nonzero"),T.classList.add("mask")}const d=Mn._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return s.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),m(this,Xn).set(n,s),n}finalizeDraw(t,e){m(this,du).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:s,rootClass:a,path:l}=e,u=typeof t=="number"?m(this,Xn).get(t):t;if(u){if(n&&I(this,mo,aT).call(this,u,n),s&&I(h=Mn,Wy,_L).call(h,u,s),a){const{classList:d}=u;for(const[p,v]of Object.entries(a))d.toggle(p,v)}if(l){const p=u.firstChild.firstChild;I(this,mo,aT).call(this,p,l)}}}updateParent(t,e){if(e===this)return;const n=m(this,Xn).get(t);n&&(m(e,Ls).append(n),m(this,Xn).delete(t),m(e,Xn).set(t,n))}remove(t){m(this,du).delete(t),m(this,Ls)!==null&&(m(this,Xn).get(t).remove(),m(this,Xn).delete(t))}destroy(){w(this,Ls,null);for(const t of m(this,Xn).values())t.remove();m(this,Xn).clear(),m(this,du).clear()}};Ls=new WeakMap,qp=new WeakMap,Xn=new WeakMap,du=new WeakMap,Wy=new WeakSet,_L=function(t,[e,n,s,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*a}%`},mo=new WeakSet,rT=function(){const t=Mn._svgFactory.create(1,1,!0);return m(this,Ls).append(t),t.setAttribute("aria-hidden",!0),t},SL=function(t,e){const n=Mn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Mn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),s},aT=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},M(Mn,Wy);let oT=Mn;globalThis.pdfjsTestingUtils={HighlightOutliner:VS};Mt.AbortException;Mt.AnnotationEditorLayer;Mt.AnnotationEditorParamsType;Mt.AnnotationEditorType;Mt.AnnotationEditorUIManager;Mt.AnnotationLayer;Mt.AnnotationMode;Mt.ColorPicker;Mt.DOMSVGFactory;Mt.DrawLayer;Mt.FeatureTest;var XY=Mt.GlobalWorkerOptions;Mt.ImageKind;Mt.InvalidPDFException;Mt.MissingPDFException;Mt.OPS;Mt.OutputScale;Mt.PDFDataRangeTransport;Mt.PDFDateString;Mt.PDFWorker;Mt.PasswordResponses;Mt.PermissionFlag;Mt.PixelsPerInch;Mt.RenderingCancelledException;Mt.TextLayer;Mt.TouchManager;Mt.UnexpectedResponseException;Mt.Util;Mt.VerbosityLevel;Mt.XfaLayer;Mt.build;Mt.createValidAbsoluteUrl;Mt.fetchData;var $Y=Mt.getDocument;Mt.getFilenameFromUrl;Mt.getPdfFilenameFromUrl;Mt.getXfaPageViewport;Mt.isDataScheme;Mt.isPdfFile;Mt.noContextMenu;Mt.normalizeUnicode;Mt.setLayerDimensions;Mt.shadow;Mt.stopEvent;Mt.version;var KY={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_2fe00812-a72b-4372-a0e9-d9dffe4aeaf2",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/10.8.2 node/v20.20.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_2fe00812-a72b-4372-a0e9-d9dffe4aeaf2",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/usr/local/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"linhle20010409-ship-it",GRADLE_HOME:"/usr/share/gradle-9.3.0",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/29.0.14206865",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"257322410",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1",SYSTEMD_EXEC_PID:"2014",ACTIONS_ORCHESTRATION_ID:"609fdfa5-a7f2-4494-97c0-0e8f0b49ce30.build-and-deploy.__default",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",JAVA_HOME_25_X64:"/usr/lib/jvm/temurin-25-jdk-amd64",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20260126.10.1",LOGNAME:"runner",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.12/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.12/x64",JOURNAL_STREAM:"9:14681",GITHUB_WORKFLOW:"Deploy to GitHub Pages",_:"/usr/local/bin/npm",npm_config_prefix:"/usr/local",npm_config_npm_version:"10.8.2",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure",GOROOT_1_24_X64:"/opt/hostedtoolcache/go/1.24.12/x64",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",GOROOT_1_25_X64:"/opt/hostedtoolcache/go/1.25.6/x64",GITHUB_RUN_ID:"21537265131",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"43fb3de94e7fab096d69bd4c9d538f2a3f0dbf6f",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"linhle20010409-ship-it/ktv-CDHA-1/.github/workflows/main.yml@refs/heads/main",GITHUB_ACTION_REPOSITORY:"",ENABLE_RUNNER_TRACING:"true",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1/node_modules/.bin:/home/runner/work/ktv-CDHA-1/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_514f5bb1-6e26-4be1-ba4e-5ee3267d9b05",INVOCATION_ID:"e50c72ac37e34822be080d9e775f9349",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/usr/local/bin/node",npm_package_name:"radrush-tech---imaging-specialist-challenge",GITHUB_ACTION:"__run",GITHUB_RUN_NUMBER:"21",GITHUB_TRIGGERING_ACTOR:"linhle20010409-ship-it",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1000000129",XDG_CONFIG_HOME:"/home/runner/.config",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"linhle20010409-ship-it/ktv-CDHA-1",npm_lifecycle_script:"vite build",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.3.13750724",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",SHELL:"/bin/bash",GITHUB_REPOSITORY_ID:"1145762900",GITHUB_ACTIONS:"true",npm_package_version:"0.0.0",npm_lifecycle_event:"build",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1",ACCEPT_EULA:"Y",GITHUB_JOB:"build-and-deploy",GITHUB_SHA:"43fb3de94e7fab096d69bd4c9d538f2a3f0dbf6f",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"linhle20010409-ship-it",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_2fe00812-a72b-4372-a0e9-d9dffe4aeaf2",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1",GITHUB_ACTOR_ID:"257322410",RUNNER_WORKSPACE:"/home/runner/work/ktv-CDHA-1",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_2fe00812-a72b-4372-a0e9-d9dffe4aeaf2",npm_config_global_prefix:"/usr/local",EDGEWEBDRIVER:"/usr/local/share/edge_driver",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.3.13750724",SGX_AESM_ADDR:"1",PSModulePath:"/root/.local/share/powershell/Modules:/usr/local/share/powershell/Modules:/opt/microsoft/powershell/7/Modules:/usr/share/az_14.6.0",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.3.13750724",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_2fe00812-a72b-4372-a0e9-d9dffe4aeaf2",INIT_CWD:"/home/runner/work/ktv-CDHA-1/ktv-CDHA-1",EDITOR:"vi",NODE_ENV:"production"};XY.workerSrc="https://esm.sh/pdfjs-dist@4.10.38/build/pdf.worker.mjs";const JY=50,WY=50,qM=20,YM=60,XM="radrush_leaderboard_v1",l_="radrush_challenge_history_v1",QY=()=>{const[i,t]=st.useState(Qe.DASHBOARD),[e,n]=st.useState(Ye.CHALLENGE),[s,a]=st.useState(""),[l,u]=st.useState(void 0),[h,d]=st.useState([]),[p,v]=st.useState(null),[A,T]=st.useState(Ex),[E,C]=st.useState(0),[x,R]=st.useState(null),[D,P]=st.useState({totalScore:0,correctCount:0,totalQuestions:A.length}),[k,L]=st.useState(!1),[G,F]=st.useState(!1),$=e===Ye.CHALLENGE?qM:YM,[X,et]=st.useState($),[nt,mt]=st.useState(""),[Tt,pt]=st.useState(!1),[Dt,B]=st.useState(!1),J=st.useRef(null);st.useEffect(()=>{const Ft=localStorage.getItem(XM);if(Ft)try{d(JSON.parse(Ft))}catch{d(bx)}else d(bx)},[]),st.useEffect(()=>{let Ft;return G&&X>0&&(Ft=window.setInterval(()=>{et(Kt=>Kt<=.05?(clearInterval(Ft),ot(),0):Kt-.05)},50)),()=>clearInterval(Ft)},[G,X]);const ot=st.useCallback(()=>{x===null&&lt(-1)},[x]),Et=Ft=>{const Kt=[...Ft];for(let re=Kt.length-1;re>0;re--){const ge=Math.floor(Math.random()*(re+1));[Kt[re],Kt[ge]]=[Kt[ge],Kt[re]]}return Kt},Rt=(Ft,Kt)=>{n(Ft),u(Kt),v(null),t(Qe.NAME_INPUT)},O=()=>{const Ft=s.trim();if(!Ft)return;if(e===Ye.CHALLENGE){const Vn=localStorage.getItem(l_),ti=Vn?JSON.parse(Vn):{},Je=new Date().toISOString().split("T")[0];if(ti[Ft.toLowerCase()]===Je){v("Bn  hon thnh th thch hm nay. Vui lng quay li vo ngy mai hoc chn ch  Tp luyn!");return}}v(null);const re=Et(l||Ex).slice(0,10);T(re),C(0),R(null),P({totalScore:0,correctCount:0,totalQuestions:re.length}),L(!1),t(Qe.PLAYING);const ge=e===Ye.CHALLENGE?qM:YM;et(ge),F(!0)},Q=async Ft=>{var re;const Kt=(re=Ft.target.files)==null?void 0:re[0];if(Kt){if(Kt.type!=="application/pdf"){alert("Vui lng ti ln file nh dng PDF.");return}B(!0);try{const ge=await Kt.arrayBuffer(),Vn=await $Y({data:ge}).promise;let ti="";for(let Je=1;Je<=Vn.numPages;Je++){const ms=(await(await Vn.getPage(Je)).getTextContent()).items.map(m0=>m0.str).join(" ");ti+=ms+`
`}mt(ti)}catch(ge){console.error("PDF Parsing Error:",ge),alert("Khng th c file PDF ny. Vui lng th li.")}finally{B(!1)}}},it=async()=>{if(nt.trim()){pt(!0);try{const re=(await new X6({apiKey:KY.API_KEY}).models.generateContent({model:"gemini-3-flash-preview",contents:`Bn l chuyn gia o to K thut vin Chn on hnh nh. To ra t nht 15 cu hi trc nghim a dng v nh v, kV/mAs, an ton tia X. Cc cu hi cn sc tch  ngi thi c th c v tr li trong vng 20 giy. Tr li bng ngn ng Ting Vit chuyn ngnh. m bo cu trc JSON. Ti liu: ${nt}`,config:{responseMimeType:"application/json",responseSchema:{type:Ln.ARRAY,items:{type:Ln.OBJECT,properties:{id:{type:Ln.STRING},question:{type:Ln.STRING},options:{type:Ln.ARRAY,items:{type:Ln.STRING},description:"Mng cha chnh xc 4 p n."},correctAnswer:{type:Ln.INTEGER,description:"Index ca p n ng (0-3)."},explanation:{type:Ln.STRING}},required:["id","question","options","correctAnswer","explanation"]}}}})).text;if(!re)throw new Error("No response from AI");const ge=JSON.parse(re);Array.isArray(ge)&&ge.length>0&&Rt(Ye.CHALLENGE,ge)}catch(Ft){console.error("AI Generation Error:",Ft),alert("Li kt ni AI lm sng. Vui lng th li.")}finally{pt(!1)}}},lt=Ft=>{if(x!==null)return;const Kt=A[E],re=Ft===Kt.correctAnswer,ge=X;if(R(Ft),F(!1),L(!0),re){const ti=Math.max(0,ge/$),Je=Math.round(JY+WY*ti);P(Gi=>({...Gi,totalScore:Gi.totalScore+Je,correctCount:Gi.correctCount+1}))}const Vn=e===Ye.CHALLENGE?2500:4e3;setTimeout(()=>{xt()},Vn)},xt=()=>{if(E<A.length-1)C(Ft=>Ft+1),R(null),L(!1),et($),F(!0);else{if(e===Ye.CHALLENGE){const Ft=s.trim().toLowerCase(),Kt=new Date().toISOString().split("T")[0],re=localStorage.getItem(l_),ge=re?JSON.parse(re):{};ge[Ft]=Kt,localStorage.setItem(l_,JSON.stringify(ge)),d(Vn=>{const ti=Vn.findIndex(mi=>mi.name.trim().toLowerCase()===Ft);let Je;if(ti!==-1)Je=[...Vn],Je[ti]={...Je[ti],score:Je[ti].score+D.totalScore,isCurrentUser:!0},Je=Je.map((mi,ms)=>ms===ti?mi:{...mi,isCurrentUser:!1});else{const mi={id:Date.now().toString(),name:s.trim(),score:D.totalScore,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${s.trim()}`,isCurrentUser:!0};Je=[...Vn.map(ms=>({...ms,isCurrentUser:!1})),mi]}const Gi=Je.sort((mi,ms)=>ms.score-mi.score);return localStorage.setItem(XM,JSON.stringify(Gi)),Gi})}t(Qe.RESULT)}},St=()=>V.jsxs(ks.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center text-center max-w-5xl mx-auto py-12 px-6",children:[V.jsxs("div",{className:"relative mb-8",children:[V.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-teal-500 via-cyan-500 to-emerald-500 rounded-full blur opacity-40 animate-pulse"}),V.jsx("div",{className:"relative bg-slate-900 p-6 rounded-full",children:V.jsx(pB,{className:"w-16 h-16 text-teal-400"})})]}),V.jsx("h1",{className:"text-5xl md:text-7xl font-black mb-4 bg-clip-text text-transparent bg-gradient-to-br from-white via-teal-100 to-teal-500 tracking-tight",children:"RadRush Tech"}),V.jsxs("p",{className:"text-slate-400 text-lg md:text-xl mb-12 max-w-2xl leading-relaxed",children:["Phn mm luyn tp chn on k thut dnh cho K thut vin. ",V.jsx("br",{})," Lm ch quy trnh vi thi gian thc t."]}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 w-full items-stretch",children:[V.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-8 rounded-[2.5rem] border border-red-500/20 flex flex-col shadow-[0_20px_50px_rgba(239,68,68,0.1)] hover:border-red-500/40 transition-all",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-6 justify-center",children:[V.jsx(YR,{className:"text-red-500 w-8 h-8"}),V.jsx("h3",{className:"text-2xl font-bold",children:"Th thch 20s"})]}),V.jsxs("p",{className:"text-slate-400 text-sm mb-8",children:["Ch  xp hng. 10 cu hi, 20 giy cho mi ca bnh. ",V.jsx("b",{children:"Gii hn 1 lt/ngy."})]}),V.jsxs("button",{onClick:()=>Rt(Ye.CHALLENGE),className:"mt-auto group relative flex items-center justify-center gap-3 w-full py-5 bg-red-600 hover:bg-red-500 text-white rounded-2xl font-bold text-xl transition-all shadow-[0_0_20px_rgba(239,68,68,0.3)] hover:shadow-[0_0_30px_rgba(239,68,68,0.5)]",children:["Bt u trc",V.jsx(cB,{className:"w-6 h-6 fill-current"})]})]}),V.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl p-8 rounded-[2.5rem] border border-cyan-500/20 flex flex-col shadow-[0_20px_50px_rgba(6,182,212,0.1)] hover:border-cyan-500/40 transition-all",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-6 justify-center",children:[V.jsx(XH,{className:"text-cyan-400 w-8 h-8"}),V.jsx("h3",{className:"text-2xl font-bold",children:"Tp luyn"})]}),V.jsx("p",{className:"text-slate-400 text-sm mb-8",children:"Hc tp chuyn su. 60 giy mi cu. Khng gii hn lt chi. Xem gii thch k thut chi tit."}),V.jsxs("button",{onClick:()=>Rt(Ye.TRAINING),className:"mt-auto group relative flex items-center justify-center gap-3 w-full py-5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-2xl font-bold text-xl transition-all shadow-[0_0_20px_rgba(6,182,212,0.3)] hover:shadow-[0_0_30px_rgba(6,182,212,0.5)]",children:["Hc k thut",V.jsx(BR,{className:"w-6 h-6"})]})]}),V.jsxs("div",{className:"bg-slate-900/40 backdrop-blur-xl p-8 rounded-[2.5rem] border border-slate-800 flex flex-col transition-all hover:border-teal-500/40",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-6 justify-center",children:[V.jsx(_B,{className:"text-teal-400 w-8 h-8"}),V.jsx("h3",{className:"text-2xl font-bold",children:"Protocol AI"})]}),V.jsxs("p",{className:"text-slate-400 text-sm mb-8 text-center",children:["To  thi ty chnh t ti liu ",V.jsx("b",{children:"PDF"})," k thut ca bnh vin."]}),V.jsx("button",{onClick:()=>t(Qe.GENERATING),className:"mt-auto w-full py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-2xl font-bold transition-all border border-slate-700 hover:border-teal-500/50",children:"Cu hnh Protocol"})]})]}),V.jsxs("div",{className:"w-full mt-12 max-w-xl",children:[V.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[V.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[V.jsx(QA,{className:"text-yellow-500 w-5 h-5"})," Top K Thut Vin"]}),V.jsx("button",{onClick:()=>t(Qe.LEADERBOARD),className:"text-teal-400 text-sm font-bold hover:underline",children:"Xem tt c"})]}),V.jsx(XR,{entries:h})]})]}),At=()=>V.jsx(ks.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-[70vh] max-w-md mx-auto px-6",children:V.jsxs("div",{className:"w-full bg-slate-900/80 backdrop-blur-2xl p-8 md:p-10 rounded-[3rem] border border-teal-500/20 shadow-2xl",children:[V.jsxs("div",{className:"flex flex-col items-center mb-8",children:[V.jsx("div",{className:"w-20 h-20 rounded-2xl bg-teal-500/10 flex items-center justify-center mb-4 border border-teal-500/20",children:V.jsx(D_,{className:"w-10 h-10 text-teal-400"})}),V.jsx("h2",{className:"text-3xl font-black tracking-tight",children:"Kp trng trc"}),V.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Vui lng nhp nh danh ca bn"})]}),V.jsxs("div",{className:"space-y-6",children:[V.jsx("div",{className:"relative",children:V.jsx("input",{type:"text",autoFocus:!0,value:s,onChange:Ft=>{a(Ft.target.value),p&&v(null)},placeholder:"V d: KTV. Minh Anh",className:`w-full bg-slate-800/50 border-2 rounded-2xl px-6 py-5 text-lg font-bold text-white placeholder:text-slate-600 focus:outline-none transition-all ${p?"border-red-500 focus:ring-4 focus:ring-red-500/10":"border-slate-700 focus:border-teal-500 focus:ring-4 focus:ring-teal-500/10"}`,onKeyDown:Ft=>Ft.key==="Enter"&&O()})}),V.jsx(gy,{children:p&&V.jsxs(ks.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex gap-3",children:[V.jsx(bB,{className:"w-5 h-5 text-red-400 shrink-0"}),V.jsx("p",{className:"text-xs text-red-200 leading-relaxed font-bold",children:p})]})}),V.jsxs("div",{className:"bg-teal-500/5 border border-teal-500/10 rounded-xl p-4 flex gap-3",children:[V.jsx(iB,{className:"w-5 h-5 text-teal-400 shrink-0"}),V.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed",children:["Dng ",V.jsx("b",{children:"ng tn c"}),"  tip tc cng dn im tch ly. Th thch xp hng ch c th thc hin 1 ln mi ngy."]})]}),V.jsxs("button",{onClick:O,disabled:!s.trim(),className:`flex items-center justify-center gap-2 w-full py-5 rounded-2xl font-black text-xl transition-all ${s.trim()?"bg-teal-600 hover:bg-teal-500 text-white shadow-lg shadow-teal-500/20":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:["Tip nhn ca trc",V.jsx(KH,{className:"w-6 h-6"})]}),V.jsx("button",{onClick:()=>t(Qe.DASHBOARD),className:"w-full py-2 text-slate-500 hover:text-slate-300 font-bold text-sm transition-colors",children:"Quay li Dashboard"})]})]})}),Se=()=>V.jsx(ks.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto py-12 px-6",children:V.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-8 rounded-[3rem] border border-teal-500/20 shadow-2xl",children:[V.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[V.jsx("div",{className:"p-3 bg-teal-500/20 rounded-2xl",children:V.jsx(lB,{className:"w-8 h-8 text-teal-400"})}),V.jsxs("div",{children:[V.jsx("h2",{className:"text-2xl font-black",children:"AI Protocol Builder"}),V.jsx("p",{className:"text-slate-400",children:"Trch xut cu hi t ti liu k thut"})]})]}),V.jsxs("div",{className:"grid gap-6 mb-8",children:[V.jsxs("div",{onClick:()=>{var Ft;return(Ft=J.current)==null?void 0:Ft.click()},className:`group relative flex flex-col items-center justify-center border-2 border-dashed rounded-3xl p-10 transition-all cursor-pointer ${Dt?"border-teal-500 bg-teal-500/5":"border-slate-700 hover:border-teal-500 hover:bg-teal-500/5"}`,children:[V.jsx("input",{type:"file",ref:J,onChange:Q,accept:"application/pdf",className:"hidden"}),Dt?V.jsxs("div",{className:"flex flex-col items-center",children:[V.jsx(zR,{className:"w-12 h-12 text-teal-400 animate-spin mb-4"}),V.jsx("p",{className:"text-teal-300 font-bold",children:"ang phn tch k thut PDF..."})]}):V.jsxs("div",{className:"flex flex-col items-center text-center",children:[V.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-800 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:V.jsx(xB,{className:"w-8 h-8 text-slate-400 group-hover:text-teal-400"})}),V.jsx("h4",{className:"text-lg font-bold mb-1",children:"Ti quy trnh (PDF)"}),V.jsx("p",{className:"text-sm text-slate-500 italic",children:"H tr ti u ha cho bi thi 20 giy"})]})]}),V.jsx("div",{className:"relative",children:V.jsx("textarea",{value:nt,onChange:Ft=>mt(Ft.target.value),placeholder:"Hoc dn ni dung k thut ti y...",className:"w-full h-48 bg-slate-800/30 border border-slate-700 rounded-2xl p-6 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all resize-none"})})]}),V.jsxs("div",{className:"flex gap-4",children:[V.jsx("button",{onClick:()=>t(Qe.DASHBOARD),className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-2xl font-bold transition-all",children:"Hy b"}),V.jsx("button",{disabled:Tt||!nt.trim()||Dt,onClick:it,className:`flex-[2] py-4 bg-teal-600 hover:bg-teal-500 text-white rounded-2xl font-bold transition-all flex items-center justify-center gap-2 ${Tt||!nt.trim()||Dt?"opacity-50 cursor-not-allowed":"shadow-lg shadow-teal-500/30"}`,children:Tt?V.jsxs(V.Fragment,{children:[V.jsx(zR,{className:"w-5 h-5 animate-spin"}),"AI ang x l kch bn..."]}):V.jsxs(V.Fragment,{children:[V.jsx(gB,{className:"w-5 h-5"}),"Khi to bi kim tra"]})})]})]})}),pe=()=>{const Kt=e===Ye.CHALLENGE?"red":"cyan";return V.jsxs("div",{className:"max-w-4xl mx-auto pt-8 pb-20 px-4",children:[V.jsxs("div",{className:`flex items-center justify-between mb-8 bg-slate-900/90 backdrop-blur-md p-4 rounded-2xl border border-${Kt}-500/20 shadow-xl sticky top-4 z-50`,children:[V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx("div",{className:`p-3 rounded-xl bg-${Kt}-500/10 border border-${Kt}-500/20`,children:V.jsx(D_,{className:`w-5 h-5 text-${Kt}-400`})}),V.jsxs("div",{className:"flex flex-col",children:[V.jsx("span",{className:`text-[10px] uppercase tracking-widest text-${Kt}-500 font-black`,children:s}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-lg font-black text-white",children:E+1<10?`0${E+1}`:E+1}),V.jsx("div",{className:"flex gap-1",children:A.map((re,ge)=>V.jsx("div",{className:`h-1.5 w-4 rounded-full transition-all duration-500 ${ge<E?`bg-${Kt}-500`:ge===E?`bg-${Kt}-400 shadow-[0_0_12px_rgba(248,113,113,0.8)] w-6`:"bg-slate-700"}`},ge))})]})]})]}),V.jsxs("div",{className:"text-right",children:[V.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-500 font-black",children:"Ch s chn on"}),V.jsx("div",{className:`text-2xl font-black tabular-nums text-${Kt}-400`,children:D.totalScore})]})]}),V.jsx(NB,{totalTime:$,timeLeft:X,isActive:G,mode:e}),V.jsx(gy,{mode:"wait",children:V.jsx(IB,{question:A[E],onSelectOption:lt,selectedOption:x,isCorrect:x!==null?x===A[E].correctAnswer:null,showExplanation:k},E)})]})},go=()=>V.jsx(ks.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"flex flex-col items-center text-center max-w-lg mx-auto py-16 px-6",children:V.jsxs("div",{className:`mb-8 p-10 bg-slate-900/60 backdrop-blur-2xl rounded-[3.5rem] border ${e===Ye.CHALLENGE?"border-red-500/30":"border-cyan-500/30"} shadow-2xl w-full`,children:[V.jsx("div",{className:"mb-6 flex justify-center",children:V.jsx("div",{className:`w-24 h-24 rounded-full bg-gradient-to-br ${e===Ye.CHALLENGE?"from-red-400 to-rose-600":"from-cyan-400 to-blue-600"} flex items-center justify-center shadow-lg shadow-teal-500/20`,children:e===Ye.CHALLENGE?V.jsx(YR,{className:"w-12 h-12 text-white"}):V.jsx(BR,{className:"w-12 h-12 text-white"})})}),V.jsx("h2",{className:"text-4xl font-black mb-2 tracking-tight",children:"Ca Trc Hon Tt"}),V.jsx("p",{className:"text-slate-400 mb-8 font-bold text-teal-400",children:s}),V.jsxs("p",{className:"text-slate-400 mb-8 -mt-6",children:["Bn  x l thnh cng ",D.correctCount,"/",D.totalQuestions," ca k thut."]}),V.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[V.jsxs("div",{className:"bg-slate-800/40 p-6 rounded-3xl border border-slate-700",children:[V.jsx("span",{className:`text-4xl font-black ${e===Ye.CHALLENGE?"text-red-400":"text-cyan-400"} block mb-1`,children:D.totalScore}),V.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"im k nng mi"})]}),V.jsxs("div",{className:"bg-slate-800/40 p-6 rounded-3xl border border-slate-700",children:[V.jsxs("span",{className:"text-4xl font-black text-emerald-400 block mb-1",children:[Math.round(D.correctCount/D.totalQuestions*100),"%"]}),V.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Chnh xc"})]})]}),V.jsxs("div",{className:"space-y-3",children:[V.jsxs("button",{onClick:()=>t(Qe.LEADERBOARD),className:"flex items-center justify-center gap-2 w-full py-4 bg-teal-600 hover:bg-teal-500 text-white rounded-2xl font-bold transition-all shadow-xl shadow-teal-500/20",children:[V.jsx(QA,{className:"w-5 h-5"})," Xem bng xp hng"]}),V.jsxs("button",{onClick:()=>Rt(e),className:`flex items-center justify-center gap-2 w-full py-4 ${e===Ye.CHALLENGE?"bg-red-600 hover:bg-red-500":"bg-cyan-600 hover:bg-cyan-500"} text-white rounded-2xl font-bold transition-all`,children:[V.jsx(dB,{className:"w-5 h-5"})," ",e===Ye.CHALLENGE?"Chi li (Ch tp luyn)":"Trc ca mi"]}),V.jsxs("button",{onClick:()=>t(Qe.DASHBOARD),className:"flex items-center justify-center gap-2 w-full py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-2xl font-bold transition-all border border-slate-700",children:[V.jsx(GR,{className:"w-5 h-5"})," V Dashboard"]})]})]})}),_u=()=>V.jsxs("div",{className:"max-w-xl mx-auto py-12 px-6",children:[V.jsxs("div",{className:"flex items-center justify-between mb-8",children:[V.jsxs("h2",{className:"text-3xl font-black flex items-center gap-3",children:[V.jsx(QA,{className:"text-yellow-500 w-8 h-8"}),"Top K Thut Vin"]}),V.jsx("button",{onClick:()=>t(Qe.DASHBOARD),className:"p-3 bg-slate-800 rounded-2xl hover:bg-slate-700 transition-colors",children:V.jsx(GR,{className:"w-6 h-6"})})]}),V.jsx(XR,{entries:h}),V.jsx("div",{className:"mt-8 text-center",children:V.jsx("button",{onClick:()=>t(Qe.DASHBOARD),className:"px-8 py-4 bg-teal-600 hover:bg-teal-500 text-white rounded-2xl font-bold transition-all shadow-xl shadow-teal-500/20",children:"Tr li Dashboard"})})]});return V.jsxs("div",{className:"min-h-screen bg-[#020617] text-slate-100 selection:bg-teal-500/30",children:[V.jsxs("main",{className:"container mx-auto px-4",children:[i===Qe.DASHBOARD&&St(),i===Qe.NAME_INPUT&&At(),i===Qe.GENERATING&&Se(),i===Qe.PLAYING&&pe(),i===Qe.RESULT&&go(),i===Qe.LEADERBOARD&&_u()]}),V.jsxs("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none -z-10 overflow-hidden",children:[V.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-teal-600/5 blur-[120px] rounded-full"}),V.jsx("div",{className:`absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] ${e===Ye.CHALLENGE?"bg-red-600/5":"bg-cyan-600/5"} blur-[120px] rounded-full opacity-30`})]})]})},TL=document.getElementById("root");if(!TL)throw new Error("Could not find root element to mount to");const ZY=iU.createRoot(TL);ZY.render(V.jsx(J2.StrictMode,{children:V.jsx(QY,{})}));
